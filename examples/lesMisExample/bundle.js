!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=9)}([function(t,e,n){"use strict";t.exports=n(14)},function(t,e,n){t.exports=n(15)()},function(t,e,n){var r,i;i=function(t){var e=["N","E","A","D"];function n(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}function r(t,e){Object.defineProperty(this,"kind",{value:t,enumerable:!0}),e&&e.length&&Object.defineProperty(this,"path",{value:e,enumerable:!0})}function i(t,e,n){i.super_.call(this,"E",t),Object.defineProperty(this,"lhs",{value:e,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function o(t,e){o.super_.call(this,"N",t),Object.defineProperty(this,"rhs",{value:e,enumerable:!0})}function a(t,e){a.super_.call(this,"D",t),Object.defineProperty(this,"lhs",{value:e,enumerable:!0})}function s(t,e,n){s.super_.call(this,"A",t),Object.defineProperty(this,"index",{value:e,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function u(t,e,n){var r=t.slice((n||e)+1||t.length);return t.length=e<0?t.length+e:e,t.push.apply(t,r),t}function c(t){var e=typeof t;return"object"!==e?e:t===Math?"math":null===t?"null":Array.isArray(t)?"array":"[object Date]"===Object.prototype.toString.call(t)?"date":"function"==typeof t.toString&&/^\/.*\//.test(t.toString())?"regexp":"object"}function l(t){var e=0;if(0===t.length)return e;for(var n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e}function h(t){var e=0,n=c(t);if("array"===n)return t.forEach((function(t){e+=h(t)})),e+l("[type: array, hash: "+e+"]");if("object"===n){for(var r in t)if(t.hasOwnProperty(r)){var i="[ type: object, key: "+r+", value hash: "+h(t[r])+"]";e+=l(i)}return e}return e+l("[ type: "+n+" ; value: "+t+"]")}function f(t,e,n,r,u,l,p,d){n=n||[],p=p||[];var y=(u=u||[]).slice(0);if(null!=l){if(r){if("function"==typeof r&&r(y,l))return;if("object"==typeof r){if(r.prefilter&&r.prefilter(y,l))return;if(r.normalize){var v=r.normalize(y,l,t,e);v&&(t=v[0],e=v[1])}}}y.push(l)}"regexp"===c(t)&&"regexp"===c(e)&&(t=t.toString(),e=e.toString());var g,m,_,b,w=typeof t,E=typeof e,T="undefined"!==w||p&&p.length>0&&p[p.length-1].lhs&&Object.getOwnPropertyDescriptor(p[p.length-1].lhs,l),x="undefined"!==E||p&&p.length>0&&p[p.length-1].rhs&&Object.getOwnPropertyDescriptor(p[p.length-1].rhs,l);if(!T&&x)n.push(new o(y,e));else if(!x&&T)n.push(new a(y,t));else if(c(t)!==c(e))n.push(new i(y,t,e));else if("date"===c(t)&&t-e!=0)n.push(new i(y,t,e));else if("object"===w&&null!==t&&null!==e){for(g=p.length-1;g>-1;--g)if(p[g].lhs===t){b=!0;break}if(b)t!==e&&n.push(new i(y,t,e));else{if(p.push({lhs:t,rhs:e}),Array.isArray(t)){for(d&&(t.sort((function(t,e){return h(t)-h(e)})),e.sort((function(t,e){return h(t)-h(e)}))),g=e.length-1,m=t.length-1;g>m;)n.push(new s(y,g,new o(void 0,e[g--])));for(;m>g;)n.push(new s(y,m,new a(void 0,t[m--])));for(;g>=0;--g)f(t[g],e[g],n,r,y,g,p,d)}else{var C=Object.keys(t),S=Object.keys(e);for(g=0;g<C.length;++g)_=C[g],(b=S.indexOf(_))>=0?(f(t[_],e[_],n,r,y,_,p,d),S[b]=null):f(t[_],void 0,n,r,y,_,p,d);for(g=0;g<S.length;++g)(_=S[g])&&f(void 0,e[_],n,r,y,_,p,d)}p.length=p.length-1}}else t!==e&&("number"===w&&isNaN(t)&&isNaN(e)||n.push(new i(y,t,e)))}function p(t,e,n,r,i){var o=[];if(f(t,e,o,r,null,null,null,i),n)for(var a=0;a<o.length;++a)n(o[a]);return o}function d(t,e,n,r){var i=p(t,e,r?function(t){t&&r.push(t)}:void 0,n);return r||(i.length?i:void 0)}function y(t,n,r){if(void 0===r&&n&&~e.indexOf(n.kind)&&(r=n),t&&r&&r.kind){for(var i=t,o=-1,a=r.path?r.path.length-1:0;++o<a;)void 0===i[r.path[o]]&&(i[r.path[o]]=void 0!==r.path[o+1]&&"number"==typeof r.path[o+1]?[]:{}),i=i[r.path[o]];switch(r.kind){case"A":r.path&&void 0===i[r.path[o]]&&(i[r.path[o]]=[]),function t(e,n,r){if(r.path&&r.path.length){var i,o=e[n],a=r.path.length-1;for(i=0;i<a;i++)o=o[r.path[i]];switch(r.kind){case"A":t(o[r.path[i]],r.index,r.item);break;case"D":delete o[r.path[i]];break;case"E":case"N":o[r.path[i]]=r.rhs}}else switch(r.kind){case"A":t(e[n],r.index,r.item);break;case"D":e=u(e,n);break;case"E":case"N":e[n]=r.rhs}return e}(r.path?i[r.path[o]]:i,r.index,r.item);break;case"D":delete i[r.path[o]];break;case"E":case"N":i[r.path[o]]=r.rhs}}}return n(i,r),n(o,r),n(a,r),n(s,r),Object.defineProperties(d,{diff:{value:d,enumerable:!0},orderIndependentDiff:{value:function(t,e,n,r){var i=r?function(t){t&&r.push(t)}:void 0,o=p(t,e,i,n,!0);return r||(o.length?o:void 0)},enumerable:!0},observableDiff:{value:p,enumerable:!0},orderIndependentObservableDiff:{value:function(t,e,n,r,i,o,a){return f(t,e,n,r,i,o,a,!0)},enumerable:!0},orderIndepHash:{value:h,enumerable:!0},applyDiff:{value:function(t,e,n){t&&e&&p(t,e,(function(r){n&&!n(t,e,r)||y(t,e,r)}))},enumerable:!0},applyChange:{value:y,enumerable:!0},revertChange:{value:function(t,e,n){if(t&&e&&n&&n.kind){var r,i,o=t;for(i=n.path.length-1,r=0;r<i;r++)void 0===o[n.path[r]]&&(o[n.path[r]]={}),o=o[n.path[r]];switch(n.kind){case"A":!function t(e,n,r){if(r.path&&r.path.length){var i,o=e[n],a=r.path.length-1;for(i=0;i<a;i++)o=o[r.path[i]];switch(r.kind){case"A":t(o[r.path[i]],r.index,r.item);break;case"D":case"E":o[r.path[i]]=r.lhs;break;case"N":delete o[r.path[i]]}}else switch(r.kind){case"A":t(e[n],r.index,r.item);break;case"D":case"E":e[n]=r.lhs;break;case"N":e=u(e,n)}return e}(o[n.path[r]],n.index,n.item);break;case"D":case"E":o[n.path[r]]=n.lhs;break;case"N":delete o[n.path[r]]}}},enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof $conflict},enumerable:!0}}),d.DeepDiff=d,t&&(t.DeepDiff=d),d}(this),void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}}(),t.exports=n(17)},function(t,e,n){var r,i=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function i(t,e){if(!r[t]){r[t]={};for(var n=0;n<t.length;n++)r[t][t.charAt(n)]=n}return r[t][e]}var o={compressToBase64:function(t){if(null==t)return"";var n=o._compress(t,6,(function(t){return e.charAt(t)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:o._decompress(t.length,32,(function(n){return i(e,t.charAt(n))}))},compressToUTF16:function(e){return null==e?"":o._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:o._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=o.compress(t),n=new Uint8Array(2*e.length),r=0,i=e.length;r<i;r++){var a=e.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(e){if(null==e)return o.decompress(e);for(var n=new Array(e.length/2),r=0,i=n.length;r<i;r++)n[r]=256*e[2*r]+e[2*r+1];var a=[];return n.forEach((function(e){a.push(t(e))})),o.decompress(a.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":o._compress(t,6,(function(t){return n.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),o._decompress(t.length,32,(function(e){return i(n,t.charAt(e))})))},compress:function(e){return o._compress(e,16,(function(e){return t(e)}))},_compress:function(t,e,n){if(null==t)return"";var r,i,o,a={},s={},u="",c="",l="",h=2,f=3,p=2,d=[],y=0,v=0;for(o=0;o<t.length;o+=1)if(u=t.charAt(o),Object.prototype.hasOwnProperty.call(a,u)||(a[u]=f++,s[u]=!0),c=l+u,Object.prototype.hasOwnProperty.call(a,c))l=c;else{if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;r<p;r++)y<<=1,v==e-1?(v=0,d.push(n(y)),y=0):v++;for(i=l.charCodeAt(0),r=0;r<8;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1}else{for(i=1,r=0;r<p;r++)y=y<<1|i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i=0;for(i=l.charCodeAt(0),r=0;r<16;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1}0==--h&&(h=Math.pow(2,p),p++),delete s[l]}else for(i=a[l],r=0;r<p;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1;0==--h&&(h=Math.pow(2,p),p++),a[c]=f++,l=String(u)}if(""!==l){if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;r<p;r++)y<<=1,v==e-1?(v=0,d.push(n(y)),y=0):v++;for(i=l.charCodeAt(0),r=0;r<8;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1}else{for(i=1,r=0;r<p;r++)y=y<<1|i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i=0;for(i=l.charCodeAt(0),r=0;r<16;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1}0==--h&&(h=Math.pow(2,p),p++),delete s[l]}else for(i=a[l],r=0;r<p;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1;0==--h&&(h=Math.pow(2,p),p++)}for(i=2,r=0;r<p;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1;for(;;){if(y<<=1,v==e-1){d.push(n(y));break}v++}return d.join("")},decompress:function(t){return null==t?"":""==t?null:o._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(e,n,r){var i,o,a,s,u,c,l,h=[],f=4,p=4,d=3,y="",v=[],g={val:r(0),position:n,index:1};for(i=0;i<3;i+=1)h[i]=i;for(a=0,u=Math.pow(2,2),c=1;c!=u;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;switch(a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;l=t(a);break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;l=t(a);break;case 2:return""}for(h[3]=l,o=l,v.push(l);;){if(g.index>e)return"";for(a=0,u=Math.pow(2,d),c=1;c!=u;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;switch(l=a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;h[p++]=t(a),l=p-1,f--;break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),a|=(s>0?1:0)*c,c<<=1;h[p++]=t(a),l=p-1,f--;break;case 2:return v.join("")}if(0==f&&(f=Math.pow(2,d),d++),h[l])y=h[l];else{if(l!==p)return null;y=o+o.charAt(0)}v.push(y),h[p++]=o+y.charAt(0),o=y,0==--f&&(f=Math.pow(2,d),d++)}}};return o}();void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){"use strict";n.r(e),n.d(e,"version",(function(){return r})),n.d(e,"bisect",(function(){return c})),n.d(e,"bisectRight",(function(){return s})),n.d(e,"bisectLeft",(function(){return u})),n.d(e,"ascending",(function(){return i})),n.d(e,"bisector",(function(){return o})),n.d(e,"cross",(function(){return f})),n.d(e,"descending",(function(){return p})),n.d(e,"deviation",(function(){return v})),n.d(e,"extent",(function(){return g})),n.d(e,"histogram",(function(){return P})),n.d(e,"thresholdFreedmanDiaconis",(function(){return R})),n.d(e,"thresholdScott",(function(){return D})),n.d(e,"thresholdSturges",(function(){return A})),n.d(e,"max",(function(){return M})),n.d(e,"mean",(function(){return L})),n.d(e,"median",(function(){return F})),n.d(e,"merge",(function(){return j})),n.d(e,"min",(function(){return U})),n.d(e,"pairs",(function(){return l})),n.d(e,"permute",(function(){return V})),n.d(e,"quantile",(function(){return O})),n.d(e,"range",(function(){return T})),n.d(e,"scan",(function(){return q})),n.d(e,"shuffle",(function(){return B})),n.d(e,"sum",(function(){return z})),n.d(e,"ticks",(function(){return I})),n.d(e,"tickIncrement",(function(){return N})),n.d(e,"tickStep",(function(){return k})),n.d(e,"transpose",(function(){return W})),n.d(e,"variance",(function(){return y})),n.d(e,"zip",(function(){return Q})),n.d(e,"axisTop",(function(){return et})),n.d(e,"axisRight",(function(){return nt})),n.d(e,"axisBottom",(function(){return rt})),n.d(e,"axisLeft",(function(){return it})),n.d(e,"brush",(function(){return Si})),n.d(e,"brushX",(function(){return xi})),n.d(e,"brushY",(function(){return Ci})),n.d(e,"brushSelection",(function(){return Ti})),n.d(e,"chord",(function(){return Mi})),n.d(e,"ribbon",(function(){return Ki})),n.d(e,"nest",(function(){return Zi})),n.d(e,"set",(function(){return so})),n.d(e,"map",(function(){return Ji})),n.d(e,"keys",(function(){return uo})),n.d(e,"values",(function(){return co})),n.d(e,"entries",(function(){return lo})),n.d(e,"color",(function(){return We})),n.d(e,"rgb",(function(){return Ye})),n.d(e,"hsl",(function(){return en})),n.d(e,"lab",(function(){return vo})),n.d(e,"hcl",(function(){return xo})),n.d(e,"lch",(function(){return To})),n.d(e,"gray",(function(){return yo})),n.d(e,"cubehelix",(function(){return Oo})),n.d(e,"contours",(function(){return Bo})),n.d(e,"contourDensity",(function(){return Yo})),n.d(e,"dispatch",(function(){return ht})),n.d(e,"drag",(function(){return ea})),n.d(e,"dragDisable",(function(){return Se})),n.d(e,"dragEnable",(function(){return Ie})),n.d(e,"dsvFormat",(function(){return ua})),n.d(e,"csvParse",(function(){return la})),n.d(e,"csvParseRows",(function(){return ha})),n.d(e,"csvFormat",(function(){return fa})),n.d(e,"csvFormatBody",(function(){return pa})),n.d(e,"csvFormatRows",(function(){return da})),n.d(e,"csvFormatRow",(function(){return ya})),n.d(e,"csvFormatValue",(function(){return va})),n.d(e,"tsvParse",(function(){return ma})),n.d(e,"tsvParseRows",(function(){return _a})),n.d(e,"tsvFormat",(function(){return ba})),n.d(e,"tsvFormatBody",(function(){return wa})),n.d(e,"tsvFormatRows",(function(){return Ea})),n.d(e,"tsvFormatRow",(function(){return Ta})),n.d(e,"tsvFormatValue",(function(){return xa})),n.d(e,"autoType",(function(){return Ca})),n.d(e,"easeLinear",(function(){return Ia})),n.d(e,"easeQuad",(function(){return Aa})),n.d(e,"easeQuadIn",(function(){return Na})),n.d(e,"easeQuadOut",(function(){return ka})),n.d(e,"easeQuadInOut",(function(){return Aa})),n.d(e,"easeCubic",(function(){return Gr})),n.d(e,"easeCubicIn",(function(){return Hr})),n.d(e,"easeCubicOut",(function(){return Qr})),n.d(e,"easeCubicInOut",(function(){return Gr})),n.d(e,"easePoly",(function(){return Ra})),n.d(e,"easePolyIn",(function(){return Pa})),n.d(e,"easePolyOut",(function(){return Oa})),n.d(e,"easePolyInOut",(function(){return Ra})),n.d(e,"easeSin",(function(){return ja})),n.d(e,"easeSinIn",(function(){return La})),n.d(e,"easeSinOut",(function(){return Fa})),n.d(e,"easeSinInOut",(function(){return ja})),n.d(e,"easeExp",(function(){return qa})),n.d(e,"easeExpIn",(function(){return Ua})),n.d(e,"easeExpOut",(function(){return Va})),n.d(e,"easeExpInOut",(function(){return qa})),n.d(e,"easeCircle",(function(){return Wa})),n.d(e,"easeCircleIn",(function(){return Ba})),n.d(e,"easeCircleOut",(function(){return za})),n.d(e,"easeCircleInOut",(function(){return Wa})),n.d(e,"easeBounce",(function(){return Qa})),n.d(e,"easeBounceIn",(function(){return Ha})),n.d(e,"easeBounceOut",(function(){return Qa})),n.d(e,"easeBounceInOut",(function(){return Ga})),n.d(e,"easeBack",(function(){return $a})),n.d(e,"easeBackIn",(function(){return Ya})),n.d(e,"easeBackOut",(function(){return Ka})),n.d(e,"easeBackInOut",(function(){return $a})),n.d(e,"easeElastic",(function(){return Za})),n.d(e,"easeElasticIn",(function(){return Ja})),n.d(e,"easeElasticOut",(function(){return Za})),n.d(e,"easeElasticInOut",(function(){return ts})),n.d(e,"blob",(function(){return ns})),n.d(e,"buffer",(function(){return is})),n.d(e,"dsv",(function(){return us})),n.d(e,"csv",(function(){return cs})),n.d(e,"tsv",(function(){return ls})),n.d(e,"image",(function(){return hs})),n.d(e,"json",(function(){return ps})),n.d(e,"text",(function(){return as})),n.d(e,"xml",(function(){return ys})),n.d(e,"html",(function(){return vs})),n.d(e,"svg",(function(){return gs})),n.d(e,"forceCenter",(function(){return ms})),n.d(e,"forceCollide",(function(){return Ps})),n.d(e,"forceLink",(function(){return Ds})),n.d(e,"forceManyBody",(function(){return Us})),n.d(e,"forceRadial",(function(){return Vs})),n.d(e,"forceSimulation",(function(){return js})),n.d(e,"forceX",(function(){return qs})),n.d(e,"forceY",(function(){return Bs})),n.d(e,"formatDefaultLocale",(function(){return iu})),n.d(e,"format",(function(){return $s})),n.d(e,"formatPrefix",(function(){return Xs})),n.d(e,"formatLocale",(function(){return ru})),n.d(e,"formatSpecifier",(function(){return Qs})),n.d(e,"FormatSpecifier",(function(){return Gs})),n.d(e,"precisionFixed",(function(){return ou})),n.d(e,"precisionPrefix",(function(){return au})),n.d(e,"precisionRound",(function(){return su})),n.d(e,"geoArea",(function(){return Ju})),n.d(e,"geoBounds",(function(){return Wc})),n.d(e,"geoCentroid",(function(){return nl})),n.d(e,"geoCircle",(function(){return pl})),n.d(e,"geoClipAntimeridian",(function(){return Cl})),n.d(e,"geoClipCircle",(function(){return Sl})),n.d(e,"geoClipExtent",(function(){return Pl})),n.d(e,"geoClipRectangle",(function(){return Il})),n.d(e,"geoContains",(function(){return Kl})),n.d(e,"geoDistance",(function(){return Vl})),n.d(e,"geoGraticule",(function(){return Jl})),n.d(e,"geoGraticule10",(function(){return Zl})),n.d(e,"geoInterpolate",(function(){return ih})),n.d(e,"geoLength",(function(){return Fl})),n.d(e,"geoPath",(function(){return nf})),n.d(e,"geoAlbers",(function(){return Ef})),n.d(e,"geoAlbersUsa",(function(){return Tf})),n.d(e,"geoAzimuthalEqualArea",(function(){return If})),n.d(e,"geoAzimuthalEqualAreaRaw",(function(){return Sf})),n.d(e,"geoAzimuthalEquidistant",(function(){return kf})),n.d(e,"geoAzimuthalEquidistantRaw",(function(){return Nf})),n.d(e,"geoConicConformal",(function(){return Mf})),n.d(e,"geoConicConformalRaw",(function(){return Df})),n.d(e,"geoConicEqualArea",(function(){return wf})),n.d(e,"geoConicEqualAreaRaw",(function(){return bf})),n.d(e,"geoConicEquidistant",(function(){return Uf})),n.d(e,"geoConicEquidistantRaw",(function(){return jf})),n.d(e,"geoEqualEarth",(function(){return Qf})),n.d(e,"geoEqualEarthRaw",(function(){return Hf})),n.d(e,"geoEquirectangular",(function(){return Ff})),n.d(e,"geoEquirectangularRaw",(function(){return Lf})),n.d(e,"geoGnomonic",(function(){return Yf})),n.d(e,"geoGnomonicRaw",(function(){return Gf})),n.d(e,"geoIdentity",(function(){return Kf})),n.d(e,"geoProjection",(function(){return gf})),n.d(e,"geoProjectionMutator",(function(){return mf})),n.d(e,"geoMercator",(function(){return Pf})),n.d(e,"geoMercatorRaw",(function(){return Af})),n.d(e,"geoNaturalEarth1",(function(){return Xf})),n.d(e,"geoNaturalEarth1Raw",(function(){return $f})),n.d(e,"geoOrthographic",(function(){return Zf})),n.d(e,"geoOrthographicRaw",(function(){return Jf})),n.d(e,"geoStereographic",(function(){return ep})),n.d(e,"geoStereographicRaw",(function(){return tp})),n.d(e,"geoTransverseMercator",(function(){return rp})),n.d(e,"geoTransverseMercatorRaw",(function(){return np})),n.d(e,"geoRotation",(function(){return ll})),n.d(e,"geoStream",(function(){return Wu})),n.d(e,"geoTransform",(function(){return rf})),n.d(e,"cluster",(function(){return sp})),n.d(e,"hierarchy",(function(){return cp})),n.d(e,"pack",(function(){return Dp})),n.d(e,"packSiblings",(function(){return Np})),n.d(e,"packEnclose",(function(){return yp})),n.d(e,"partition",(function(){return Vp})),n.d(e,"stratify",(function(){return Hp})),n.d(e,"tree",(function(){return Jp})),n.d(e,"treemap",(function(){return rd})),n.d(e,"treemapBinary",(function(){return id})),n.d(e,"treemapDice",(function(){return Up})),n.d(e,"treemapSlice",(function(){return Zp})),n.d(e,"treemapSliceDice",(function(){return od})),n.d(e,"treemapSquarify",(function(){return nd})),n.d(e,"treemapResquarify",(function(){return ad})),n.d(e,"interpolate",(function(){return kn})),n.d(e,"interpolateArray",(function(){return _n})),n.d(e,"interpolateBasis",(function(){return an})),n.d(e,"interpolateBasisClosed",(function(){return sn})),n.d(e,"interpolateDate",(function(){return wn})),n.d(e,"interpolateDiscrete",(function(){return sd})),n.d(e,"interpolateHue",(function(){return ud})),n.d(e,"interpolateNumber",(function(){return En})),n.d(e,"interpolateNumberArray",(function(){return gn})),n.d(e,"interpolateObject",(function(){return Tn})),n.d(e,"interpolateRound",(function(){return cd})),n.d(e,"interpolateString",(function(){return Nn})),n.d(e,"interpolateTransformCss",(function(){return fr})),n.d(e,"interpolateTransformSvg",(function(){return pr})),n.d(e,"interpolateZoom",(function(){return fd})),n.d(e,"interpolateRgb",(function(){return pn})),n.d(e,"interpolateRgbBasis",(function(){return yn})),n.d(e,"interpolateRgbBasisClosed",(function(){return vn})),n.d(e,"interpolateHsl",(function(){return dd})),n.d(e,"interpolateHslLong",(function(){return yd})),n.d(e,"interpolateLab",(function(){return vd})),n.d(e,"interpolateHcl",(function(){return md})),n.d(e,"interpolateHclLong",(function(){return _d})),n.d(e,"interpolateCubehelix",(function(){return wd})),n.d(e,"interpolateCubehelixLong",(function(){return Ed})),n.d(e,"piecewise",(function(){return Td})),n.d(e,"quantize",(function(){return xd})),n.d(e,"path",(function(){return zi})),n.d(e,"polygonArea",(function(){return Cd})),n.d(e,"polygonCentroid",(function(){return Sd})),n.d(e,"polygonHull",(function(){return kd})),n.d(e,"polygonContains",(function(){return Ad})),n.d(e,"polygonLength",(function(){return Pd})),n.d(e,"quadtree",(function(){return Cs})),n.d(e,"randomUniform",(function(){return Rd})),n.d(e,"randomNormal",(function(){return Dd})),n.d(e,"randomLogNormal",(function(){return Md})),n.d(e,"randomBates",(function(){return Fd})),n.d(e,"randomIrwinHall",(function(){return Ld})),n.d(e,"randomExponential",(function(){return jd})),n.d(e,"scaleBand",(function(){return Qd})),n.d(e,"scalePoint",(function(){return Yd})),n.d(e,"scaleIdentity",(function(){return uy})),n.d(e,"scaleLinear",(function(){return sy})),n.d(e,"scaleLog",(function(){return gy})),n.d(e,"scaleSymlog",(function(){return wy})),n.d(e,"scaleOrdinal",(function(){return Hd})),n.d(e,"scaleImplicit",(function(){return Wd})),n.d(e,"scalePow",(function(){return Sy})),n.d(e,"scaleSqrt",(function(){return Iy})),n.d(e,"scaleQuantile",(function(){return Ny})),n.d(e,"scaleQuantize",(function(){return ky})),n.d(e,"scaleThreshold",(function(){return Ay})),n.d(e,"scaleTime",(function(){return sm})),n.d(e,"scaleUtc",(function(){return gm})),n.d(e,"scaleSequential",(function(){return bm})),n.d(e,"scaleSequentialLog",(function(){return wm})),n.d(e,"scaleSequentialPow",(function(){return Tm})),n.d(e,"scaleSequentialSqrt",(function(){return xm})),n.d(e,"scaleSequentialSymlog",(function(){return Em})),n.d(e,"scaleSequentialQuantile",(function(){return Cm})),n.d(e,"scaleDiverging",(function(){return Im})),n.d(e,"scaleDivergingLog",(function(){return Nm})),n.d(e,"scaleDivergingPow",(function(){return Am})),n.d(e,"scaleDivergingSqrt",(function(){return Pm})),n.d(e,"scaleDivergingSymlog",(function(){return km})),n.d(e,"tickFormat",(function(){return oy})),n.d(e,"schemeCategory10",(function(){return Rm})),n.d(e,"schemeAccent",(function(){return Dm})),n.d(e,"schemeDark2",(function(){return Mm})),n.d(e,"schemePaired",(function(){return Lm})),n.d(e,"schemePastel1",(function(){return Fm})),n.d(e,"schemePastel2",(function(){return jm})),n.d(e,"schemeSet1",(function(){return Um})),n.d(e,"schemeSet2",(function(){return Vm})),n.d(e,"schemeSet3",(function(){return qm})),n.d(e,"schemeTableau10",(function(){return Bm})),n.d(e,"interpolateBrBG",(function(){return Hm})),n.d(e,"schemeBrBG",(function(){return Wm})),n.d(e,"interpolatePRGn",(function(){return Gm})),n.d(e,"schemePRGn",(function(){return Qm})),n.d(e,"interpolatePiYG",(function(){return Km})),n.d(e,"schemePiYG",(function(){return Ym})),n.d(e,"interpolatePuOr",(function(){return Xm})),n.d(e,"schemePuOr",(function(){return $m})),n.d(e,"interpolateRdBu",(function(){return Zm})),n.d(e,"schemeRdBu",(function(){return Jm})),n.d(e,"interpolateRdGy",(function(){return e_})),n.d(e,"schemeRdGy",(function(){return t_})),n.d(e,"interpolateRdYlBu",(function(){return r_})),n.d(e,"schemeRdYlBu",(function(){return n_})),n.d(e,"interpolateRdYlGn",(function(){return o_})),n.d(e,"schemeRdYlGn",(function(){return i_})),n.d(e,"interpolateSpectral",(function(){return s_})),n.d(e,"schemeSpectral",(function(){return a_})),n.d(e,"interpolateBuGn",(function(){return c_})),n.d(e,"schemeBuGn",(function(){return u_})),n.d(e,"interpolateBuPu",(function(){return h_})),n.d(e,"schemeBuPu",(function(){return l_})),n.d(e,"interpolateGnBu",(function(){return p_})),n.d(e,"schemeGnBu",(function(){return f_})),n.d(e,"interpolateOrRd",(function(){return y_})),n.d(e,"schemeOrRd",(function(){return d_})),n.d(e,"interpolatePuBuGn",(function(){return g_})),n.d(e,"schemePuBuGn",(function(){return v_})),n.d(e,"interpolatePuBu",(function(){return __})),n.d(e,"schemePuBu",(function(){return m_})),n.d(e,"interpolatePuRd",(function(){return w_})),n.d(e,"schemePuRd",(function(){return b_})),n.d(e,"interpolateRdPu",(function(){return T_})),n.d(e,"schemeRdPu",(function(){return E_})),n.d(e,"interpolateYlGnBu",(function(){return C_})),n.d(e,"schemeYlGnBu",(function(){return x_})),n.d(e,"interpolateYlGn",(function(){return I_})),n.d(e,"schemeYlGn",(function(){return S_})),n.d(e,"interpolateYlOrBr",(function(){return k_})),n.d(e,"schemeYlOrBr",(function(){return N_})),n.d(e,"interpolateYlOrRd",(function(){return P_})),n.d(e,"schemeYlOrRd",(function(){return A_})),n.d(e,"interpolateBlues",(function(){return R_})),n.d(e,"schemeBlues",(function(){return O_})),n.d(e,"interpolateGreens",(function(){return M_})),n.d(e,"schemeGreens",(function(){return D_})),n.d(e,"interpolateGreys",(function(){return F_})),n.d(e,"schemeGreys",(function(){return L_})),n.d(e,"interpolatePurples",(function(){return U_})),n.d(e,"schemePurples",(function(){return j_})),n.d(e,"interpolateReds",(function(){return q_})),n.d(e,"schemeReds",(function(){return V_})),n.d(e,"interpolateOranges",(function(){return z_})),n.d(e,"schemeOranges",(function(){return B_})),n.d(e,"interpolateCividis",(function(){return W_})),n.d(e,"interpolateCubehelixDefault",(function(){return H_})),n.d(e,"interpolateRainbow",(function(){return K_})),n.d(e,"interpolateWarm",(function(){return Q_})),n.d(e,"interpolateCool",(function(){return G_})),n.d(e,"interpolateSinebow",(function(){return Z_})),n.d(e,"interpolateTurbo",(function(){return tb})),n.d(e,"interpolateViridis",(function(){return nb})),n.d(e,"interpolateMagma",(function(){return rb})),n.d(e,"interpolateInferno",(function(){return ib})),n.d(e,"interpolatePlasma",(function(){return ob})),n.d(e,"create",(function(){return ab})),n.d(e,"creator",(function(){return re})),n.d(e,"local",(function(){return ub})),n.d(e,"matcher",(function(){return vt})),n.d(e,"mouse",(function(){return Rn})),n.d(e,"namespace",(function(){return xt})),n.d(e,"namespaces",(function(){return Tt})),n.d(e,"clientPoint",(function(){return Pn})),n.d(e,"select",(function(){return Te})),n.d(e,"selectAll",(function(){return lb})),n.d(e,"selection",(function(){return Ee})),n.d(e,"selector",(function(){return pt})),n.d(e,"selectorAll",(function(){return yt})),n.d(e,"style",(function(){return Mt})),n.d(e,"touch",(function(){return On})),n.d(e,"touches",(function(){return hb})),n.d(e,"window",(function(){return Pt})),n.d(e,"event",(function(){return ce})),n.d(e,"customEvent",(function(){return ye})),n.d(e,"arc",(function(){return Ob})),n.d(e,"area",(function(){return jb})),n.d(e,"line",(function(){return Fb})),n.d(e,"pie",(function(){return qb})),n.d(e,"areaRadial",(function(){return Gb})),n.d(e,"radialArea",(function(){return Gb})),n.d(e,"lineRadial",(function(){return Qb})),n.d(e,"radialLine",(function(){return Qb})),n.d(e,"pointRadial",(function(){return Yb})),n.d(e,"linkHorizontal",(function(){return nw})),n.d(e,"linkVertical",(function(){return rw})),n.d(e,"linkRadial",(function(){return iw})),n.d(e,"symbol",(function(){return Ew})),n.d(e,"symbols",(function(){return ww})),n.d(e,"symbolCircle",(function(){return ow})),n.d(e,"symbolCross",(function(){return aw})),n.d(e,"symbolDiamond",(function(){return cw})),n.d(e,"symbolSquare",(function(){return dw})),n.d(e,"symbolStar",(function(){return pw})),n.d(e,"symbolTriangle",(function(){return vw})),n.d(e,"symbolWye",(function(){return bw})),n.d(e,"curveBasisClosed",(function(){return Nw})),n.d(e,"curveBasisOpen",(function(){return Aw})),n.d(e,"curveBasis",(function(){return Sw})),n.d(e,"curveBundle",(function(){return Ow})),n.d(e,"curveCardinalClosed",(function(){return Fw})),n.d(e,"curveCardinalOpen",(function(){return Uw})),n.d(e,"curveCardinal",(function(){return Mw})),n.d(e,"curveCatmullRomClosed",(function(){return Ww})),n.d(e,"curveCatmullRomOpen",(function(){return Qw})),n.d(e,"curveCatmullRom",(function(){return Bw})),n.d(e,"curveLinearClosed",(function(){return Yw})),n.d(e,"curveLinear",(function(){return Db})),n.d(e,"curveMonotoneX",(function(){return nE})),n.d(e,"curveMonotoneY",(function(){return rE})),n.d(e,"curveNatural",(function(){return aE})),n.d(e,"curveStep",(function(){return uE})),n.d(e,"curveStepAfter",(function(){return lE})),n.d(e,"curveStepBefore",(function(){return cE})),n.d(e,"stack",(function(){return dE})),n.d(e,"stackOffsetExpand",(function(){return yE})),n.d(e,"stackOffsetDiverging",(function(){return vE})),n.d(e,"stackOffsetNone",(function(){return hE})),n.d(e,"stackOffsetSilhouette",(function(){return gE})),n.d(e,"stackOffsetWiggle",(function(){return mE})),n.d(e,"stackOrderAppearance",(function(){return _E})),n.d(e,"stackOrderAscending",(function(){return wE})),n.d(e,"stackOrderDescending",(function(){return TE})),n.d(e,"stackOrderInsideOut",(function(){return xE})),n.d(e,"stackOrderNone",(function(){return fE})),n.d(e,"stackOrderReverse",(function(){return CE})),n.d(e,"timeInterval",(function(){return Ry})),n.d(e,"timeMillisecond",(function(){return dv})),n.d(e,"timeMilliseconds",(function(){return yv})),n.d(e,"utcMillisecond",(function(){return dv})),n.d(e,"utcMilliseconds",(function(){return yv})),n.d(e,"timeSecond",(function(){return hv})),n.d(e,"timeSeconds",(function(){return fv})),n.d(e,"utcSecond",(function(){return hv})),n.d(e,"utcSeconds",(function(){return fv})),n.d(e,"timeMinute",(function(){return uv})),n.d(e,"timeMinutes",(function(){return cv})),n.d(e,"timeHour",(function(){return ov})),n.d(e,"timeHours",(function(){return av})),n.d(e,"timeDay",(function(){return nv})),n.d(e,"timeDays",(function(){return rv})),n.d(e,"timeWeek",(function(){return qy})),n.d(e,"timeWeeks",(function(){return Yy})),n.d(e,"timeSunday",(function(){return qy})),n.d(e,"timeSundays",(function(){return Yy})),n.d(e,"timeMonday",(function(){return By})),n.d(e,"timeMondays",(function(){return Ky})),n.d(e,"timeTuesday",(function(){return zy})),n.d(e,"timeTuesdays",(function(){return $y})),n.d(e,"timeWednesday",(function(){return Wy})),n.d(e,"timeWednesdays",(function(){return Xy})),n.d(e,"timeThursday",(function(){return Hy})),n.d(e,"timeThursdays",(function(){return Jy})),n.d(e,"timeFriday",(function(){return Qy})),n.d(e,"timeFridays",(function(){return Zy})),n.d(e,"timeSaturday",(function(){return Gy})),n.d(e,"timeSaturdays",(function(){return tv})),n.d(e,"timeMonth",(function(){return jy})),n.d(e,"timeMonths",(function(){return Uy})),n.d(e,"timeYear",(function(){return My})),n.d(e,"timeYears",(function(){return Ly})),n.d(e,"utcMinute",(function(){return ym})),n.d(e,"utcMinutes",(function(){return vm})),n.d(e,"utcHour",(function(){return fm})),n.d(e,"utcHours",(function(){return pm})),n.d(e,"utcDay",(function(){return Ov})),n.d(e,"utcDays",(function(){return Rv})),n.d(e,"utcWeek",(function(){return gv})),n.d(e,"utcWeeks",(function(){return xv})),n.d(e,"utcSunday",(function(){return gv})),n.d(e,"utcSundays",(function(){return xv})),n.d(e,"utcMonday",(function(){return mv})),n.d(e,"utcMondays",(function(){return Cv})),n.d(e,"utcTuesday",(function(){return _v})),n.d(e,"utcTuesdays",(function(){return Sv})),n.d(e,"utcWednesday",(function(){return bv})),n.d(e,"utcWednesdays",(function(){return Iv})),n.d(e,"utcThursday",(function(){return wv})),n.d(e,"utcThursdays",(function(){return Nv})),n.d(e,"utcFriday",(function(){return Ev})),n.d(e,"utcFridays",(function(){return kv})),n.d(e,"utcSaturday",(function(){return Tv})),n.d(e,"utcSaturdays",(function(){return Av})),n.d(e,"utcMonth",(function(){return cm})),n.d(e,"utcMonths",(function(){return lm})),n.d(e,"utcYear",(function(){return Mv})),n.d(e,"utcYears",(function(){return Lv})),n.d(e,"timeFormatDefaultLocale",(function(){return rm})),n.d(e,"timeFormat",(function(){return Bv})),n.d(e,"timeParse",(function(){return zv})),n.d(e,"utcFormat",(function(){return Wv})),n.d(e,"utcParse",(function(){return Hv})),n.d(e,"timeFormatLocale",(function(){return Vv})),n.d(e,"isoFormat",(function(){return SE})),n.d(e,"isoParse",(function(){return IE})),n.d(e,"now",(function(){return Bn})),n.d(e,"timer",(function(){return Hn})),n.d(e,"timerFlush",(function(){return Qn})),n.d(e,"timeout",(function(){return $n})),n.d(e,"interval",(function(){return NE})),n.d(e,"transition",(function(){return Br})),n.d(e,"active",(function(){return Xr})),n.d(e,"interrupt",(function(){return sr})),n.d(e,"voronoi",(function(){return pT})),n.d(e,"zoom",(function(){return IT})),n.d(e,"zoomTransform",(function(){return mT})),n.d(e,"zoomIdentity",(function(){return gT}));var r="5.16.0",i=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},o=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return i(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};var a=o(i),s=a.right,u=a.left,c=s,l=function(t,e){null==e&&(e=h);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return o};function h(t,e){return[t,e]}var f=function(t,e,n){var r,i,o,a,s=t.length,u=e.length,c=new Array(s*u);for(null==n&&(n=h),r=o=0;r<s;++r)for(a=t[r],i=0;i<u;++i,++o)c[o]=n(a,e[i]);return c},p=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},d=function(t){return null===t?NaN:+t},y=function(t,e){var n,r,i=t.length,o=0,a=-1,s=0,u=0;if(null==e)for(;++a<i;)isNaN(n=d(t[a]))||(u+=(r=n-s)*(n-(s+=r/++o)));else for(;++a<i;)isNaN(n=d(e(t[a],a,t)))||(u+=(r=n-s)*(n-(s+=r/++o)));if(o>1)return u/(o-1)},v=function(t,e){var n=y(t,e);return n?Math.sqrt(n):n},g=function(t,e){var n,r,i,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n>=n)for(r=i=n;++a<o;)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=i=n;++a<o;)null!=(n=e(t[a],a,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},m=Array.prototype,_=m.slice,b=m.map,w=function(t){return function(){return t}},E=function(t){return t},T=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o},x=Math.sqrt(50),C=Math.sqrt(10),S=Math.sqrt(2),I=function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=N(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o};function N(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=x?10:o>=C?5:o>=S?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=x?10:o>=C?5:o>=S?2:1)}function k(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=x?i*=10:o>=C?i*=5:o>=S&&(i*=2),e<t?-i:i}var A=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},P=function(){var t=E,e=g,n=A;function r(r){var i,o,a=r.length,s=new Array(a);for(i=0;i<a;++i)s[i]=t(r[i],i,r);var u=e(s),l=u[0],h=u[1],f=n(s,l,h);Array.isArray(f)||(f=k(l,h,f),f=T(Math.ceil(l/f)*f,h,f));for(var p=f.length;f[0]<=l;)f.shift(),--p;for(;f[p-1]>h;)f.pop(),--p;var d,y=new Array(p+1);for(i=0;i<=p;++i)(d=y[i]=[]).x0=i>0?f[i-1]:l,d.x1=i<p?f[i]:h;for(i=0;i<a;++i)l<=(o=s[i])&&o<=h&&y[c(f,o,0,p)].push(r[i]);return y}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:w(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:w([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?w(_.call(t)):w(t),r):n},r},O=function(t,e,n){if(null==n&&(n=d),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}},R=function(t,e,n){return t=b.call(t,d).sort(i),Math.ceil((n-e)/(2*(O(t,.75)-O(t,.25))*Math.pow(t.length,-1/3)))},D=function(t,e,n){return Math.ceil((n-e)/(3.5*v(t)*Math.pow(t.length,-1/3)))},M=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r},L=function(t,e){var n,r=t.length,i=r,o=-1,a=0;if(null==e)for(;++o<r;)isNaN(n=d(t[o]))?--i:a+=n;else for(;++o<r;)isNaN(n=d(e(t[o],o,t)))?--i:a+=n;if(i)return a/i},F=function(t,e){var n,r=t.length,o=-1,a=[];if(null==e)for(;++o<r;)isNaN(n=d(t[o]))||a.push(n);else for(;++o<r;)isNaN(n=d(e(t[o],o,t)))||a.push(n);return O(a.sort(i),.5)},j=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n},U=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r},V=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},q=function(t,e){if(n=t.length){var n,r,o=0,a=0,s=t[a];for(null==e&&(e=i);++o<n;)(e(r=t[o],s)<0||0!==e(s,s))&&(s=r,a=o);return 0===e(s,s)?a:void 0}},B=function(t,e,n){for(var r,i,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},z=function(t,e){var n,r=t.length,i=-1,o=0;if(null==e)for(;++i<r;)(n=+t[i])&&(o+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(o+=n);return o},W=function(t){if(!(i=t.length))return[];for(var e=-1,n=U(t,H),r=new Array(n);++e<n;)for(var i,o=-1,a=r[e]=new Array(i);++o<i;)a[o]=t[o][e];return r};function H(t){return t.length}var Q=function(){return W(arguments)},G=Array.prototype.slice,Y=function(t){return t};function K(t){return"translate("+(t+.5)+",0)"}function $(t){return"translate(0,"+(t+.5)+")"}function X(t){return function(e){return+t(e)}}function J(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function Z(){return!this.__axis}function tt(t,e){var n=[],r=null,i=null,o=6,a=6,s=3,u=1===t||4===t?-1:1,c=4===t||2===t?"x":"y",l=1===t||3===t?K:$;function h(h){var f=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,p=null==i?e.tickFormat?e.tickFormat.apply(e,n):Y:i,d=Math.max(o,0)+s,y=e.range(),v=+y[0]+.5,g=+y[y.length-1]+.5,m=(e.bandwidth?J:X)(e.copy()),_=h.selection?h.selection():h,b=_.selectAll(".domain").data([null]),w=_.selectAll(".tick").data(f,e).order(),E=w.exit(),T=w.enter().append("g").attr("class","tick"),x=w.select("line"),C=w.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(T),x=x.merge(T.append("line").attr("stroke","currentColor").attr(c+"2",u*o)),C=C.merge(T.append("text").attr("fill","currentColor").attr(c,u*d).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),h!==_&&(b=b.transition(h),w=w.transition(h),x=x.transition(h),C=C.transition(h),E=E.transition(h).attr("opacity",1e-6).attr("transform",(function(t){return isFinite(t=m(t))?l(t):this.getAttribute("transform")})),T.attr("opacity",1e-6).attr("transform",(function(t){var e=this.parentNode.__axis;return l(e&&isFinite(e=e(t))?e:m(t))}))),E.remove(),b.attr("d",4===t||2==t?a?"M"+u*a+","+v+"H0.5V"+g+"H"+u*a:"M0.5,"+v+"V"+g:a?"M"+v+","+u*a+"V0.5H"+g+"V"+u*a:"M"+v+",0.5H"+g),w.attr("opacity",1).attr("transform",(function(t){return l(m(t))})),x.attr(c+"2",u*o),C.attr(c,u*d).text(p),_.filter(Z).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),_.each((function(){this.__axis=m}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return n=G.call(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:G.call(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(r=null==t?null:G.call(t),h):r&&r.slice()},h.tickFormat=function(t){return arguments.length?(i=t,h):i},h.tickSize=function(t){return arguments.length?(o=a=+t,h):o},h.tickSizeInner=function(t){return arguments.length?(o=+t,h):o},h.tickSizeOuter=function(t){return arguments.length?(a=+t,h):a},h.tickPadding=function(t){return arguments.length?(s=+t,h):s},h}function et(t){return tt(1,t)}function nt(t){return tt(2,t)}function rt(t){return tt(3,t)}function it(t){return tt(4,t)}var ot={value:function(){}};function at(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new st(r)}function st(t){this._=t}function ut(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function ct(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function lt(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ot,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}st.prototype=at.prototype={constructor:st,on:function(t,e){var n,r=this._,i=ut(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=lt(r[n],t.name,e);else if(null==e)for(n in r)r[n]=lt(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=ct(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new st(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var ht=at;function ft(){}var pt=function(t){return null==t?ft:function(){return this.querySelector(t)}};function dt(){return[]}var yt=function(t){return null==t?dt:function(){return this.querySelectorAll(t)}},vt=function(t){return function(){return this.matches(t)}},gt=function(t){return new Array(t.length)};function mt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}mt.prototype={constructor:mt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function _t(t,e,n,r,i,o){for(var a,s=0,u=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new mt(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function bt(t,e,n,r,i,o,a){var s,u,c,l={},h=e.length,f=o.length,p=new Array(h);for(s=0;s<h;++s)(u=e[s])&&(p[s]=c="$"+a.call(u,u.__data__,s,e),c in l?i[s]=u:l[c]=u);for(s=0;s<f;++s)(u=l[c="$"+a.call(t,o[s],s,o)])?(r[s]=u,u.__data__=o[s],l[c]=null):n[s]=new mt(t,o[s]);for(s=0;s<h;++s)(u=e[s])&&l[p[s]]===u&&(i[s]=u)}function wt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var Et="http://www.w3.org/1999/xhtml",Tt={svg:"http://www.w3.org/2000/svg",xhtml:Et,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},xt=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Tt.hasOwnProperty(e)?{space:Tt[e],local:t}:t};function Ct(t){return function(){this.removeAttribute(t)}}function St(t){return function(){this.removeAttributeNS(t.space,t.local)}}function It(t,e){return function(){this.setAttribute(t,e)}}function Nt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function kt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function At(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var Pt=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function Ot(t){return function(){this.style.removeProperty(t)}}function Rt(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Dt(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Mt(t,e){return t.style.getPropertyValue(e)||Pt(t).getComputedStyle(t,null).getPropertyValue(e)}function Lt(t){return function(){delete this[t]}}function Ft(t,e){return function(){this[t]=e}}function jt(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Ut(t){return t.trim().split(/^|\s+/)}function Vt(t){return t.classList||new qt(t)}function qt(t){this._node=t,this._names=Ut(t.getAttribute("class")||"")}function Bt(t,e){for(var n=Vt(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function zt(t,e){for(var n=Vt(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Wt(t){return function(){Bt(this,t)}}function Ht(t){return function(){zt(this,t)}}function Qt(t,e){return function(){(e.apply(this,arguments)?Bt:zt)(this,t)}}qt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Gt(){this.textContent=""}function Yt(t){return function(){this.textContent=t}}function Kt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function $t(){this.innerHTML=""}function Xt(t){return function(){this.innerHTML=t}}function Jt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Zt(){this.nextSibling&&this.parentNode.appendChild(this)}function te(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ee(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Et&&e.documentElement.namespaceURI===Et?e.createElement(t):e.createElementNS(n,t)}}function ne(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var re=function(t){var e=xt(t);return(e.local?ne:ee)(e)};function ie(){return null}function oe(){var t=this.parentNode;t&&t.removeChild(this)}function ae(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function se(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var ue={},ce=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(ue={mouseenter:"mouseover",mouseleave:"mouseout"}));function le(t,e,n){return t=he(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function he(t,e,n){return function(r){var i=ce;ce=r;try{t.call(this,this.__data__,e,n)}finally{ce=i}}}function fe(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function pe(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function de(t,e,n){var r=ue.hasOwnProperty(t.type)?le:he;return function(i,o,a){var s,u=this.__on,c=r(e,o,a);if(u)for(var l=0,h=u.length;l<h;++l)if((s=u[l]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(s):this.__on=[s]}}function ye(t,e,n,r){var i=ce;t.sourceEvent=ce,ce=t;try{return e.apply(n,r)}finally{ce=i}}function ve(t,e,n){var r=Pt(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ge(t,e){return function(){return ve(this,t,e)}}function me(t,e){return function(){return ve(this,t,e.apply(this,arguments))}}var _e=[null];function be(t,e){this._groups=t,this._parents=e}function we(){return new be([[document.documentElement]],_e)}be.prototype=we.prototype={constructor:be,select:function(t){"function"!=typeof t&&(t=pt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,c=r[i]=new Array(u),l=0;l<u;++l)(o=s[l])&&(a=t.call(o,o.__data__,l,s))&&("__data__"in o&&(a.__data__=o.__data__),c[l]=a);return new be(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=yt(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,c=0;c<u;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new be(r,i)},filter:function(t){"function"!=typeof t&&(t=vt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new be(r,this._parents)},data:function(t,e){if(!t)return d=new Array(this.size()),l=-1,this.each((function(t){d[++l]=t})),d;var n,r=e?bt:_t,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,s=new Array(a),u=new Array(a),c=new Array(a),l=0;l<a;++l){var h=i[l],f=o[l],p=f.length,d=t.call(h,h&&h.__data__,l,i),y=d.length,v=u[l]=new Array(y),g=s[l]=new Array(y);r(h,f,v,g,c[l]=new Array(p),d,e);for(var m,_,b=0,w=0;b<y;++b)if(m=v[b]){for(b>=w&&(w=b+1);!(_=g[w])&&++w<y;);m._next=_||null}}return(s=new be(s,i))._enter=u,s._exit=c,s},enter:function(){return new be(this._enter||this._groups.map(gt),this._parents)},exit:function(){return new be(this._exit||this._groups.map(gt),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],h=c.length,f=a[s]=new Array(h),p=0;p<h;++p)(u=c[p]||l[p])&&(f[p]=u);for(;s<r;++s)a[s]=e[s];return new be(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=wt);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,c=i[o]=new Array(u),l=0;l<u;++l)(a=s[l])&&(c[l]=a);c.sort(e)}return new be(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=xt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?St:Ct:"function"==typeof e?n.local?At:kt:n.local?Nt:It)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Ot:"function"==typeof e?Dt:Rt)(t,e,null==n?"":n)):Mt(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Lt:"function"==typeof e?jt:Ft)(t,e)):this.node()[t]},classed:function(t,e){var n=Ut(t+"");if(arguments.length<2){for(var r=Vt(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?Qt:e?Wt:Ht)(n,e))},text:function(t){return arguments.length?this.each(null==t?Gt:("function"==typeof t?Kt:Yt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?$t:("function"==typeof t?Jt:Xt)(t)):this.node().innerHTML},raise:function(){return this.each(Zt)},lower:function(){return this.each(te)},append:function(t){var e="function"==typeof t?t:re(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:re(t),r=null==e?ie:"function"==typeof e?e:pt(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(oe)},clone:function(t){return this.select(t?se:ae)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=fe(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?de:pe,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(r=0,u=s[c];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?me:ge)(t,e))}};var Ee=we,Te=function(t){return"string"==typeof t?new be([[document.querySelector(t)]],[document.documentElement]):new be([[t]],_e)};function xe(){ce.stopImmediatePropagation()}var Ce=function(){ce.preventDefault(),ce.stopImmediatePropagation()},Se=function(t){var e=t.document.documentElement,n=Te(t).on("dragstart.drag",Ce,!0);"onselectstart"in e?n.on("selectstart.drag",Ce,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function Ie(t,e){var n=t.document.documentElement,r=Te(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ce,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Ne=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function ke(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ae(){}var Pe="\\s*([+-]?\\d+)\\s*",Oe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Re="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",De=/^#([0-9a-f]{3,8})$/,Me=new RegExp("^rgb\\("+[Pe,Pe,Pe]+"\\)$"),Le=new RegExp("^rgb\\("+[Re,Re,Re]+"\\)$"),Fe=new RegExp("^rgba\\("+[Pe,Pe,Pe,Oe]+"\\)$"),je=new RegExp("^rgba\\("+[Re,Re,Re,Oe]+"\\)$"),Ue=new RegExp("^hsl\\("+[Oe,Re,Re]+"\\)$"),Ve=new RegExp("^hsla\\("+[Oe,Re,Re,Oe]+"\\)$"),qe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Be(){return this.rgb().formatHex()}function ze(){return this.rgb().formatRgb()}function We(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=De.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?He(e):3===n?new Ke(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Qe(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Qe(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Me.exec(t))?new Ke(e[1],e[2],e[3],1):(e=Le.exec(t))?new Ke(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Fe.exec(t))?Qe(e[1],e[2],e[3],e[4]):(e=je.exec(t))?Qe(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ue.exec(t))?Ze(e[1],e[2]/100,e[3]/100,1):(e=Ve.exec(t))?Ze(e[1],e[2]/100,e[3]/100,e[4]):qe.hasOwnProperty(t)?He(qe[t]):"transparent"===t?new Ke(NaN,NaN,NaN,0):null}function He(t){return new Ke(t>>16&255,t>>8&255,255&t,1)}function Qe(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ke(t,e,n,r)}function Ge(t){return t instanceof Ae||(t=We(t)),t?new Ke((t=t.rgb()).r,t.g,t.b,t.opacity):new Ke}function Ye(t,e,n,r){return 1===arguments.length?Ge(t):new Ke(t,e,n,null==r?1:r)}function Ke(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function $e(){return"#"+Je(this.r)+Je(this.g)+Je(this.b)}function Xe(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Je(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Ze(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new nn(t,e,n,r)}function tn(t){if(t instanceof nn)return new nn(t.h,t.s,t.l,t.opacity);if(t instanceof Ae||(t=We(t)),!t)return new nn;if(t instanceof nn)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new nn(a,s,u,t.opacity)}function en(t,e,n,r){return 1===arguments.length?tn(t):new nn(t,e,n,null==r?1:r)}function nn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function rn(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function on(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}Ne(Ae,We,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Be,formatHex:Be,formatHsl:function(){return tn(this).formatHsl()},formatRgb:ze,toString:ze}),Ne(Ke,Ye,ke(Ae,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ke(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ke(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$e,formatHex:$e,formatRgb:Xe,toString:Xe})),Ne(nn,en,ke(Ae,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new nn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new nn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ke(rn(t>=240?t-240:t+120,i,r),rn(t,i,r),rn(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var an=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return on((n-r/e)*e,a,i,o,s)}},sn=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return on((n-r/e)*e,i,o,a,s)}},un=function(t){return function(){return t}};function cn(t,e){return function(n){return t+n*e}}function ln(t,e){var n=e-t;return n?cn(t,n>180||n<-180?n-360*Math.round(n/360):n):un(isNaN(t)?e:t)}function hn(t){return 1==(t=+t)?fn:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):un(isNaN(e)?n:e)}}function fn(t,e){var n=e-t;return n?cn(t,n):un(isNaN(t)?e:t)}var pn=function t(e){var n=hn(e);function r(t,e){var r=n((t=Ye(t)).r,(e=Ye(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=fn(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function dn(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Ye(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}var yn=dn(an),vn=dn(sn),gn=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}};function mn(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var _n=function(t,e){return(mn(e)?gn:bn)(t,e)};function bn(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=kn(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}var wn=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},En=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},Tn=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=kn(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},xn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cn=new RegExp(xn.source,"g");var Sn,In,Nn=function(t,e){var n,r,i,o=xn.lastIndex=Cn.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=xn.exec(t))&&(r=Cn.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:En(n,r)})),o=Cn.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},kn=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?un(e):("number"===r?En:"string"===r?(n=We(e))?(e=n,pn):Nn:e instanceof We?pn:e instanceof Date?wn:mn(e)?gn:Array.isArray(e)?bn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Tn:En)(t,e)},An=function(){for(var t,e=ce;t=e.sourceEvent;)e=t;return e},Pn=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},On=function(t,e,n){arguments.length<3&&(n=e,e=An().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return Pn(t,r);return null},Rn=function(t){var e=An();return e.changedTouches&&(e=e.changedTouches[0]),Pn(t,e)},Dn=0,Mn=0,Ln=0,Fn=0,jn=0,Un=0,Vn="object"==typeof performance&&performance.now?performance:Date,qn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Bn(){return jn||(qn(zn),jn=Vn.now()+Un)}function zn(){jn=0}function Wn(){this._call=this._time=this._next=null}function Hn(t,e,n){var r=new Wn;return r.restart(t,e,n),r}function Qn(){Bn(),++Dn;for(var t,e=Sn;e;)(t=jn-e._time)>=0&&e._call.call(null,t),e=e._next;--Dn}function Gn(){jn=(Fn=Vn.now())+Un,Dn=Mn=0;try{Qn()}finally{Dn=0,function(){var t,e,n=Sn,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Sn=e);In=t,Kn(r)}(),jn=0}}function Yn(){var t=Vn.now(),e=t-Fn;e>1e3&&(Un-=e,Fn=t)}function Kn(t){Dn||(Mn&&(Mn=clearTimeout(Mn)),t-jn>24?(t<1/0&&(Mn=setTimeout(Gn,t-Vn.now()-Un)),Ln&&(Ln=clearInterval(Ln))):(Ln||(Fn=Vn.now(),Ln=setInterval(Yn,1e3)),Dn=1,qn(Gn)))}Wn.prototype=Hn.prototype={constructor:Wn,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Bn():+n)+(null==e?0:+e),this._next||In===this||(In?In._next=this:Sn=this,In=this),this._call=t,this._time=n,Kn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Kn())}};var $n=function(t,e,n){var r=new Wn;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r},Xn=ht("start","end","cancel","interrupt"),Jn=[],Zn=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(u){var c,l,h,f;if(1!==n.state)return s();for(c in i)if((f=i[c]).name===n.name){if(3===f.state)return $n(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[c]):+c<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[c])}if($n((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,l=-1;c<h;++c)(f=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=f);r.length=l+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Hn((function(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:Xn,tween:Jn,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})};function tr(t,e){var n=nr(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function er(t,e){var n=nr(t,e);if(n.state>3)throw new Error("too late; already running");return n}function nr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var rr,ir,or,ar,sr=function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}},ur=180/Math.PI,cr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},lr=function(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*ur,skewX:Math.atan(u)*ur,scaleX:a,scaleY:s}};function hr(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:En(t,i)},{i:u-2,x:En(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:En(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:En(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,u),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:En(t,n)},{i:s-2,x:En(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var fr=hr((function(t){return"none"===t?cr:(rr||(rr=document.createElement("DIV"),ir=document.documentElement,or=document.defaultView),rr.style.transform=t,t=or.getComputedStyle(ir.appendChild(rr),null).getPropertyValue("transform"),ir.removeChild(rr),t=t.slice(7,-1).split(","),lr(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),pr=hr((function(t){return null==t?cr:(ar||(ar=document.createElementNS("http://www.w3.org/2000/svg","g")),ar.setAttribute("transform",t),(t=ar.transform.baseVal.consolidate())?(t=t.matrix,lr(t.a,t.b,t.c,t.d,t.e,t.f)):cr)}),", ",")",")");function dr(t,e){var n,r;return function(){var i=er(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function yr(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=er(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=s;break}u===c&&i.push(s)}o.tween=i}}function vr(t,e,n){var r=t._id;return t.each((function(){var t=er(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return nr(t,r).value[e]}}var gr=function(t,e){var n;return("number"==typeof e?En:e instanceof We?pn:(n=We(e))?(e=n,pn):Nn)(t,e)};function mr(t){return function(){this.removeAttribute(t)}}function _r(t){return function(){this.removeAttributeNS(t.space,t.local)}}function br(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function wr(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function Er(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(t))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttribute(t)}}function Tr(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttributeNS(t.space,t.local)}}function xr(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Cr(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Sr(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Cr(t,i)),n}return i._value=e,i}function Ir(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&xr(t,i)),n}return i._value=e,i}function Nr(t,e){return function(){tr(this,t).delay=+e.apply(this,arguments)}}function kr(t,e){return e=+e,function(){tr(this,t).delay=e}}function Ar(t,e){return function(){er(this,t).duration=+e.apply(this,arguments)}}function Pr(t,e){return e=+e,function(){er(this,t).duration=e}}function Or(t,e){if("function"!=typeof e)throw new Error;return function(){er(this,t).ease=e}}function Rr(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?tr:er;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}var Dr=Ee.prototype.constructor;function Mr(t){return function(){this.style.removeProperty(t)}}function Lr(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Fr(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Lr(t,o,n)),r}return o._value=e,o}function jr(t){return function(e){this.textContent=t.call(this,e)}}function Ur(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&jr(r)),e}return r._value=t,r}var Vr=0;function qr(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Br(t){return Ee().transition(t)}function zr(){return++Vr}var Wr=Ee.prototype;function Hr(t){return t*t*t}function Qr(t){return--t*t*t+1}function Gr(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}qr.prototype=Br.prototype={constructor:qr,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=pt(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,c=r[a],l=c.length,h=o[a]=new Array(l),f=0;f<l;++f)(s=c[f])&&(u=t.call(s,s.__data__,f,c))&&("__data__"in s&&(u.__data__=s.__data__),h[f]=u,Zn(h[f],e,n,f,h,nr(s,n)));return new qr(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=yt(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,c=r[s],l=c.length,h=0;h<l;++h)if(u=c[h]){for(var f,p=t.call(u,u.__data__,h,c),d=nr(u,n),y=0,v=p.length;y<v;++y)(f=p[y])&&Zn(f,e,n,y,p,d);o.push(p),a.push(u)}return new qr(o,a,e,n)},filter:function(t){"function"!=typeof t&&(t=vt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new qr(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],h=c.length,f=a[s]=new Array(h),p=0;p<h;++p)(u=c[p]||l[p])&&(f[p]=u);for(;s<r;++s)a[s]=e[s];return new qr(a,this._parents,this._name,this._id)},selection:function(){return new Dr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=zr(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)if(a=s[c]){var l=nr(a,e);Zn(a,t,n,c,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new qr(r,this._parents,t,n)},call:Wr.call,nodes:Wr.nodes,node:Wr.node,size:Wr.size,empty:Wr.empty,each:Wr.each,on:function(t,e){var n=this._id;return arguments.length<2?nr(this.node(),n).on.on(t):this.each(Rr(n,t,e))},attr:function(t,e){var n=xt(t),r="transform"===n?pr:gr;return this.attrTween(t,"function"==typeof e?(n.local?Tr:Er)(n,r,vr(this,"attr."+t,e)):null==e?(n.local?_r:mr)(n):(n.local?wr:br)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=xt(t);return this.tween(n,(r.local?Sr:Ir)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?fr:gr;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=Mt(this,t),a=(this.style.removeProperty(t),Mt(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,Mr(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=Mt(this,t),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=Mt(this,t)),a===u?null:a===r&&u===i?o:(i=u,o=e(r=a,s))}}(t,r,vr(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,s="end."+a;return function(){var u=er(this,t),c=u.on,l=null==u.value[a]?o||(o=Mr(e)):void 0;c===n&&i===l||(r=(n=c).copy()).on(s,i=l),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=Mt(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Fr(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(vr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Ur(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=nr(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?dr:yr)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Nr:kr)(e,t)):nr(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Ar:Pr)(e,t)):nr(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Or(e,t)):nr(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},u={value:function(){0==--i&&o()}};n.each((function(){var n=er(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),n.on=e}))}))}};var Yr={time:null,delay:0,duration:250,ease:Gr};function Kr(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Yr.time=Bn(),Yr;return n}Ee.prototype.interrupt=function(t){return this.each((function(){sr(this,t)}))},Ee.prototype.transition=function(t){var e,n;t instanceof qr?(e=t._id,t=t._name):(e=zr(),(n=Yr).time=Bn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)(a=s[c])&&Zn(a,t,e,c,s,n||Kr(a,e));return new qr(r,this._parents,t,e)};var $r=[null],Xr=function(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+"",i)if((n=i[r]).state>1&&n.name===e)return new qr([[t]],$r,e,+r);return null},Jr=function(t){return function(){return t}},Zr=function(t,e,n){this.target=t,this.type=e,this.selection=n};function ti(){ce.stopImmediatePropagation()}var ei=function(){ce.preventDefault(),ce.stopImmediatePropagation()},ni={name:"drag"},ri={name:"space"},ii={name:"handle"},oi={name:"center"};function ai(t){return[+t[0],+t[1]]}function si(t){return[ai(t[0]),ai(t[1])]}function ui(t){return function(e){return On(e,ce.touches,t)}}var ci={name:"x",handles:["w","e"].map(gi),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},li={name:"y",handles:["n","s"].map(gi),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},hi={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(gi),input:function(t){return null==t?null:si(t)},output:function(t){return t}},fi={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},pi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},di={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},yi={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},vi={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function gi(t){return{type:t}}function mi(){return!ce.ctrlKey&&!ce.button}function _i(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function bi(){return navigator.maxTouchPoints||"ontouchstart"in this}function wi(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Ei(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Ti(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function xi(){return Ii(ci)}function Ci(){return Ii(li)}var Si=function(){return Ii(hi)};function Ii(t){var e,n=_i,r=mi,i=bi,o=!0,a=ht("start","brush","end"),s=6;function u(e){var n=e.property("__brush",y).selectAll(".overlay").data([gi("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",fi.overlay).merge(n).each((function(){var t=wi(this).extent;Te(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([gi("selection")]).enter().append("rect").attr("class","selection").attr("cursor",fi.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return fi[t.type]})),e.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(i).on("touchstart.brush",f).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",d).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var t=Te(this),e=wi(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-s/2:e[0][0]-s/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-s/2:e[0][1]-s/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+s:s})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+s:s}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function l(t,e,n){return!n&&t.__brush.emitter||new h(t,e)}function h(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function f(){if((!e||ce.touches)&&r.apply(this,arguments)){var n,i,a,s,u,h,f,p,d,y,v,g=this,m=ce.target.__data__.type,_="selection"===(o&&ce.metaKey?m="overlay":m)?ni:o&&ce.altKey?oi:ii,b=t===li?null:yi[m],w=t===ci?null:vi[m],E=wi(g),T=E.extent,x=E.selection,C=T[0][0],S=T[0][1],I=T[1][0],N=T[1][1],k=0,A=0,P=b&&w&&o&&ce.shiftKey,O=ce.touches?ui(ce.changedTouches[0].identifier):Rn,R=O(g),D=R,M=l(g,arguments,!0).beforestart();"overlay"===m?(x&&(d=!0),E.selection=x=[[n=t===li?C:R[0],a=t===ci?S:R[1]],[u=t===li?I:n,f=t===ci?N:a]]):(n=x[0][0],a=x[0][1],u=x[1][0],f=x[1][1]),i=n,s=a,h=u,p=f;var L=Te(g).attr("pointer-events","none"),F=L.selectAll(".overlay").attr("cursor",fi[m]);if(ce.touches)M.moved=U,M.ended=q;else{var j=Te(ce.view).on("mousemove.brush",U,!0).on("mouseup.brush",q,!0);o&&j.on("keydown.brush",B,!0).on("keyup.brush",z,!0),Se(ce.view)}ti(),sr(g),c.call(g),M.start()}function U(){var t=O(g);!P||y||v||(Math.abs(t[0]-D[0])>Math.abs(t[1]-D[1])?v=!0:y=!0),D=t,d=!0,ei(),V()}function V(){var t;switch(k=D[0]-R[0],A=D[1]-R[1],_){case ri:case ni:b&&(k=Math.max(C-n,Math.min(I-u,k)),i=n+k,h=u+k),w&&(A=Math.max(S-a,Math.min(N-f,A)),s=a+A,p=f+A);break;case ii:b<0?(k=Math.max(C-n,Math.min(I-n,k)),i=n+k,h=u):b>0&&(k=Math.max(C-u,Math.min(I-u,k)),i=n,h=u+k),w<0?(A=Math.max(S-a,Math.min(N-a,A)),s=a+A,p=f):w>0&&(A=Math.max(S-f,Math.min(N-f,A)),s=a,p=f+A);break;case oi:b&&(i=Math.max(C,Math.min(I,n-k*b)),h=Math.max(C,Math.min(I,u+k*b))),w&&(s=Math.max(S,Math.min(N,a-A*w)),p=Math.max(S,Math.min(N,f+A*w)))}h<i&&(b*=-1,t=n,n=u,u=t,t=i,i=h,h=t,m in pi&&F.attr("cursor",fi[m=pi[m]])),p<s&&(w*=-1,t=a,a=f,f=t,t=s,s=p,p=t,m in di&&F.attr("cursor",fi[m=di[m]])),E.selection&&(x=E.selection),y&&(i=x[0][0],h=x[1][0]),v&&(s=x[0][1],p=x[1][1]),x[0][0]===i&&x[0][1]===s&&x[1][0]===h&&x[1][1]===p||(E.selection=[[i,s],[h,p]],c.call(g),M.brush())}function q(){if(ti(),ce.touches){if(ce.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else Ie(ce.view,d),j.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);L.attr("pointer-events","all"),F.attr("cursor",fi.overlay),E.selection&&(x=E.selection),Ei(x)&&(E.selection=null,c.call(g)),M.end()}function B(){switch(ce.keyCode){case 16:P=b&&w;break;case 18:_===ii&&(b&&(u=h-k*b,n=i+k*b),w&&(f=p-A*w,a=s+A*w),_=oi,V());break;case 32:_!==ii&&_!==oi||(b<0?u=h-k:b>0&&(n=i-k),w<0?f=p-A:w>0&&(a=s-A),_=ri,F.attr("cursor",fi.selection),V());break;default:return}ei()}function z(){switch(ce.keyCode){case 16:P&&(y=v=P=!1,V());break;case 18:_===oi&&(b<0?u=h:b>0&&(n=i),w<0?f=p:w>0&&(a=s),_=ii,V());break;case 32:_===ri&&(ce.altKey?(b&&(u=h-k*b,n=i+k*b),w&&(f=p-A*w,a=s+A*w),_=oi):(b<0?u=h:b>0&&(n=i),w<0?f=p:w>0&&(a=s),_=ii),F.attr("cursor",fi[m]),V());break;default:return}ei()}}function p(){l(this,arguments).moved()}function d(){l(this,arguments).ended()}function y(){var e=this.__brush||{selection:null};return e.extent=si(n.apply(this,arguments)),e.dim=t,e}return u.move=function(e,n){e.selection?e.on("start.brush",(function(){l(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){l(this,arguments).end()})).tween("brush",(function(){var e=this,r=e.__brush,i=l(e,arguments),o=r.selection,a=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=kn(o,a);function u(t){r.selection=1===t&&null===a?null:s(t),c.call(e),i.brush()}return null!==o&&null!==a?u:u(1)})):e.each((function(){var e=this,r=arguments,i=e.__brush,o=t.input("function"==typeof n?n.apply(e,r):n,i.extent),a=l(e,r).beforestart();sr(e),i.selection=null===o?null:o,c.call(e),a.start().brush().end()}))},u.clear=function(t){u.move(t,null)},h.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){ye(new Zr(u,e,t.output(this.state.selection)),a.apply,a,[e,this.that,this.args])}},u.extent=function(t){return arguments.length?(n="function"==typeof t?t:Jr(si(t)),u):n},u.filter=function(t){return arguments.length?(r="function"==typeof t?t:Jr(!!t),u):r},u.touchable=function(t){return arguments.length?(i="function"==typeof t?t:Jr(!!t),u):i},u.handleSize=function(t){return arguments.length?(s=+t,u):s},u.keyModifiers=function(t){return arguments.length?(o=!!t,u):o},u.on=function(){var t=a.on.apply(a,arguments);return t===a?u:t},u}var Ni=Math.cos,ki=Math.sin,Ai=Math.PI,Pi=Ai/2,Oi=2*Ai,Ri=Math.max;function Di(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}var Mi=function(){var t=0,e=null,n=null,r=null;function i(i){var o,a,s,u,c,l,h=i.length,f=[],p=T(h),d=[],y=[],v=y.groups=new Array(h),g=new Array(h*h);for(o=0,c=-1;++c<h;){for(a=0,l=-1;++l<h;)a+=i[c][l];f.push(a),d.push(T(h)),o+=a}for(e&&p.sort((function(t,n){return e(f[t],f[n])})),n&&d.forEach((function(t,e){t.sort((function(t,r){return n(i[e][t],i[e][r])}))})),u=(o=Ri(0,Oi-t*h)/o)?t:Oi/h,a=0,c=-1;++c<h;){for(s=a,l=-1;++l<h;){var m=p[c],_=d[m][l],b=i[m][_],w=a,E=a+=b*o;g[_*h+m]={index:m,subindex:_,startAngle:w,endAngle:E,value:b}}v[m]={index:m,startAngle:s,endAngle:a,value:f[m]},a+=u}for(c=-1;++c<h;)for(l=c-1;++l<h;){var x=g[l*h+c],C=g[c*h+l];(x.value||C.value)&&y.push(x.value<C.value?{source:C,target:x}:{source:x,target:C})}return r?y.sort(r):y}return i.padAngle=function(e){return arguments.length?(t=Ri(0,e),i):t},i.sortGroups=function(t){return arguments.length?(e=t,i):e},i.sortSubgroups=function(t){return arguments.length?(n=t,i):n},i.sortChords=function(t){return arguments.length?(null==t?r=null:(r=Di(t))._=t,i):r&&r._},i},Li=Array.prototype.slice,Fi=function(t){return function(){return t}},ji=Math.PI,Ui=2*ji,Vi=Ui-1e-6;function qi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Bi(){return new qi}qi.prototype=Bi.prototype={constructor:qi,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,u=r-e,c=o-t,l=a-e,h=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(l*s-u*c)>1e-6&&i){var f=n-o,p=r-a,d=s*s+u*u,y=f*f+p*p,v=Math.sqrt(d),g=Math.sqrt(h),m=i*Math.tan((ji-Math.acos((d+h-y)/(2*v*g)))/2),_=m/g,b=m/v;Math.abs(_-1)>1e-6&&(this._+="L"+(t+_*c)+","+(e+_*l)),this._+="A"+i+","+i+",0,0,"+ +(l*f>c*p)+","+(this._x1=t+b*s)+","+(this._y1=e+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=t+a,c=e+s,l=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+u+","+c),n&&(h<0&&(h=h%Ui+Ui),h>Vi?this._+="A"+n+","+n+",0,1,"+l+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=ji)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var zi=Bi;function Wi(t){return t.source}function Hi(t){return t.target}function Qi(t){return t.radius}function Gi(t){return t.startAngle}function Yi(t){return t.endAngle}var Ki=function(){var t=Wi,e=Hi,n=Qi,r=Gi,i=Yi,o=null;function a(){var a,s=Li.call(arguments),u=t.apply(this,s),c=e.apply(this,s),l=+n.apply(this,(s[0]=u,s)),h=r.apply(this,s)-Pi,f=i.apply(this,s)-Pi,p=l*Ni(h),d=l*ki(h),y=+n.apply(this,(s[0]=c,s)),v=r.apply(this,s)-Pi,g=i.apply(this,s)-Pi;if(o||(o=a=zi()),o.moveTo(p,d),o.arc(0,0,l,h,f),h===v&&f===g||(o.quadraticCurveTo(0,0,y*Ni(v),y*ki(v)),o.arc(0,0,y,v,g)),o.quadraticCurveTo(0,0,p,d),o.closePath(),a)return o=null,a+""||null}return a.radius=function(t){return arguments.length?(n="function"==typeof t?t:Fi(+t),a):n},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Fi(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Fi(+t),a):i},a.source=function(e){return arguments.length?(t=e,a):t},a.target=function(t){return arguments.length?(e=t,a):e},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a};function $i(){}function Xi(t,e){var n=new $i;if(t instanceof $i)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}$i.prototype=Xi.prototype={constructor:$i,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Ji=Xi,Zi=function(){var t,e,n,r=[],i=[];function o(n,i,a,s){if(i>=r.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var u,c,l,h=-1,f=n.length,p=r[i++],d=Ji(),y=a();++h<f;)(l=d.get(u=p(c=n[h])+""))?l.push(c):d.set(u,[c]);return d.each((function(t,e){s(y,e,o(t,i,a,s))})),y}return n={object:function(t){return o(t,0,to,eo)},map:function(t){return o(t,0,no,ro)},entries:function(t){return function t(n,o){if(++o>r.length)return n;var a,s=i[o-1];return null!=e&&o>=r.length?a=n.entries():(a=[],n.each((function(e,n){a.push({key:n,values:t(e,o)})}))),null!=s?a.sort((function(t,e){return s(t.key,e.key)})):a}(o(t,0,no,ro),0)},key:function(t){return r.push(t),n},sortKeys:function(t){return i[r.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}};function to(){return{}}function eo(t,e,n){t[e]=n}function no(){return Ji()}function ro(t,e,n){t.set(e,n)}function io(){}var oo=Ji.prototype;function ao(t,e){var n=new io;if(t instanceof io)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}io.prototype=ao.prototype={constructor:io,has:oo.has,add:function(t){return this["$"+(t+="")]=t,this},remove:oo.remove,clear:oo.clear,values:oo.keys,size:oo.size,empty:oo.empty,each:oo.each};var so=ao,uo=function(t){var e=[];for(var n in t)e.push(n);return e},co=function(t){var e=[];for(var n in t)e.push(t[n]);return e},lo=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},ho=Math.PI/180,fo=180/Math.PI;function po(t){if(t instanceof go)return new go(t.l,t.a,t.b,t.opacity);if(t instanceof Co)return So(t);t instanceof Ke||(t=Ge(t));var e,n,r=wo(t.r),i=wo(t.g),o=wo(t.b),a=mo((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?e=n=a:(e=mo((.4360747*r+.3850649*i+.1430804*o)/.96422),n=mo((.0139322*r+.0971045*i+.7141733*o)/.82521)),new go(116*a-16,500*(e-a),200*(a-n),t.opacity)}function yo(t,e){return new go(t,0,0,null==e?1:e)}function vo(t,e,n,r){return 1===arguments.length?po(t):new go(t,e,n,null==r?1:r)}function go(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function mo(t){return t>6/29*(6/29)*(6/29)?Math.pow(t,1/3):t/(6/29*3*(6/29))+4/29}function _o(t){return t>6/29?t*t*t:6/29*3*(6/29)*(t-4/29)}function bo(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function wo(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Eo(t){if(t instanceof Co)return new Co(t.h,t.c,t.l,t.opacity);if(t instanceof go||(t=po(t)),0===t.a&&0===t.b)return new Co(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*fo;return new Co(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function To(t,e,n,r){return 1===arguments.length?Eo(t):new Co(n,e,t,null==r?1:r)}function xo(t,e,n,r){return 1===arguments.length?Eo(t):new Co(t,e,n,null==r?1:r)}function Co(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function So(t){if(isNaN(t.h))return new go(t.l,0,0,t.opacity);var e=t.h*ho;return new go(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Ne(go,vo,ke(Ae,{brighter:function(t){return new go(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new go(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Ke(bo(3.1338561*(e=.96422*_o(e))-1.6168667*(t=1*_o(t))-.4906146*(n=.82521*_o(n))),bo(-.9787684*e+1.9161415*t+.033454*n),bo(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Ne(Co,xo,ke(Ae,{brighter:function(t){return new Co(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Co(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return So(this).rgb()}}));var Io=-.29227,No=-1.7884503806,ko=3.5172982438,Ao=-.6557636667999999;function Po(t){if(t instanceof Ro)return new Ro(t.h,t.s,t.l,t.opacity);t instanceof Ke||(t=Ge(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Ao*r+No*e-ko*n)/(Ao+No-ko),o=r-i,a=(1.97294*(n-i)-Io*o)/-.90649,s=Math.sqrt(a*a+o*o)/(1.97294*i*(1-i)),u=s?Math.atan2(a,o)*fo-120:NaN;return new Ro(u<0?u+360:u,s,i,t.opacity)}function Oo(t,e,n,r){return 1===arguments.length?Po(t):new Ro(t,e,n,null==r?1:r)}function Ro(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ne(Ro,Oo,ke(Ae,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ro(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ro(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*ho,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Ke(255*(e+n*(-.14861*r+1.78277*i)),255*(e+n*(Io*r+-.90649*i)),255*(e+n*(1.97294*r)),this.opacity)}}));var Do=Array.prototype.slice,Mo=function(t,e){return t-e},Lo=function(t){return function(){return t}},Fo=function(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=jo(t,e[r]))return n;return 0};function jo(t,e){for(var n=e[0],r=e[1],i=-1,o=0,a=t.length,s=a-1;o<a;s=o++){var u=t[o],c=u[0],l=u[1],h=t[s],f=h[0],p=h[1];if(Uo(u,h,e))return 0;l>r!=p>r&&n<(f-c)*(r-l)/(p-l)+c&&(i=-i)}return i}function Uo(t,e,n){var r,i,o,a;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(i=t[r=+(t[0]===e[0])],o=n[r],a=e[r],i<=o&&o<=a||a<=o&&o<=i)}var Vo=function(){},qo=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],Bo=function(){var t=1,e=1,n=A,r=s;function i(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(Mo);else{var r=g(t),i=r[0],a=r[1];e=k(i,a,e),e=T(Math.floor(i/e)*e,Math.floor(a/e)*e,e)}return e.map((function(e){return o(t,e)}))}function o(n,i){var o=[],s=[];return function(n,r,i){var o,s,u,c,l,h,f=new Array,p=new Array;o=s=-1,c=n[0]>=r,qo[c<<1].forEach(d);for(;++o<t-1;)u=c,c=n[o+1]>=r,qo[u|c<<1].forEach(d);qo[c<<0].forEach(d);for(;++s<e-1;){for(o=-1,c=n[s*t+t]>=r,l=n[s*t]>=r,qo[c<<1|l<<2].forEach(d);++o<t-1;)u=c,c=n[s*t+t+o+1]>=r,h=l,l=n[s*t+o+1]>=r,qo[u|c<<1|l<<2|h<<3].forEach(d);qo[c|l<<3].forEach(d)}o=-1,l=n[s*t]>=r,qo[l<<2].forEach(d);for(;++o<t-1;)h=l,l=n[s*t+o+1]>=r,qo[l<<2|h<<3].forEach(d);function d(t){var e,n,r=[t[0][0]+o,t[0][1]+s],u=[t[1][0]+o,t[1][1]+s],c=a(r),l=a(u);(e=p[c])?(n=f[l])?(delete p[e.end],delete f[n.start],e===n?(e.ring.push(u),i(e.ring)):f[e.start]=p[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete p[e.end],e.ring.push(u),p[e.end=l]=e):(e=f[l])?(n=p[c])?(delete f[e.start],delete p[n.end],e===n?(e.ring.push(u),i(e.ring)):f[n.start]=p[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete f[e.start],e.ring.unshift(r),f[e.start=c]=e):f[c]=p[l]={start:c,end:l,ring:[r,u]}}qo[l<<3].forEach(d)}(n,i,(function(t){r(t,n,i),function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}(t)>0?o.push([t]):s.push(t)})),s.forEach((function(t){for(var e,n=0,r=o.length;n<r;++n)if(-1!==Fo((e=o[n])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:i,coordinates:o}}function a(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,r,i){n.forEach((function(n){var o,a=n[0],s=n[1],u=0|a,c=0|s,l=r[c*t+u];a>0&&a<t&&u===a&&(o=r[c*t+u-1],n[0]=a+(i-o)/(l-o)-.5),s>0&&s<e&&c===s&&(o=r[(c-1)*t+u],n[1]=s+(i-o)/(l-o)-.5)}))}return i.contour=o,i.size=function(n){if(!arguments.length)return[t,e];var r=Math.ceil(n[0]),o=Math.ceil(n[1]);if(!(r>0&&o>0))throw new Error("invalid size");return t=r,e=o,i},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?Lo(Do.call(t)):Lo(t),i):n},i.smooth=function(t){return arguments.length?(r=t?s:Vo,i):r===s},i};function zo(t,e,n){for(var r=t.width,i=t.height,o=1+(n<<1),a=0;a<i;++a)for(var s=0,u=0;s<r+n;++s)s<r&&(u+=t.data[s+a*r]),s>=n&&(s>=o&&(u-=t.data[s-o+a*r]),e.data[s-n+a*r]=u/Math.min(s+1,r-1+o-s,o))}function Wo(t,e,n){for(var r=t.width,i=t.height,o=1+(n<<1),a=0;a<r;++a)for(var s=0,u=0;s<i+n;++s)s<i&&(u+=t.data[a+s*r]),s>=n&&(s>=o&&(u-=t.data[a+(s-o)*r]),e.data[a+(s-n)*r]=u/Math.min(s+1,i-1+o-s,o))}function Ho(t){return t[0]}function Qo(t){return t[1]}function Go(){return 1}var Yo=function(){var t=Ho,e=Qo,n=Go,r=960,i=500,o=20,a=2,s=3*o,u=r+2*s>>a,c=i+2*s>>a,l=Lo(20);function h(r){var i=new Float32Array(u*c),h=new Float32Array(u*c);r.forEach((function(r,o,l){var h=+t(r,o,l)+s>>a,f=+e(r,o,l)+s>>a,p=+n(r,o,l);h>=0&&h<u&&f>=0&&f<c&&(i[h+f*u]+=p)})),zo({width:u,height:c,data:i},{width:u,height:c,data:h},o>>a),Wo({width:u,height:c,data:h},{width:u,height:c,data:i},o>>a),zo({width:u,height:c,data:i},{width:u,height:c,data:h},o>>a),Wo({width:u,height:c,data:h},{width:u,height:c,data:i},o>>a),zo({width:u,height:c,data:i},{width:u,height:c,data:h},o>>a),Wo({width:u,height:c,data:h},{width:u,height:c,data:i},o>>a);var p=l(i);if(!Array.isArray(p)){var d=M(i);p=k(0,d,p),(p=T(0,Math.floor(d/p)*p,p)).shift()}return Bo().thresholds(p).size([u,c])(i).map(f)}function f(t){return t.value*=Math.pow(2,-2*a),t.coordinates.forEach(p),t}function p(t){t.forEach(d)}function d(t){t.forEach(y)}function y(t){t[0]=t[0]*Math.pow(2,a)-s,t[1]=t[1]*Math.pow(2,a)-s}function v(){return u=r+2*(s=3*o)>>a,c=i+2*s>>a,h}return h.x=function(e){return arguments.length?(t="function"==typeof e?e:Lo(+e),h):t},h.y=function(t){return arguments.length?(e="function"==typeof t?t:Lo(+t),h):e},h.weight=function(t){return arguments.length?(n="function"==typeof t?t:Lo(+t),h):n},h.size=function(t){if(!arguments.length)return[r,i];var e=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!(e>=0||e>=0))throw new Error("invalid size");return r=e,i=n,v()},h.cellSize=function(t){if(!arguments.length)return 1<<a;if(!((t=+t)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(t)/Math.LN2),v()},h.thresholds=function(t){return arguments.length?(l="function"==typeof t?t:Array.isArray(t)?Lo(Do.call(t)):Lo(t),h):l},h.bandwidth=function(t){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return o=Math.round((Math.sqrt(4*t*t+1)-1)/2),v()},h},Ko=function(t){return function(){return t}};function $o(t,e,n,r,i,o,a,s,u,c){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=s,this.dy=u,this._=c}function Xo(){return!ce.ctrlKey&&!ce.button}function Jo(){return this.parentNode}function Zo(t){return null==t?{x:ce.x,y:ce.y}:t}function ta(){return navigator.maxTouchPoints||"ontouchstart"in this}$o.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var ea=function(){var t,e,n,r,i=Xo,o=Jo,a=Zo,s=ta,u={},c=ht("start","drag","end"),l=0,h=0;function f(t){t.on("mousedown.drag",p).filter(s).on("touchstart.drag",v).on("touchmove.drag",g).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(){if(!r&&i.apply(this,arguments)){var a=_("mouse",o.apply(this,arguments),Rn,this,arguments);a&&(Te(ce.view).on("mousemove.drag",d,!0).on("mouseup.drag",y,!0),Se(ce.view),xe(),n=!1,t=ce.clientX,e=ce.clientY,a("start"))}}function d(){if(Ce(),!n){var r=ce.clientX-t,i=ce.clientY-e;n=r*r+i*i>h}u.mouse("drag")}function y(){Te(ce.view).on("mousemove.drag mouseup.drag",null),Ie(ce.view,n),Ce(),u.mouse("end")}function v(){if(i.apply(this,arguments)){var t,e,n=ce.changedTouches,r=o.apply(this,arguments),a=n.length;for(t=0;t<a;++t)(e=_(n[t].identifier,r,On,this,arguments))&&(xe(),e("start"))}}function g(){var t,e,n=ce.changedTouches,r=n.length;for(t=0;t<r;++t)(e=u[n[t].identifier])&&(Ce(),e("drag"))}function m(){var t,e,n=ce.changedTouches,i=n.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<i;++t)(e=u[n[t].identifier])&&(xe(),e("end"))}function _(t,e,n,r,i){var o,s,h,p=n(e,t),d=c.copy();if(ye(new $o(f,"beforestart",o,t,l,p[0],p[1],0,0,d),(function(){return null!=(ce.subject=o=a.apply(r,i))&&(s=o.x-p[0]||0,h=o.y-p[1]||0,!0)})))return function a(c){var y,v=p;switch(c){case"start":u[t]=a,y=l++;break;case"end":delete u[t],--l;case"drag":p=n(e,t),y=l}ye(new $o(f,c,o,t,y,p[0]+s,p[1]+h,p[0]-v[0],p[1]-v[1],d),d.apply,d,[c,r,i])}}return f.filter=function(t){return arguments.length?(i="function"==typeof t?t:Ko(!!t),f):i},f.container=function(t){return arguments.length?(o="function"==typeof t?t:Ko(t),f):o},f.subject=function(t){return arguments.length?(a="function"==typeof t?t:Ko(t),f):a},f.touchable=function(t){return arguments.length?(s="function"==typeof t?t:Ko(!!t),f):s},f.on=function(){var t=c.on.apply(c,arguments);return t===c?f:t},f.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,f):Math.sqrt(h)},f},na={},ra={};function ia(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function oa(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function aa(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function sa(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+aa(-e,6):e>9999?"+"+aa(e,6):aa(e,4))+"-"+aa(t.getUTCMonth()+1,2)+"-"+aa(t.getUTCDate(),2)+(o?"T"+aa(n,2)+":"+aa(r,2)+":"+aa(i,2)+"."+aa(o,3)+"Z":i?"T"+aa(n,2)+":"+aa(r,2)+":"+aa(i,2)+"Z":r||n?"T"+aa(n,2)+":"+aa(r,2)+"Z":"")}var ua=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,s=0,u=o<=0,c=!1;function l(){if(u)return ra;if(c)return c=!1,na;var e,r,i=a;if(34===t.charCodeAt(i)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(e=a)>=o?u=!0:10===(r=t.charCodeAt(a++))?c=!0:13===r&&(c=!0,10===t.charCodeAt(a)&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=t.charCodeAt(e=a++)))c=!0;else if(13===r)c=!0,10===t.charCodeAt(a)&&++a;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=l())!==ra;){for(var h=[];r!==na&&r!==ra;)h.push(r),r=l();e&&null==(h=e(h,s++))||i.push(h)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return a(e[t])})).join(t)}))}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?sa(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=ia(t);return function(r,i){return e(n(r),i,t)}}(t,e):ia(t)}));return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=oa(e)),[n.map(a).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=oa(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}},ca=ua(","),la=ca.parse,ha=ca.parseRows,fa=ca.format,pa=ca.formatBody,da=ca.formatRows,ya=ca.formatRow,va=ca.formatValue,ga=ua("\t"),ma=ga.parse,_a=ga.parseRows,ba=ga.format,wa=ga.formatBody,Ea=ga.formatRows,Ta=ga.formatRow,xa=ga.formatValue;function Ca(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Sa&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}var Sa=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Ia(t){return+t}function Na(t){return t*t}function ka(t){return t*(2-t)}function Aa(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}var Pa=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),Oa=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Ra=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Da=Math.PI,Ma=Da/2;function La(t){return 1-Math.cos(t*Ma)}function Fa(t){return Math.sin(t*Ma)}function ja(t){return(1-Math.cos(Da*t))/2}function Ua(t){return Math.pow(2,10*t-10)}function Va(t){return 1-Math.pow(2,-10*t)}function qa(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function Ba(t){return 1-Math.sqrt(1-t*t)}function za(t){return Math.sqrt(1- --t*t)}function Wa(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function Ha(t){return 1-Qa(1-t)}function Qa(t){return(t=+t)<4/11?7.5625*t*t:t<8/11?7.5625*(t-=6/11)*t+3/4:t<10/11?7.5625*(t-=9/11)*t+15/16:7.5625*(t-=21/22)*t+63/64}function Ga(t){return((t*=2)<=1?1-Qa(1-t):Qa(t-1)+1)/2}var Ya=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),Ka=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),$a=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),Xa=2*Math.PI,Ja=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Xa);function i(t){return e*Math.pow(2,10*--t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*Xa)},i.period=function(n){return t(e,n)},i}(1,.3),Za=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Xa);function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*Xa)},i.period=function(n){return t(e,n)},i}(1,.3),ts=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Xa);function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((r-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*Xa)},i.period=function(n){return t(e,n)},i}(1,.3);function es(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}var ns=function(t,e){return fetch(t,e).then(es)};function rs(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}var is=function(t,e){return fetch(t,e).then(rs)};function os(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var as=function(t,e){return fetch(t,e).then(os)};function ss(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),as(e,n).then((function(e){return t(e,r)}))}}function us(t,e,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=ua(t);return as(e,n).then((function(t){return i.parse(t,r)}))}var cs=ss(la),ls=ss(ma),hs=function(t,e){return new Promise((function(n,r){var i=new Image;for(var o in e)i[o]=e[o];i.onerror=r,i.onload=function(){n(i)},i.src=t}))};function fs(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}var ps=function(t,e){return fetch(t,e).then(fs)};function ds(t){return function(e,n){return as(e,n).then((function(e){return(new DOMParser).parseFromString(e,t)}))}}var ys=ds("application/xml"),vs=ds("text/html"),gs=ds("image/svg+xml"),ms=function(t,e){var n;function r(){var r,i,o=n.length,a=0,s=0;for(r=0;r<o;++r)a+=(i=n[r]).x,s+=i.y;for(a=a/o-t,s=s/o-e,r=0;r<o;++r)(i=n[r]).x-=a,i.y-=s}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r},_s=function(t){return function(){return t}},bs=function(){return 1e-6*(Math.random()-.5)};function ws(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,c,l,h,f,p=t._root,d={data:r},y=t._x0,v=t._y0,g=t._x1,m=t._y1;if(!p)return t._root=d,t;for(;p.length;)if((c=e>=(o=(y+g)/2))?y=o:g=o,(l=n>=(a=(v+m)/2))?v=a:m=a,i=p,!(p=p[h=l<<1|c]))return i[h]=d,t;if(s=+t._x.call(null,p.data),u=+t._y.call(null,p.data),e===s&&n===u)return d.next=p,i?i[h]=d:t._root=d,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(c=e>=(o=(y+g)/2))?y=o:g=o,(l=n>=(a=(v+m)/2))?v=a:m=a}while((h=l<<1|c)==(f=(u>=a)<<1|s>=o));return i[f]=p,i[h]=d,t}var Es=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i};function Ts(t){return t[0]}function xs(t){return t[1]}function Cs(t,e,n){var r=new Ss(null==e?Ts:e,null==n?xs:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Ss(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Is(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Ns=Cs.prototype=Ss.prototype;function ks(t){return t.x+t.vx}function As(t){return t.y+t.vy}Ns.copy=function(){var t,e,n=new Ss(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Is(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=Is(e));return n},Ns.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return ws(this.cover(e,n),e,n,t)},Ns.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,c=1/0,l=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<u&&(u=r),r>l&&(l=r),i<c&&(c=i),i>h&&(h=i));if(u>l||c>h)return this;for(this.cover(u,c).cover(l,h),n=0;n<o;++n)ws(this,a[n],s[n],t[n]);return this},Ns.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,u=i-n,c=this._root;n>t||t>=i||r>e||e>=o;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=c,c=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},Ns.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Ns.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ns.find=function(t,e,n){var r,i,o,a,s,u,c,l=this._x0,h=this._y0,f=this._x1,p=this._y1,d=[],y=this._root;for(y&&d.push(new Es(y,l,h,f,p)),null==n?n=1/0:(l=t-n,h=e-n,f=t+n,p=e+n,n*=n);u=d.pop();)if(!(!(y=u.node)||(i=u.x0)>f||(o=u.y0)>p||(a=u.x1)<l||(s=u.y1)<h))if(y.length){var v=(i+a)/2,g=(o+s)/2;d.push(new Es(y[3],v,g,a,s),new Es(y[2],i,g,v,s),new Es(y[1],v,o,a,g),new Es(y[0],i,o,v,g)),(c=(e>=g)<<1|t>=v)&&(u=d[d.length-1],d[d.length-1]=d[d.length-1-c],d[d.length-1-c]=u)}else{var m=t-+this._x.call(null,y.data),_=e-+this._y.call(null,y.data),b=m*m+_*_;if(b<n){var w=Math.sqrt(n=b);l=t-w,h=e-w,f=t+w,p=e+w,r=y.data}}return r},Ns.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,l,h,f,p=this._root,d=this._x0,y=this._y0,v=this._x1,g=this._y1;if(!p)return this;if(p.length)for(;;){if((c=o>=(s=(d+v)/2))?d=s:v=s,(l=a>=(u=(y+g)/2))?y=u:g=u,e=p,!(p=p[h=l<<1|c]))return this;if(!p.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;p.data!==t;)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[f]=p:this._root=p),this):(this._root=i,this)},Ns.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Ns.root=function(){return this._root},Ns.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Ns.visit=function(t){var e,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new Es(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var c=(r+o)/2,l=(i+a)/2;(n=u[3])&&s.push(new Es(n,c,l,o,a)),(n=u[2])&&s.push(new Es(n,r,l,c,a)),(n=u[1])&&s.push(new Es(n,c,i,o,l)),(n=u[0])&&s.push(new Es(n,r,i,c,l))}return this},Ns.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Es(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,c=e.y1,l=(a+u)/2,h=(s+c)/2;(o=i[0])&&n.push(new Es(o,a,s,l,h)),(o=i[1])&&n.push(new Es(o,l,s,u,h)),(o=i[2])&&n.push(new Es(o,a,h,l,c)),(o=i[3])&&n.push(new Es(o,l,h,u,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Ns.x=function(t){return arguments.length?(this._x=t,this):this._x},Ns.y=function(t){return arguments.length?(this._y=t,this):this._y};var Ps=function(t){var e,n,r=1,i=1;function o(){for(var t,o,s,u,c,l,h,f=e.length,p=0;p<i;++p)for(o=Cs(e,ks,As).visitAfter(a),t=0;t<f;++t)s=e[t],l=n[s.index],h=l*l,u=s.x+s.vx,c=s.y+s.vy,o.visit(d);function d(t,e,n,i,o){var a=t.data,f=t.r,p=l+f;if(!a)return e>u+p||i<u-p||n>c+p||o<c-p;if(a.index>s.index){var d=u-a.x-a.vx,y=c-a.y-a.vy,v=d*d+y*y;v<p*p&&(0===d&&(v+=(d=bs())*d),0===y&&(v+=(y=bs())*y),v=(p-(v=Math.sqrt(v)))/v*r,s.vx+=(d*=v)*(p=(f*=f)/(h+f)),s.vy+=(y*=v)*p,a.vx-=d*(p=1-p),a.vy-=y*p)}}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=_s(null==t?1:+t)),o.initialize=function(t){e=t,s()},o.iterations=function(t){return arguments.length?(i=+t,o):i},o.strength=function(t){return arguments.length?(r=+t,o):r},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:_s(+e),s(),o):t},o};function Os(t){return t.index}function Rs(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}var Ds=function(t){var e,n,r,i,o,a=Os,s=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=_s(30),c=1;function l(r){for(var i=0,a=t.length;i<c;++i)for(var s,u,l,h,f,p,d,y=0;y<a;++y)u=(s=t[y]).source,h=(l=s.target).x+l.vx-u.x-u.vx||bs(),f=l.y+l.vy-u.y-u.vy||bs(),h*=p=((p=Math.sqrt(h*h+f*f))-n[y])/p*r*e[y],f*=p,l.vx-=h*(d=o[y]),l.vy-=f*d,u.vx+=h*(d=1-d),u.vy+=f*d}function h(){if(r){var s,u,c=r.length,l=t.length,h=Ji(r,a);for(s=0,i=new Array(c);s<l;++s)(u=t[s]).index=s,"object"!=typeof u.source&&(u.source=Rs(h,u.source)),"object"!=typeof u.target&&(u.target=Rs(h,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(s=0,o=new Array(l);s<l;++s)u=t[s],o[s]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(l),f(),n=new Array(l),p()}}function f(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+s(t[n],n,t)}function p(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),l.initialize=function(t){r=t,h()},l.links=function(e){return arguments.length?(t=e,h(),l):t},l.id=function(t){return arguments.length?(a=t,l):a},l.iterations=function(t){return arguments.length?(c=+t,l):c},l.strength=function(t){return arguments.length?(s="function"==typeof t?t:_s(+t),f(),l):s},l.distance=function(t){return arguments.length?(u="function"==typeof t?t:_s(+t),p(),l):u},l};function Ms(t){return t.x}function Ls(t){return t.y}var Fs=Math.PI*(3-Math.sqrt(5)),js=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=Ji(),u=Hn(l),c=ht("tick","end");function l(){h(),c.call("tick",e),n<r&&(u.stop(),c.call("end",e))}function h(r){var u,c,l=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(o-n)*i,s.each((function(t){t(n)})),u=0;u<l;++u)null==(c=t[u]).fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return e}function f(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(n),o=n*Fs;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),f(),e={tick:h,restart:function(){return u.restart(l),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),s.each(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},force:function(t,n){return arguments.length>1?(null==n?s.remove(t):s.set(t,p(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,u,c=0,l=t.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)(a=(i=e-(s=t[c]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}},Us=function(){var t,e,n,r,i=_s(-30),o=1,a=1/0,s=.81;function u(r){var i,o=t.length,a=Cs(t,Ms,Ls).visitAfter(l);for(n=r,i=0;i<o;++i)e=t[i],a.visit(h)}function c(){if(t){var e,n,o=t.length;for(r=new Array(o),e=0;e<o;++e)n=t[e],r[n.index]=+i(n,e,t)}}function l(t){var e,n,i,o,a,s=0,u=0;if(t.length){for(i=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,i+=n*e.x,o+=n*e.y);t.x=i/u,t.y=o/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=r[e.data.index]}while(e=e.next)}t.value=s}function h(t,i,u,c){if(!t.value)return!0;var l=t.x-e.x,h=t.y-e.y,f=c-i,p=l*l+h*h;if(f*f/s<p)return p<a&&(0===l&&(p+=(l=bs())*l),0===h&&(p+=(h=bs())*h),p<o&&(p=Math.sqrt(o*p)),e.vx+=l*t.value*n/p,e.vy+=h*t.value*n/p),!0;if(!(t.length||p>=a)){(t.data!==e||t.next)&&(0===l&&(p+=(l=bs())*l),0===h&&(p+=(h=bs())*h),p<o&&(p=Math.sqrt(o*p)));do{t.data!==e&&(f=r[t.data.index]*n/p,e.vx+=l*f,e.vy+=h*f)}while(t=t.next)}}return u.initialize=function(e){t=e,c()},u.strength=function(t){return arguments.length?(i="function"==typeof t?t:_s(+t),c(),u):i},u.distanceMin=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.distanceMax=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.theta=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u},Vs=function(t,e,n){var r,i,o,a=_s(.1);function s(t){for(var a=0,s=r.length;a<s;++a){var u=r[a],c=u.x-e||1e-6,l=u.y-n||1e-6,h=Math.sqrt(c*c+l*l),f=(o[a]-h)*i[a]*t/h;u.vx+=c*f,u.vy+=l*f}}function u(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)o[e]=+t(r[e],e,r),i[e]=isNaN(o[e])?0:+a(r[e],e,r)}}return"function"!=typeof t&&(t=_s(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){r=t,u()},s.strength=function(t){return arguments.length?(a="function"==typeof t?t:_s(+t),u(),s):a},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:_s(+e),u(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s},qs=function(t){var e,n,r,i=_s(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=_s(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:_s(+t),a(),o):i},o.x=function(e){return arguments.length?(t="function"==typeof e?e:_s(+e),a(),o):t},o},Bs=function(t){var e,n,r,i=_s(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=_s(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:_s(+t),a(),o):i},o.y=function(e){return arguments.length?(t="function"==typeof e?e:_s(+e),a(),o):t},o},zs=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},Ws=function(t){return(t=zs(Math.abs(t)))?t[1]:NaN},Hs=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qs(t){if(!(e=Hs.exec(t)))throw new Error("invalid format: "+t);var e;return new Gs({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Gs(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}Qs.prototype=Gs.prototype,Gs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ys,Ks,$s,Xs,Js=function(t,e){var n=zs(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Zs={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Js(100*t,e)},r:Js,s:function(t,e){var n=zs(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Ys=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+zs(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},tu=function(t){return t},eu=Array.prototype.map,nu=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],ru=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?tu:(e=eu.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?tu:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(eu.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"-":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Qs(t)).fill,n=t.align,h=t.sign,f=t.symbol,p=t.zero,d=t.width,y=t.comma,v=t.precision,g=t.trim,m=t.type;"n"===m?(y=!0,m="g"):Zs[m]||(void 0===v&&(v=12),g=!0,m="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var _="$"===f?i:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===f?o:/[%p]/.test(m)?u:"",w=Zs[m],E=/[defgprs%]/.test(m);function T(t){var i,o,u,f=_,T=b;if("c"===m)T=w(t)+T,t="";else{var x=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:w(Math.abs(t),v),g&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),x&&0==+t&&"+"!==h&&(x=!1),f=(x?"("===h?h:c:"-"===h||"("===h?"":h)+f,T=("s"===m?nu[8+Ys/3]:"")+T+(x&&"("===h?")":""),E)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){T=(46===u?a+t.slice(i+1):t.slice(i))+T,t=t.slice(0,i);break}}y&&!p&&(t=r(t,1/0));var C=f.length+t.length+T.length,S=C<d?new Array(d-C+1).join(e):"";switch(y&&p&&(t=r(S+t,S.length?d-T.length:1/0),S=""),n){case"<":t=f+t+T+S;break;case"=":t=f+S+t+T;break;case"^":t=S.slice(0,C=S.length>>1)+f+t+T+S.slice(C);break;default:t=S+f+t+T}return s(t)}return v=void 0===v?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),T.toString=function(){return t+""},T}return{format:h,formatPrefix:function(t,e){var n=h(((t=Qs(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Ws(e)/3))),i=Math.pow(10,-r),o=nu[8+r/3];return function(t){return n(i*t)+o}}}};function iu(t){return Ks=ru(t),$s=Ks.format,Xs=Ks.formatPrefix,Ks}iu({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var ou=function(t){return Math.max(0,-Ws(Math.abs(t)))},au=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ws(e)/3)))-Ws(Math.abs(t)))},su=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ws(e)-Ws(t))+1},uu=function(){return new cu};function cu(){this.reset()}cu.prototype={constructor:cu,reset:function(){this.s=this.t=0},add:function(t){hu(lu,t,this.t),hu(this,lu.s,this.s),this.s?this.t+=lu.t:this.s=lu.t},valueOf:function(){return this.s}};var lu=new cu;function hu(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var fu=Math.PI,pu=fu/2,du=fu/4,yu=2*fu,vu=180/fu,gu=fu/180,mu=Math.abs,_u=Math.atan,bu=Math.atan2,wu=Math.cos,Eu=Math.ceil,Tu=Math.exp,xu=(Math.floor,Math.log),Cu=Math.pow,Su=Math.sin,Iu=Math.sign||function(t){return t>0?1:t<0?-1:0},Nu=Math.sqrt,ku=Math.tan;function Au(t){return t>1?0:t<-1?fu:Math.acos(t)}function Pu(t){return t>1?pu:t<-1?-pu:Math.asin(t)}function Ou(t){return(t=Su(t/2))*t}function Ru(){}function Du(t,e){t&&Lu.hasOwnProperty(t.type)&&Lu[t.type](t,e)}var Mu={Feature:function(t,e){Du(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Du(n[r].geometry,e)}},Lu={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Fu(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Fu(n[r],e,0)},Polygon:function(t,e){ju(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ju(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Du(n[r],e)}};function Fu(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function ju(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Fu(t[n],e,1);e.polygonEnd()}var Uu,Vu,qu,Bu,zu,Wu=function(t,e){t&&Mu.hasOwnProperty(t.type)?Mu[t.type](t,e):Du(t,e)},Hu=uu(),Qu=uu(),Gu={point:Ru,lineStart:Ru,lineEnd:Ru,polygonStart:function(){Hu.reset(),Gu.lineStart=Yu,Gu.lineEnd=Ku},polygonEnd:function(){var t=+Hu;Qu.add(t<0?yu+t:t),this.lineStart=this.lineEnd=this.point=Ru},sphere:function(){Qu.add(yu)}};function Yu(){Gu.point=$u}function Ku(){Xu(Uu,Vu)}function $u(t,e){Gu.point=Xu,Uu=t,Vu=e,qu=t*=gu,Bu=wu(e=(e*=gu)/2+du),zu=Su(e)}function Xu(t,e){var n=(t*=gu)-qu,r=n>=0?1:-1,i=r*n,o=wu(e=(e*=gu)/2+du),a=Su(e),s=zu*a,u=Bu*o+s*wu(i),c=s*r*Su(i);Hu.add(bu(c,u)),qu=t,Bu=o,zu=a}var Ju=function(t){return Qu.reset(),Wu(t,Gu),2*Qu};function Zu(t){return[bu(t[1],t[0]),Pu(t[2])]}function tc(t){var e=t[0],n=t[1],r=wu(n);return[r*wu(e),r*Su(e),Su(n)]}function ec(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function nc(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function rc(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ic(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function oc(t){var e=Nu(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var ac,sc,uc,cc,lc,hc,fc,pc,dc,yc,vc=uu(),gc={point:mc,lineStart:bc,lineEnd:wc,polygonStart:function(){gc.point=Ec,gc.lineStart=Tc,gc.lineEnd=xc,vc.reset(),Gu.polygonStart()},polygonEnd:function(){Gu.polygonEnd(),gc.point=mc,gc.lineStart=bc,gc.lineEnd=wc,Hu<0?(ac=-(uc=180),sc=-(cc=90)):vc>1e-6?cc=90:vc<-1e-6&&(sc=-90),yc[0]=ac,yc[1]=uc},sphere:function(){ac=-(uc=180),sc=-(cc=90)}};function mc(t,e){dc.push(yc=[ac=t,uc=t]),e<sc&&(sc=e),e>cc&&(cc=e)}function _c(t,e){var n=tc([t*gu,e*gu]);if(pc){var r=nc(pc,n),i=nc([r[1],-r[0],0],r);oc(i),i=Zu(i);var o,a=t-lc,s=a>0?1:-1,u=i[0]*vu*s,c=mu(a)>180;c^(s*lc<u&&u<s*t)?(o=i[1]*vu)>cc&&(cc=o):c^(s*lc<(u=(u+360)%360-180)&&u<s*t)?(o=-i[1]*vu)<sc&&(sc=o):(e<sc&&(sc=e),e>cc&&(cc=e)),c?t<lc?Cc(ac,t)>Cc(ac,uc)&&(uc=t):Cc(t,uc)>Cc(ac,uc)&&(ac=t):uc>=ac?(t<ac&&(ac=t),t>uc&&(uc=t)):t>lc?Cc(ac,t)>Cc(ac,uc)&&(uc=t):Cc(t,uc)>Cc(ac,uc)&&(ac=t)}else dc.push(yc=[ac=t,uc=t]);e<sc&&(sc=e),e>cc&&(cc=e),pc=n,lc=t}function bc(){gc.point=_c}function wc(){yc[0]=ac,yc[1]=uc,gc.point=mc,pc=null}function Ec(t,e){if(pc){var n=t-lc;vc.add(mu(n)>180?n+(n>0?360:-360):n)}else hc=t,fc=e;Gu.point(t,e),_c(t,e)}function Tc(){Gu.lineStart()}function xc(){Ec(hc,fc),Gu.lineEnd(),mu(vc)>1e-6&&(ac=-(uc=180)),yc[0]=ac,yc[1]=uc,pc=null}function Cc(t,e){return(e-=t)<0?e+360:e}function Sc(t,e){return t[0]-e[0]}function Ic(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var Nc,kc,Ac,Pc,Oc,Rc,Dc,Mc,Lc,Fc,jc,Uc,Vc,qc,Bc,zc,Wc=function(t){var e,n,r,i,o,a,s;if(cc=uc=-(ac=sc=1/0),dc=[],Wu(t,gc),n=dc.length){for(dc.sort(Sc),e=1,o=[r=dc[0]];e<n;++e)Ic(r,(i=dc[e])[0])||Ic(r,i[1])?(Cc(r[0],i[1])>Cc(r[0],r[1])&&(r[1]=i[1]),Cc(i[0],r[1])>Cc(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)i=o[e],(s=Cc(r[1],i[0]))>a&&(a=s,ac=i[0],uc=r[1])}return dc=yc=null,ac===1/0||sc===1/0?[[NaN,NaN],[NaN,NaN]]:[[ac,sc],[uc,cc]]},Hc={sphere:Ru,point:Qc,lineStart:Yc,lineEnd:Xc,polygonStart:function(){Hc.lineStart=Jc,Hc.lineEnd=Zc},polygonEnd:function(){Hc.lineStart=Yc,Hc.lineEnd=Xc}};function Qc(t,e){t*=gu;var n=wu(e*=gu);Gc(n*wu(t),n*Su(t),Su(e))}function Gc(t,e,n){++Nc,Ac+=(t-Ac)/Nc,Pc+=(e-Pc)/Nc,Oc+=(n-Oc)/Nc}function Yc(){Hc.point=Kc}function Kc(t,e){t*=gu;var n=wu(e*=gu);qc=n*wu(t),Bc=n*Su(t),zc=Su(e),Hc.point=$c,Gc(qc,Bc,zc)}function $c(t,e){t*=gu;var n=wu(e*=gu),r=n*wu(t),i=n*Su(t),o=Su(e),a=bu(Nu((a=Bc*o-zc*i)*a+(a=zc*r-qc*o)*a+(a=qc*i-Bc*r)*a),qc*r+Bc*i+zc*o);kc+=a,Rc+=a*(qc+(qc=r)),Dc+=a*(Bc+(Bc=i)),Mc+=a*(zc+(zc=o)),Gc(qc,Bc,zc)}function Xc(){Hc.point=Qc}function Jc(){Hc.point=tl}function Zc(){el(Uc,Vc),Hc.point=Qc}function tl(t,e){Uc=t,Vc=e,t*=gu,e*=gu,Hc.point=el;var n=wu(e);qc=n*wu(t),Bc=n*Su(t),zc=Su(e),Gc(qc,Bc,zc)}function el(t,e){t*=gu;var n=wu(e*=gu),r=n*wu(t),i=n*Su(t),o=Su(e),a=Bc*o-zc*i,s=zc*r-qc*o,u=qc*i-Bc*r,c=Nu(a*a+s*s+u*u),l=Pu(c),h=c&&-l/c;Lc+=h*a,Fc+=h*s,jc+=h*u,kc+=l,Rc+=l*(qc+(qc=r)),Dc+=l*(Bc+(Bc=i)),Mc+=l*(zc+(zc=o)),Gc(qc,Bc,zc)}var nl=function(t){Nc=kc=Ac=Pc=Oc=Rc=Dc=Mc=Lc=Fc=jc=0,Wu(t,Hc);var e=Lc,n=Fc,r=jc,i=e*e+n*n+r*r;return i<1e-12&&(e=Rc,n=Dc,r=Mc,kc<1e-6&&(e=Ac,n=Pc,r=Oc),(i=e*e+n*n+r*r)<1e-12)?[NaN,NaN]:[bu(n,e)*vu,Pu(r/Nu(i))*vu]},rl=function(t){return function(){return t}},il=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};function ol(t,e){return[mu(t)>fu?t+Math.round(-t/yu)*yu:t,e]}function al(t,e,n){return(t%=yu)?e||n?il(ul(t),cl(e,n)):ul(t):e||n?cl(e,n):ol}function sl(t){return function(e,n){return[(e+=t)>fu?e-yu:e<-fu?e+yu:e,n]}}function ul(t){var e=sl(t);return e.invert=sl(-t),e}function cl(t,e){var n=wu(t),r=Su(t),i=wu(e),o=Su(e);function a(t,e){var a=wu(e),s=wu(t)*a,u=Su(t)*a,c=Su(e),l=c*n+s*r;return[bu(u*i-l*o,s*n-c*r),Pu(l*i+u*o)]}return a.invert=function(t,e){var a=wu(e),s=wu(t)*a,u=Su(t)*a,c=Su(e),l=c*i-u*o;return[bu(u*i+c*o,s*n+l*r),Pu(l*n-s*r)]},a}ol.invert=ol;var ll=function(t){function e(e){return(e=t(e[0]*gu,e[1]*gu))[0]*=vu,e[1]*=vu,e}return t=al(t[0]*gu,t[1]*gu,t.length>2?t[2]*gu:0),e.invert=function(e){return(e=t.invert(e[0]*gu,e[1]*gu))[0]*=vu,e[1]*=vu,e},e};function hl(t,e,n,r,i,o){if(n){var a=wu(e),s=Su(e),u=r*n;null==i?(i=e+r*yu,o=e-u/2):(i=fl(a,i),o=fl(a,o),(r>0?i<o:i>o)&&(i+=r*yu));for(var c,l=i;r>0?l>o:l<o;l-=u)c=Zu([a,-s*wu(l),-s*Su(l)]),t.point(c[0],c[1])}}function fl(t,e){(e=tc(e))[0]-=t,oc(e);var n=Au(-e[1]);return((-e[2]<0?-n:n)+yu-1e-6)%yu}var pl=function(){var t,e,n=rl([0,0]),r=rl(90),i=rl(6),o={point:function(n,r){t.push(n=e(n,r)),n[0]*=vu,n[1]*=vu}};function a(){var a=n.apply(this,arguments),s=r.apply(this,arguments)*gu,u=i.apply(this,arguments)*gu;return t=[],e=al(-a[0]*gu,-a[1]*gu,0).invert,hl(o,s,u,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:rl([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:rl(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:rl(+t),a):i},a},dl=function(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:Ru,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},yl=function(t,e){return mu(t[0]-e[0])<1e-6&&mu(t[1]-e[1])<1e-6};function vl(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var gl=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(yl(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}s.push(n=new vl(r,t,null,!0)),u.push(n.o=new vl(r,null,n,!1)),s.push(n=new vl(a,t,null,!1)),u.push(n.o=new vl(a,null,n,!0))}})),s.length){for(u.sort(e),ml(s),ml(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var c,l,h=s[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(c=f.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(f.x,f.p.x,-1,i);f=f.p}c=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}};function ml(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var _l=uu();function bl(t){return mu(t[0])<=fu?t[0]:Iu(t[0])*((mu(t[0])+fu)%yu-fu)}var wl=function(t,e){var n=bl(e),r=e[1],i=Su(r),o=[Su(n),-wu(n),0],a=0,s=0;_l.reset(),1===i?r=pu+1e-6:-1===i&&(r=-pu-1e-6);for(var u=0,c=t.length;u<c;++u)if(h=(l=t[u]).length)for(var l,h,f=l[h-1],p=bl(f),d=f[1]/2+du,y=Su(d),v=wu(d),g=0;g<h;++g,p=_,y=w,v=E,f=m){var m=l[g],_=bl(m),b=m[1]/2+du,w=Su(b),E=wu(b),T=_-p,x=T>=0?1:-1,C=x*T,S=C>fu,I=y*w;if(_l.add(bu(I*x*Su(C),v*E+I*wu(C))),a+=S?T+x*yu:T,S^p>=n^_>=n){var N=nc(tc(f),tc(m));oc(N);var k=nc(o,N);oc(k);var A=(S^T>=0?-1:1)*Pu(k[2]);(r>A||r===A&&(N[0]||N[1]))&&(s+=S^T>=0?1:-1)}}return(a<-1e-6||a<1e-6&&_l<-1e-6)^1&s},El=function(t,e,n,r){return function(i){var o,a,s,u=e(i),c=dl(),l=e(c),h=!1,f={point:p,lineStart:y,lineEnd:v,polygonStart:function(){f.point=g,f.lineStart=m,f.lineEnd=_,a=[],o=[]},polygonEnd:function(){f.point=p,f.lineStart=y,f.lineEnd=v,a=j(a);var t=wl(o,r);a.length?(h||(i.polygonStart(),h=!0),gl(a,xl,t,n,i)):t&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(e,n){t(e,n)&&i.point(e,n)}function d(t,e){u.point(t,e)}function y(){f.point=d,u.lineStart()}function v(){f.point=p,u.lineEnd()}function g(t,e){s.push([t,e]),l.point(t,e)}function m(){l.lineStart(),s=[]}function _(){g(s[0][0],s[0][1]),l.lineEnd();var t,e,n,r,u=l.clean(),f=c.result(),p=f.length;if(s.pop(),o.push(s),s=null,p)if(1&u){if((e=(n=f[0]).length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else p>1&&2&u&&f.push(f.pop().concat(f.shift())),a.push(f.filter(Tl))}return f}};function Tl(t){return t.length>1}function xl(t,e){return((t=t.x)[0]<0?t[1]-pu-1e-6:pu-t[1])-((e=e.x)[0]<0?e[1]-pu-1e-6:pu-e[1])}var Cl=El((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?fu:-fu,u=mu(o-n);mu(u-fu)<1e-6?(t.point(n,r=(r+a)/2>0?pu:-pu),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=fu&&(mu(n-i)<1e-6&&(n-=1e-6*i),mu(o-s)<1e-6&&(o-=1e-6*s),r=function(t,e,n,r){var i,o,a=Su(t-n);return mu(a)>1e-6?_u((Su(e)*(o=wu(r))*Su(n)-Su(r)*(i=wu(e))*Su(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*pu,r.point(-fu,i),r.point(0,i),r.point(fu,i),r.point(fu,0),r.point(fu,-i),r.point(0,-i),r.point(-fu,-i),r.point(-fu,0),r.point(-fu,i);else if(mu(t[0]-e[0])>1e-6){var o=t[0]<e[0]?fu:-fu;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-fu,-pu]);var Sl=function(t){var e=wu(t),n=6*gu,r=e>0,i=mu(e)>1e-6;function o(t,n){return wu(t)*wu(n)>e}function a(t,n,r){var i=[1,0,0],o=nc(tc(t),tc(n)),a=ec(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var c=e*a/u,l=-e*s/u,h=nc(i,o),f=ic(i,c);rc(f,ic(o,l));var p=h,d=ec(f,p),y=ec(p,p),v=d*d-y*(ec(f,f)-1);if(!(v<0)){var g=Nu(v),m=ic(p,(-d-g)/y);if(rc(m,f),m=Zu(m),!r)return m;var _,b=t[0],w=n[0],E=t[1],T=n[1];w<b&&(_=b,b=w,w=_);var x=w-b,C=mu(x-fu)<1e-6;if(!C&&T<E&&(_=E,E=T,T=_),C||x<1e-6?C?E+T>0^m[1]<(mu(m[0]-b)<1e-6?E:T):E<=m[1]&&m[1]<=T:x>fu^(b<=m[0]&&m[0]<=w)){var S=ic(p,(-d+g)/y);return rc(S,f),[m,Zu(S)]}}}function s(e,n){var i=r?t:fu-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return El(o,(function(t){var e,n,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(h,f){var p,d=[h,f],y=o(h,f),v=r?y?0:s(h,f):y?s(h+(h<0?fu:-fu),f):0;if(!e&&(c=u=y)&&t.lineStart(),y!==u&&(!(p=a(e,d))||yl(e,p)||yl(d,p))&&(d[2]=1),y!==u)l=0,y?(t.lineStart(),p=a(d,e),t.point(p[0],p[1])):(p=a(e,d),t.point(p[0],p[1],2),t.lineEnd()),e=p;else if(i&&e&&r^y){var g;v&n||!(g=a(d,e,!0))||(l=0,r?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1],3)))}!y||e&&yl(e,d)||t.point(d[0],d[1]),e=d,u=y,n=v},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(c&&u)<<1}}}),(function(e,r,i,o){hl(o,t,n,i,e,r)}),r?[0,-t]:[-fu,t-fu])};function Il(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var l=0,h=0;if(null==i||(l=a(i,s))!==(h=a(o,s))||u(i,o)<0^s>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+s+4)%4)!==h);else c.point(o[0],o[1])}function a(r,i){return mu(r[0]-t)<1e-6?i>0?0:3:mu(r[0]-n)<1e-6?i>0?2:1:mu(r[1]-e)<1e-6?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,c,l,h,f,p,d,y,v,g,m,_=a,b=dl(),w={point:E,lineStart:function(){w.point=T,c&&c.push(l=[]);g=!0,v=!1,d=y=NaN},lineEnd:function(){u&&(T(h,f),p&&v&&b.rejoin(),u.push(b.result()));w.point=E,v&&_.lineEnd()},polygonStart:function(){_=b,u=[],c=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],u=1,l=s.length,h=s[0],f=h[0],p=h[1];u<l;++u)o=f,a=p,h=s[u],f=h[0],p=h[1],a<=r?p>r&&(f-o)*(r-a)>(p-a)*(t-o)&&++e:p<=r&&(f-o)*(r-a)<(p-a)*(t-o)&&--e;return e}(),n=m&&e,i=(u=j(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&gl(u,s,e,o,a),a.polygonEnd());_=a,u=c=l=null}};function E(t,e){i(t,e)&&_.point(t,e)}function T(o,a){var s=i(o,a);if(c&&l.push([o,a]),g)h=o,f=a,p=s,g=!1,s&&(_.lineStart(),_.point(o,a));else if(s&&v)_.point(o,a);else{var u=[d=Math.max(-1e9,Math.min(1e9,d)),y=Math.max(-1e9,Math.min(1e9,y))],b=[o=Math.max(-1e9,Math.min(1e9,o)),a=Math.max(-1e9,Math.min(1e9,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=0,l=1,h=e[0]-s,f=e[1]-u;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<l&&(l=a)}else if(h>0){if(a>l)return;a>c&&(c=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>l)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<l&&(l=a)}if(a=r-u,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<l&&(l=a)}else if(f>0){if(a>l)return;a>c&&(c=a)}if(a=o-u,f||!(a<0)){if(a/=f,f<0){if(a>l)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<l&&(l=a)}return c>0&&(t[0]=s+c*h,t[1]=u+c*f),l<1&&(e[0]=s+l*h,e[1]=u+l*f),!0}}}}}(u,b,t,e,n,r)?s&&(_.lineStart(),_.point(o,a),m=!1):(v||(_.lineStart(),_.point(u[0],u[1])),_.point(b[0],b[1]),s||_.lineEnd(),m=!1)}d=o,y=a,v=s}return w}}var Nl,kl,Al,Pl=function(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=Il(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}},Ol=uu(),Rl={sphere:Ru,point:Ru,lineStart:function(){Rl.point=Ml,Rl.lineEnd=Dl},lineEnd:Ru,polygonStart:Ru,polygonEnd:Ru};function Dl(){Rl.point=Rl.lineEnd=Ru}function Ml(t,e){Nl=t*=gu,kl=Su(e*=gu),Al=wu(e),Rl.point=Ll}function Ll(t,e){t*=gu;var n=Su(e*=gu),r=wu(e),i=mu(t-Nl),o=wu(i),a=r*Su(i),s=Al*n-kl*r*o,u=kl*n+Al*r*o;Ol.add(bu(Nu(a*a+s*s),u)),Nl=t,kl=n,Al=r}var Fl=function(t){return Ol.reset(),Wu(t,Rl),+Ol},jl=[null,null],Ul={type:"LineString",coordinates:jl},Vl=function(t,e){return jl[0]=t,jl[1]=e,Fl(Ul)},ql={Feature:function(t,e){return zl(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(zl(n[r].geometry,e))return!0;return!1}},Bl={Sphere:function(){return!0},Point:function(t,e){return Wl(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Wl(n[r],e))return!0;return!1},LineString:function(t,e){return Hl(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Hl(n[r],e))return!0;return!1},Polygon:function(t,e){return Ql(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Ql(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(zl(n[r],e))return!0;return!1}};function zl(t,e){return!(!t||!Bl.hasOwnProperty(t.type))&&Bl[t.type](t,e)}function Wl(t,e){return 0===Vl(t,e)}function Hl(t,e){for(var n,r,i,o=0,a=t.length;o<a;o++){if(0===(r=Vl(t[o],e)))return!0;if(o>0&&(i=Vl(t[o],t[o-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<1e-12*i)return!0;n=r}return!1}function Ql(t,e){return!!wl(t.map(Gl),Yl(e))}function Gl(t){return(t=t.map(Yl)).pop(),t}function Yl(t){return[t[0]*gu,t[1]*gu]}var Kl=function(t,e){return(t&&ql.hasOwnProperty(t.type)?ql[t.type]:zl)(t,e)};function $l(t,e,n){var r=T(t,e-1e-6,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function Xl(t,e,n){var r=T(t,e-1e-6,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function Jl(){var t,e,n,r,i,o,a,s,u,c,l,h,f=10,p=f,d=90,y=360,v=2.5;function g(){return{type:"MultiLineString",coordinates:m()}}function m(){return T(Eu(r/d)*d,n,d).map(l).concat(T(Eu(s/y)*y,a,y).map(h)).concat(T(Eu(e/f)*f,t,f).filter((function(t){return mu(t%d)>1e-6})).map(u)).concat(T(Eu(o/p)*p,i,p).filter((function(t){return mu(t%y)>1e-6})).map(c))}return g.lines=function(){return m().map((function(t){return{type:"LineString",coordinates:t}}))},g.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(h(a).slice(1),l(n).reverse().slice(1),h(s).reverse().slice(1))]}},g.extent=function(t){return arguments.length?g.extentMajor(t).extentMinor(t):g.extentMinor()},g.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),g.precision(v)):[[r,s],[n,a]]},g.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),g.precision(v)):[[e,o],[t,i]]},g.step=function(t){return arguments.length?g.stepMajor(t).stepMinor(t):g.stepMinor()},g.stepMajor=function(t){return arguments.length?(d=+t[0],y=+t[1],g):[d,y]},g.stepMinor=function(t){return arguments.length?(f=+t[0],p=+t[1],g):[f,p]},g.precision=function(f){return arguments.length?(v=+f,u=$l(o,i,90),c=Xl(e,t,v),l=$l(s,a,90),h=Xl(r,n,v),g):v},g.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function Zl(){return Jl()()}var th,eh,nh,rh,ih=function(t,e){var n=t[0]*gu,r=t[1]*gu,i=e[0]*gu,o=e[1]*gu,a=wu(r),s=Su(r),u=wu(o),c=Su(o),l=a*wu(n),h=a*Su(n),f=u*wu(i),p=u*Su(i),d=2*Pu(Nu(Ou(o-r)+a*u*Ou(i-n))),y=Su(d),v=d?function(t){var e=Su(t*=d)/y,n=Su(d-t)/y,r=n*l+e*f,i=n*h+e*p,o=n*s+e*c;return[bu(i,r)*vu,bu(o,Nu(r*r+i*i))*vu]}:function(){return[n*vu,r*vu]};return v.distance=d,v},oh=function(t){return t},ah=uu(),sh=uu(),uh={point:Ru,lineStart:Ru,lineEnd:Ru,polygonStart:function(){uh.lineStart=ch,uh.lineEnd=fh},polygonEnd:function(){uh.lineStart=uh.lineEnd=uh.point=Ru,ah.add(mu(sh)),sh.reset()},result:function(){var t=ah/2;return ah.reset(),t}};function ch(){uh.point=lh}function lh(t,e){uh.point=hh,th=nh=t,eh=rh=e}function hh(t,e){sh.add(rh*t-nh*e),nh=t,rh=e}function fh(){hh(th,eh)}var ph=uh,dh=1/0,yh=dh,vh=-dh,gh=vh;var mh,_h,bh,wh,Eh={point:function(t,e){t<dh&&(dh=t);t>vh&&(vh=t);e<yh&&(yh=e);e>gh&&(gh=e)},lineStart:Ru,lineEnd:Ru,polygonStart:Ru,polygonEnd:Ru,result:function(){var t=[[dh,yh],[vh,gh]];return vh=gh=-(yh=dh=1/0),t}},Th=0,xh=0,Ch=0,Sh=0,Ih=0,Nh=0,kh=0,Ah=0,Ph=0,Oh={point:Rh,lineStart:Dh,lineEnd:Fh,polygonStart:function(){Oh.lineStart=jh,Oh.lineEnd=Uh},polygonEnd:function(){Oh.point=Rh,Oh.lineStart=Dh,Oh.lineEnd=Fh},result:function(){var t=Ph?[kh/Ph,Ah/Ph]:Nh?[Sh/Nh,Ih/Nh]:Ch?[Th/Ch,xh/Ch]:[NaN,NaN];return Th=xh=Ch=Sh=Ih=Nh=kh=Ah=Ph=0,t}};function Rh(t,e){Th+=t,xh+=e,++Ch}function Dh(){Oh.point=Mh}function Mh(t,e){Oh.point=Lh,Rh(bh=t,wh=e)}function Lh(t,e){var n=t-bh,r=e-wh,i=Nu(n*n+r*r);Sh+=i*(bh+t)/2,Ih+=i*(wh+e)/2,Nh+=i,Rh(bh=t,wh=e)}function Fh(){Oh.point=Rh}function jh(){Oh.point=Vh}function Uh(){qh(mh,_h)}function Vh(t,e){Oh.point=qh,Rh(mh=bh=t,_h=wh=e)}function qh(t,e){var n=t-bh,r=e-wh,i=Nu(n*n+r*r);Sh+=i*(bh+t)/2,Ih+=i*(wh+e)/2,Nh+=i,kh+=(i=wh*t-bh*e)*(bh+t),Ah+=i*(wh+e),Ph+=3*i,Rh(bh=t,wh=e)}var Bh=Oh;function zh(t){this._context=t}zh.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,yu)}},result:Ru};var Wh,Hh,Qh,Gh,Yh,Kh=uu(),$h={point:Ru,lineStart:function(){$h.point=Xh},lineEnd:function(){Wh&&Jh(Hh,Qh),$h.point=Ru},polygonStart:function(){Wh=!0},polygonEnd:function(){Wh=null},result:function(){var t=+Kh;return Kh.reset(),t}};function Xh(t,e){$h.point=Jh,Hh=Gh=t,Qh=Yh=e}function Jh(t,e){Gh-=t,Yh-=e,Kh.add(Nu(Gh*Gh+Yh*Yh)),Gh=t,Yh=e}var Zh=$h;function tf(){this._string=[]}function ef(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}tf.prototype={_radius:4.5,_circle:ef(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=ef(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var nf=function(t,e){var n,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),Wu(t,n(r))),r.result()}return o.area=function(t){return Wu(t,n(ph)),ph.result()},o.measure=function(t){return Wu(t,n(Zh)),Zh.result()},o.bounds=function(t){return Wu(t,n(Eh)),Eh.result()},o.centroid=function(t){return Wu(t,n(Bh)),Bh.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,oh):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new tf):new zh(e=t),"function"!=typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)},rf=function(t){return{stream:of(t)}};function of(t){return function(e){var n=new af;for(var r in t)n[r]=t[r];return n.stream=e,n}}function af(){}function sf(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Wu(n,t.stream(Eh)),e(Eh.result()),null!=r&&t.clipExtent(r),t}function uf(t,e,n){return sf(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function cf(t,e,n){return uf(t,[[0,0],e],n)}function lf(t,e,n){return sf(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function hf(t,e,n){return sf(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}af.prototype={constructor:af,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ff=wu(30*gu),pf=function(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,c,l,h,f,p,d,y,v){var g=c-r,m=l-i,_=g*g+m*m;if(_>4*e&&y--){var b=a+f,w=s+p,E=u+d,T=Nu(b*b+w*w+E*E),x=Pu(E/=T),C=mu(mu(E)-1)<1e-6||mu(o-h)<1e-6?(o+h)/2:bu(w,b),S=t(C,x),I=S[0],N=S[1],k=I-r,A=N-i,P=m*k-g*A;(P*P/_>e||mu((g*k+m*A)/_-.5)>.3||a*f+s*p+u*d<ff)&&(n(r,i,o,a,s,u,I,N,C,b/=T,w/=T,E,y,v),v.point(I,N),n(I,N,C,b,w,E,c,l,h,f,p,d,y,v))}}return function(e){var r,i,o,a,s,u,c,l,h,f,p,d,y={point:v,lineStart:g,lineEnd:_,polygonStart:function(){e.polygonStart(),y.lineStart=b},polygonEnd:function(){e.polygonEnd(),y.lineStart=g}};function v(n,r){n=t(n,r),e.point(n[0],n[1])}function g(){l=NaN,y.point=m,e.lineStart()}function m(r,i){var o=tc([r,i]),a=t(r,i);n(l,h,c,f,p,d,l=a[0],h=a[1],c=r,f=o[0],p=o[1],d=o[2],16,e),e.point(l,h)}function _(){y.point=v,e.lineEnd()}function b(){g(),y.point=w,y.lineEnd=E}function w(t,e){m(r=t,e),i=l,o=h,a=f,s=p,u=d,y.point=m}function E(){n(l,h,c,f,p,d,i,o,r,a,s,u,16,e),y.lineEnd=_,_()}return y}}(t,e):function(t){return of({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)};var df=of({point:function(t,e){this.stream.point(t*gu,e*gu)}});function yf(t,e,n,r,i){function o(o,a){return[e+t*(o*=r),n-t*(a*=i)]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}function vf(t,e,n,r,i,o){var a=wu(o),s=Su(o),u=a*t,c=s*t,l=a/t,h=s/t,f=(s*n-a*e)/t,p=(s*e+a*n)/t;function d(t,o){return[u*(t*=r)-c*(o*=i)+e,n-c*t-u*o]}return d.invert=function(t,e){return[r*(l*t-h*e+f),i*(p-h*t-l*e)]},d}function gf(t){return mf((function(){return t}))()}function mf(t){var e,n,r,i,o,a,s,u,c,l,h=150,f=480,p=250,d=0,y=0,v=0,g=0,m=0,_=0,b=1,w=1,E=null,T=Cl,x=null,C=oh,S=.5;function I(t){return u(t[0]*gu,t[1]*gu)}function N(t){return(t=u.invert(t[0],t[1]))&&[t[0]*vu,t[1]*vu]}function k(){var t=vf(h,0,0,b,w,_).apply(null,e(d,y)),r=(_?vf:yf)(h,f-t[0],p-t[1],b,w,_);return n=al(v,g,m),s=il(e,r),u=il(n,s),a=pf(s,S),A()}function A(){return c=l=null,I}return I.stream=function(t){return c&&l===t?c:c=df(function(t){return of({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(T(a(C(l=t)))))},I.preclip=function(t){return arguments.length?(T=t,E=void 0,A()):T},I.postclip=function(t){return arguments.length?(C=t,x=r=i=o=null,A()):C},I.clipAngle=function(t){return arguments.length?(T=+t?Sl(E=t*gu):(E=null,Cl),A()):E*vu},I.clipExtent=function(t){return arguments.length?(C=null==t?(x=r=i=o=null,oh):Il(x=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),A()):null==x?null:[[x,r],[i,o]]},I.scale=function(t){return arguments.length?(h=+t,k()):h},I.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],k()):[f,p]},I.center=function(t){return arguments.length?(d=t[0]%360*gu,y=t[1]%360*gu,k()):[d*vu,y*vu]},I.rotate=function(t){return arguments.length?(v=t[0]%360*gu,g=t[1]%360*gu,m=t.length>2?t[2]%360*gu:0,k()):[v*vu,g*vu,m*vu]},I.angle=function(t){return arguments.length?(_=t%360*gu,k()):_*vu},I.reflectX=function(t){return arguments.length?(b=t?-1:1,k()):b<0},I.reflectY=function(t){return arguments.length?(w=t?-1:1,k()):w<0},I.precision=function(t){return arguments.length?(a=pf(s,S=t*t),A()):Nu(S)},I.fitExtent=function(t,e){return uf(I,t,e)},I.fitSize=function(t,e){return cf(I,t,e)},I.fitWidth=function(t,e){return lf(I,t,e)},I.fitHeight=function(t,e){return hf(I,t,e)},function(){return e=t.apply(this,arguments),I.invert=e.invert&&N,k()}}function _f(t){var e=0,n=fu/3,r=mf(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*gu,n=t[1]*gu):[e*vu,n*vu]},i}function bf(t,e){var n=Su(t),r=(n+Su(e))/2;if(mu(r)<1e-6)return function(t){var e=wu(t);function n(t,n){return[t*e,Su(n)/e]}return n.invert=function(t,n){return[t/e,Pu(n*e)]},n}(t);var i=1+n*(2*r-n),o=Nu(i)/r;function a(t,e){var n=Nu(i-2*r*Su(e))/r;return[n*Su(t*=r),o-n*wu(t)]}return a.invert=function(t,e){var n=o-e,a=bu(t,mu(n))*Iu(n);return n*r<0&&(a-=fu*Iu(t)*Iu(n)),[a/r,Pu((i-(t*t+n*n)*r*r)/(2*r))]},a}var wf=function(){return _f(bf).scale(155.424).center([0,33.6442])},Ef=function(){return wf().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};var Tf=function(){var t,e,n,r,i,o,a=Ef(),s=wf().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=wf().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function l(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function h(){return t=e=null,l}return l.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(t)},l.stream=function(n){return t&&e===n?t:(r=[a.stream(e=n),s.stream(n),u.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},l.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),u.precision(t),h()):a.precision()},l.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),u.scale(t),l.translate(a.translate())):a.scale()},l.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],l=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,l-.238*e],[o+.455*e,l+.238*e]]).stream(c),r=s.translate([o-.307*e,l+.201*e]).clipExtent([[o-.425*e+1e-6,l+.12*e+1e-6],[o-.214*e-1e-6,l+.234*e-1e-6]]).stream(c),i=u.translate([o-.205*e,l+.212*e]).clipExtent([[o-.214*e+1e-6,l+.166*e+1e-6],[o-.115*e-1e-6,l+.234*e-1e-6]]).stream(c),h()},l.fitExtent=function(t,e){return uf(l,t,e)},l.fitSize=function(t,e){return cf(l,t,e)},l.fitWidth=function(t,e){return lf(l,t,e)},l.fitHeight=function(t,e){return hf(l,t,e)},l.scale(1070)};function xf(t){return function(e,n){var r=wu(e),i=wu(n),o=t(r*i);return[o*i*Su(e),o*Su(n)]}}function Cf(t){return function(e,n){var r=Nu(e*e+n*n),i=t(r),o=Su(i),a=wu(i);return[bu(e*o,r*a),Pu(r&&n*o/r)]}}var Sf=xf((function(t){return Nu(2/(1+t))}));Sf.invert=Cf((function(t){return 2*Pu(t/2)}));var If=function(){return gf(Sf).scale(124.75).clipAngle(179.999)},Nf=xf((function(t){return(t=Au(t))&&t/Su(t)}));Nf.invert=Cf((function(t){return t}));var kf=function(){return gf(Nf).scale(79.4188).clipAngle(179.999)};function Af(t,e){return[t,xu(ku((pu+e)/2))]}Af.invert=function(t,e){return[t,2*_u(Tu(e))-pu]};var Pf=function(){return Of(Af).scale(961/yu)};function Of(t){var e,n,r,i=gf(t),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,c=null;function l(){var o=fu*a(),s=i(ll(i.rotate()).invert([0,0]));return u(null==c?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===Af?[[Math.max(s[0]-o,c),e],[Math.min(s[0]+o,n),r]]:[[c,Math.max(s[1]-o,e)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),l()):a()},i.translate=function(t){return arguments.length?(s(t),l()):s()},i.center=function(t){return arguments.length?(o(t),l()):o()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),l()):null==c?null:[[c,e],[n,r]]},l()}function Rf(t){return ku((pu+t)/2)}function Df(t,e){var n=wu(t),r=t===e?Su(t):xu(n/wu(e))/xu(Rf(e)/Rf(t)),i=n*Cu(Rf(t),r)/r;if(!r)return Af;function o(t,e){i>0?e<1e-6-pu&&(e=1e-6-pu):e>pu-1e-6&&(e=pu-1e-6);var n=i/Cu(Rf(e),r);return[n*Su(r*t),i-n*wu(r*t)]}return o.invert=function(t,e){var n=i-e,o=Iu(r)*Nu(t*t+n*n),a=bu(t,mu(n))*Iu(n);return n*r<0&&(a-=fu*Iu(t)*Iu(n)),[a/r,2*_u(Cu(i/o,1/r))-pu]},o}var Mf=function(){return _f(Df).scale(109.5).parallels([30,30])};function Lf(t,e){return[t,e]}Lf.invert=Lf;var Ff=function(){return gf(Lf).scale(152.63)};function jf(t,e){var n=wu(t),r=t===e?Su(t):(n-wu(e))/(e-t),i=n/r+t;if(mu(r)<1e-6)return Lf;function o(t,e){var n=i-e,o=r*t;return[n*Su(o),i-n*wu(o)]}return o.invert=function(t,e){var n=i-e,o=bu(t,mu(n))*Iu(n);return n*r<0&&(o-=fu*Iu(t)*Iu(n)),[o/r,i-Iu(r)*Nu(t*t+n*n)]},o}var Uf=function(){return _f(jf).scale(131.154).center([0,13.9389])},Vf=1.340264,qf=-.081106,Bf=893e-6,zf=.003796,Wf=Nu(3)/2;function Hf(t,e){var n=Pu(Wf*Su(e)),r=n*n,i=r*r*r;return[t*wu(n)/(Wf*(Vf+3*qf*r+i*(7*Bf+9*zf*r))),n*(Vf+qf*r+i*(Bf+zf*r))]}Hf.invert=function(t,e){for(var n,r=e,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(Vf+qf*i+o*(Bf+zf*i))-e)/(Vf+3*qf*i+o*(7*Bf+9*zf*i)))*r)*i*i,!(mu(n)<1e-12));++a);return[Wf*t*(Vf+3*qf*i+o*(7*Bf+9*zf*i))/wu(r),Pu(Su(r)/Wf)]};var Qf=function(){return gf(Hf).scale(177.158)};function Gf(t,e){var n=wu(e),r=wu(t)*n;return[n*Su(t)/r,Su(e)/r]}Gf.invert=Cf(_u);var Yf=function(){return gf(Gf).scale(144.049).clipAngle(60)},Kf=function(){var t,e,n,r,i,o,a,s=1,u=0,c=0,l=1,h=1,f=0,p=null,d=1,y=1,v=of({point:function(t,e){var n=_([t,e]);this.stream.point(n[0],n[1])}}),g=oh;function m(){return d=s*l,y=s*h,o=a=null,_}function _(n){var r=n[0]*d,i=n[1]*y;if(f){var o=i*t-r*e;r=r*t+i*e,i=o}return[r+u,i+c]}return _.invert=function(n){var r=n[0]-u,i=n[1]-c;if(f){var o=i*t+r*e;r=r*t-i*e,i=o}return[r/d,i/y]},_.stream=function(t){return o&&a===t?o:o=v(g(a=t))},_.postclip=function(t){return arguments.length?(g=t,p=n=r=i=null,m()):g},_.clipExtent=function(t){return arguments.length?(g=null==t?(p=n=r=i=null,oh):Il(p=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),m()):null==p?null:[[p,n],[r,i]]},_.scale=function(t){return arguments.length?(s=+t,m()):s},_.translate=function(t){return arguments.length?(u=+t[0],c=+t[1],m()):[u,c]},_.angle=function(n){return arguments.length?(e=Su(f=n%360*gu),t=wu(f),m()):f*vu},_.reflectX=function(t){return arguments.length?(l=t?-1:1,m()):l<0},_.reflectY=function(t){return arguments.length?(h=t?-1:1,m()):h<0},_.fitExtent=function(t,e){return uf(_,t,e)},_.fitSize=function(t,e){return cf(_,t,e)},_.fitWidth=function(t,e){return lf(_,t,e)},_.fitHeight=function(t,e){return hf(_,t,e)},_};function $f(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}$f.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(mu(n)>1e-6&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};var Xf=function(){return gf($f).scale(175.295)};function Jf(t,e){return[wu(e)*Su(t),Su(e)]}Jf.invert=Cf(Pu);var Zf=function(){return gf(Jf).scale(249.5).clipAngle(90.000001)};function tp(t,e){var n=wu(e),r=1+wu(t)*n;return[n*Su(t)/r,Su(e)/r]}tp.invert=Cf((function(t){return 2*_u(t)}));var ep=function(){return gf(tp).scale(250).clipAngle(142)};function np(t,e){return[xu(ku((pu+e)/2)),-t]}np.invert=function(t,e){return[-e,2*_u(Tu(t))-pu]};var rp=function(){var t=Of(np),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};function ip(t,e){return t.parent===e.parent?1:2}function op(t,e){return t+e.x}function ap(t,e){return Math.max(t,e.y)}var sp=function(){var t=ip,e=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(op,0)/t.length}(n),e.y=function(t){return 1+t.reduce(ap,0)}(n)):(e.x=o?a+=t(e,o):0,e.y=0,o=e)}));var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),u=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),c=s.x-t(s,u)/2,l=u.x+t(u,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-c)/(l-c)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i};function up(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function cp(t,e){var n,r,i,o,a,s=new pp(t),u=+t.value&&(s.value=t.value),c=[s];for(null==e&&(e=lp);n=c.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)c.push(r=n.children[o]=new pp(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(fp)}function lp(t){return t.children}function hp(t){t.data=t.data.data}function fp(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function pp(t){this.data=t,this.depth=this.height=0,this.parent=null}pp.prototype=cp.prototype={constructor:pp,count:function(){return this.eachAfter(up)},each:function(t){var e,n,r,i,o=this,a=[o];do{for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this},eachAfter:function(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return cp(this).eachBefore(hp)}};var dp=Array.prototype.slice;var yp=function(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(dp.call(t))).length,o=[];r<i;)e=t[r],n&&mp(n,e)?++r:(n=bp(o=vp(o,e)),r=0);return n};function vp(t,e){var n,r;if(_p(e,t))return[e];for(n=0;n<t.length;++n)if(gp(e,t[n])&&_p(wp(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(gp(wp(t[n],t[r]),e)&&gp(wp(t[n],e),t[r])&&gp(wp(t[r],e),t[n])&&_p(Ep(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function gp(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function mp(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function _p(t,e){for(var n=0;n<e.length;++n)if(!mp(t,e[n]))return!1;return!0}function bp(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return wp(t[0],t[1]);case 3:return Ep(t[0],t[1],t[2])}var e}function wp(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,c=a-r,l=s-i,h=Math.sqrt(u*u+c*c);return{x:(n+o+u/h*l)/2,y:(r+a+c/h*l)/2,r:(h+i+s)/2}}function Ep(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,c=n.x,l=n.y,h=n.r,f=r-a,p=r-c,d=i-s,y=i-l,v=u-o,g=h-o,m=r*r+i*i-o*o,_=m-a*a-s*s+u*u,b=m-c*c-l*l+h*h,w=p*d-f*y,E=(d*b-y*_)/(2*w)-r,T=(y*v-d*g)/w,x=(p*_-f*b)/(2*w)-i,C=(f*g-p*v)/w,S=T*T+C*C-1,I=2*(o+E*T+x*C),N=E*E+x*x-o*o,k=-(S?(I+Math.sqrt(I*I-4*S*N))/(2*S):N/I);return{x:r+E+T*k,y:i+x+C*k,r:k}}function Tp(t,e,n){var r,i,o,a,s=t.x-e.x,u=t.y-e.y,c=s*s+u*u;c?(i=e.r+n.r,i*=i,a=t.r+n.r,i>(a*=a)?(r=(c+a-i)/(2*c),o=Math.sqrt(Math.max(0,a/c-r*r)),n.x=t.x-r*s-o*u,n.y=t.y-r*u+o*s):(r=(c+i-a)/(2*c),o=Math.sqrt(Math.max(0,i/c-r*r)),n.x=e.x+r*s-o*u,n.y=e.y+r*u+o*s)):(n.x=e.x+n.r,n.y=e.y)}function xp(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Cp(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function Sp(t){this._=t,this.next=null,this.previous=null}function Ip(t){if(!(i=t.length))return 0;var e,n,r,i,o,a,s,u,c,l,h;if((e=t[0]).x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;Tp(n,e,r=t[2]),e=new Sp(e),n=new Sp(n),r=new Sp(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){Tp(e._,n._,r=t[s]),r=new Sp(r),u=n.next,c=e.previous,l=n._.r,h=e._.r;do{if(l<=h){if(xp(u._,r._)){n=u,e.next=n,n.previous=e,--s;continue t}l+=u._.r,u=u.next}else{if(xp(c._,r._)){(e=c).next=n,n.previous=e,--s;continue t}h+=c._.r,c=c.previous}}while(u!==c.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,o=Cp(e);(r=r.next)!==n;)(a=Cp(r))<o&&(e=r,o=a);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=yp(e),s=0;s<i;++s)(e=t[s]).x-=r.x,e.y-=r.y;return r.r}var Np=function(t){return Ip(t),t};function kp(t){return null==t?null:Ap(t)}function Ap(t){if("function"!=typeof t)throw new Error;return t}function Pp(){return 0}var Op=function(t){return function(){return t}};function Rp(t){return Math.sqrt(t.value)}var Dp=function(){var t=null,e=1,n=1,r=Pp;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(Mp(t)).eachAfter(Lp(r,.5)).eachBefore(Fp(1)):i.eachBefore(Mp(Rp)).eachAfter(Lp(Pp,1)).eachAfter(Lp(r,i.r/Math.min(e,n))).eachBefore(Fp(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=kp(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:Op(+t),i):r},i};function Mp(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Lp(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,s=t(n)*e||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=Ip(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function Fp(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var jp=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},Up=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(r-e)/t.value;++s<u;)(o=a[s]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c},Vp=function(){var t=1,e=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/o,i.eachBefore(function(t,e){return function(r){r.children&&Up(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}(e,o)),r&&i.eachBefore(jp),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i},qp={depth:-1},Bp={};function zp(t){return t.id}function Wp(t){return t.parentId}var Hp=function(){var t=zp,e=Wp;function n(n){var r,i,o,a,s,u,c,l=n.length,h=new Array(l),f={};for(i=0;i<l;++i)r=n[i],s=h[i]=new pp(r),null!=(u=t(r,i,n))&&(u+="")&&(f[c="$"+(s.id=u)]=c in f?Bp:s);for(i=0;i<l;++i)if(s=h[i],null!=(u=e(n[i],i,n))&&(u+="")){if(!(a=f["$"+u]))throw new Error("missing: "+u);if(a===Bp)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=qp,o.eachBefore((function(t){t.depth=t.parent.depth+1,--l})).eachBefore(fp),o.parent=null,l>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=Ap(e),n):t},n.parentId=function(t){return arguments.length?(e=Ap(t),n):e},n};function Qp(t,e){return t.parent===e.parent?1:2}function Gp(t){var e=t.children;return e?e[0]:t.t}function Yp(t){var e=t.children;return e?e[e.length-1]:t.t}function Kp(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function $p(t,e,n){return t.a.parent===e.parent?t.a:n}function Xp(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Xp.prototype=Object.create(pp.prototype);var Jp=function(){var t=Qp,e=1,n=1,r=null;function i(i){var u=function(t){for(var e,n,r,i,o,a=new Xp(t,0),s=[a];e=s.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new Xp(r[i],i)),n.parent=e;return(a.parent=new Xp(null,0)).children=[a],a}(i);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)i.eachBefore(s);else{var c=i,l=i,h=i;i.eachBefore((function(t){t.x<c.x&&(c=t),t.x>l.x&&(l=t),t.depth>h.depth&&(h=t)}));var f=c===l?1:t(c,l)/2,p=f-c.x,d=e/(l.x+f+p),y=n/(h.depth||1);i.eachBefore((function(t){t.x=(t.x+p)*d,t.y=t.depth*y}))}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,a=e,s=n,u=o.parent.children[0],c=o.m,l=a.m,h=s.m,f=u.m;s=Yp(s),o=Gp(o),s&&o;)u=Gp(u),(a=Yp(a)).a=e,(i=s.z+h-o.z-c+t(s._,o._))>0&&(Kp($p(s,e,r),e,i),c+=i,l+=i),h+=s.m,c+=o.m,f+=u.m,l+=a.m;s&&!Yp(a)&&(a.t=s,a.m+=h-l),o&&!Gp(u)&&(u.t=o,u.m+=c-f,r=e)}return r}(e,i,e.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},Zp=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(i-n)/t.value;++s<u;)(o=a[s]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c},td=(1+Math.sqrt(5))/2;function ed(t,e,n,r,i,o){for(var a,s,u,c,l,h,f,p,d,y,v,g=[],m=e.children,_=0,b=0,w=m.length,E=e.value;_<w;){u=i-n,c=o-r;do{l=m[b++].value}while(!l&&b<w);for(h=f=l,v=l*l*(y=Math.max(c/u,u/c)/(E*t)),d=Math.max(f/v,v/h);b<w;++b){if(l+=s=m[b].value,s<h&&(h=s),s>f&&(f=s),v=l*l*y,(p=Math.max(f/v,v/h))>d){l-=s;break}d=p}g.push(a={value:l,dice:u<c,children:m.slice(_,b)}),a.dice?Up(a,n,r,i,E?r+=c*l/E:o):Zp(a,n,r,E?n+=u*l/E:i,o),E-=l,_=b}return g}var nd=function t(e){function n(t,n,r,i,o){ed(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(td),rd=function(){var t=nd,e=!1,n=1,r=1,i=[0],o=Pp,a=Pp,s=Pp,u=Pp,c=Pp;function l(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(h),i=[0],e&&t.eachBefore(jp),t}function h(e){var n=i[e.depth],r=e.x0+n,l=e.y0+n,h=e.x1-n,f=e.y1-n;h<r&&(r=h=(r+h)/2),f<l&&(l=f=(l+f)/2),e.x0=r,e.y0=l,e.x1=h,e.y1=f,e.children&&(n=i[e.depth+1]=o(e)/2,r+=c(e)-n,l+=a(e)-n,(h-=s(e)-n)<r&&(r=h=(r+h)/2),(f-=u(e)-n)<l&&(l=f=(l+f)/2),t(e,r,l,h,f))}return l.round=function(t){return arguments.length?(e=!!t,l):e},l.size=function(t){return arguments.length?(n=+t[0],r=+t[1],l):[n,r]},l.tile=function(e){return arguments.length?(t=Ap(e),l):t},l.padding=function(t){return arguments.length?l.paddingInner(t).paddingOuter(t):l.paddingInner()},l.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:Op(+t),l):o},l.paddingOuter=function(t){return arguments.length?l.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):l.paddingTop()},l.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:Op(+t),l):a},l.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:Op(+t),l):s},l.paddingBottom=function(t){return arguments.length?(u="function"==typeof t?t:Op(+t),l):u},l.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:Op(+t),l):c},l},id=function(t,e,n,r,i){var o,a,s=t.children,u=s.length,c=new Array(u+1);for(c[0]=a=o=0;o<u;++o)c[o+1]=a+=s[o].value;!function t(e,n,r,i,o,a,u){if(e>=n-1){var l=s[e];return l.x0=i,l.y0=o,l.x1=a,void(l.y1=u)}var h=c[e],f=r/2+h,p=e+1,d=n-1;for(;p<d;){var y=p+d>>>1;c[y]<f?p=y+1:d=y}f-c[p-1]<c[p]-f&&e+1<p&&--p;var v=c[p]-h,g=r-v;if(a-i>u-o){var m=(i*g+a*v)/r;t(e,p,v,i,o,m,u),t(p,n,g,m,o,a,u)}else{var _=(o*g+u*v)/r;t(e,p,v,i,o,a,_),t(p,n,g,i,_,a,u)}}(0,u,t.value,e,n,r,i)},od=function(t,e,n,r,i){(1&t.depth?Zp:Up)(t,e,n,r,i)},ad=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,u,c,l,h=-1,f=a.length,p=t.value;++h<f;){for(u=(s=a[h]).children,c=s.value=0,l=u.length;c<l;++c)s.value+=u[c].value;s.dice?Up(s,n,r,i,r+=(o-r)*s.value/p):Zp(s,n,r,n+=(i-n)*s.value/p,o),p-=s.value}else t._squarify=a=ed(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(td),sd=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},ud=function(t,e){var n=ln(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},cd=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},ld=Math.SQRT2;function hd(t){return((t=Math.exp(t))+1/t)/2}var fd=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],u=e[1],c=e[2],l=s-i,h=u-o,f=l*l+h*h;if(f<1e-12)r=Math.log(c/a)/ld,n=function(t){return[i+t*l,o+t*h,a*Math.exp(ld*t*r)]};else{var p=Math.sqrt(f),d=(c*c-a*a+4*f)/(2*a*2*p),y=(c*c-a*a-4*f)/(2*c*2*p),v=Math.log(Math.sqrt(d*d+1)-d),g=Math.log(Math.sqrt(y*y+1)-y);r=(g-v)/ld,n=function(t){var e,n=t*r,s=hd(v),u=a/(2*p)*(s*(e=ld*n+v,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[i+u*l,o+u*h,a*s/hd(ld*n+v)]}}return n.duration=1e3*r,n};function pd(t){return function(e,n){var r=t((e=en(e)).h,(n=en(n)).h),i=fn(e.s,n.s),o=fn(e.l,n.l),a=fn(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var dd=pd(ln),yd=pd(fn);function vd(t,e){var n=fn((t=vo(t)).l,(e=vo(e)).l),r=fn(t.a,e.a),i=fn(t.b,e.b),o=fn(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}}function gd(t){return function(e,n){var r=t((e=xo(e)).h,(n=xo(n)).h),i=fn(e.c,n.c),o=fn(e.l,n.l),a=fn(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var md=gd(ln),_d=gd(fn);function bd(t){return function e(n){function r(e,r){var i=t((e=Oo(e)).h,(r=Oo(r)).h),o=fn(e.s,r.s),a=fn(e.l,r.l),s=fn(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}var wd=bd(ln),Ed=bd(fn);function Td(t,e){for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}var xd=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n},Cd=function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[1]*i[0]-e[0]*i[1];return o/2},Sd=function(t){for(var e,n,r=-1,i=t.length,o=0,a=0,s=t[i-1],u=0;++r<i;)e=s,s=t[r],u+=n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o/(u*=3),a/u]};function Id(t,e){return t[0]-e[0]||t[1]-e[1]}function Nd(t){for(var e,n,r,i=t.length,o=[0,1],a=2,s=2;s<i;++s){for(;a>1&&(e=t[o[a-2]],n=t[o[a-1]],r=t[s],(n[0]-e[0])*(r[1]-e[1])-(n[1]-e[1])*(r[0]-e[0])<=0);)--a;o[a++]=s}return o.slice(0,a)}var kd=function(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(Id),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var o=Nd(r),a=Nd(i),s=a[0]===o[0],u=a[a.length-1]===o[o.length-1],c=[];for(e=o.length-1;e>=0;--e)c.push(t[r[o[e]][2]]);for(e=+s;e<a.length-u;++e)c.push(t[r[a[e]][2]]);return c},Ad=function(t,e){for(var n,r,i=t.length,o=t[i-1],a=e[0],s=e[1],u=o[0],c=o[1],l=!1,h=0;h<i;++h)n=(o=t[h])[0],(r=o[1])>s!=c>s&&a<(u-n)*(s-r)/(c-r)+n&&(l=!l),u=n,c=r;return l},Pd=function(t){for(var e,n,r=-1,i=t.length,o=t[i-1],a=o[0],s=o[1],u=0;++r<i;)e=a,n=s,e-=a=(o=t[r])[0],n-=s=o[1],u+=Math.sqrt(e*e+n*n);return u},Od=function(){return Math.random()},Rd=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(Od),Dd=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*e()-1,o=2*e()-1,i=r*r+o*o}while(!i||i>1);return t+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(Od),Md=function t(e){function n(){var t=Dd.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(Od),Ld=function t(e){function n(t){return function(){for(var n=0,r=0;r<t;++r)n+=e();return n}}return n.source=t,n}(Od),Fd=function t(e){function n(t){var n=Ld.source(e)(t);return function(){return n()/t}}return n.source=t,n}(Od),jd=function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(Od);function Ud(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Vd(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}var qd=Array.prototype,Bd=qd.map,zd=qd.slice,Wd={name:"implicit"};function Hd(){var t=Ji(),e=[],n=[],r=Wd;function i(i){var o=i+"",a=t.get(o);if(!a){if(r!==Wd)return r;t.set(o,a=e.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=Ji();for(var r,o,a=-1,s=n.length;++a<s;)t.has(o=(r=n[a])+"")||t.set(o,e.push(r));return i},i.range=function(t){return arguments.length?(n=zd.call(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Hd(e,n).unknown(r)},Ud.apply(i,arguments),i}function Qd(){var t,e,n=Hd().unknown(void 0),r=n.domain,i=n.range,o=[0,1],a=!1,s=0,u=0,c=.5;function l(){var n=r().length,l=o[1]<o[0],h=o[l-0],f=o[1-l];t=(f-h)/Math.max(1,n-s+2*u),a&&(t=Math.floor(t)),h+=(f-h-t*(n-s))*c,e=t*(1-s),a&&(h=Math.round(h),e=Math.round(e));var p=T(n).map((function(e){return h+t*e}));return i(l?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),l()):r()},n.range=function(t){return arguments.length?(o=[+t[0],+t[1]],l()):o.slice()},n.rangeRound=function(t){return o=[+t[0],+t[1]],a=!0,l()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,l()):a},n.padding=function(t){return arguments.length?(s=Math.min(1,u=+t),l()):s},n.paddingInner=function(t){return arguments.length?(s=Math.min(1,t),l()):s},n.paddingOuter=function(t){return arguments.length?(u=+t,l()):u},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},n.copy=function(){return Qd(r(),o).round(a).paddingInner(s).paddingOuter(u).align(c)},Ud.apply(l(),arguments)}function Gd(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Gd(e())},t}function Yd(){return Gd(Qd.apply(null,arguments).paddingInner(1))}var Kd=function(t){return+t},$d=[0,1];function Xd(t){return t}function Jd(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Zd(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function ty(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Jd(i,r),o=n(a,o)):(r=Jd(r,i),o=n(o,a)),function(t){return o(r(t))}}function ey(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Jd(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=c(t,e,1,r)-1;return o[n](i[n](e))}}function ny(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ry(){var t,e,n,r,i,o,a=$d,s=$d,u=kn,c=Xd;function l(){return r=Math.min(a.length,s.length)>2?ey:ty,i=o=null,h}function h(e){return isNaN(e=+e)?n:(i||(i=r(a.map(t),s,u)))(t(c(e)))}return h.invert=function(n){return c(e((o||(o=r(s,a.map(t),En)))(n)))},h.domain=function(t){return arguments.length?(a=Bd.call(t,Kd),c===Xd||(c=Zd(a)),l()):a.slice()},h.range=function(t){return arguments.length?(s=zd.call(t),l()):s.slice()},h.rangeRound=function(t){return s=zd.call(t),u=cd,l()},h.clamp=function(t){return arguments.length?(c=t?Zd(a):Xd,h):c!==Xd},h.interpolate=function(t){return arguments.length?(u=t,l()):u},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,l()}}function iy(t,e){return ry()(t,e)}var oy=function(t,e,n,r){var i,o=k(t,e,n);switch((r=Qs(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=au(o,a))||(r.precision=i),Xs(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=su(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=ou(o))||(r.precision=i-2*("%"===r.type))}return $s(r)};function ay(t){var e=t.domain;return t.ticks=function(t){var n=e();return I(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return oy(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,a=i.length-1,s=i[o],u=i[a];return u<s&&(r=s,s=u,u=r,r=o,o=a,a=r),(r=N(s,u,n))>0?r=N(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=N(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(u/r)*r,e(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(u*r)/r,e(i)),t},t}function sy(){var t=iy(Xd,Xd);return t.copy=function(){return ny(t,sy())},Ud.apply(t,arguments),ay(t)}function uy(t){var e;function n(t){return isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Bd.call(e,Kd),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return uy(t).unknown(e)},t=arguments.length?Bd.call(t,Kd):[0,1],ay(n)}var cy=function(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t};function ly(t){return Math.log(t)}function hy(t){return Math.exp(t)}function fy(t){return-Math.log(-t)}function py(t){return-Math.exp(-t)}function dy(t){return isFinite(t)?+("1e"+t):t<0?0:t}function yy(t){return function(e){return-t(-e)}}function vy(t){var e,n,r=t(ly,hy),i=r.domain,o=10;function a(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(o),n=function(t){return 10===t?dy:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(o),i()[0]<0?(e=yy(e),n=yy(n),t(fy,py)):t(ly,hy),r}return r.base=function(t){return arguments.length?(o=+t,a()):o},r.domain=function(t){return arguments.length?(i(t),a()):i()},r.ticks=function(t){var r,a=i(),s=a[0],u=a[a.length-1];(r=u<s)&&(f=s,s=u,u=f);var c,l,h,f=e(s),p=e(u),d=null==t?10:+t,y=[];if(!(o%1)&&p-f<d){if(f=Math.round(f)-1,p=Math.round(p)+1,s>0){for(;f<p;++f)for(l=1,c=n(f);l<o;++l)if(!((h=c*l)<s)){if(h>u)break;y.push(h)}}else for(;f<p;++f)for(l=o-1,c=n(f);l>=1;--l)if(!((h=c*l)<s)){if(h>u)break;y.push(h)}}else y=I(f,p,Math.min(p-f,d)).map(n);return r?y.reverse():y},r.tickFormat=function(t,i){if(null==i&&(i=10===o?".0e":","),"function"!=typeof i&&(i=$s(i)),t===1/0)return i;null==t&&(t=10);var a=Math.max(1,o*t/r.ticks().length);return function(t){var r=t/n(Math.round(e(t)));return r*o<o-.5&&(r*=o),r<=a?i(t):""}},r.nice=function(){return i(cy(i(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function gy(){var t=vy(ry()).domain([1,10]);return t.copy=function(){return ny(t,gy()).base(t.base())},Ud.apply(t,arguments),t}function my(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function _y(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function by(t){var e=1,n=t(my(e),_y(e));return n.constant=function(n){return arguments.length?t(my(e=+n),_y(e)):e},ay(n)}function wy(){var t=by(ry());return t.copy=function(){return ny(t,wy()).constant(t.constant())},Ud.apply(t,arguments)}function Ey(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Ty(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function xy(t){return t<0?-t*t:t*t}function Cy(t){var e=t(Xd,Xd),n=1;function r(){return 1===n?t(Xd,Xd):.5===n?t(Ty,xy):t(Ey(n),Ey(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},ay(e)}function Sy(){var t=Cy(ry());return t.copy=function(){return ny(t,Sy()).exponent(t.exponent())},Ud.apply(t,arguments),t}function Iy(){return Sy.apply(null,arguments).exponent(.5)}function Ny(){var t,e=[],n=[],r=[];function o(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=O(e,t/i);return a}function a(e){return isNaN(e=+e)?t:n[c(r,e)]}return a.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},a.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,r=0,a=t.length;r<a;++r)null==(n=t[r])||isNaN(n=+n)||e.push(n);return e.sort(i),o()},a.range=function(t){return arguments.length?(n=zd.call(t),o()):n.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return r.slice()},a.copy=function(){return Ny().domain(e).range(n).unknown(t)},Ud.apply(a,arguments)}function ky(){var t,e=0,n=1,r=1,i=[.5],o=[0,1];function a(e){return e<=e?o[c(i,e,0,r)]:t}function s(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return a}return a.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],s()):[e,n]},a.range=function(t){return arguments.length?(r=(o=zd.call(t)).length-1,s()):o.slice()},a.invertExtent=function(t){var a=o.indexOf(t);return a<0?[NaN,NaN]:a<1?[e,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(e){return arguments.length?(t=e,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return ky().domain([e,n]).range(o).unknown(t)},Ud.apply(ay(a),arguments)}function Ay(){var t,e=[.5],n=[0,1],r=1;function i(i){return i<=i?n[c(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=zd.call(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=zd.call(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return Ay().domain(e).range(n).unknown(t)},Ud.apply(i,arguments)}var Py=new Date,Oy=new Date;function Ry(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return Ry((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return Py.setTime(+e),Oy.setTime(+r),t(Py),t(Oy),Math.floor(n(Py,Oy))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var Dy=Ry((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Dy.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Ry((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var My=Dy,Ly=Dy.range,Fy=Ry((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),jy=Fy,Uy=Fy.range;function Vy(t){return Ry((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var qy=Vy(0),By=Vy(1),zy=Vy(2),Wy=Vy(3),Hy=Vy(4),Qy=Vy(5),Gy=Vy(6),Yy=qy.range,Ky=By.range,$y=zy.range,Xy=Wy.range,Jy=Hy.range,Zy=Qy.range,tv=Gy.range,ev=Ry((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1})),nv=ev,rv=ev.range,iv=Ry((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()})),ov=iv,av=iv.range,sv=Ry((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()})),uv=sv,cv=sv.range,lv=Ry((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()})),hv=lv,fv=lv.range,pv=Ry((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));pv.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Ry((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):pv:null};var dv=pv,yv=pv.range;function vv(t){return Ry((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}var gv=vv(0),mv=vv(1),_v=vv(2),bv=vv(3),wv=vv(4),Ev=vv(5),Tv=vv(6),xv=gv.range,Cv=mv.range,Sv=_v.range,Iv=bv.range,Nv=wv.range,kv=Ev.range,Av=Tv.range,Pv=Ry((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1})),Ov=Pv,Rv=Pv.range,Dv=Ry((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Dv.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Ry((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Mv=Dv,Lv=Dv.range;function Fv(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function jv(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Uv(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Vv(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,c=Jv(i),l=Zv(i),h=Jv(o),f=Zv(o),p=Jv(a),d=Zv(a),y=Jv(s),v=Zv(s),g=Jv(u),m=Zv(u),_={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:bg,e:bg,f:Cg,H:wg,I:Eg,j:Tg,L:xg,m:Sg,M:Ig,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:em,s:nm,S:Ng,u:kg,U:Ag,V:Pg,w:Og,W:Rg,x:null,X:null,y:Dg,Y:Mg,Z:Lg,"%":tm},b={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Fg,e:Fg,f:Bg,H:jg,I:Ug,j:Vg,L:qg,m:zg,M:Wg,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:em,s:nm,S:Hg,u:Qg,U:Gg,V:Yg,w:Kg,W:$g,x:null,X:null,y:Xg,Y:Jg,Z:Zg,"%":tm},w={a:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.w=d[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=f[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=m[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return x(t,e,n,r)},d:lg,e:lg,f:vg,H:fg,I:fg,j:hg,L:yg,m:cg,M:pg,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=l[r[0].toLowerCase()],n+r[0].length):-1},q:ug,Q:mg,s:_g,S:dg,u:eg,U:ng,V:rg,w:tg,W:ig,x:function(t,e,r){return x(t,n,e,r)},X:function(t,e,n){return x(t,r,e,n)},y:ag,Y:og,Z:sg,"%":gg};function E(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=Qv[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function T(t,e){return function(n){var r,i,o=Uv(1900,void 0,1);if(x(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=jv(Uv(o.y,0,1))).getUTCDay(),r=i>4||0===i?mv.ceil(r):mv(r),r=Ov.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Fv(Uv(o.y,0,1))).getDay(),r=i>4||0===i?By.ceil(r):By(r),r=nv.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?jv(Uv(o.y,0,1)).getUTCDay():Fv(Uv(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,jv(o)):Fv(o)}}function x(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=w[i in Qv?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return _.x=E(n,_),_.X=E(r,_),_.c=E(e,_),b.x=E(n,b),b.X=E(r,b),b.c=E(e,b),{format:function(t){var e=E(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=T(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=E(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=T(t+="",!0);return e.toString=function(){return t},e}}}var qv,Bv,zv,Wv,Hv,Qv={"-":"",_:" ",0:"0"},Gv=/^\s*\d+/,Yv=/^%/,Kv=/[\\^$*+?|[\]().{}]/g;function $v(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Xv(t){return t.replace(Kv,"\\$&")}function Jv(t){return new RegExp("^(?:"+t.map(Xv).join("|")+")","i")}function Zv(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function tg(t,e,n){var r=Gv.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function eg(t,e,n){var r=Gv.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function ng(t,e,n){var r=Gv.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function rg(t,e,n){var r=Gv.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function ig(t,e,n){var r=Gv.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function og(t,e,n){var r=Gv.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ag(t,e,n){var r=Gv.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function sg(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ug(t,e,n){var r=Gv.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function cg(t,e,n){var r=Gv.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function lg(t,e,n){var r=Gv.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function hg(t,e,n){var r=Gv.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function fg(t,e,n){var r=Gv.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function pg(t,e,n){var r=Gv.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function dg(t,e,n){var r=Gv.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function yg(t,e,n){var r=Gv.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function vg(t,e,n){var r=Gv.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function gg(t,e,n){var r=Yv.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function mg(t,e,n){var r=Gv.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function _g(t,e,n){var r=Gv.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function bg(t,e){return $v(t.getDate(),e,2)}function wg(t,e){return $v(t.getHours(),e,2)}function Eg(t,e){return $v(t.getHours()%12||12,e,2)}function Tg(t,e){return $v(1+nv.count(My(t),t),e,3)}function xg(t,e){return $v(t.getMilliseconds(),e,3)}function Cg(t,e){return xg(t,e)+"000"}function Sg(t,e){return $v(t.getMonth()+1,e,2)}function Ig(t,e){return $v(t.getMinutes(),e,2)}function Ng(t,e){return $v(t.getSeconds(),e,2)}function kg(t){var e=t.getDay();return 0===e?7:e}function Ag(t,e){return $v(qy.count(My(t)-1,t),e,2)}function Pg(t,e){var n=t.getDay();return t=n>=4||0===n?Hy(t):Hy.ceil(t),$v(Hy.count(My(t),t)+(4===My(t).getDay()),e,2)}function Og(t){return t.getDay()}function Rg(t,e){return $v(By.count(My(t)-1,t),e,2)}function Dg(t,e){return $v(t.getFullYear()%100,e,2)}function Mg(t,e){return $v(t.getFullYear()%1e4,e,4)}function Lg(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+$v(e/60|0,"0",2)+$v(e%60,"0",2)}function Fg(t,e){return $v(t.getUTCDate(),e,2)}function jg(t,e){return $v(t.getUTCHours(),e,2)}function Ug(t,e){return $v(t.getUTCHours()%12||12,e,2)}function Vg(t,e){return $v(1+Ov.count(Mv(t),t),e,3)}function qg(t,e){return $v(t.getUTCMilliseconds(),e,3)}function Bg(t,e){return qg(t,e)+"000"}function zg(t,e){return $v(t.getUTCMonth()+1,e,2)}function Wg(t,e){return $v(t.getUTCMinutes(),e,2)}function Hg(t,e){return $v(t.getUTCSeconds(),e,2)}function Qg(t){var e=t.getUTCDay();return 0===e?7:e}function Gg(t,e){return $v(gv.count(Mv(t)-1,t),e,2)}function Yg(t,e){var n=t.getUTCDay();return t=n>=4||0===n?wv(t):wv.ceil(t),$v(wv.count(Mv(t),t)+(4===Mv(t).getUTCDay()),e,2)}function Kg(t){return t.getUTCDay()}function $g(t,e){return $v(mv.count(Mv(t)-1,t),e,2)}function Xg(t,e){return $v(t.getUTCFullYear()%100,e,2)}function Jg(t,e){return $v(t.getUTCFullYear()%1e4,e,4)}function Zg(){return"+0000"}function tm(){return"%"}function em(t){return+t}function nm(t){return Math.floor(+t/1e3)}function rm(t){return qv=Vv(t),Bv=qv.format,zv=qv.parse,Wv=qv.utcFormat,Hv=qv.utcParse,qv}rm({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function im(t){return new Date(t)}function om(t){return t instanceof Date?+t:+new Date(+t)}function am(t,e,n,r,i,a,s,u,c){var l=iy(Xd,Xd),h=l.invert,f=l.domain,p=c(".%L"),d=c(":%S"),y=c("%I:%M"),v=c("%I %p"),g=c("%a %d"),m=c("%b %d"),_=c("%B"),b=c("%Y"),w=[[s,1,1e3],[s,5,5e3],[s,15,15e3],[s,30,3e4],[a,1,6e4],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,864e5],[r,2,1728e5],[n,1,6048e5],[e,1,2592e6],[e,3,7776e6],[t,1,31536e6]];function E(o){return(s(o)<o?p:a(o)<o?d:i(o)<o?y:r(o)<o?v:e(o)<o?n(o)<o?g:m:t(o)<o?_:b)(o)}function T(e,n,r,i){if(null==e&&(e=10),"number"==typeof e){var a=Math.abs(r-n)/e,s=o((function(t){return t[2]})).right(w,a);s===w.length?(i=k(n/31536e6,r/31536e6,e),e=t):s?(i=(s=w[a/w[s-1][2]<w[s][2]/a?s-1:s])[1],e=s[0]):(i=Math.max(k(n,r,e),1),e=u)}return null==i?e:e.every(i)}return l.invert=function(t){return new Date(h(t))},l.domain=function(t){return arguments.length?f(Bd.call(t,om)):f().map(im)},l.ticks=function(t,e){var n,r=f(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=(n=T(t,i,o,e))?n.range(i,o+1):[],a?n.reverse():n},l.tickFormat=function(t,e){return null==e?E:c(e)},l.nice=function(t,e){var n=f();return(t=T(t,n[0],n[n.length-1],e))?f(cy(n,t)):l},l.copy=function(){return ny(l,am(t,e,n,r,i,a,s,u,c))},l}var sm=function(){return Ud.apply(am(My,jy,qy,nv,ov,uv,hv,dv,Bv).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},um=Ry((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),cm=um,lm=um.range,hm=Ry((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()})),fm=hm,pm=hm.range,dm=Ry((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()})),ym=dm,vm=dm.range,gm=function(){return Ud.apply(am(Mv,cm,gv,Ov,fm,ym,hv,dv,Wv).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};function mm(){var t,e,n,r,i,o=0,a=1,s=Xd,u=!1;function c(e){return isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,u?Math.max(0,Math.min(1,e)):e))}return c.domain=function(i){return arguments.length?(t=r(o=+i[0]),e=r(a=+i[1]),n=t===e?0:1/(e-t),c):[o,a]},c.clamp=function(t){return arguments.length?(u=!!t,c):u},c.interpolator=function(t){return arguments.length?(s=t,c):s},c.unknown=function(t){return arguments.length?(i=t,c):i},function(i){return r=i,t=i(o),e=i(a),n=t===e?0:1/(e-t),c}}function _m(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function bm(){var t=ay(mm()(Xd));return t.copy=function(){return _m(t,bm())},Vd.apply(t,arguments)}function wm(){var t=vy(mm()).domain([1,10]);return t.copy=function(){return _m(t,wm()).base(t.base())},Vd.apply(t,arguments)}function Em(){var t=by(mm());return t.copy=function(){return _m(t,Em()).constant(t.constant())},Vd.apply(t,arguments)}function Tm(){var t=Cy(mm());return t.copy=function(){return _m(t,Tm()).exponent(t.exponent())},Vd.apply(t,arguments)}function xm(){return Tm.apply(null,arguments).exponent(.5)}function Cm(){var t=[],e=Xd;function n(n){if(!isNaN(n=+n))return e((c(t,n)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var r,o=0,a=e.length;o<a;++o)null==(r=e[o])||isNaN(r=+r)||t.push(r);return t.sort(i),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Cm(e).domain(t)},Vd.apply(n,arguments)}function Sm(){var t,e,n,r,i,o,a,s=0,u=.5,c=1,l=Xd,h=!1;function f(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(t<e?r:i),l(h?Math.max(0,Math.min(1,t)):t))}return f.domain=function(a){return arguments.length?(t=o(s=+a[0]),e=o(u=+a[1]),n=o(c=+a[2]),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),f):[s,u,c]},f.clamp=function(t){return arguments.length?(h=!!t,f):h},f.interpolator=function(t){return arguments.length?(l=t,f):l},f.unknown=function(t){return arguments.length?(a=t,f):a},function(a){return o=a,t=a(s),e=a(u),n=a(c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),f}}function Im(){var t=ay(Sm()(Xd));return t.copy=function(){return _m(t,Im())},Vd.apply(t,arguments)}function Nm(){var t=vy(Sm()).domain([.1,1,10]);return t.copy=function(){return _m(t,Nm()).base(t.base())},Vd.apply(t,arguments)}function km(){var t=by(Sm());return t.copy=function(){return _m(t,km()).constant(t.constant())},Vd.apply(t,arguments)}function Am(){var t=Cy(Sm());return t.copy=function(){return _m(t,Am()).exponent(t.exponent())},Vd.apply(t,arguments)}function Pm(){return Am.apply(null,arguments).exponent(.5)}var Om=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n},Rm=Om("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Dm=Om("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Mm=Om("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Lm=Om("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Fm=Om("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),jm=Om("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Um=Om("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Vm=Om("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),qm=Om("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Bm=Om("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),zm=function(t){return yn(t[t.length-1])},Wm=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Om),Hm=zm(Wm),Qm=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Om),Gm=zm(Qm),Ym=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Om),Km=zm(Ym),$m=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Om),Xm=zm($m),Jm=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Om),Zm=zm(Jm),t_=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Om),e_=zm(t_),n_=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Om),r_=zm(n_),i_=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Om),o_=zm(i_),a_=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Om),s_=zm(a_),u_=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Om),c_=zm(u_),l_=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Om),h_=zm(l_),f_=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Om),p_=zm(f_),d_=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Om),y_=zm(d_),v_=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Om),g_=zm(v_),m_=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Om),__=zm(m_),b_=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Om),w_=zm(b_),E_=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Om),T_=zm(E_),x_=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Om),C_=zm(x_),S_=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Om),I_=zm(S_),N_=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Om),k_=zm(N_),A_=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Om),P_=zm(A_),O_=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Om),R_=zm(O_),D_=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Om),M_=zm(D_),L_=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Om),F_=zm(L_),j_=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Om),U_=zm(j_),V_=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Om),q_=zm(V_),B_=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Om),z_=zm(B_),W_=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},H_=Ed(Oo(300,.5,0),Oo(-240,.5,1)),Q_=Ed(Oo(-100,.75,.35),Oo(80,1.5,.8)),G_=Ed(Oo(260,.75,.35),Oo(80,1.5,.8)),Y_=Oo(),K_=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Y_.h=360*t-100,Y_.s=1.5-1.5*e,Y_.l=.8-.9*e,Y_+""},$_=Ye(),X_=Math.PI/3,J_=2*Math.PI/3,Z_=function(t){var e;return t=(.5-t)*Math.PI,$_.r=255*(e=Math.sin(t))*e,$_.g=255*(e=Math.sin(t+X_))*e,$_.b=255*(e=Math.sin(t+J_))*e,$_+""},tb=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"};function eb(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var nb=eb(Om("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),rb=eb(Om("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ib=eb(Om("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ob=eb(Om("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),ab=function(t){return Te(re(t).call(document.documentElement))},sb=0;function ub(){return new cb}function cb(){this._="@"+(++sb).toString(36)}cb.prototype=ub.prototype={constructor:cb,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var lb=function(t){return"string"==typeof t?new be([document.querySelectorAll(t)],[document.documentElement]):new be([null==t?[]:t],_e)},hb=function(t,e){null==e&&(e=An().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=Pn(t,e[n]);return i},fb=function(t){return function(){return t}},pb=Math.abs,db=Math.atan2,yb=Math.cos,vb=Math.max,gb=Math.min,mb=Math.sin,_b=Math.sqrt,bb=Math.PI,wb=bb/2,Eb=2*bb;function Tb(t){return t>1?0:t<-1?bb:Math.acos(t)}function xb(t){return t>=1?wb:t<=-1?-wb:Math.asin(t)}function Cb(t){return t.innerRadius}function Sb(t){return t.outerRadius}function Ib(t){return t.startAngle}function Nb(t){return t.endAngle}function kb(t){return t&&t.padAngle}function Ab(t,e,n,r,i,o,a,s){var u=n-t,c=r-e,l=a-i,h=s-o,f=h*u-l*c;if(!(f*f<1e-12))return[t+(f=(l*(e-o)-h*(t-i))/f)*u,e+f*c]}function Pb(t,e,n,r,i,o,a){var s=t-n,u=e-r,c=(a?o:-o)/_b(s*s+u*u),l=c*u,h=-c*s,f=t+l,p=e+h,d=n+l,y=r+h,v=(f+d)/2,g=(p+y)/2,m=d-f,_=y-p,b=m*m+_*_,w=i-o,E=f*y-d*p,T=(_<0?-1:1)*_b(vb(0,w*w*b-E*E)),x=(E*_-m*T)/b,C=(-E*m-_*T)/b,S=(E*_+m*T)/b,I=(-E*m+_*T)/b,N=x-v,k=C-g,A=S-v,P=I-g;return N*N+k*k>A*A+P*P&&(x=S,C=I),{cx:x,cy:C,x01:-l,y01:-h,x11:x*(i/w-1),y11:C*(i/w-1)}}var Ob=function(){var t=Cb,e=Sb,n=fb(0),r=null,i=Ib,o=Nb,a=kb,s=null;function u(){var u,c,l=+t.apply(this,arguments),h=+e.apply(this,arguments),f=i.apply(this,arguments)-wb,p=o.apply(this,arguments)-wb,d=pb(p-f),y=p>f;if(s||(s=u=zi()),h<l&&(c=h,h=l,l=c),h>1e-12)if(d>Eb-1e-12)s.moveTo(h*yb(f),h*mb(f)),s.arc(0,0,h,f,p,!y),l>1e-12&&(s.moveTo(l*yb(p),l*mb(p)),s.arc(0,0,l,p,f,y));else{var v,g,m=f,_=p,b=f,w=p,E=d,T=d,x=a.apply(this,arguments)/2,C=x>1e-12&&(r?+r.apply(this,arguments):_b(l*l+h*h)),S=gb(pb(h-l)/2,+n.apply(this,arguments)),I=S,N=S;if(C>1e-12){var k=xb(C/l*mb(x)),A=xb(C/h*mb(x));(E-=2*k)>1e-12?(b+=k*=y?1:-1,w-=k):(E=0,b=w=(f+p)/2),(T-=2*A)>1e-12?(m+=A*=y?1:-1,_-=A):(T=0,m=_=(f+p)/2)}var P=h*yb(m),O=h*mb(m),R=l*yb(w),D=l*mb(w);if(S>1e-12){var M,L=h*yb(_),F=h*mb(_),j=l*yb(b),U=l*mb(b);if(d<bb&&(M=Ab(P,O,j,U,L,F,R,D))){var V=P-M[0],q=O-M[1],B=L-M[0],z=F-M[1],W=1/mb(Tb((V*B+q*z)/(_b(V*V+q*q)*_b(B*B+z*z)))/2),H=_b(M[0]*M[0]+M[1]*M[1]);I=gb(S,(l-H)/(W-1)),N=gb(S,(h-H)/(W+1))}}T>1e-12?N>1e-12?(v=Pb(j,U,P,O,h,N,y),g=Pb(L,F,R,D,h,N,y),s.moveTo(v.cx+v.x01,v.cy+v.y01),N<S?s.arc(v.cx,v.cy,N,db(v.y01,v.x01),db(g.y01,g.x01),!y):(s.arc(v.cx,v.cy,N,db(v.y01,v.x01),db(v.y11,v.x11),!y),s.arc(0,0,h,db(v.cy+v.y11,v.cx+v.x11),db(g.cy+g.y11,g.cx+g.x11),!y),s.arc(g.cx,g.cy,N,db(g.y11,g.x11),db(g.y01,g.x01),!y))):(s.moveTo(P,O),s.arc(0,0,h,m,_,!y)):s.moveTo(P,O),l>1e-12&&E>1e-12?I>1e-12?(v=Pb(R,D,L,F,l,-I,y),g=Pb(P,O,j,U,l,-I,y),s.lineTo(v.cx+v.x01,v.cy+v.y01),I<S?s.arc(v.cx,v.cy,I,db(v.y01,v.x01),db(g.y01,g.x01),!y):(s.arc(v.cx,v.cy,I,db(v.y01,v.x01),db(v.y11,v.x11),!y),s.arc(0,0,l,db(v.cy+v.y11,v.cx+v.x11),db(g.cy+g.y11,g.cx+g.x11),y),s.arc(g.cx,g.cy,I,db(g.y11,g.x11),db(g.y01,g.x01),!y))):s.arc(0,0,l,w,b,y):s.lineTo(R,D)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-bb/2;return[yb(r)*n,mb(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:fb(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:fb(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:fb(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:fb(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:fb(+t),u):i},u.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:fb(+t),u):o},u.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:fb(+t),u):a},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u};function Rb(t){this._context=t}Rb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Db=function(t){return new Rb(t)};function Mb(t){return t[0]}function Lb(t){return t[1]}var Fb=function(){var t=Mb,e=Lb,n=fb(!0),r=null,i=Db,o=null;function a(a){var s,u,c,l=a.length,h=!1;for(null==r&&(o=i(c=zi())),s=0;s<=l;++s)!(s<l&&n(u=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(u,s,a),+e(u,s,a));if(c)return o=null,c+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:fb(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:fb(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:fb(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a},jb=function(){var t=Mb,e=null,n=fb(0),r=Lb,i=fb(!0),o=null,a=Db,s=null;function u(u){var c,l,h,f,p,d=u.length,y=!1,v=new Array(d),g=new Array(d);for(null==o&&(s=a(p=zi())),c=0;c<=d;++c){if(!(c<d&&i(f=u[c],c,u))===y)if(y=!y)l=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=c-1;h>=l;--h)s.point(v[h],g[h]);s.lineEnd(),s.areaEnd()}y&&(v[c]=+t(f,c,u),g[c]=+n(f,c,u),s.point(e?+e(f,c,u):v[c],r?+r(f,c,u):g[c]))}if(p)return s=null,p+""||null}function c(){return Fb().defined(i).curve(a).context(o)}return u.x=function(n){return arguments.length?(t="function"==typeof n?n:fb(+n),e=null,u):t},u.x0=function(e){return arguments.length?(t="function"==typeof e?e:fb(+e),u):t},u.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:fb(+t),u):e},u.y=function(t){return arguments.length?(n="function"==typeof t?t:fb(+t),r=null,u):n},u.y0=function(t){return arguments.length?(n="function"==typeof t?t:fb(+t),u):n},u.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:fb(+t),u):r},u.lineX0=u.lineY0=function(){return c().x(t).y(n)},u.lineY1=function(){return c().x(t).y(r)},u.lineX1=function(){return c().x(e).y(n)},u.defined=function(t){return arguments.length?(i="function"==typeof t?t:fb(!!t),u):i},u.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),u):a},u.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),u):o},u},Ub=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},Vb=function(t){return t},qb=function(){var t=Vb,e=Ub,n=null,r=fb(0),i=fb(Eb),o=fb(0);function a(a){var s,u,c,l,h,f=a.length,p=0,d=new Array(f),y=new Array(f),v=+r.apply(this,arguments),g=Math.min(Eb,Math.max(-Eb,i.apply(this,arguments)-v)),m=Math.min(Math.abs(g)/f,o.apply(this,arguments)),_=m*(g<0?-1:1);for(s=0;s<f;++s)(h=y[d[s]=s]=+t(a[s],s,a))>0&&(p+=h);for(null!=e?d.sort((function(t,n){return e(y[t],y[n])})):null!=n&&d.sort((function(t,e){return n(a[t],a[e])})),s=0,c=p?(g-f*_)/p:0;s<f;++s,v=l)u=d[s],l=v+((h=y[u])>0?h*c:0)+_,y[u]={data:a[u],index:s,value:h,startAngle:v,endAngle:l,padAngle:m};return y}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:fb(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:fb(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:fb(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:fb(+t),a):o},a},Bb=Wb(Db);function zb(t){this._curve=t}function Wb(t){function e(e){return new zb(t(e))}return e._curve=t,e}function Hb(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(Wb(t)):e()._curve},t}zb.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var Qb=function(){return Hb(Fb().curve(Bb))},Gb=function(){var t=jb().curve(Bb),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Hb(n())},delete t.lineX0,t.lineEndAngle=function(){return Hb(r())},delete t.lineX1,t.lineInnerRadius=function(){return Hb(i())},delete t.lineY0,t.lineOuterRadius=function(){return Hb(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(Wb(t)):e()._curve},t},Yb=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]},Kb=Array.prototype.slice;function $b(t){return t.source}function Xb(t){return t.target}function Jb(t){var e=$b,n=Xb,r=Mb,i=Lb,o=null;function a(){var a,s=Kb.call(arguments),u=e.apply(this,s),c=n.apply(this,s);if(o||(o=a=zi()),t(o,+r.apply(this,(s[0]=u,s)),+i.apply(this,s),+r.apply(this,(s[0]=c,s)),+i.apply(this,s)),a)return o=null,a+""||null}return a.source=function(t){return arguments.length?(e=t,a):e},a.target=function(t){return arguments.length?(n=t,a):n},a.x=function(t){return arguments.length?(r="function"==typeof t?t:fb(+t),a):r},a.y=function(t){return arguments.length?(i="function"==typeof t?t:fb(+t),a):i},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a}function Zb(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function tw(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function ew(t,e,n,r,i){var o=Yb(e,n),a=Yb(e,n=(n+i)/2),s=Yb(r,n),u=Yb(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],s[0],s[1],u[0],u[1])}function nw(){return Jb(Zb)}function rw(){return Jb(tw)}function iw(){var t=Jb(ew);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}var ow={draw:function(t,e){var n=Math.sqrt(e/bb);t.moveTo(n,0),t.arc(0,0,n,0,Eb)}},aw={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},sw=Math.sqrt(1/3),uw=2*sw,cw={draw:function(t,e){var n=Math.sqrt(e/uw),r=n*sw;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},lw=Math.sin(bb/10)/Math.sin(7*bb/10),hw=Math.sin(Eb/10)*lw,fw=-Math.cos(Eb/10)*lw,pw={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=hw*n,i=fw*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=Eb*o/5,s=Math.cos(a),u=Math.sin(a);t.lineTo(u*n,-s*n),t.lineTo(s*r-u*i,u*r+s*i)}t.closePath()}},dw={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},yw=Math.sqrt(3),vw={draw:function(t,e){var n=-Math.sqrt(e/(3*yw));t.moveTo(0,2*n),t.lineTo(-yw*n,-n),t.lineTo(yw*n,-n),t.closePath()}},gw=Math.sqrt(3)/2,mw=1/Math.sqrt(12),_w=3*(mw/2+1),bw={draw:function(t,e){var n=Math.sqrt(e/_w),r=n/2,i=n*mw,o=r,a=n*mw+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(-.5*r-gw*i,gw*r+-.5*i),t.lineTo(-.5*o-gw*a,gw*o+-.5*a),t.lineTo(-.5*s-gw*u,gw*s+-.5*u),t.lineTo(-.5*r+gw*i,-.5*i-gw*r),t.lineTo(-.5*o+gw*a,-.5*a-gw*o),t.lineTo(-.5*s+gw*u,-.5*u-gw*s),t.closePath()}},ww=[ow,aw,cw,dw,pw,vw,bw],Ew=function(){var t=fb(ow),e=fb(64),n=null;function r(){var r;if(n||(n=r=zi()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"==typeof e?e:fb(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:fb(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r},Tw=function(){};function xw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Cw(t){this._context=t}Cw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xw(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Sw=function(t){return new Cw(t)};function Iw(t){this._context=t}Iw.prototype={areaStart:Tw,areaEnd:Tw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:xw(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Nw=function(t){return new Iw(t)};function kw(t){this._context=t}kw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:xw(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Aw=function(t){return new kw(t)};function Pw(t,e){this._basis=new Cw(t),this._beta=e}Pw.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Ow=function t(e){function n(t){return 1===e?new Cw(t):new Pw(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function Rw(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Dw(t,e){this._context=t,this._k=(1-e)/6}Dw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Rw(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Rw(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Mw=function t(e){function n(t){return new Dw(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Lw(t,e){this._context=t,this._k=(1-e)/6}Lw.prototype={areaStart:Tw,areaEnd:Tw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Rw(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Fw=function t(e){function n(t){return new Lw(t,e)}return n.tension=function(e){return t(+e)},n}(0);function jw(t,e){this._context=t,this._k=(1-e)/6}jw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Rw(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Uw=function t(e){function n(t){return new jw(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Vw(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>1e-12){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>1e-12){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/l,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function qw(t,e){this._context=t,this._alpha=e}qw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Vw(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Bw=function t(e){function n(t){return e?new qw(t,e):new Dw(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function zw(t,e){this._context=t,this._alpha=e}zw.prototype={areaStart:Tw,areaEnd:Tw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Vw(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ww=function t(e){function n(t){return e?new zw(t,e):new Lw(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Hw(t,e){this._context=t,this._alpha=e}Hw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Vw(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Qw=function t(e){function n(t){return e?new Hw(t,e):new jw(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Gw(t){this._context=t}Gw.prototype={areaStart:Tw,areaEnd:Tw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var Yw=function(t){return new Gw(t)};function Kw(t){return t<0?-1:1}function $w(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Kw(o)+Kw(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Xw(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Jw(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function Zw(t){this._context=t}function tE(t){this._context=new eE(t)}function eE(t){this._context=t}function nE(t){return new Zw(t)}function rE(t){return new tE(t)}function iE(t){this._context=t}function oE(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}Zw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Jw(this,this._t0,Xw(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Jw(this,Xw(this,n=$w(this,t,e)),n);break;default:Jw(this,this._t0,n=$w(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(tE.prototype=Object.create(Zw.prototype)).point=function(t,e){Zw.prototype.point.call(this,e,t)},eE.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},iE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=oE(t),i=oE(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var aE=function(t){return new iE(t)};function sE(t,e){this._context=t,this._t=e}sE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var uE=function(t){return new sE(t,.5)};function cE(t){return new sE(t,0)}function lE(t){return new sE(t,1)}var hE=function(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},fE=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n};function pE(t,e){return t[e]}var dE=function(){var t=fb([]),e=fE,n=hE,r=pE;function i(i){var o,a,s=t.apply(this,arguments),u=i.length,c=s.length,l=new Array(c);for(o=0;o<c;++o){for(var h,f=s[o],p=l[o]=new Array(u),d=0;d<u;++d)p[d]=h=[0,+r(i[d],f,d,i)],h.data=i[d];p.key=f}for(o=0,a=e(l);o<c;++o)l[a[o]].index=o;return n(l,a),l}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:fb(Kb.call(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:fb(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?fE:"function"==typeof t?t:fb(Kb.call(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?hE:t,i):n},i},yE=function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}hE(t,e)}},vE=function(t,e){if((s=t.length)>0)for(var n,r,i,o,a,s,u=0,c=t[e[0]].length;u<c;++u)for(o=a=0,n=0;n<s;++n)(i=(r=t[e[n]][u])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):(r[0]=0,r[1]=i)},gE=function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}hE(t,e)}},mE=function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,u=0,c=0;s<i;++s){for(var l=t[e[s]],h=l[a][1]||0,f=(h-(l[a-1][1]||0))/2,p=0;p<s;++p){var d=t[e[p]];f+=(d[a][1]||0)-(d[a-1][1]||0)}u+=h,c+=f*h}n[a-1][1]+=n[a-1][0]=o,u&&(o-=c/u)}n[a-1][1]+=n[a-1][0]=o,hE(t,e)}},_E=function(t){var e=t.map(bE);return fE(t).sort((function(t,n){return e[t]-e[n]}))};function bE(t){for(var e,n=-1,r=0,i=t.length,o=-1/0;++n<i;)(e=+t[n][1])>o&&(o=e,r=n);return r}var wE=function(t){var e=t.map(EE);return fE(t).sort((function(t,n){return e[t]-e[n]}))};function EE(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}var TE=function(t){return wE(t).reverse()},xE=function(t){var e,n,r=t.length,i=t.map(EE),o=_E(t),a=0,s=0,u=[],c=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],u.push(n)):(s+=i[n],c.push(n));return c.reverse().concat(u)},CE=function(t){return fE(t).reverse()};var SE=Date.prototype.toISOString?function(t){return t.toISOString()}:Wv("%Y-%m-%dT%H:%M:%S.%LZ");var IE=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:Hv("%Y-%m-%dT%H:%M:%S.%LZ"),NE=function(t,e,n){var r=new Wn,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?Bn():+n,r.restart((function o(a){a+=i,r.restart(o,i+=e,n),t(a)}),e,n),r)},kE=function(t){return function(){return t}};function AE(t){return t[0]}function PE(t){return t[1]}function OE(){this._=null}function RE(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function DE(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ME(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function LE(t){for(;t.L;)t=t.L;return t}OE.prototype={constructor:OE,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=LE(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(DE(this,n),n=(t=n).U),n.C=!1,r.C=!0,ME(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(ME(this,n),n=(t=n).U),n.C=!1,r.C=!0,DE(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?LE(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,DE(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ME(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,DE(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,ME(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,DE(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,ME(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var FE=OE;function jE(t,e,n,r){var i=[null,null],o=uT.push(i)-1;return i.left=t,i.right=e,n&&VE(i,t,e,n),r&&VE(i,e,t,r),aT[t.index].halfedges.push(o),aT[e.index].halfedges.push(o),i}function UE(t,e,n){var r=[e,n];return r.left=t,r}function VE(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function qE(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],c=a[1],l=0,h=1,f=s[0]-u,p=s[1]-c;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<l)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>l&&(l=o)}if(o=r-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>l&&(l=o)}else if(f>0){if(o<l)return;o<h&&(h=o)}if(o=n-c,p||!(o>0)){if(o/=p,p<0){if(o<l)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>l&&(l=o)}if(o=i-c,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>l&&(l=o)}else if(p>0){if(o<l)return;o<h&&(h=o)}return!(l>0||h<1)||(l>0&&(t[0]=[u+l*f,c+l*p]),h<1&&(t[1]=[u+h*f,c+h*p]),!0)}}}}}function BE(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],c=t.left,l=t.right,h=c[0],f=c[1],p=l[0],d=l[1],y=(h+p)/2,v=(f+d)/2;if(d===f){if(y<e||y>=r)return;if(h>p){if(u){if(u[1]>=i)return}else u=[y,n];o=[y,i]}else{if(u){if(u[1]<n)return}else u=[y,i];o=[y,n]}}else if(s=v-(a=(h-p)/(d-f))*y,a<-1||a>1)if(h>p){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(f<d){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function zE(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function WE(t,e){return e[+(e.left!==t.site)]}function HE(t,e){return e[+(e.left===t.site)]}var QE,GE=[];function YE(){RE(this),this.x=this.y=this.arc=this.site=this.cy=null}function KE(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,c=r[1]-s,l=o[0]-a,h=o[1]-s,f=2*(u*h-c*l);if(!(f>=-lT)){var p=u*u+c*c,d=l*l+h*h,y=(h*p-c*d)/f,v=(u*d-l*p)/f,g=GE.pop()||new YE;g.arc=t,g.site=i,g.x=y+a,g.y=(g.cy=v+s)+Math.sqrt(y*y+v*v),t.circle=g;for(var m=null,_=sT._;_;)if(g.y<_.y||g.y===_.y&&g.x<=_.x){if(!_.L){m=_.P;break}_=_.L}else{if(!_.R){m=_;break}_=_.R}sT.insert(m,g),m||(QE=g)}}}}function $E(t){var e=t.circle;e&&(e.P||(QE=e.N),sT.remove(e),GE.push(e),RE(e),t.circle=null)}var XE=[];function JE(){RE(this),this.edge=this.site=this.circle=null}function ZE(t){var e=XE.pop()||new JE;return e.site=t,e}function tT(t){$E(t),oT.remove(t),XE.push(t),RE(t)}function eT(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];tT(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<cT&&Math.abs(r-u.circle.cy)<cT;)o=u.P,s.unshift(u),tT(u),u=o;s.unshift(u),$E(u);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<cT&&Math.abs(r-c.circle.cy)<cT;)a=c.N,s.push(c),tT(c),c=a;s.push(c),$E(c);var l,h=s.length;for(l=1;l<h;++l)c=s[l],u=s[l-1],VE(c.edge,u.site,c.site,i);u=s[0],(c=s[h-1]).edge=jE(u.site,c.site,null,i),KE(u),KE(c)}function nT(t){for(var e,n,r,i,o=t[0],a=t[1],s=oT._;s;)if((r=rT(s,a)-o)>cT)s=s.L;else{if(!((i=o-iT(s,a))>cT)){r>-cT?(e=s.P,n=s):i>-cT?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){aT[t.index]={site:t,halfedges:[]}}(t);var u=ZE(t);if(oT.insert(e,u),e||n){if(e===n)return $E(e),n=ZE(e.site),oT.insert(u,n),u.edge=n.edge=jE(e.site,u.site),KE(e),void KE(n);if(n){$E(e),$E(n);var c=e.site,l=c[0],h=c[1],f=t[0]-l,p=t[1]-h,d=n.site,y=d[0]-l,v=d[1]-h,g=2*(f*v-p*y),m=f*f+p*p,_=y*y+v*v,b=[(v*m-p*_)/g+l,(f*_-y*m)/g+h];VE(n.edge,c,d,b),u.edge=jE(c,t,null,b),n.edge=jE(t,d,null,b),KE(e),KE(n)}else u.edge=jE(e.site,u.site)}}function rT(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],u=n[1],c=u-e;if(!c)return s;var l=s-r,h=1/o-1/c,f=l/c;return h?(-f+Math.sqrt(f*f-2*h*(l*l/(-2*c)-u+c/2+i-o/2)))/h+r:(r+s)/2}function iT(t,e){var n=t.N;if(n)return rT(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var oT,aT,sT,uT,cT=1e-6,lT=1e-12;function hT(t,e){return e[1]-t[1]||e[0]-t[0]}function fT(t,e){var n,r,i,o=t.sort(hT).pop();for(uT=[],aT=new Array(t.length),oT=new FE,sT=new FE;;)if(i=QE,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(nT(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;eT(i.arc)}if(function(){for(var t,e,n,r,i=0,o=aT.length;i<o;++i)if((t=aT[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=zE(t,uT[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],u=+e[1][0],c=+e[1][1];!function(t,e,n,r){for(var i,o=uT.length;o--;)BE(i=uT[o],t,e,n,r)&&qE(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>cT||Math.abs(i[0][1]-i[1][1])>cT)||delete uT[o]}(a,s,u,c),function(t,e,n,r){var i,o,a,s,u,c,l,h,f,p,d,y,v=aT.length,g=!0;for(i=0;i<v;++i)if(o=aT[i]){for(a=o.site,s=(u=o.halfedges).length;s--;)uT[u[s]]||u.splice(s,1);for(s=0,c=u.length;s<c;)d=(p=HE(o,uT[u[s]]))[0],y=p[1],h=(l=WE(o,uT[u[++s%c]]))[0],f=l[1],(Math.abs(d-h)>cT||Math.abs(y-f)>cT)&&(u.splice(s,0,uT.push(UE(a,p,Math.abs(d-t)<cT&&r-y>cT?[t,Math.abs(h-t)<cT?f:r]:Math.abs(y-r)<cT&&n-d>cT?[Math.abs(f-r)<cT?h:n,r]:Math.abs(d-n)<cT&&y-e>cT?[n,Math.abs(h-n)<cT?f:e]:Math.abs(y-e)<cT&&d-t>cT?[Math.abs(f-e)<cT?h:t,e]:null))-1),++c);c&&(g=!1)}if(g){var m,_,b,w=1/0;for(i=0,g=null;i<v;++i)(o=aT[i])&&(b=(m=(a=o.site)[0]-t)*m+(_=a[1]-e)*_)<w&&(w=b,g=o);if(g){var E=[t,e],T=[t,r],x=[n,r],C=[n,e];g.halfedges.push(uT.push(UE(a=g.site,E,T))-1,uT.push(UE(a,T,x))-1,uT.push(UE(a,x,C))-1,uT.push(UE(a,C,E))-1)}}for(i=0;i<v;++i)(o=aT[i])&&(o.halfedges.length||delete aT[i])}(a,s,u,c)}this.edges=uT,this.cells=aT,oT=sT=uT=aT=null}fT.prototype={constructor:fT,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return WE(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s,u,c,l=n.site,h=-1,f=e[i[o-1]],p=f.left===l?f.right:f.left;++h<o;)a=p,p=(f=e[i[h]]).left===l?f.right:f.left,a&&p&&r<a.index&&r<p.index&&(u=a,c=p,((s=l)[0]-c[0])*(u[1]-s[1])-(s[0]-u[0])*(c[1]-s[1])<0)&&t.push([l.data,a.data,p.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var u=t-i.site[0],c=e-i.site[1],l=u*u+c*c;do{i=o.cells[r=a],a=null,i.halfedges.forEach((function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],c=e-s[1],h=u*u+c*c;h<l&&(l=h,a=s.index)}}))}while(null!==a);return o._found=r,null==n||l<=n*n?i.site:null}};var pT=function(){var t=AE,e=PE,n=null;function r(r){return new fT(r.map((function(n,i){var o=[Math.round(t(n,i,r)/cT)*cT,Math.round(e(n,i,r)/cT)*cT];return o.index=i,o.data=n,o})),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:kE(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:kE(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r},dT=function(t){return function(){return t}};function yT(t,e,n){this.target=t,this.type=e,this.transform=n}function vT(t,e,n){this.k=t,this.x=e,this.y=n}vT.prototype={constructor:vT,scale:function(t){return 1===t?this:new vT(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new vT(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var gT=new vT(1,0,0);function mT(t){for(;!t.__zoom;)if(!(t=t.parentNode))return gT;return t.__zoom}function _T(){ce.stopImmediatePropagation()}mT.prototype=vT.prototype;var bT=function(){ce.preventDefault(),ce.stopImmediatePropagation()};function wT(){return!ce.ctrlKey&&!ce.button}function ET(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function TT(){return this.__zoom||gT}function xT(){return-ce.deltaY*(1===ce.deltaMode?.05:ce.deltaMode?1:.002)}function CT(){return navigator.maxTouchPoints||"ontouchstart"in this}function ST(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}var IT=function(){var t,e,n=wT,r=ET,i=ST,o=xT,a=CT,s=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,l=fd,h=ht("start","zoom","end"),f=0;function p(t){t.property("__zoom",TT).on("wheel.zoom",b).on("mousedown.zoom",w).on("dblclick.zoom",E).filter(a).on("touchstart.zoom",T).on("touchmove.zoom",x).on("touchend.zoom touchcancel.zoom",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(t,e){return(e=Math.max(s[0],Math.min(s[1],e)))===t.k?t:new vT(e,t.x,t.y)}function y(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new vT(t.k,r,i)}function v(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function g(t,e,n){t.on("start.zoom",(function(){m(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){m(this,arguments).end()})).tween("zoom",(function(){var t=this,i=arguments,o=m(t,i),a=r.apply(t,i),s=null==n?v(a):"function"==typeof n?n.apply(t,i):n,u=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),c=t.__zoom,h="function"==typeof e?e.apply(t,i):e,f=l(c.invert(s).concat(u/c.k),h.invert(s).concat(u/h.k));return function(t){if(1===t)t=h;else{var e=f(t),n=u/e[2];t=new vT(n,s[0]-e[0]*n,s[1]-e[1]*n)}o.zoom(null,t)}}))}function m(t,e,n){return!n&&t.__zooming||new _(t,e)}function _(t,e){this.that=t,this.args=e,this.active=0,this.extent=r.apply(t,e),this.taps=0}function b(){if(n.apply(this,arguments)){var t=m(this,arguments),e=this.__zoom,r=Math.max(s[0],Math.min(s[1],e.k*Math.pow(2,o.apply(this,arguments)))),a=Rn(this);if(t.wheel)t.mouse[0][0]===a[0]&&t.mouse[0][1]===a[1]||(t.mouse[1]=e.invert(t.mouse[0]=a)),clearTimeout(t.wheel);else{if(e.k===r)return;t.mouse=[a,e.invert(a)],sr(this),t.start()}bT(),t.wheel=setTimeout(c,150),t.zoom("mouse",i(y(d(e,r),t.mouse[0],t.mouse[1]),t.extent,u))}function c(){t.wheel=null,t.end()}}function w(){if(!e&&n.apply(this,arguments)){var t=m(this,arguments,!0),r=Te(ce.view).on("mousemove.zoom",c,!0).on("mouseup.zoom",l,!0),o=Rn(this),a=ce.clientX,s=ce.clientY;Se(ce.view),_T(),t.mouse=[o,this.__zoom.invert(o)],sr(this),t.start()}function c(){if(bT(),!t.moved){var e=ce.clientX-a,n=ce.clientY-s;t.moved=e*e+n*n>f}t.zoom("mouse",i(y(t.that.__zoom,t.mouse[0]=Rn(t.that),t.mouse[1]),t.extent,u))}function l(){r.on("mousemove.zoom mouseup.zoom",null),Ie(ce.view,t.moved),bT(),t.end()}}function E(){if(n.apply(this,arguments)){var t=this.__zoom,e=Rn(this),o=t.invert(e),a=t.k*(ce.shiftKey?.5:2),s=i(y(d(t,a),e,o),r.apply(this,arguments),u);bT(),c>0?Te(this).transition().duration(c).call(g,s,e):Te(this).call(p.transform,s)}}function T(){if(n.apply(this,arguments)){var e,r,i,o,a=ce.touches,s=a.length,u=m(this,arguments,ce.changedTouches.length===s);for(_T(),r=0;r<s;++r)i=a[r],o=[o=On(this,a,i.identifier),this.__zoom.invert(o),i.identifier],u.touch0?u.touch1||u.touch0[2]===o[2]||(u.touch1=o,u.taps=0):(u.touch0=o,e=!0,u.taps=1+!!t);t&&(t=clearTimeout(t)),e&&(u.taps<2&&(t=setTimeout((function(){t=null}),500)),sr(this),u.start())}}function x(){if(this.__zooming){var e,n,r,o,a=m(this,arguments),s=ce.changedTouches,c=s.length;for(bT(),t&&(t=clearTimeout(t)),a.taps=0,e=0;e<c;++e)n=s[e],r=On(this,s,n.identifier),a.touch0&&a.touch0[2]===n.identifier?a.touch0[0]=r:a.touch1&&a.touch1[2]===n.identifier&&(a.touch1[0]=r);if(n=a.that.__zoom,a.touch1){var l=a.touch0[0],h=a.touch0[1],f=a.touch1[0],p=a.touch1[1],v=(v=f[0]-l[0])*v+(v=f[1]-l[1])*v,g=(g=p[0]-h[0])*g+(g=p[1]-h[1])*g;n=d(n,Math.sqrt(v/g)),r=[(l[0]+f[0])/2,(l[1]+f[1])/2],o=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!a.touch0)return;r=a.touch0[0],o=a.touch0[1]}a.zoom("touch",i(y(n,r,o),a.extent,u))}}function C(){if(this.__zooming){var t,n,r=m(this,arguments),i=ce.changedTouches,o=i.length;for(_T(),e&&clearTimeout(e),e=setTimeout((function(){e=null}),500),t=0;t<o;++t)n=i[t],r.touch0&&r.touch0[2]===n.identifier?delete r.touch0:r.touch1&&r.touch1[2]===n.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps){var a=Te(this).on("dblclick.zoom");a&&a.apply(this,arguments)}}}return p.transform=function(t,e,n){var r=t.selection?t.selection():t;r.property("__zoom",TT),t!==r?g(t,e,n):r.interrupt().each((function(){m(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},p.scaleBy=function(t,e,n){p.scaleTo(t,(function(){var t=this.__zoom.k,n="function"==typeof e?e.apply(this,arguments):e;return t*n}),n)},p.scaleTo=function(t,e,n){p.transform(t,(function(){var t=r.apply(this,arguments),o=this.__zoom,a=null==n?v(t):"function"==typeof n?n.apply(this,arguments):n,s=o.invert(a),c="function"==typeof e?e.apply(this,arguments):e;return i(y(d(o,c),a,s),t,u)}),n)},p.translateBy=function(t,e,n){p.transform(t,(function(){return i(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),u)}))},p.translateTo=function(t,e,n,o){p.transform(t,(function(){var t=r.apply(this,arguments),a=this.__zoom,s=null==o?v(t):"function"==typeof o?o.apply(this,arguments):o;return i(gT.translate(s[0],s[1]).scale(a.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,u)}),o)},_.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){ye(new yT(p,t,this.that.__zoom),h.apply,h,[t,this.that,this.args])}},p.wheelDelta=function(t){return arguments.length?(o="function"==typeof t?t:dT(+t),p):o},p.filter=function(t){return arguments.length?(n="function"==typeof t?t:dT(!!t),p):n},p.touchable=function(t){return arguments.length?(a="function"==typeof t?t:dT(!!t),p):a},p.extent=function(t){return arguments.length?(r="function"==typeof t?t:dT([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),p):r},p.scaleExtent=function(t){return arguments.length?(s[0]=+t[0],s[1]=+t[1],p):[s[0],s[1]]},p.translateExtent=function(t){return arguments.length?(u[0][0]=+t[0][0],u[1][0]=+t[1][0],u[0][1]=+t[0][1],u[1][1]=+t[1][1],p):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},p.constrain=function(t){return arguments.length?(i=t,p):i},p.duration=function(t){return arguments.length?(c=+t,p):c},p.interpolate=function(t){return arguments.length?(l=t,p):l},p.on=function(){var t=h.on.apply(h,arguments);return t===h?p:t},p.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,p):Math.sqrt(f)},p}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!l){var t=s(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,u=a(t),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(n(5)),u=n(10),c=a(n(11)),l=a(n(12)),h=n(13);let f={nodeMap:{},selectedNode:"none"};s.json("./data/miserables.json").then(t=>{!function(t){let e=s.forceSimulation().force("link",s.forceLink().id((function(t){return t.id}))).force("charge",s.forceManyBody()).force("center",s.forceCenter(400,500));e.nodes(t.nodes),e.force("link").links(t.links);for(let t=0;t<300;t++)e.tick()}(t);let e=function(t){var e={};let n=t.nodes;for(let t=0;t<n.length;t++){let r=n[t].id;e[r]=[n[t].x,n[t].y]}f.nodeMap=e;return u.initProvenance(f)}(t),n=function(t){t.id?(o.hoverBar(t.id),a.hoverNode(t.id)):(o.hoverBar(t),a.hoverNode(t))},r=function(){o.dehoverBars(),a.dehoverNodes()},i=function(t){e.addAction(t.id?t.id+" Selected":t+" Selected",e=>(e.selectedNode=t.id?t.id:t,e)).applyAction()};const o=new c.default(t,n,r,i),a=new l.default(t,n,r,i,(function(t){const n=e.current().getState();if(n.nodeMap[t.id][0]>=t.x-.1&&n.nodeMap[t.id][0]<=t.x+.1&&n.nodeMap[t.id][1]>=t.y-.1&&n.nodeMap[t.id][1]<=t.y+.1)return;e.addAction(t.id+" Moved",e=>(e.nodeMap[t.id][0]=t.x,e.nodeMap[t.id][1]=t.y,e)).applyAction()}));function p(){h.ProvVisCreator(document.getElementById("provDiv"),e,t=>{e.goToNode(t)})}e.addObserver(["selectedNode"],()=>{o.selectBar(e.current().getState().selectedNode),a.selectNode(e.current().getState().selectedNode),p()}),e.addObserver(["nodeMap"],()=>{a.moveNodes(e.current().getState().nodeMap),console.log("moved"),p()}),e.done(),document.onkeydown=function(t){var n=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);console.log(n),!t.shiftKey&&(n?t.metaKey:t.ctrlKey)&&90==t.which?e.goBackOneStep():t.shiftKey&&(n?t.metaKey:t.ctrlKey)&&90==t.which&&function(){if(0==e.current().children.length)return;e.goToNode(e.current().children[e.current().children.length-1])}()},p()})},function(t,e,n){"use strict";n.r(e),function(t,r){n.d(e,"initProvenance",(function(){return yy})),n.d(e,"isChildNode",(function(){return iy})),n.d(e,"isDiffNode",(function(){return ry})),n.d(e,"isStateNode",(function(){return ny}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var a=function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function u(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function c(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function l(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function h(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l(arguments[e]));return t}function f(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p=!1,d="${JSCORE_VERSION}",y=function(t,e){if(!t)throw v(e)},v=function(t){return new Error("Firebase Database ("+d+") INTERNAL ASSERT FAILED: "+t)},g=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},m={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(g(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},_=function(t){try{return m.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function b(t){return w(void 0,t)}function w(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=w(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function x(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(T())}function C(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}}function S(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function I(){return!0===p}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,k.prototype.create),i}return o(e,t),e}(Error),k=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?A(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new N(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},t}();function A(t,e){return t.replace(P,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var P=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O(t){return JSON.parse(t)}function R(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var D=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=O(_(o[0])||""),n=O(_(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function F(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function j(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var U=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function V(t,e){var n=new q(t,e);return n.subscribe.bind(n)}var q=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=B),void 0===r.error&&(r.error=B),void 0===r.complete&&(r.complete=B);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function B(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function W(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function H(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(W(t,e,r)+"must be a valid function.")}function Q(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(W(t,e,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},Y=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),K=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new E;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=a({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var r=c(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=l(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var h=this.getOrInitializeService(u);s.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return s(this,void 0,void 0,(function(){var t;return u(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();var $,X=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new K(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function J(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z,tt=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Z||(Z={}));var et,nt={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},rt=Z.INFO,it=(($={})[Z.DEBUG]="log",$[Z.VERBOSE]="log",$[Z.INFO]="info",$[Z.WARN]="warn",$[Z.ERROR]="error",$),ot=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=it[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,J(["["+i+"]  "+t.name+":"],n))}},at=function(){function t(t){this.name=t,this._logLevel=rt,this._logHandler=ot,this._userLogHandler=null,tt.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Z))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?nt[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,J([this,Z.DEBUG],t)),this._logHandler.apply(this,J([this,Z.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,J([this,Z.VERBOSE],t)),this._logHandler.apply(this,J([this,Z.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,J([this,Z.INFO],t)),this._logHandler.apply(this,J([this,Z.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,J([this,Z.WARN],t)),this._logHandler.apply(this,J([this,Z.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,J([this,Z.ERROR],t)),this._logHandler.apply(this,J([this,Z.ERROR],t))},t}();function st(t){tt.forEach((function(e){e.setLogLevel(t)}))}var ut,ct=((et={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",et["bad-app-name"]="Illegal App name: '{$appName}",et["duplicate-app"]="Firebase App named '{$appName}' already exists",et["app-deleted"]="Firebase App named '{$appName}' already deleted",et["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",et["invalid-log-argument"]="First argument to `onLog` must be null or a function.",et),lt=new k("app","Firebase",ct),ht=((ut={})["@firebase/app"]="fire-core",ut["@firebase/analytics"]="fire-analytics",ut["@firebase/auth"]="fire-auth",ut["@firebase/database"]="fire-rtdb",ut["@firebase/functions"]="fire-fn",ut["@firebase/installations"]="fire-iid",ut["@firebase/messaging"]="fire-fcm",ut["@firebase/performance"]="fire-perf",ut["@firebase/remote-config"]="fire-rc",ut["@firebase/storage"]="fire-gcs",ut["@firebase/firestore"]="fire-fst",ut["fire-js"]="fire-js",ut["firebase-wrapper"]="fire-js-all",ut),ft=new at("@firebase/app"),pt=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=b(t),this.container=new X(e.name),this._addComponent(new Y("app",(function(){return o}),"PUBLIC"));try{for(var a=c(this.firebase_.INTERNAL.components.values()),s=a.next();!s.done;s=a.next()){var u=s.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){ft.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw lt.create("app-deleted",{appName:this.name_})},t}();pt.prototype.name&&pt.prototype.options||pt.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function dt(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw lt.create("bad-app-name",{appName:String(a)});if(M(e,a))throw lt.create("duplicate-app",{appName:a});var s=new t(n,o,r);return e[a]=s,s},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=ht[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void ft.warn(u.join(" "))}o(new Y(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:st,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw lt.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=nt[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Z[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=tt;r<i.length;r++){n(i[r])}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"7.16.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!M(e,t=t||"[DEFAULT]"))throw lt.create("no-app",{appName:t});return e[t]}function o(o){var a,s,u=o.name;if(n.has(u))return ft.debug("There were multiple attempts to register component "+u+"."),"PUBLIC"===o.type?r[u]:null;if(n.set(u,o),"PUBLIC"===o.type){var l=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[u])throw lt.create("invalid-app-argument",{appName:u});return t[u]()};void 0!==o.serviceProps&&w(l,o.serviceProps),r[u]=l,t.prototype[u]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,u);return n.apply(this,o.multipleInstances?t:[])}}try{for(var h=c(Object.keys(e)),f=h.next();!f.done;f=h.next()){var p=f.value;e[p]._addComponent(o)}}catch(t){a={error:t}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}return"PUBLIC"===o.type?r[u]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt=function t(){var e=dt(pt);return e.INTERNAL=a(a({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){w(e,t)},createSubscribe:V,ErrorFactory:k,deepExtend:w}),e}(),vt=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){ft.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var gt=self.firebase.SDK_VERSION;gt&&gt.indexOf("LITE")>=0&&ft.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var mt=yt.initializeApp;yt.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return C()&&ft.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),mt.apply(void 0,t)};var _t=yt;!function(t,e){t.INTERNAL.registerComponent(new Y("platform-logger",(function(t){return new vt(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.8",e),t.registerVersion("fire-js","")}(_t);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var bt=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),R(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:O(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),wt=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return M(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),Et=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new bt(e)}}catch(t){}return new wt},Tt=Et("localStorage"),xt=Et("sessionStorage"),Ct=new at("@firebase/database"),St=function(){var t=1;return function(){return t++}}(),It=function(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,y(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new U;n.update(e);var r=n.digest();return m.encodeByteArray(r)},Nt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=Nt.apply(null,i):n+="object"==typeof i?R(i):i,n+=" "}return n},kt=null,At=!0,Pt=function(t,e){y(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(Ct.logLevel=Z.VERBOSE,kt=Ct.log.bind(Ct),e&&xt.set("logging_enabled",!0)):"function"==typeof t?kt=t:(kt=null,xt.remove("logging_enabled"))},Ot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===At&&(At=!1,null===kt&&!0===xt.get("logging_enabled")&&Pt(!0)),kt){var n=Nt.apply(null,t);kt(n)}},Rt=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Ot.apply(void 0,h([t],e))}},Dt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Nt.apply(void 0,h(t));Ct.error(n)},Mt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Nt.apply(void 0,h(t));throw Ct.error(n),new Error(n)},Lt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Nt.apply(void 0,h(t));Ct.warn(n)},Ft=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},jt="[MIN_NAME]",Ut="[MAX_NAME]",Vt=function(t,e){if(t===e)return 0;if(t===jt||e===Ut)return-1;if(e===jt||t===Ut)return 1;var n=Yt(t),r=Yt(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},qt=function(t,e){return t===e?0:t<e?-1:1},Bt=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+R(e))},zt=function(t){if("object"!=typeof t||null===t)return R(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=R(e[i]),r+=":",r+=zt(t[e[i]]);return r+="}"},Wt=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var Qt=function(t){y(!Ft(t),"Invalid JSON number");var e,n,r,i,o;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var s=a.join(""),u="";for(o=0;o<64;o+=8){var c=parseInt(s.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()},Gt=new RegExp("^-?(0*)\\d{1,10}$"),Yt=function(t){if(Gt.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Kt=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw Lt("Exception was thrown by user callback.",e),t}),Math.floor(0))}},$t=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},Xt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=Vt(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),Jt=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=G(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=G(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=G(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),Zt=function(){function t(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=Tt.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Tt.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(y("string"==typeof t,"typeof type must == string"),y("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return Ht(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}();var te,ee,ne,re,ie,oe=function(t){var e=ae(t),n=e.namespace;"firebase.com"===e.domain&&Mt(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||Mt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Lt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new Zt(e.host,e.secure,n,r,"",n!==e.subdomain),path:new Xt(e.pathString)}},ae=function(t){var e="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(s=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(h,f)));var p=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=c(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Lt("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===s||"wss"===s,u=parseInt(e.substring(l+1),10)):l=e.length;var d=e.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),o=r}"ns"in p&&(o=p.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},se=/[\[\].#$\/\u0000-\u001F\u007F]/,ue=/[\[\].#$\u0000-\u001F\u007F]/,ce=function(t){return"string"==typeof t&&0!==t.length&&!se.test(t)},le=function(t){return"string"==typeof t&&0!==t.length&&!ue.test(t)},he=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!Ft(t)||t&&"object"==typeof t&&M(t,".sv")},fe=function(t,e,n,r,i){i&&void 0===n||pe(W(t,e,i),n,r)},pe=function(t,e,n){var r=n instanceof Xt?new Jt(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(Ft(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&G(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(Ht(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!ce(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),pe(t,n,r),r.pop()})),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},de=function(t,e,n,r,i){if(!i||void 0!==n){var o=W(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];Ht(n,(function(t,e){var n=new Xt(t);if(pe(o,e,r.child(n)),".priority"===n.getBack()&&!he(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!ce(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Xt.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&a.contains(r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}},ye=function(t,e,n,r){if(!r||void 0!==n){if(Ft(n))throw new Error(W(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!he(n))throw new Error(W(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ve=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(W(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ge=function(t,e,n,r){if(!(r&&void 0===n||ce(n)))throw new Error(W(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},me=function(t,e,n,r){if(!(r&&void 0===n||le(n)))throw new Error(W(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},_e=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),me(t,e,n,r)},be=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},we=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ce(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),le(t)}(r))throw new Error(W(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Ee=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(W(t,e,r)+"must be a boolean.")},Te=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){z("OnDisconnect.cancel",0,1,arguments.length),H("OnDisconnect.cancel",1,t,!0);var e=new E;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){z("OnDisconnect.remove",0,1,arguments.length),be("OnDisconnect.remove",this.path_),H("OnDisconnect.remove",1,t,!0);var e=new E;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){z("OnDisconnect.set",1,2,arguments.length),be("OnDisconnect.set",this.path_),fe("OnDisconnect.set",1,t,this.path_,!1),H("OnDisconnect.set",2,e,!0);var n=new E;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){z("OnDisconnect.setWithPriority",2,3,arguments.length),be("OnDisconnect.setWithPriority",this.path_),fe("OnDisconnect.setWithPriority",1,t,this.path_,!1),ye("OnDisconnect.setWithPriority",2,e,!1),H("OnDisconnect.setWithPriority",3,n,!0);var r=new E;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(z("OnDisconnect.update",1,2,arguments.length),be("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Lt("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}de("OnDisconnect.update",1,t,this.path_,!1),H("OnDisconnect.update",2,e,!0);var i=new E;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),xe=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return z("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Ce=(te="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ee=0,ne=[],function(t){var e,n=t===ee;ee=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=te.charAt(t%64),t=Math.floor(t/64);y(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===ne[e];e--)ne[e]=0;ne[e]++}else for(e=0;e<12;e++)ne[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=te.charAt(ne[e]);return y(20===i.length,"nextPushId: Length should be 20."),i}),Se=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ie=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Se(jt,t),r=new Se(jt,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Se.MIN},t}(),Ne=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return re},set:function(t){re=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return Vt(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw v("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Se.MIN},e.prototype.maxPost=function(){return new Se(Ut,re)},e.prototype.makePost=function(t,e){return y("string"==typeof t,"KeyIndex indexValue must always be a string."),new Se(t,re)},e.prototype.toString=function(){return".key"},e}(Ie),ke=new Ne;var Ae,Pe,Oe,Re=function(t){return"number"==typeof t?"number:"+Qt(t):"string:"+t},De=function(t){if(t.isLeafNode()){var e=t.val();y("string"==typeof e||"number"==typeof e||"object"==typeof e&&M(e,".sv"),"Priority must be a string or number.")}else y(t===ie||t.isEmpty(),"priority of unexpected type.");y(t===ie||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Me=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,y(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),De(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ae},set:function(t){Ae=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(y(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Re(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?Qt(this.value_):this.value_,this.lazyHash_=It(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(y(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return y(i>=0,"Unknown leaf type: "+n),y(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var Le,Fe,je=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?Vt(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Se.MIN},e.prototype.maxPost=function(){return new Se(Ut,new Me("[PRIORITY-POST]",Oe))},e.prototype.makePost=function(t,e){var n=Pe(t);return new Se(e,new Me("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ie)),Ue=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ve=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Be.EMPTY_NODE,this.right=null!=o?o:Be.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Be.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Be.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),qe=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ve(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Be=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ve.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ve.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ue(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ue(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ue(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ue(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new qe,t}(),ze=Math.log(2),We=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/ze,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),He=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new Ve(a,o.node,Ve.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],a=n?n(o):o,new Ve(a,o.node,Ve.BLACK,c,l)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),l=t[o],h=n?n(l):l;u(new Ve(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?s(h,Ve.BLACK):(s(h,Ve.BLACK),s(h,Ve.RED))}return o}(new We(t.length));return new Be(r||e,o)},Qe={},Ge=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return y(Qe&&je,"ChildrenNode.ts has not been loaded"),Le=Le||new t({".priority":Qe},{".priority":je})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=L(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Be?e:null},t.prototype.hasIndex=function(t){return M(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){y(e!==ke,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,s=n.getIterator(Se.Wrap),u=s.getNext();u;)o=o||e.isDefinedOn(u.node),i.push(u),u=s.getNext();r=o?He(i,e.getCompare()):Qe;var c=e.toString(),l=a({},this.indexSet_);l[c]=e;var h=a({},this.indexes_);return h[c]=r,new t(h,l)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(j(this.indexes_,(function(t,i){var o=L(r.indexSet_,i);if(y(o,"Missing index implementation for "+i),t===Qe){if(o.isDefinedOn(e.node)){for(var a=[],s=n.getIterator(Se.Wrap),u=s.getNext();u;)u.name!==e.name&&a.push(u),u=s.getNext();return a.push(e),He(a,o.getCompare())}return Qe}var c=n.get(e.name),l=t;return c&&(l=l.remove(new Se(e.name,c))),l.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(j(this.indexes_,(function(t){if(t===Qe)return t;var r=n.get(e.name);return r?t.remove(new Se(e.name,r)):t})),this.indexSet_)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ye(t,e){return Vt(t.name,e.name)}function Ke(t,e){return Vt(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&De(this.priorityNode_),this.children_.isEmpty()&&y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Fe||(Fe=new t(new Be(Ke),null,Ge.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Fe},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Fe:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(y(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Se(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Fe:this.priorityNode_;return new t(i,a,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;y(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(je,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Re(this.getPriority().val())+":"),this.forEachChild(je,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":It(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Se(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Se(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Se(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Se.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Se.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Xe?-1:0},t.prototype.withIndex=function(e){if(e===ke||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===ke||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(je),r=e.getIterator(je),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===ke?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Xe=new(function(t){function e(){return t.call(this,new Be(Ke),$e.EMPTY_NODE,Ge.Default)||this}return o(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return $e.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}($e));Object.defineProperties(Se,{MIN:{value:new Se(jt,$e.EMPTY_NODE)},MAX:{value:new Se(Ut,Xe)}}),Ne.__EMPTY_NODE=$e.EMPTY_NODE,Me.__childrenNodeConstructor=$e,ie=Xe,function(t){Oe=t}(Xe);function Je(t,e){if(void 0===e&&(e=null),null===t)return $e.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),y(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Me(t,Je(e));if(t instanceof Array){var n=$e.EMPTY_NODE;return Ht(t,(function(e,r){if(M(t,e)&&"."!==e.substring(0,1)){var i=Je(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(Je(e))}var r=[],i=!1;if(Ht(t,(function(t,e){if("."!==t.substring(0,1)){var n=Je(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Se(t,n)))}})),0===r.length)return $e.EMPTY_NODE;var o=He(r,Ye,(function(t){return t.name}),Ke);if(i){var a=He(r,je.getCompare());return new $e(o,Je(e),new Ge({".priority":a},{".priority":je}))}return new $e(o,Je(e),Ge.Default)}!function(t){Pe=t}(Je);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ze,tn=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?Vt(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Se.MIN},e.prototype.maxPost=function(){return Se.MAX},e.prototype.makePost=function(t,e){var n=Je(t);return new Se(e,n)},e.prototype.toString=function(){return".value"},e}(Ie)),en=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,y(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return o(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?Vt(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Je(t),r=$e.EMPTY_NODE.updateChild(this.indexPath_,n);return new Se(e,r)},e.prototype.maxPost=function(){var t=$e.EMPTY_NODE.updateChild(this.indexPath_,Xe);return new Se(Ut,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Ie),nn=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return z("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return z("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return z("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return z("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){z("DataSnapshot.child",0,1,arguments.length),e=String(e),me("DataSnapshot.child",1,e,!1);var n=new Xt(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,je)},t.prototype.hasChild=function(t){z("DataSnapshot.hasChild",1,1,arguments.length),me("DataSnapshot.hasChild",1,t,!1);var e=new Xt(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return z("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(z("DataSnapshot.forEach",1,1,arguments.length),H("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),je))}))},t.prototype.hasChildren=function(){return z("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return z("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return z("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),rn=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+R(this.snapshot.exportVal())},t}(),on=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),an=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new rn("value",this,new nn(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){y(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new on(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),sn=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,M(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new on(this,t,e):null},t.prototype.createEvent=function(t,e){y(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new rn(t.type,this,new nn(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){y(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var a=r[0],s=i[0];return!(s!==a||e.callbacks_[a]&&this.callbacks_[s]&&e.callbacks_[a]!==this.callbacks_[s])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),un=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return y(Ze,"Reference.ts has not been loaded"),Ze},set:function(t){Ze=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===ke){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==jt)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Ut)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===je){if(null!=e&&!he(e)||null!=n&&!he(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(y(t.getIndex()instanceof en||t.getIndex()===tn,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return z("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){z("Query.on",2,4,arguments.length),ve("Query.on",1,e,!1),H("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new an(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new sn(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){z("Query.off",0,3,arguments.length),ve("Query.off",1,t,!0),H("Query.off",2,e,!0),Q("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new an(o,null,n||null)}else t&&(e&&((i={})[t]=e),r=new sn(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;z("Query.once",1,4,arguments.length),ve("Query.once",1,e,!1),H("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),s=!0,u=new E;u.promise.catch((function(){}));var c=function(t){s&&(s=!1,o.off(e,c),n&&n.bind(a.context)(t),u.resolve(t))};return this.on(e,c,(function(t){o.off(e,c),a.cancel&&a.cancel.bind(a.context)(t),u.reject(t)})),u.promise},t.prototype.limitToFirst=function(e){if(z("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(z("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(z("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');me("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new Xt(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new en(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){z("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(ke);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){z("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(je);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){z("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(tn);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),z("Query.startAt",0,2,arguments.length),fe("Query.startAt",1,e,this.path,!0),ge("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),z("Query.endAt",0,2,arguments.length),fe("Query.endAt",1,e,this.path,!0),ge("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(z("Query.equalTo",1,2,arguments.length),fe("Query.equalTo",1,t,this.path,!1),ge("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return z("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return z("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=zt(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(z("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,H(t,3,r.cancel,!0),r.context=n,Q(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(W(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),cn=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ln=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),hn=function(t,e,n){return t&&"object"==typeof t?(y(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?fn(t[".sv"],e,n):"object"==typeof t[".sv"]?pn(t[".sv"],e):void y(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},fn=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:y(!1,"Unexpected server value: "+t)}},pn=function(t,e,n){t.hasOwnProperty("increment")||y(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&y(!1,"Unexpected increment value: "+r);var i=e.node();if(y(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},dn=function(t,e,n,r){return vn(e,new ln(n,t),r)},yn=function(t,e,n){return vn(t,new cn(e),n)};function vn(t,e,n){var r,i=t.getPriority().val(),o=hn(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=hn(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new Me(s,Je(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Me(o))),u.forEachChild(je,(function(t,i){var o=vn(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn,mn=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(je,(function(t,e){n.remember(new Xt(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();if(t=t.popFront(),this.children.has(r))this.children.get(r).forget(t)&&this.children.delete(r);return 0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new Xt(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(gn||(gn={}));var _n,bn,wn=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,y(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),En=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=gn.ACK_USER_WRITE,this.source=wn.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Xt(e));return new t(Xt.Empty,n,this.revert)}return y(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),Tn=function(){function t(t,e){void 0===e&&(_n||(_n=new Be(qt)),e=_n),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return Ht(e,(function(t,e){n=n.set(new Xt(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Xt.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new Xt(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),i=(this.children.get(r)||t.Empty).setTree(e.popFront(),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(Xt.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Xt.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Xt.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(Xt.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),xn=function(){function t(t,e){this.source=t,this.path=e,this.type=gn.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Xt.Empty):new t(this.source,this.path.popFront())},t}(),Cn=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=gn.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Xt.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),Sn=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=gn.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new Xt(e));return n.isEmpty()?null:n.value?new Cn(this.source,Xt.Empty,n.value):new t(this.source,Xt.Empty,n)}return y(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),In=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Nn=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new In(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new In(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new In($e.EMPTY_NODE,!1,!1),new In($e.EMPTY_NODE,!1,!1)),t}(),kn=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),An=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){y(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(kn.childRemovedChange(e,a)):y(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(kn.childAddedChange(e,n)):o.trackChildChange(kn.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(je,(function(t,r){e.hasChild(t)||n.trackChildChange(kn.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(je,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(kn.childChangedChange(e,r,i))}else n.trackChildChange(kn.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?$e.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Pn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;y(e===kn.CHILD_ADDED||e===kn.CHILD_CHANGED||e===kn.CHILD_REMOVED,"Only child changes supported for tracking"),y(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===kn.CHILD_ADDED&&i===kn.CHILD_REMOVED)this.changeMap.set(n,kn.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===kn.CHILD_REMOVED&&i===kn.CHILD_ADDED)this.changeMap.delete(n);else if(e===kn.CHILD_REMOVED&&i===kn.CHILD_CHANGED)this.changeMap.set(n,kn.childRemovedChange(n,r.oldSnap));else if(e===kn.CHILD_CHANGED&&i===kn.CHILD_ADDED)this.changeMap.set(n,kn.childAddedChange(n,t.snapshotNode));else{if(e!==kn.CHILD_CHANGED||i!==kn.CHILD_CHANGED)throw v("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,kn.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),On=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Rn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new In(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Dn=function(t,e){this.viewCache=t,this.changes=e},Mn=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){y(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),y(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,a,s=new Pn;if(n.type===gn.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(e,u.path,u.snap,r,i,s):(y(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.getServerCache().isFiltered()&&!u.path.isEmpty(),o=this.applyServerOverwrite_(e,u.path,u.snap,r,i,a,s))}else if(n.type===gn.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(e,c.path,c.children,r,i,s):(y(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,c.path,c.children,r,i,a,s))}else if(n.type===gn.ACK_USER_WRITE){var l=n;o=l.revert?this.revertUserWrite_(e,l.path,r,i,s):this.ackUserWrite_(e,l.path,l.affectedTree,r,i,s)}else{if(n.type!==gn.LISTEN_COMPLETE)throw v("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,s)}var h=s.getChanges();return t.maybeAddValueEvent_(e,o,h),new Dn(o,h)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(kn.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,s=void 0;if(e.isEmpty())if(y(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof $e?u:$e.EMPTY_NODE,l=n.calcCompleteEventChildren(c);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){y(1===e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();s=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,s);a=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var v=e.popFront(),g=void 0;if(o.isCompleteForChild(f)){s=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),s);g=null!=m?o.getNode().getImmediateChild(f).updateChild(v,m):o.getNode().getImmediateChild(f)}else g=n.calcCompleteChild(f,t.getServerCache());a=null!=g?this.filter_.updateChild(o.getNode(),f,g,v,r,i):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);s=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(h).updateChild(f,n);s=".priority"===h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,f,On,null)}var d=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),y=new Rn(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,y,a)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,s,u=t.getEventCache(),c=new Rn(r,t,i);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var d=c.getCompleteChild(l);p=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):$e.EMPTY_NODE}if(f.equals(p))a=t;else{var y=this.filter_.updateChild(u.getNode(),l,p,h,c,o);a=t.updateEventSnap(y,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,a){var s=this,u=e;return r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=s.applyUserOverwrite_(u,l,c,i,o,a))})),r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=s.applyUserOverwrite_(u,l,c,i,o,a))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:Tn.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new Xt(e),h,r,i,o,a)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=s.applyMerge_(h,n);c=s.applyServerOverwrite_(c,new Xt(e),f,r,i,o,a)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),r,i,a,o);if(e.isEmpty()){var u=Tn.Empty;return s.getNode().forEachChild(ke,(function(t,e){u=u.set(new Xt(t),e)})),this.applyServerMerge_(t,e,u,r,i,a,o)}return t}var c=Tn.Empty;return n.foreach((function(t,n){var r=e.child(t);s.isCompleteForPath(r)&&(c=c.set(t,s.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,a,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,On,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var a=new Rn(n,t,r),s=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var l=t.getServerCache().getNode();y(l instanceof $e,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(l)}c=c,u=this.filter_.updateFullNode(s,c,i)}else{var h=e.getFront(),f=n.calcCompleteChild(h,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(h)&&(f=s.getImmediateChild(h)),(u=null!=f?this.filter_.updateChild(s,h,f,e.popFront(),a,i):t.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(s,h,$e.EMPTY_NODE,e.popFront(),a,i):s).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Xt.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},t}(),Ln=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===kn.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(kn.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,kn.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,kn.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,kn.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,kn.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,kn.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,a=n.filter((function(t){return t.type===e}));a.sort(this.compareChanges_.bind(this)),a.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw v("Should only compare child_ events.");var n=new Se(t.childName,t.snapshotNode),r=new Se(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Fn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new An(n.getIndex()),i=n.getNodeFilter();this.processor_=new Mn(i);var o=e.getServerCache(),a=e.getEventCache(),s=r.updateFullNode($e.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode($e.EMPTY_NODE,a.getNode(),null),c=new In(s,o.isFullyInitialized(),r.filtersNodes()),l=new In(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Nn(l,c),this.eventGenerator_=new Ln(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){y(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){e=e;var i=t.createCancelEvent(e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===gn.MERGE&&null!==t.source.queryId&&(y(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),y(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),y(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];e.getNode().isLeafNode()||e.getNode().forEachChild(je,(function(t,e){n.push(kn.childAddedChange(t,e))}));return e.isFullyInitialized()&&n.push(kn.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),jn=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return y(bn,"Reference.ts has not been loaded"),bn},set:function(t){y(!bn,"__referenceConstructor has already been defined"),bn=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var a=this.views.get(o);return y(null!=a,"SyncTree gave us an op for an invalid query."),a.applyOperation(t,e,n)}var s=[];try{for(var u=c(this.views.values()),l=u.next();!l.done;l=u.next()){a=l.value;s=s.concat(a.applyOperation(t,e,n))}}catch(t){r={error:t}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return s},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),a=this.views.get(o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;s?u=!0:r instanceof $e?(s=n.calcCompleteEventChildren(r),u=!1):(s=$e.EMPTY_NODE,u=!1);var c=new Nn(new In(s,u,!1),new In(r,i,!1));a=new Fn(t,c),this.views.set(o,a)}return a.addEventRegistration(e),a.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,o,a=e.queryIdentifier(),s=[],u=[],h=this.hasCompleteView();if("default"===a)try{for(var f=c(this.views.entries()),p=f.next();!p.done;p=f.next()){var d=l(p.value,2),y=d[0],v=d[1];u=u.concat(v.removeEventRegistration(n,r)),v.isEmpty()&&(this.views.delete(y),v.getQuery().getQueryParams().loadsAllData()||s.push(v.getQuery()))}}catch(t){i={error:t}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}else(v=this.views.get(a))&&(u=u.concat(v.removeEventRegistration(n,r)),v.isEmpty()&&(this.views.delete(a),v.getQuery().getQueryParams().loadsAllData()||s.push(v.getQuery())));return h&&!this.hasCompleteView()&&s.push(new t.__referenceConstructor(e.repo,e.path)),{removed:s,events:u}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=c(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=c(this.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r||a.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=c(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Un=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new Tn(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=Xt.relativePath(i,e);return o=o.updateChild(a,n),new t(this.writeTree_.set(i,o))}var s=new Tn(n);return new t(this.writeTree_.setTree(e,s))},t.prototype.addWrites=function(t,e){var n=this;return Ht(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,Tn.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Xt.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(je,(function(e,n){t.push(new Se(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Se(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new Tn(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(y(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t(e.child(n),o,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Xt.Empty,this.writeTree_,t)},t.Empty=new t(new Tn(null)),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vn=function(){function t(){this.visibleWrites_=Un.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new qn(t,this)},t.prototype.addOverwrite=function(t,e,n,r){y(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){y(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));y(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&a>=0;){var s=this.allWrites_[a];s.visible&&(a>=n&&this.recordContainsPath_(s,r.path)?i=!1:r.path.contains(s.path)&&(o=!0)),a--}if(i){if(o)return this.resetTree_(),!0;r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):Ht(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))}));return!0}return!1},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(Xt.Empty)){var a=t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e);c=n||$e.EMPTY_NODE;return a.apply(c)}return null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return n;if(null!=n||u.hasCompleteWrite(Xt.Empty)){var c=n||$e.EMPTY_NODE;return u.apply(c)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=$e.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(je,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(je,(function(t,e){var r=i.childCompoundWrite(new Xt(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){y(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(Xt.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,Xt.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Un.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=Xt.relativePath(n,a),r=r.addWrite(s,o.snap)):a.contains(n)&&(s=Xt.relativePath(a,n),r=r.addWrite(Xt.Empty,o.snap.getChild(s)));else{if(!o.children)throw v("WriteRecord should have .snap or .children");if(n.contains(a))s=Xt.relativePath(n,a),r=r.addWrites(s,o.children);else if(a.contains(n))if((s=Xt.relativePath(a,n)).isEmpty())r=r.addWrites(Xt.Empty,o.children);else{var u=L(o.children,s.getFront());if(u){var c=u.getChild(s.popFront());r=r.addWrite(Xt.Empty,c)}}}}}return r},t}(),qn=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Bn=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=Tn.Empty,this.pendingWriteTree_=new Vn,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Cn(wn.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Tn.fromObject(e);return this.applyOperationToSyncPoints_(new Sn(wn.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Tn.Empty;return null!=n.snap?r=r.set(Xt.Empty,!0):Ht(n.children,(function(t,e){r=r.set(new Xt(t),e)})),this.applyOperationToSyncPoints_(new En(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Cn(wn.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=Tn.fromObject(e);return this.applyOperationToSyncPoints_(new Sn(wn.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new xn(wn.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=Xt.relativePath(a,e),c=new Cn(wn.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=Xt.relativePath(a,e),c=Tn.fromObject(n),l=new Sn(wn.forServerTaggedQuery(s),u,c);return this.applyTaggedOperation_(a,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,a=i.queryId,s=Xt.relativePath(o,e),u=new xn(wn.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=Xt.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var a,s=this.syncPointTree_.get(r);(s?(o=o||s.hasCompleteView(),i=i||s.getCompleteServerCache(Xt.Empty)):(s=new jn,this.syncPointTree_=this.syncPointTree_.set(r,s)),null!=i)?a=!0:(a=!1,i=$e.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(Xt.Empty);n&&(i=i.updateImmediateChild(t,n))})));var u=s.viewExistsForQuery(e);if(!u&&!e.getQueryParams().loadsAllData()){var c=t.makeQueryKey_(e);y(!this.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=t.getNextQueryTag_();this.queryToTagMap.set(c,l),this.tagToQueryMap.set(l,c)}var h=this.pendingWriteTree_.childWrites(r),f=s.addEventRegistration(e,n,h,i,a);if(!u&&!o){var p=s.viewForQuery(e);f=f.concat(this.setupListener_(e,p))}return f},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var u=a.removeEventRegistration(e,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;s=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var y=p[d],v=y.getQuery(),g=this.createListenerForView_(y);this.listenProvider_.startListening(t.queryForListening_(v),this.tagForQuery_(v),g.hashFn,g.onComplete)}}if(!h&&c.length>0&&!r)if(l){this.listenProvider_.stopListening(t.queryForListening_(e),null)}else c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}));this.removeTags_(c)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=Xt.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),Ht(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),s=this.syncPointTree_.subtree(r);if(i)y(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),Ht(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var l=u[c];this.listenProvider_.stopListening(t.queryForListening_(l),this.tagForQuery_(l))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||$e.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return y(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Xt(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);y(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Xt.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Xt.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Xt.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(Xt.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Xt.Empty));var a=[];return e.children.inorderTraversal((function(e,o){var s=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))})),o&&(a=a.concat(o.applyOperation(t,r,n))),a},t.nextQueryTag_=1,t}(),zn=function(){function t(){this.rootNode_=$e.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Wn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(Ot("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Lt(t)},t}(),Hn=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),M(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return b(this.counters_)},t}(),Qn=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Hn),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Gn=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=a({},t);return this.last_&&Ht(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Yn=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Gn(t);var n=1e4+2e4*Math.random();$t(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;Ht(e,(function(e,i){i>0&&M(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),$t(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Kn=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new $n(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r)t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),$n=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();kt&&Ot("event: "+e.toString()),Kt(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Xn=function(){function t(t){this.allowedEvents_=t,this.listeners_={},y(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=h(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){y(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Jn=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return o(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return y("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Xn),Zn=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||x()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return o(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return y("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Xn),tr=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&Kt((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),er=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Rt(t),this.stats_=Qn.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new tr(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new nr((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=l(t,5),i=r[0],o=r[1],a=r[2];r[3],r[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=l(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=R(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=g(e),m.encodeByteArray(n,!0)),i=Wt(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},t.prototype.incrementIncomingBytes_=function(t){var e=R(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),nr=function(){function t(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=St(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(t){Ot("frame writing exception"),t.stack&&Ot(t.stack),Ot(t)}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Ot("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){Ot("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},t}(),rr="";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ir=null;"undefined"!=typeof MozWebSocket?ir=MozWebSocket:"undefined"!=typeof WebSocket&&(ir=WebSocket);var or=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Rt(this.connId),this.stats_=Qn.getCollection(n),this.connURL=t.connectionURL_(n,i,o)}return t.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Tt.set("previous_websocket_failure",!0);try{if(I()){var i=p?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/5/"+rr+"/"+r.platform+"/"+i,"X-Firebase-GMPID":this.applicationId||""}},a=r.env,s=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;s&&(o.proxy={origin:s}),this.mySock=new ir(this.connURL,[],o)}else{o={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new ir(this.connURL,[],o)}}catch(t){this.log_("Error instantiating WebSocket.");var u=t.message||t.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ir&&!t.forceDisallow_},t.previouslyFailed=function(){return Tt.isInMemoryStorage||!0===Tt.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){Tt.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=O(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(y(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=R(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=Wt(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),ar=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[er,or]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=or&&or.isAvailable(),o=i&&!or.previouslyFailed();if(e.webSocketOnly&&(i||Lt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[or];else{var a=this.transports_=[];try{for(var s=c(t.ALL_TRANSPORTS),u=s.next();!u.done;u=s.next()){var l=u.value;l&&l.isAvailable()&&a.push(l)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),sr=function(){function t(t,e,n,r,i,o,a,s){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=a,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Rt("c:"+this.id+":"),this.transportManager_=new ar(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=$t((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=Bt("t",t),n=Bt("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=Bt("t",t),n=Bt("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=Bt("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?Dt("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Dt("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Lt("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),$t((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$t((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Tt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ur=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),cr=function(t){function e(n,r,i,o,a,s,u){var c=t.call(this)||this;if(c.repoInfo_=n,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=o,c.onServerInfoUpdate_=a,c.authTokenProvider_=s,c.authOverride_=u,c.id=e.nextPersistentConnectionId_++,c.log_=Rt("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingPutCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=1e3,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,u&&!I())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return c.scheduleConnect_(0),Jn.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&Zn.getInstance().on("online",c.onOnline_,c),c}return o(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(R(i)),y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),y(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),y(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&M(t,"w")){var n=L(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();Lt("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=D(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t,e=this;if(this.connected_&&this.authToken_){var n=this.authToken_,r=(t=D(n).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,(function(t){var r=t.s,i=t.d||"error";e.authToken_===n&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),y(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+R(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Dt("Unrecognized action received from server: "+R(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this,a=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,r())};this.realtime_={close:c,sendRequest:function(t){y(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}};var l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(l).then((function(e){s?Ot("getToken() completed but was canceled"):(Ot("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,u=new sr(i,o.repoInfo_,o.applicationId_,t,n,r,(function(t){Lt(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")}),a))})).then(null,(function(t){o.log_("Failed to get token: "+t),s||c()}))}},e.prototype.interrupt=function(t){Ot("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){Ot("Resuming connection for reason: "+t),delete this.interruptReasons_[t],F(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return zt(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new Xt(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){Ot("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=c(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,c(a.values())),u=s.next();!u.done;u=s.next()){var l=u.value;this.sendListen_(l)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}},e.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+rr.replace(/\./g,"-")]=1,x()?t["framework.cordova"]=1:S()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Zn.getInstance().currentlyOnline();return F(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ur),lr=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=Rt("p:rest:"),i.listens_={},i}return o(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(y(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var s=e.getListenId_(t,r),u={};this.listens_[s]=u;var c=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",c,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),L(o.listens_,s)===u)&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){r.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);var t=null;if(s.status>=200&&s.status<300){try{t=O(s.responseText)}catch(t){Lt("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,t)}else 401!==s.status&&404!==s.status&&Lt("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()}))},e}(ur),hr=function(){function t(t,e,n,r){var i=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Kn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new mn,this.persistentConnection_=null;var o=new Wn(n,r);if(this.stats_=Qn.getCollection(t),e||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new lr(this.repoInfo_,this.onDataUpdate_.bind(this),o),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var a=n.options.databaseAuthVariableOverride;if(null!=a){if("object"!=typeof a)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{R(a)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new cr(this.repoInfo_,n.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),o,a),this.server_=this.persistentConnection_}o.addTokenChangeListener((function(t){i.server_.refreshAuthToken(t)})),this.statsReporter_=Qn.getOrCreateReporter(t,(function(){return new Yn(i.stats_,i.server_)})),this.transactionsInit_(),this.infoData_=new zn,this.infoSyncTree_=new Bn({startListening:function(t,e,n,r){var o=[],a=i.infoData_.getNode(t.path);return a.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(t.path,a),setTimeout((function(){r("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Bn({startListening:function(t,e,n,r){return i.server_.listen(t,n,e,(function(e,n){var o=r(e,n);i.eventQueue_.raiseEventsForChangedPath(t.path,o)})),[]},stopListening:function(t,e){i.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new Xt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Xt(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var a=j(e,(function(t){return Je(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var s=Je(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)}else if(n){var u=j(e,(function(t){return Je(t)}));o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=Je(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var l=i;o.length>0&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;Ht(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new Xt("/.info/"+t),r=Je(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),a=Je(e,n),s=this.serverSyncTree_.calcCompleteEventCache(t),u=yn(a,s,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),a.val(!0),(function(e,n){var o="ok"===e;o||Lt("set at "+t+" failed: "+e);var a=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,a),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),a={};if(Ht(e,(function(e,n){i=!1,a[e]=dn(t.child(e),Je(n),r.serverSyncTree_,o)})),i)Ot("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||Lt("update at "+t+" failed: "+e);var a=r.serverSyncTree_.ackUserWrite(s,!o),u=a.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,e,i)})),Ht(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new mn;this.onDisconnect_.forEachTree(Xt.Empty,(function(r,i){var o=dn(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(Xt.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new mn,this.eventQueue_.raiseEventsForChangedPath(Xt.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Je(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Je(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(F(e))return Ot("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&Ht(e,(function(e,n){var i=Je(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Gn(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);Ht(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),Ot.apply(void 0,h([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&Kt((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new wr(this))},enumerable:!1,configurable:!0}),t}(),fr=function(){function t(e){this.indexedFilter_=new An(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Se(e,n))||(n=$e.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=$e.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority($e.EMPTY_NODE);var i=this;return e.forEachChild(je,(function(t,e){i.matches(new Se(t,e))||(r=r.updateImmediateChild(t,$e.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),pr=function(){function t(t){this.rangedFilter_=new fr(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Se(e,n))||(n=$e.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=$e.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=$e.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority($e.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){a=i.getNext();!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,$e.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;y(s.numChildren()===this.limit_,"");var u=new Se(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var h=s.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(l&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(kn.childChangedChange(e,n,h)),s.updateImmediateChild(e,n);null!=i&&i.trackChildChange(kn.childRemovedChange(e,h));var d=s.updateImmediateChild(e,$e.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(kn.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?t:l&&o(c,u)>=0?(null!=i&&(i.trackChildChange(kn.childRemovedChange(c.name,c.node)),i.trackChildChange(kn.childAddedChange(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,$e.EMPTY_NODE)):t},t}(),dr=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=je}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:jt},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ut},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return y(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==je&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===je},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new An(this.getIndex()):this.hasLimit()?new pr(this):new fr(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===je?e=n.PRIORITY_INDEX:this.index_===tn?e=n.VALUE_INDEX:this.index_===ke?e=n.KEY_INDEX:(y(this.index_ instanceof en,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=R(e),this.startSet_&&(r[n.START_AT]=R(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+R(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=R(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+R(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),yr=function(t){function e(e,n){if(!(e instanceof hr))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,dr.DEFAULT,!1)||this}return o(e,t),e.prototype.getKey=function(){return z("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return z("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Xt||(null===this.path.getFront()?_e("Reference.child",1,t,!1):me("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){z("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){z("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){z("Reference.set",1,2,arguments.length),be("Reference.set",this.path),fe("Reference.set",1,t,this.path,!1),H("Reference.set",2,e,!0);var n=new E;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(z("Reference.update",1,2,arguments.length),be("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Lt("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}de("Reference.update",1,t,this.path,!1),H("Reference.update",2,e,!0);var i=new E;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(z("Reference.setWithPriority",2,3,arguments.length),be("Reference.setWithPriority",this.path),fe("Reference.setWithPriority",1,t,this.path,!1),ye("Reference.setWithPriority",2,e,!1),H("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new E;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return z("Reference.remove",0,1,arguments.length),be("Reference.remove",this.path),H("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(z("Reference.transaction",1,3,arguments.length),be("Reference.transaction",this.path),H("Reference.transaction",1,t,!1),H("Reference.transaction",2,e,!0),Ee("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new E;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new xe(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){z("Reference.setPriority",1,2,arguments.length),be("Reference.setPriority",this.path),ye("Reference.setPriority",1,t,!1),H("Reference.setPriority",2,e,!0);var n=new E;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){z("Reference.push",0,2,arguments.length),be("Reference.push",this.path),fe("Reference.push",1,t,this.path,!0),H("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Ce(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return be("Reference.onDisconnect",this.path),new Te(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(un);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.__referenceConstructor=yr,jn.__referenceConstructor=yr;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vr,gr=function(){this.children={},this.childCount=0,this.value=null},mr=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new gr),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof Xt?e:new Xt(e),r=this,i=n.getFront();null!==i;){r=new t(i,r,L(r.node_.children,i)||new gr),i=(n=n.popFront()).getFront()}return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){y(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;Ht(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new Xt(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=M(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(vr||(vr={})),hr.MAX_TRANSACTION_RETRIES_=25,hr.prototype.transactionsInit_=function(){this.transactionQueueTree_=new mr},hr.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new yr(this,t);o.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:St(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=this.getLatestState_(t);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var c=new nn(a.currentInputSnapshot,new yr(this,a.path),je);a.onComplete(null,!1,c)}}else{pe("transaction failed: Data returned ",u,a.path),a.status=vr.RUN;var l=this.transactionQueueTree_.subTree(t),h=l.getValue()||[];h.push(a),l.setValue(h);var f=void 0;if("object"==typeof u&&null!==u&&M(u,".priority"))f=L(u,".priority"),y(he(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else f=(this.serverSyncTree_.calcCompleteEventCache(t)||$e.EMPTY_NODE).getPriority().val();f=f;var p=this.generateServerValues(),d=Je(u,f),v=yn(d,s,p);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_();var g=this.serverSyncTree_.applyUserOverwrite(t,v,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,g),this.sendReadyTransactions_()}},hr.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||$e.EMPTY_NODE},hr.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);y(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===vr.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},hr.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,a=i.hash(),s=0;s<e.length;s++){var u=e[s];y(u.status===vr.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=vr.SENT,u.retryCount++;var c=Xt.relativePath(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=t;this.server_.put(h.toString(),l,(function(r){n.log_("transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<e.length;a++){if(e[a].status=vr.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,u=new yr(n,e[a].path),c=new nn(s,u,je);o.push(e[a].onComplete.bind(null,null,!0,c))}e[a].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i);for(a=0;a<o.length;a++)Kt(o[a])}else{if("datastale"===r)for(a=0;a<e.length;a++)e[a].status===vr.SENT_NEEDS_ABORT?e[a].status=vr.NEEDS_ABORT:e[a].status=vr.RUN;else{Lt("transaction at "+h.toString()+" failed: "+r);for(a=0;a<e.length;a++)e[a].status=vr.NEEDS_ABORT,e[a].abortReason=r}n.rerunTransactions_(t)}}),a)},hr.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},hr.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter((function(t){return t.status===vr.RUN})).map((function(t){return t.currentWriteId})),a=0;a<t.length;a++){var s=t[a],u=Xt.relativePath(e,s.path),c=!1,l=void 0;if(y(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===vr.NEEDS_ABORT)c=!0,l=s.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===vr.RUN)if(s.retryCount>=hr.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var h=this.getLatestState_(s.path,o);s.currentInputSnapshot=h;var f=t[a].update(h.val());if(void 0!==f){pe("transaction failed: Data returned ",f,s.path);var p=Je(f);"object"==typeof f&&null!=f&&M(f,".priority")||(p=p.updatePriority(h.getPriority()));var d=s.currentWriteId,v=this.generateServerValues(),g=yn(p,h,v);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=g,s.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(d),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(s.path,g,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,l="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],c&&(t[a].status=vr.COMPLETED,n=t[a].unwatcher,setTimeout(n,Math.floor(0)),t[a].onComplete))if("nodata"===l){var m=new yr(this,t[a].path),_=t[a].currentInputSnapshot,b=new nn(_,m,je);r.push(t[a].onComplete.bind(null,null,!1,b))}else r.push(t[a].onComplete.bind(null,new Error(l),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(a=0;a<r.length;a++)Kt(r[a]);this.sendReadyTransactions_()}},hr.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},hr.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},hr.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},hr.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==vr.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},hr.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},hr.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status===vr.SENT_NEEDS_ABORT);else if(e[o].status===vr.SENT)y(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=vr.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(y(e[o].status===vr.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)Kt(n[o])}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _r,br=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return _r||(_r=new t),_r},t.prototype.interrupt=function(){var t,e,n,r;try{for(var i=c(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,c(Object.keys(this.repos_[a]))),u=s.next();!u.done;u=s.next()){var l=u.value;this.repos_[a][l].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var i=c(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,c(Object.keys(this.repos_[a]))),u=s.next();!u.done;u=s.next()){var l=u.value;this.repos_[a][l].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.databaseFromApp=function(t,e,n){var i=n||t.options.databaseURL;void 0===i&&Mt("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var o=oe(i),a=o.repoInfo,s=void 0;return void 0!==r&&(s=r.env.FIREBASE_DATABASE_EMULATOR_HOST),s&&(i="http://"+s+"?ns="+a.namespace,a=(o=oe(i)).repoInfo),we("Invalid Firebase Database URL",1,o),o.path.isEmpty()||Mt("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,e).database},t.prototype.deleteRepo=function(t){var e=L(this.repos_,t.app.name);e&&L(e,t.repoInfo_.toURLString())===t||Mt("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e,n){var r=L(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=L(r,t.toURLString());return i&&Mt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new hr(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),wr=function(){function t(t){this.repo_=t,t instanceof hr||Mt("Don't call new Database() directly - please use firebase.database()."),this.root_=new yr(t,Xt.Empty),this.INTERNAL=new Er(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),z("database.ref",0,1,arguments.length),t instanceof yr?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),z(e,1,1,arguments.length);var n=oe(t);we(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&Mt(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&Mt("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){z("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){z("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),Er=function(){function t(t){this.database=t}return t.prototype.delete=function(){return s(this,void 0,void 0,(function(){return u(this,(function(t){return this.database.checkDeleted_("delete"),br.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},t}(),Tr=Object.freeze({__proto__:null,forceLongPolling:function(){or.forceDisallow(),er.forceAllow()},forceWebSockets:function(){er.forceDisallow()},isWebSocketsAvailable:function(){return or.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),xr=cr;cr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},cr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Cr,Sr=sr,Ir=Zt,Nr=Object.freeze({__proto__:null,DataConnection:xr,RealTimeConnection:Sr,hijackHash:function(t){var e=cr.prototype.put;return cr.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){cr.prototype.put=e}},ConnectionTarget:Ir,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){br.getInstance().forceRestClient(t)}}),kr=wr.ServerValue;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function Ar(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(function(t){rr=t})((Cr=_t).SDK_VERSION),Cr.INTERNAL.registerComponent(new Y("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return br.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:yr,Query:un,Database:wr,DataSnapshot:nn,enableLogging:Pt,INTERNAL:Tr,ServerValue:kr,TEST_ACCESS:Nr}).setMultipleInstances(!0)),Cr.registerVersion("@firebase/database","0.6.7");var Pr,Or="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},Rr=Rr||{},Dr=Or||self;function Mr(){}function Lr(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function Fr(t){var e=Lr(t);return"array"==e||"object"==e&&"number"==typeof t.length}function jr(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ur="closure_uid_"+(1e9*Math.random()>>>0),Vr=0;function qr(t,e,n){return t.call.apply(t.bind,arguments)}function Br(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function zr(t,e,n){return(zr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qr:Br).apply(null,arguments)}function Wr(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var Hr=Date.now||function(){return+new Date};function Qr(t,e){function n(){}n.prototype=e.prototype,t.M=e.prototype,t.prototype=new n,t.prototype.constructor=t}function Gr(){this.j=this.j,this.i=this.i}Gr.prototype.j=!1,Gr.prototype.da=function(){if(!this.j&&(this.j=!0,this.C(),0))(function(t){Object.prototype.hasOwnProperty.call(t,Ur)&&t[Ur]||(t[Ur]=++Vr)})(this)},Gr.prototype.C=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Yr=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Kr=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function $r(t){return Array.prototype.concat.apply([],arguments)}function Xr(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Jr(t){return/^[\s\xa0]*$/.test(t)}var Zr,ti=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ei(t,e){return-1!=t.indexOf(e)}function ni(t,e){return t<e?-1:t>e?1:0}t:{var ri=Dr.navigator;if(ri){var ii=ri.userAgent;if(ii){Zr=ii;break t}}Zr=""}function oi(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ai(t){var e={};for(var n in t)e[n]=t[n];return e}var si="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ui(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<si.length;o++)n=si[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ci(t){return ci[" "](t),t}ci[" "]=Mr;var li,hi,fi=ei(Zr,"Opera"),pi=ei(Zr,"Trident")||ei(Zr,"MSIE"),di=ei(Zr,"Edge"),yi=di||pi,vi=ei(Zr,"Gecko")&&!(ei(Zr.toLowerCase(),"webkit")&&!ei(Zr,"Edge"))&&!(ei(Zr,"Trident")||ei(Zr,"MSIE"))&&!ei(Zr,"Edge"),gi=ei(Zr.toLowerCase(),"webkit")&&!ei(Zr,"Edge");function mi(){var t=Dr.document;return t?t.documentMode:void 0}t:{var _i="",bi=(hi=Zr,vi?/rv:([^\);]+)(\)|;)/.exec(hi):di?/Edge\/([\d\.]+)/.exec(hi):pi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(hi):gi?/WebKit\/(\S+)/.exec(hi):fi?/(?:Version)[ \/]?(\S+)/.exec(hi):void 0);if(bi&&(_i=bi?bi[1]:""),pi){var wi=mi();if(null!=wi&&wi>parseFloat(_i)){li=String(wi);break t}}li=_i}var Ei,Ti={};function xi(t){return function(t,e){var n=Ti;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=ti(String(li)).split("."),r=ti(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ni(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ni(0==a[2].length,0==s[2].length)||ni(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(Dr.document&&pi){var Ci=mi();Ei=Ci||(parseInt(li,10)||void 0)}else Ei=void 0;var Si=Ei,Ii=!pi||9<=Number(Si),Ni=pi&&!xi("9"),ki=function(){if(!Dr.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Dr.addEventListener("test",Mr,e),Dr.removeEventListener("test",Mr,e)}catch(t){}return t}();function Ai(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Pi(t,e){if(Ai.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(vi){t:{try{ci(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Oi[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Ai.prototype.b=function(){this.defaultPrevented=!0},Qr(Pi,Ai);var Oi={2:"touch",3:"pen",4:"mouse"};Pi.prototype.b=function(){Pi.M.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ni)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var Ri="closure_listenable_"+(1e6*Math.random()|0),Di=0;function Mi(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.aa=i,this.key=++Di,this.V=this.X=!1}function Li(t){t.V=!0,t.listener=null,t.proxy=null,t.src=null,t.aa=null}function Fi(t){this.src=t,this.a={},this.b=0}function ji(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Yr(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Li(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Ui(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.V&&o.listener==e&&o.capture==!!n&&o.aa==r)return i}return-1}Fi.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=Ui(t,e,r,i);return-1<a?(e=t[a],n||(e.X=!1)):((e=new Mi(e,this.src,o,!!r,i)).X=n,t.push(e)),e};var Vi="closure_lm_"+(1e6*Math.random()|0),qi={};function Bi(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=$i(r),e&&e[Ri]?e.sa(n,r,jr(i)?!!i.capture:!!i,o):zi(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Bi(t,e[o],n,r,i);return null}return n=$i(n),t&&t[Ri]?t.ra(e,n,jr(r)?!!r.capture:!!r,i):zi(t,e,n,!1,r,i)}function zi(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=jr(i)?!!i.capture:!!i;if(a&&!Ii)return null;var s=Yi(t);if(s||(t[Vi]=s=new Fi(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=Gi,e=Ii?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ki||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Hi(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Wi(t){if("number"!=typeof t&&t&&!t.V){var e=t.src;if(e&&e[Ri])ji(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Hi(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Yi(e))?(ji(n,t),0==n.b&&(n.src=null,e[Vi]=null)):Li(t)}}}function Hi(t){return t in qi?qi[t]:qi[t]="on"+t}function Qi(t,e){var n=t.listener,r=t.aa||t.src;return t.X&&Wi(t),n.call(r,e)}function Gi(t,e){if(t.V)return!0;if(!Ii){if(!e)t:{e=["window","event"];for(var n=Dr,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Qi(t,e=new Pi(e,this))}return Qi(t,new Pi(e,this))}function Yi(t){return(t=t[Vi])instanceof Fi?t:null}var Ki="__closure_events_fn_"+(1e9*Math.random()>>>0);function $i(t){return"function"==Lr(t)?t:(t[Ki]||(t[Ki]=function(e){return t.handleEvent(e)}),t[Ki])}function Xi(){Gr.call(this),this.c=new Fi(this),this.J=this,this.A=null}function Ji(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.V&&a.capture==n){var s=a.listener,u=a.aa||a.src;a.X&&ji(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Qr(Xi,Gr),Xi.prototype[Ri]=!0,(Pr=Xi.prototype).addEventListener=function(t,e,n,r){Bi(this,t,e,n,r)},Pr.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=jr(i)?!!i.capture:!!i,r=$i(r),e&&e[Ri]?(e=e.c,(n=String(n).toString())in e.a&&(-1<(r=Ui(a=e.a[n],r,i,o))&&(Li(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--)))):e&&(e=Yi(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Ui(n,r,i,o)),(r=-1<e?n[e]:null)&&Wi(r))}(this,t,e,n,r)},Pr.dispatchEvent=function(t){var e,n=this.A;if(n)for(e=[];n;n=n.A)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new Ai(t,n);else if(t instanceof Ai)t.target=t.target||n;else{var i=t;ui(t=new Ai(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.a=e[o];i=Ji(a,r,!0,t)&&i}if(i=Ji(a=t.a=n,r,!0,t)&&i,i=Ji(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Ji(a=t.a=e[o],r,!1,t)&&i;return i},Pr.C=function(){if(Xi.M.C.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Li(n[r]);delete e.a[t],e.b--}}this.A=null},Pr.ra=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Pr.sa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Zi=Dr.JSON.stringify;function to(){this.b=this.a=null}var eo,no=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new io}),(function(t){t.reset()}),100);function ro(){var t=uo,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function io(){this.next=this.b=this.a=null}function oo(t){Dr.setTimeout((function(){throw t}),0)}function ao(t,e){eo||function(){var t=Dr.Promise.resolve(void 0);eo=function(){t.then(co)}}(),so||(eo(),so=!0),uo.add(t,e)}to.prototype.add=function(t,e){var n=no.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},io.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},io.prototype.reset=function(){this.next=this.b=this.a=null};var so=!1,uo=new to;function co(){for(var t;t=ro();){try{t.a.call(t.b)}catch(t){oo(t)}var e=no;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}so=!1}function lo(t,e){Xi.call(this),this.b=t||1,this.a=e||Dr,this.f=zr(this.Ua,this),this.g=Hr()}function ho(t){t.Z=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function fo(t,e,n){if("function"==Lr(t))n&&(t=zr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=zr(t.handleEvent,t)}return 2147483647<Number(e)?-1:Dr.setTimeout(t,e||0)}function po(t,e,n){Gr.call(this),this.f=null!=n?zr(t,n):t,this.c=e,this.b=zr(this.Pa,this),this.a=[]}function yo(t){t.T=fo(t.b,t.c),t.f.apply(null,t.a)}function vo(t){Gr.call(this),this.b=t,this.a={}}Qr(lo,Xi),(Pr=lo.prototype).Z=!1,Pr.L=null,Pr.Ua=function(){if(this.Z){var t=Hr()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.Z&&(ho(this),this.start()))}},Pr.start=function(){this.Z=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=Hr())},Pr.C=function(){lo.M.C.call(this),ho(this),delete this.a},Qr(po,Gr),(Pr=po.prototype).ba=!1,Pr.T=null,Pr.Ia=function(t){this.a=arguments,this.T?this.ba=!0:yo(this)},Pr.C=function(){po.M.C.call(this),this.T&&(Dr.clearTimeout(this.T),this.T=null,this.ba=!1,this.a=[])},Pr.Pa=function(){this.T=null,this.ba&&(this.ba=!1,yo(this))},Qr(vo,Gr);var go=[];function mo(t,e,n,r){Array.isArray(n)||(n&&(go[0]=n.toString()),n=go);for(var i=0;i<n.length;i++){var o=Bi(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function _o(t){oi(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Wi(t)}),t),t.a={}}function bo(){}vo.prototype.C=function(){vo.M.C.call(this),_o(this)},vo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wo=null;function Eo(){return wo=wo||new Xi}function To(t){Ai.call(this,"serverreachability",t)}function xo(t){var e=Eo();e.dispatchEvent(new To(e,t))}function Co(t){Ai.call(this,"statevent",t)}function So(t){var e=Eo();e.dispatchEvent(new Co(e,t))}function Io(t){Ai.call(this,"timingevent",t)}function No(t,e){if("function"!=Lr(t))throw Error("Fn must not be null and must be a function");return Dr.setTimeout((function(){t()}),e)}Qr(To,Ai),Qr(Co,Ai),Qr(Io,Ai);var ko={NO_ERROR:0,Va:1,bb:2,ab:3,Ya:4,$a:5,cb:6,za:7,TIMEOUT:8,gb:9},Ao={Xa:"complete",kb:"success",Aa:"error",za:"abort",ib:"ready",jb:"readystatechange",TIMEOUT:"timeout",eb:"incrementaldata",hb:"progress",Za:"downloadprogress",lb:"uploadprogress"};function Po(){}function Oo(t){var e;return(e=t.a)||(e=t.a={}),e}function Ro(){}Po.prototype.a=null;var Do,Mo={OPEN:"a",Wa:"b",Aa:"c",fb:"d"};function Lo(){Ai.call(this,"d")}function Fo(){Ai.call(this,"c")}function jo(){}function Uo(t,e,n){this.g=t,this.W=e,this.U=n||1,this.G=new vo(this),this.N=Vo,t=yi?125:void 0,this.O=new lo(t),this.m=null,this.b=!1,this.j=this.A=this.f=this.B=this.s=this.P=this.h=null,this.i=[],this.a=null,this.w=0,this.c=this.v=null,this.H=-1,this.l=!1,this.J=0,this.D=null,this.o=this.R=this.F=!1}Qr(Lo,Ai),Qr(Fo,Ai),Qr(jo,Po),Do=new jo;var Vo=45e3,qo={},Bo={};function zo(t,e,n){t.B=1,t.f=ha(oa(e)),t.j=n,t.F=!0,Wo(t,null)}function Wo(t,e){t.s=Hr(),Go(t),t.A=oa(t.f);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),xa(n.b,"t",r),t.w=0,t.a=ys(t.g,t.g.w?e:null),0<t.J&&(t.D=new po(zr(t.ya,t,t.a),t.J)),mo(t.G,t.a,"readystatechange",t.Sa),e=t.m?ai(t.m):{},t.j?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.$(t.A,t.v,t.j,e)):(t.v="GET",t.a.$(t.A,t.v,null,e)),xo(1)}function Ho(t,e,n){for(var r=!0;!t.l&&t.w<n.length;){var i=Qo(t,n);if(i==Bo){4==e&&(t.c=4,So(14),r=!1);break}if(i==qo){t.c=4,So(15),r=!1;break}Jo(t,i)}4==e&&0==n.length&&(t.c=1,So(16),r=!1),t.b=t.b&&r,r||(Xo(t),$o(t))}function Qo(t,e){var n=t.w,r=e.indexOf("\n",n);return-1==r?Bo:(n=Number(e.substring(n,r)),isNaN(n)?qo:(r+=1)+n>e.length?Bo:(e=e.substr(r,n),t.w=r+n,e))}function Go(t){t.P=Hr()+t.N,Yo(t,t.N)}function Yo(t,e){if(null!=t.h)throw Error("WatchDog timer not null");t.h=No(zr(t.Qa,t),e)}function Ko(t){t.h&&(Dr.clearTimeout(t.h),t.h=null)}function $o(t){0==t.g.u||t.l||ls(t.g,t)}function Xo(t){Ko(t);var e=t.D;e&&"function"==typeof e.da&&e.da(),t.D=null,ho(t.O),_o(t.G),t.a&&(e=t.a,t.a=null,e.abort(),e.da())}function Jo(t,e){try{var n=t.g;if(0!=n.u&&(n.a==t||Pa(n.b,t)))if(n.A=t.H,!t.o&&Pa(n.b,t)&&3==n.u){try{var r=n.ja.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.i){if(n.a){if(!(n.a.s+3e3<t.s))break t;cs(n),n.a.cancel(),n.a=null}us(n),So(18)}}else n.ia=i[1],0<n.ia-n.G&&37500>i[2]&&n.U&&0==n.m&&!n.l&&(n.l=No(zr(n.Na,n),6e3));if(1>=Aa(n.b)&&n.O){try{n.O()}catch(t){}n.O=void 0}}else fs(n,11)}else if((t.o||n.a==t)&&cs(n),!Jr(e))for(e=r=n.ja.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.G=i[0],i=i[1],2==n.u)if("c"==i[0]){n.B=i[1],n.R=i[2];var o=i[3];null!=o&&(n.oa=o);var a=i[5];null!=a&&"number"==typeof a&&0<a&&(n.D=1.5*a);var s=n,u=t.a;if(u){var c=u.a?u.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var l=s.b;!l.a&&(ei(c,"spdy")||ei(c,"quic")||ei(c,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(Oa(l,l.b),l.b=null))}if(s.s){var h=u.a?u.a.getResponseHeader("X-HTTP-Session-Id"):null;h&&(s.ha=h,la(s.v,s.s,h))}}n.u=3,n.c&&n.c.na();var f=t;if((s=n).ea=ds(s,s.w?s.R:null,s.P),f.o){Ra(s.b,f);var p=f,d=s.D;d&&p.setTimeout(d),p.h&&(Ko(p),Go(p)),s.a=f}else ss(s);0<n.f.length&&rs(n)}else"stop"!=i[0]&&"close"!=i[0]||fs(n,7);else 3==n.u&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?fs(n,7):ts(n):"noop"!=i[0]&&n.c&&n.c.ma(i),n.m=0);xo(4)}catch(t){}}function Zo(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Fr(t)||"string"==typeof t)Kr(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.I&&"function"==typeof t.I)n=void 0;else if(Fr(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.I&&"function"==typeof t.I)return t.I();if("string"==typeof t)return t.split("");if(Fr(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ta(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ta)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function ea(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];na(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)na(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function na(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Pr=Uo.prototype).setTimeout=function(t){this.N=t},Pr.Sa=function(t){t=t.target;var e=this.D;e&&3==$a(t)?e.Ia():this.ya(t)},Pr.ya=function(t){try{if(t==this.a)t:{var e=$a(this.a),n=this.a.qa(),r=this.a.S();if(!(3>e||3==e&&!yi&&!this.a.Y())){this.l||4!=e||7==n||xo(8==n||0>=r?3:2),Ko(this);var i=this.a.S();this.H=i;var o=this.a.Y();if(this.b=200==i){if(this.R&&!this.o){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jr(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.c=3,So(12),Xo(this),$o(this);break t}this.o=!0,Jo(this,u)}this.F?(Ho(this,e,o),yi&&this.b&&3==e&&(mo(this.G,this.O,"tick",this.Ra),this.O.start())):Jo(this,o),4==e&&Xo(this),this.b&&!this.l&&(4==e?ls(this.g,this):(this.b=!1,Go(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,So(12)):(this.c=0,So(13)),Xo(this),$o(this)}}}catch(t){}},Pr.Ra=function(){if(this.a){var t=$a(this.a),e=this.a.Y();this.w<e.length&&(Ko(this),Ho(this,t,e),this.b&&4!=t&&Go(this))}},Pr.cancel=function(){this.l=!0,Xo(this)},Pr.Qa=function(){this.h=null;var t=Hr();0<=t-this.P?(2!=this.B&&(xo(3),So(17)),Xo(this),this.c=2,$o(this)):Yo(this,this.P-t)},(Pr=ta.prototype).I=function(){ea(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Pr.K=function(){return ea(this),this.a.concat()},Pr.get=function(t,e){return na(this.b,t)?this.b[t]:e},Pr.set=function(t,e){na(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Pr.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ra=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ia(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ia){this.a=void 0!==e?e:t.a,aa(this,t.f),this.j=t.j,sa(this,t.c),ua(this,t.h),this.g=t.g,e=t.b;var n=new ba;n.c=e.c,e.a&&(n.a=new ta(e.a),n.b=e.b),ca(this,n),this.i=t.i}else t&&(n=String(t).match(ra))?(this.a=!!e,aa(this,n[1]||"",!0),this.j=fa(n[2]||""),sa(this,n[3]||"",!0),ua(this,n[4]),this.g=fa(n[5]||"",!0),ca(this,n[6]||"",!0),this.i=fa(n[7]||"")):(this.a=!!e,this.b=new ba(null,this.a))}function oa(t){return new ia(t)}function aa(t,e,n){t.f=n?fa(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function sa(t,e,n){t.c=n?fa(e,!0):e}function ua(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function ca(t,e,n){e instanceof ba?(t.b=e,function(t,e){e&&!t.f&&(wa(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Ea(this,e),xa(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=pa(e,ma)),t.b=new ba(e,t.a))}function la(t,e,n){t.b.set(e,n)}function ha(t){return la(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Hr()).toString(36)),t}function fa(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function pa(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,da),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function da(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ia.prototype.toString=function(){var t=[],e=this.f;e&&t.push(pa(e,ya,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(pa(e,ya,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(pa(n,"/"==n.charAt(0)?ga:va,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",pa(n,_a)),t.join("")};var ya=/[#\/\?@]/g,va=/[#\?:]/g,ga=/[#\?]/g,ma=/[#\?@]/g,_a=/#/g;function ba(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function wa(t){t.a||(t.a=new ta,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Ea(t,e){wa(t),e=Ca(t,e),na(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,na((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&ea(t)))}function Ta(t,e){return wa(t),e=Ca(t,e),na(t.a.b,e)}function xa(t,e,n){Ea(t,e),0<n.length&&(t.c=null,t.a.set(Ca(t,e),Xr(n)),t.b+=n.length)}function Ca(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Sa(t,e){this.b=t,this.a=e}function Ia(t){this.g=t||Na,Dr.PerformanceNavigationTiming?t=0<(t=Dr.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Dr.ca&&Dr.ca.ua&&Dr.ca.ua()&&Dr.ca.ua().mb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(Pr=ba.prototype).add=function(t,e){wa(this),this.c=null,t=Ca(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Pr.forEach=function(t,e){wa(this),this.a.forEach((function(n,r){Kr(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Pr.K=function(){wa(this);for(var t=this.a.I(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Pr.I=function(t){wa(this);var e=[];if("string"==typeof t)Ta(this,t)&&(e=$r(e,this.a.get(Ca(this,t))));else{t=this.a.I();for(var n=0;n<t.length;n++)e=$r(e,t[n])}return e},Pr.set=function(t,e){return wa(this),this.c=null,Ta(this,t=Ca(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Pr.get=function(t,e){return t&&0<(t=this.I(t)).length?String(t[0]):e},Pr.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.I(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var Na=10;function ka(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Aa(t){return t.b?1:t.a?t.a.size:0}function Pa(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Oa(t,e){t.a?t.a.add(e):t.b=e}function Ra(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Da(t){var e,n;if(null!=t.b)return t.c.concat(t.b.i);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Ar(t.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.i)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Xr(t.c)}function Ma(){}function La(){this.a=new Ma}function Fa(t,e,n){var r=n||"";try{Zo(t,(function(t,n){var i=t;jr(t)&&(i=Zi(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function ja(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Ia.prototype.cancel=function(){var t,e;if(this.c=Da(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Ar(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Ma.prototype.stringify=function(t){return Dr.JSON.stringify(t,void 0)},Ma.prototype.parse=function(t){return Dr.JSON.parse(t,void 0)};var Ua=Dr.JSON.parse;function Va(t){Xi.call(this),this.headers=new ta,this.G=t||null,this.b=!1,this.s=this.a=null,this.D="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.H=qa,this.B=this.F=!1}Qr(Va,Xi);var qa="",Ba=/^https?$/i,za=["POST","PUT"];function Wa(t){return"content-type"==t.toLowerCase()}function Ha(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Qa(t),Ya(t)}function Qa(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ga(t){if(t.b&&void 0!==Rr&&(!t.s[1]||4!=$a(t)||2!=t.S()))if(t.l&&4==$a(t))fo(t.va,0,t);else if(t.dispatchEvent("readystatechange"),4==$a(t)){t.b=!1;try{var e,n=t.S();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.D).match(ra)[1]||null;if(!o&&Dr.self&&Dr.self.location){var a=Dr.self.location.protocol;o=a.substr(0,a.length-1)}i=!Ba.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var s=2<$a(t)?t.a.statusText:""}catch(t){s=""}t.f=s+" ["+t.S()+"]",Qa(t)}}finally{Ya(t)}}}function Ya(t,e){if(t.a){Ka(t);var n=t.a,r=t.s[0]?Mr:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function Ka(t){t.a&&t.B&&(t.a.ontimeout=null),t.m&&(Dr.clearTimeout(t.m),t.m=null)}function $a(t){return t.a?t.a.readyState:0}function Xa(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return oi(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):la(t,e,n))}function Ja(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Za(t){this.f=[],this.R=this.ea=this.v=this.P=this.a=this.ha=this.s=this.N=this.h=this.F=this.j=null,this.Fa=this.H=0,this.Ca=Ja("failFast",!1,t),this.U=this.l=this.i=this.g=this.c=null,this.W=!0,this.A=this.ia=this.G=-1,this.J=this.m=this.o=0,this.Ba=Ja("baseRetryDelayMs",5e3,t),this.Ga=Ja("retryDelaySeedMs",1e4,t),this.Da=Ja("forwardChannelMaxRetries",2,t),this.ga=Ja("forwardChannelRequestTimeoutMs",2e4,t),this.Ea=t&&t.nb||void 0,this.D=void 0,this.w=t&&t.supportsCrossDomainXhr||!1,this.B="",this.b=new Ia(t&&t.concurrentRequestLimit),this.ja=new La,this.fa=t&&t.fastHandshake||!1,t&&t.forceLongPolling&&(this.W=!1),this.O=void 0}function ts(t){if(es(t),3==t.u){var e=t.H++,n=oa(t.v);la(n,"SID",t.B),la(n,"RID",e),la(n,"TYPE","terminate"),os(t,n),(e=new Uo(t,e,void 0)).B=2,e.f=ha(oa(n)),n=!1,Dr.navigator&&Dr.navigator.sendBeacon&&(n=Dr.navigator.sendBeacon(e.f.toString(),"")),!n&&Dr.Image&&((new Image).src=e.f,n=!0),n||(e.a=ys(e.g,null),e.a.$(e.f)),e.s=Hr(),Go(e)}ps(t)}function es(t){t.a&&(t.a.cancel(),t.a=null),t.i&&(Dr.clearTimeout(t.i),t.i=null),cs(t),t.b.cancel(),t.g&&("number"==typeof t.g&&Dr.clearTimeout(t.g),t.g=null)}function ns(t,e){t.f.push(new Sa(t.Fa++,e)),3==t.u&&rs(t)}function rs(t){ka(t.b)||t.g||(t.g=!0,ao(t.xa,t),t.o=0)}function is(t,e){var n;n=e?e.W:t.H++;var r=oa(t.v);la(r,"SID",t.B),la(r,"RID",n),la(r,"AID",t.G),os(t,r),t.h&&t.j&&Xa(r,t.h,t.j),n=new Uo(t,n,t.o+1),null===t.h&&(n.m=t.j),e&&(t.f=e.i.concat(t.f)),e=as(t,n,1e3),n.setTimeout(Math.round(.5*t.ga)+Math.round(.5*t.ga*Math.random())),Oa(t.b,n),zo(n,r,e)}function os(t,e){t.c&&Zo({},(function(t,n){la(e,n,t)}))}function as(t,e,n){n=Math.min(t.f.length,n);var r=t.c?zr(t.c.Ha,t.c,t):null;t:for(var i=t.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{Fa(l,a,"req"+c+"_")}catch(t){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.f.splice(0,n),e.i=t,r}function ss(t){t.a||t.i||(t.J=1,ao(t.wa,t),t.m=0)}function us(t){return!(t.a||t.i||3<=t.m)&&(t.J++,t.i=No(zr(t.wa,t),hs(t,t.m)),t.m++,!0)}function cs(t){null!=t.l&&(Dr.clearTimeout(t.l),t.l=null)}function ls(t,e){var n=null;if(t.a==e){cs(t),t.a=null;var r=2}else{if(!Pa(t.b,e))return;n=e.i,Ra(t.b,e),r=1}if(t.A=e.H,0!=t.u)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Hr()-e.s;var i=t.o;(r=Eo()).dispatchEvent(new Io(r,n,e,i)),rs(t)}else ss(t);else if(3==(i=e.c)||0==i&&0<t.A||!(1==r&&function(t,e){return!(Aa(t.b)>=t.b.f-(t.g?1:0))&&(t.g?(t.f=e.i.concat(t.f),!0):!(1==t.u||2==t.u||t.o>=(t.Ca?0:t.Da))&&(t.g=No(zr(t.xa,t,e),hs(t,t.o)),t.o++,!0))}(t,e)||2==r&&us(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:fs(t,5);break;case 4:fs(t,10);break;case 3:fs(t,6);break;default:fs(t,2)}}function hs(t,e){var n=t.Ba+Math.floor(Math.random()*t.Ga);return t.c||(n*=2),n*e}function fs(t,e){if(2==e){var n=null;t.c&&(n=null);var r=zr(t.Ta,t);n||(n=new ia("//www.google.com/images/cleardot.gif"),Dr.location&&"http"==Dr.location.protocol||aa(n,"https"),ha(n)),function(t,e){var n=new bo;if(Dr.Image){var r=new Image;r.onload=Wr(ja,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Wr(ja,n,r,"TestLoadImage: error",!1,e),r.onabort=Wr(ja,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Wr(ja,n,r,"TestLoadImage: timeout",!1,e),Dr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else So(2);t.u=0,t.c&&t.c.la(e),ps(t),es(t)}function ps(t){t.u=0,t.A=-1,t.c&&(0==Da(t.b).length&&0==t.f.length||(t.b.c.length=0,Xr(t.f),t.f.length=0),t.c.ka())}function ds(t,e,n){var r=function(t){return t instanceof ia?oa(t):new ia(t,void 0)}(n);if(""!=r.c)e&&sa(r,e+"."+r.c),ua(r,r.h);else{var i=Dr.location;r=function(t,e,n,r){var i=new ia(null,void 0);return t&&aa(i,t),e&&sa(i,e),n&&ua(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.N&&oi(t.N,(function(t,e){la(r,e,t)})),e=t.s,n=t.ha,e&&n&&la(r,e,n),la(r,"VER",t.oa),os(t,r),r}function ys(t,e){if(e&&!t.w)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Va(t.Ea)).F=t.w,e}function vs(){}function gs(){if(pi&&!(10<=Number(Si)))throw Error("Environmental error: no available transport.")}function ms(t,e){Xi.call(this),this.a=new Za(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.j=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.pa&&(t?t["X-WebChannel-Client-Profile"]=e.pa:t={"X-WebChannel-Client-Profile":e.pa}),this.a.F=t,(t=e&&e.httpHeadersOverwriteParam)&&!Jr(t)&&(this.a.h=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Jr(e)&&(this.a.s=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new ws(this)}function _s(t){Lo.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function bs(){Fo.call(this),this.status=1}function ws(t){this.a=t}(Pr=Va.prototype).$=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.G?Oo(this.G):Oo(Do),this.a.onreadystatechange=zr(this.va,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void Ha(this,t)}t=n||"";var i=new ta(this.headers);r&&Zo(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Wa,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.K()),n=Dr.FormData&&t instanceof Dr.FormData,!(0<=Yr(za,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.H&&(this.a.responseType=this.H),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Ka(this),0<this.o&&((this.B=function(t){return pi&&xi(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=zr(this.ta,this)):this.m=fo(this.ta,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Ha(this,t)}},Pr.ta=function(){void 0!==Rr&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},Pr.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ya(this))},Pr.C=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ya(this,!0)),Va.M.C.call(this)},Pr.va=function(){this.j||(this.w||this.l||this.g?Ga(this):this.Oa())},Pr.Oa=function(){Ga(this)},Pr.S=function(){try{return 2<$a(this)?this.a.status:-1}catch(t){return-1}},Pr.Y=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Pr.Ja=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ua(e)}},Pr.qa=function(){return this.h},Pr.Ma=function(){return"string"==typeof this.f?this.f:String(this.f)},(Pr=Za.prototype).oa=8,Pr.u=1,Pr.xa=function(t){if(this.g)if(this.g=null,1==this.u){if(!t){this.H=Math.floor(1e5*Math.random());var e,n=new Uo(this,t=this.H++,void 0),r=this.j;if(this.F&&(r?ui(r=ai(r),this.F):r=this.F),null===this.h&&(n.m=r),this.fa)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=as(this,n,e),la(i=oa(this.v),"RID",t),la(i,"CVER",22),this.s&&la(i,"X-HTTP-Session-Id",this.s),os(this,i),this.h&&r&&Xa(i,this.h,r),Oa(this.b,n),this.fa?(la(i,"$req",e),la(i,"SID","null"),n.R=!0,zo(n,i,null)):zo(n,i,e),this.u=2}}else 3==this.u&&(t?is(this,t):0==this.f.length||ka(this.b)||is(this))},Pr.wa=function(){this.i=null,this.a=new Uo(this,"rpc",this.J),null===this.h&&(this.a.m=this.j),this.a.J=0;var t=oa(this.ea);la(t,"RID","rpc"),la(t,"SID",this.B),la(t,"CI",this.U?"0":"1"),la(t,"AID",this.G),os(this,t),la(t,"TYPE","xmlhttp"),this.h&&this.j&&Xa(t,this.h,this.j),this.D&&this.a.setTimeout(this.D);var e=this.a,n=this.R;e.B=1,e.f=ha(oa(t)),e.j=null,e.F=!0,Wo(e,n)},Pr.Na=function(){null!=this.l&&(this.l=null,this.a.cancel(),this.a=null,us(this),So(19))},Pr.Ta=function(t){So(t?2:1)},(Pr=vs.prototype).na=function(){},Pr.ma=function(){},Pr.la=function(){},Pr.ka=function(){},Pr.Ha=function(){},gs.prototype.a=function(t,e){return new ms(t,e)},Qr(ms,Xi),(Pr=ms.prototype).addEventListener=function(t,e,n,r){ms.M.addEventListener.call(this,t,e,n,r)},Pr.removeEventListener=function(t,e,n,r){ms.M.removeEventListener.call(this,t,e,n,r)},Pr.Ka=function(){this.a.c=this.f,this.h&&(this.a.w=!0);var t=this.a,e=this.l,n=this.b||void 0;So(0),t.P=e,t.N=n||{},t.U=t.W,t.v=ds(t,null,t.P),rs(t)},Pr.close=function(){ts(this.a)},Pr.La=function(t){if("string"==typeof t){var e={};e.__data__=t,ns(this.a,e)}else this.g?((e={}).__data__=Zi(t),ns(this.a,e)):ns(this.a,t)},Pr.C=function(){this.a.c=null,delete this.f,ts(this.a),delete this.a,ms.M.C.call(this)},Qr(_s,Lo),Qr(bs,Fo),Qr(ws,vs),ws.prototype.na=function(){this.a.dispatchEvent("a")},ws.prototype.ma=function(t){this.a.dispatchEvent(new _s(t))},ws.prototype.la=function(t){this.a.dispatchEvent(new bs(t))},ws.prototype.ka=function(){this.a.dispatchEvent("b")},gs.prototype.createWebChannel=gs.prototype.a,ms.prototype.send=ms.prototype.La,ms.prototype.open=ms.prototype.Ka,ms.prototype.close=ms.prototype.close,ko.NO_ERROR=0,ko.TIMEOUT=8,ko.HTTP_ERROR=6,Ao.COMPLETE="complete",Ro.EventType=Mo,Mo.OPEN="a",Mo.CLOSE="b",Mo.ERROR="c",Mo.MESSAGE="d",Xi.prototype.listen=Xi.prototype.ra,Va.prototype.listenOnce=Va.prototype.sa,Va.prototype.getLastError=Va.prototype.Ma,Va.prototype.getLastErrorCode=Va.prototype.qa,Va.prototype.getStatus=Va.prototype.S,Va.prototype.getResponseJson=Va.prototype.Ja,Va.prototype.getResponseText=Va.prototype.Y,Va.prototype.send=Va.prototype.$;var Es={createWebChannelTransport:function(){return new gs},ErrorCode:ko,EventType:Ao,WebChannel:Ro,XhrIo:Va},Ts=Es.createWebChannelTransport,xs=Es.ErrorCode,Cs=Es.EventType,Ss=Es.WebChannel,Is=Es.XhrIo,Ns=_t.SDK_VERSION,ks=new at("@firebase/firestore");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function As(){return ks.logLevel}function Ps(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ks.logLevel<=Z.DEBUG){var r=e.map(Rs);ks.debug.apply(ks,f(["Firestore ("+Ns+"): "+t],r))}}function Os(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ks.logLevel<=Z.ERROR){var r=e.map(Rs);ks.error.apply(ks,f(["Firestore ("+Ns+"): "+t],r))}}function Rs(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE ("+Ns+") INTERNAL ASSERTION FAILED: "+t;throw Os(e),new Error(e)}function Ms(t,e){t||Ds()}function Ls(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var js=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Fs(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Us(t,e){return t<e?-1:t>e?1:0}function Vs(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function qs(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bs=function(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},zs=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.o=function(t){return Us(this.projectId,t.projectId)||Us(this.database,t.database)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hs(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Qs(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gs=function(){function t(t,e){this.h=t,this.u=e,this.l={}}return t.prototype.get=function(t){var e=this.h(t),n=this.l[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.u(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.h(t),r=this.l[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.u(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.l[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.h(t),n=this.l[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.u(n[r][0],t))return 1===n.length?delete this.l[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Hs(this.l,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype._=function(){return Qs(this.l)},t}(),Ys={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ks=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return o(e,t),e}(Error),$s=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ks(Ys.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ks(Ys.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ks(Ys.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ks(Ys.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.T=function(t){return this.seconds===t.seconds?Us(this.nanoseconds,t.nanoseconds):Us(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Xs=function(){function t(t){this.timestamp=t}return t.I=function(e){return new t(e)},t.min=function(){return new t(new $s(0,0))},t.prototype.o=function(t){return this.timestamp.T(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.m=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.A=function(){return this.timestamp},t}(),Js=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Ds(),void 0===n?n=t.length-e:n>t.length-e&&Ds(),this.segments=t,this.offset=e,this.R=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.R},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.P(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.V(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.g=function(t){return t=void 0===t?1:t,this.V(this.segments,this.offset+t,this.length-t)},t.prototype.p=function(){return this.V(this.segments,this.offset,this.length-1)},t.prototype.v=function(){return this.segments[this.offset]},t.prototype.S=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype._=function(){return 0===this.length},t.prototype.D=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.C=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.F=function(){return this.segments.slice(this.offset,this.limit())},t.P=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Zs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.V=function(t,n,r){return new e(t,n,r)},e.prototype.N=function(){return this.F().join("/")},e.prototype.toString=function(){return this.N()},e.$=function(t){if(t.indexOf("//")>=0)throw new Ks(Ys.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e.k=function(){return new e([])},e}(Js),tu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,eu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.V=function(t,n,r){return new e(t,n,r)},e.M=function(t){return tu.test(t)},e.prototype.N=function(){return this.F().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.M(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.N()},e.prototype.O=function(){return 1===this.length&&"__name__"===this.get(0)},e.L=function(){return new e(["__name__"])},e.B=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ks(Ys.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Ks(Ys.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ks(Ys.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Ks(Ys.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.k=function(){return new e([])},e}(Js),nu=function(){function t(t){this.path=t}return t.q=function(e){return new t(Zs.$(e).g(5))},t.prototype.U=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Zs.P(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.P=function(t,e){return Zs.P(t.path,e.path)},t.W=function(t){return t.length%2==0},t.j=function(e){return new t(new Zs(e.slice()))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t){return null==t}function iu(t){return-0===t&&1/t==-1/0}function ou(t){return"number"==typeof t&&Number.isInteger(t)&&!iu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var au=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.K=null};function su(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new au(t,e,n,r,i,o,a)}function uu(t){var e=Ls(t);if(null===e.K){var n=e.path.N();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.N()+t.op.toString()+Zu(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.N()+e.dir;var e})).join(","),ru(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Fl(e.startAt)),e.endAt&&(n+="|ub:",n+=Fl(e.endAt)),e.K=n}return e.K}function cu(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Bl(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],!(i instanceof Al&&o instanceof Al&&i.op===o.op&&i.field.isEqual(o.field)&&Ku(i.value,o.value)))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ul(t.startAt,e.startAt)&&Ul(t.endAt,e.endAt)}function lu(t){return nu.W(t.path)&&null===t.collectionGroup&&0===t.filters.length}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hu=function(){function t(t){this.G=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.G,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.G)},t.prototype.H=function(){return 2*this.G.length},t.prototype.o=function(t){return Us(this.G,t.G)},t.prototype.isEqual=function(t){return this.G===t.G},t}();hu.Y=new hu("");var fu,pu,du=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=Xs.min()),void 0===o&&(o=Xs.min()),void 0===a&&(a=hu.Y),this.target=t,this.targetId=e,this.J=n,this.sequenceNumber=r,this.X=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.Z=function(e){return new t(this.target,this.targetId,this.J,e,this.X,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.tt=function(e,n){return new t(this.target,this.targetId,this.J,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.et=function(e){return new t(this.target,this.targetId,this.J,this.sequenceNumber,this.X,e,this.resumeToken)},t}(),yu=function(t){this.count=t};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(t){switch(t){case Ys.OK:return Ds();case Ys.CANCELLED:case Ys.UNKNOWN:case Ys.DEADLINE_EXCEEDED:case Ys.RESOURCE_EXHAUSTED:case Ys.INTERNAL:case Ys.UNAVAILABLE:case Ys.UNAUTHENTICATED:return!1;case Ys.INVALID_ARGUMENT:case Ys.NOT_FOUND:case Ys.ALREADY_EXISTS:case Ys.PERMISSION_DENIED:case Ys.FAILED_PRECONDITION:case Ys.ABORTED:case Ys.OUT_OF_RANGE:case Ys.UNIMPLEMENTED:case Ys.DATA_LOSS:return!0;default:return Ds()}}function gu(t){if(void 0===t)return Os("GRPC error has no .code"),Ys.UNKNOWN;switch(t){case fu.OK:return Ys.OK;case fu.CANCELLED:return Ys.CANCELLED;case fu.UNKNOWN:return Ys.UNKNOWN;case fu.DEADLINE_EXCEEDED:return Ys.DEADLINE_EXCEEDED;case fu.RESOURCE_EXHAUSTED:return Ys.RESOURCE_EXHAUSTED;case fu.INTERNAL:return Ys.INTERNAL;case fu.UNAVAILABLE:return Ys.UNAVAILABLE;case fu.UNAUTHENTICATED:return Ys.UNAUTHENTICATED;case fu.INVALID_ARGUMENT:return Ys.INVALID_ARGUMENT;case fu.NOT_FOUND:return Ys.NOT_FOUND;case fu.ALREADY_EXISTS:return Ys.ALREADY_EXISTS;case fu.PERMISSION_DENIED:return Ys.PERMISSION_DENIED;case fu.FAILED_PRECONDITION:return Ys.FAILED_PRECONDITION;case fu.ABORTED:return Ys.ABORTED;case fu.OUT_OF_RANGE:return Ys.OUT_OF_RANGE;case fu.UNIMPLEMENTED:return Ys.UNIMPLEMENTED;case fu.DATA_LOSS:return Ys.DATA_LOSS;default:return Ds()}}(pu=fu||(fu={}))[pu.OK=0]="OK",pu[pu.CANCELLED=1]="CANCELLED",pu[pu.UNKNOWN=2]="UNKNOWN",pu[pu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pu[pu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pu[pu.NOT_FOUND=5]="NOT_FOUND",pu[pu.ALREADY_EXISTS=6]="ALREADY_EXISTS",pu[pu.PERMISSION_DENIED=7]="PERMISSION_DENIED",pu[pu.UNAUTHENTICATED=16]="UNAUTHENTICATED",pu[pu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pu[pu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pu[pu.ABORTED=10]="ABORTED",pu[pu.OUT_OF_RANGE=11]="OUT_OF_RANGE",pu[pu.UNIMPLEMENTED=12]="UNIMPLEMENTED",pu[pu.INTERNAL=13]="INTERNAL",pu[pu.UNAVAILABLE=14]="UNAVAILABLE",pu[pu.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var mu=function(){function t(t,e){this.P=t,this.root=e||bu.EMPTY}return t.prototype.nt=function(e,n){return new t(this.P,this.root.nt(e,n,this.P).copy(null,null,bu.st,null,null))},t.prototype.remove=function(e){return new t(this.P,this.root.remove(e,this.P).copy(null,null,bu.st,null,null))},t.prototype.get=function(t){for(var e=this.root;!e._();){var n=this.P(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n._();){var r=this.P(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype._=function(){return this.root._()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.it=function(){return this.root.it()},t.prototype.rt=function(){return this.root.rt()},t.prototype.ot=function(t){return this.root.ot(t)},t.prototype.forEach=function(t){this.ot((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ot((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.at=function(){return new _u(this.root,null,this.P,!1)},t.prototype.ut=function(t){return new _u(this.root,t,this.P,!1)},t.prototype.ct=function(){return new _u(this.root,null,this.P,!0)},t.prototype.lt=function(t){return new _u(this.root,t,this.P,!0)},t}(),_u=function(){function t(t,e,n,r){this._t=r,this.ft=[];for(var i=1;!t._();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this._t?t.left:t.right;else{if(0===i){this.ft.push(t);break}this.ft.push(t),t=this._t?t.right:t.left}}return t.prototype.dt=function(){var t=this.ft.pop(),e={key:t.key,value:t.value};if(this._t)for(t=t.left;!t._();)this.ft.push(t),t=t.right;else for(t=t.right;!t._();)this.ft.push(t),t=t.left;return e},t.prototype.wt=function(){return this.ft.length>0},t.prototype.Tt=function(){if(0===this.ft.length)return null;var t=this.ft[this.ft.length-1];return{key:t.key,value:t.value}},t}(),bu=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype._=function(){return!1},t.prototype.ot=function(t){return this.left.ot(t)||t(this.key,this.value)||this.right.ot(t)},t.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},t.prototype.min=function(){return this.left._()?this:this.left.min()},t.prototype.it=function(){return this.min().key},t.prototype.rt=function(){return this.right._()?this.key:this.right.rt()},t.prototype.nt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.nt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.nt(t,e,n))).Et()},t.prototype.It=function(){if(this.left._())return t.EMPTY;var e=this;return e.left.At()||e.left.left.At()||(e=e.Rt()),(e=e.copy(null,null,null,e.left.It(),null)).Et()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left._()||i.left.At()||i.left.left.At()||(i=i.Rt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.At()&&(i=i.Pt()),i.right._()||i.right.At()||i.right.left.At()||(i=i.Vt()),0===n(e,i.key)){if(i.right._())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.It())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Et()},t.prototype.At=function(){return this.color},t.prototype.Et=function(){var t=this;return t.right.At()&&!t.left.At()&&(t=t.gt()),t.left.At()&&t.left.left.At()&&(t=t.Pt()),t.left.At()&&t.right.At()&&(t=t.yt()),t},t.prototype.Rt=function(){var t=this.yt();return t.right.left.At()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Pt())).gt()).yt()),t},t.prototype.Vt=function(){var t=this.yt();return t.left.left.At()&&(t=(t=t.Pt()).yt()),t},t.prototype.gt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Pt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.yt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.pt=function(){var t=this.bt();return Math.pow(2,t)<=this.size+1},t.prototype.bt=function(){if(this.At()&&this.left.At())throw Ds();if(this.right.At())throw Ds();var t=this.left.bt();if(t!==this.right.bt())throw Ds();return t+(this.At()?0:1)},t}();bu.EMPTY=null,bu.RED=!0,bu.st=!1,bu.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Ds()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Ds()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Ds()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Ds()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Ds()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.nt=function(t,e,n){return new bu(t,e)},t.prototype.remove=function(t,e){return this},t.prototype._=function(){return!0},t.prototype.ot=function(t){return!1},t.prototype.ht=function(t){return!1},t.prototype.it=function(){return null},t.prototype.rt=function(){return null},t.prototype.At=function(){return!1},t.prototype.pt=function(){return!0},t.prototype.bt=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var wu=function(){function t(t){this.P=t,this.data=new mu(this.P)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.it()},t.prototype.last=function(){return this.data.rt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ot((function(e,n){return t(e),!1}))},t.prototype.vt=function(t,e){for(var n=this.data.ut(t[0]);n.wt();){var r=n.dt();if(this.P(r.key,t[1])>=0)return;e(r.key)}},t.prototype.St=function(t,e){var n;for(n=void 0!==e?this.data.ut(e):this.data.at();n.wt();)if(!t(n.dt().key))return},t.prototype.Dt=function(t){var e=this.data.ut(t);return e.wt()?e.dt().key:null},t.prototype.at=function(){return new Eu(this.data.at())},t.prototype.ut=function(t){return new Eu(this.data.ut(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).nt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype._=function(){return this.data._()},t.prototype.Ct=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.at(),r=e.data.at();n.wt();){var i=n.dt().key,o=r.dt().key;if(0!==this.P(i,o))return!1}return!0},t.prototype.F=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.P);return n.data=e,n},t}(),Eu=function(){function t(t){this.Ft=t}return t.prototype.dt=function(){return this.Ft.dt().key},t.prototype.wt=function(){return this.Ft.wt()},t}(),Tu=new mu(nu.P);function xu(){return Tu}function Cu(){return xu()}var Su=new mu(nu.P);function Iu(){return Su}var Nu=new mu(nu.P),ku=new wu(nu.P);function Au(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ku,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Pu=new wu(Us);function Ou(){return Pu}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ru=function(){function t(t){this.P=t?function(e,n){return t(e,n)||nu.P(e.key,n.key)}:function(t,e){return nu.P(t.key,e.key)},this.Nt=Iu(),this.$t=new mu(this.P)}return t.kt=function(e){return new t(e.P)},t.prototype.has=function(t){return null!=this.Nt.get(t)},t.prototype.get=function(t){return this.Nt.get(t)},t.prototype.first=function(){return this.$t.it()},t.prototype.last=function(){return this.$t.rt()},t.prototype._=function(){return this.$t._()},t.prototype.indexOf=function(t){var e=this.Nt.get(t);return e?this.$t.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.$t.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.$t.ot((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Nt.nt(t.key,t),e.$t.nt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Nt.remove(t),this.$t.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.$t.at(),r=e.$t.at();n.wt();){var i=n.dt().key,o=r.dt().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.P=this.P,r.Nt=e,r.$t=n,r},t}(),Du=function(){function t(){this.xt=new mu(nu.P)}return t.prototype.track=function(t){var e=t.doc.key,n=this.xt.get(e);n?0!==t.type&&3===n.type?this.xt=this.xt.nt(e,t):3===t.type&&1!==n.type?this.xt=this.xt.nt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.xt=this.xt.nt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.xt=this.xt.remove(e):1===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):Ds():this.xt=this.xt.nt(e,t)},t.prototype.Mt=function(){var t=[];return this.xt.ot((function(e,n){t.push(n)})),t},t}(),Mu=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.Ot=n,this.docChanges=r,this.Lt=i,this.fromCache=o,this.Bt=a,this.qt=s}return t.Ut=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Ru.kt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Lt._()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Bt===t.Bt&&this.Lt.isEqual(t.Lt)&&Cl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ot.isEqual(t.Ot)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Lu=function(){function t(t,e,n,r,i){this.X=t,this.Qt=e,this.Wt=n,this.jt=r,this.Kt=i}return t.Gt=function(e,n){var r=new Map;return r.set(e,Fu.zt(e,n)),new t(Xs.min(),r,Ou(),xu(),Au())},t}(),Fu=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Ht=e,this.Yt=n,this.Jt=r,this.Xt=i}return t.zt=function(e,n){return new t(hu.Y,n,Au(),Au(),Au())},t}(),ju=function(t,e,n,r){this.Zt=t,this.removedTargetIds=e,this.key=n,this.te=r},Uu=function(t,e){this.targetId=t,this.ee=e},Vu=function(t,e,n,r){void 0===n&&(n=hu.Y),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},qu=function(){function t(){this.ne=0,this.se=Wu(),this.ie=hu.Y,this.re=!1,this.oe=!0}return Object.defineProperty(t.prototype,"Ht",{get:function(){return this.re},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ie},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"he",{get:function(){return 0!==this.ne},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ae",{get:function(){return this.oe},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){t.H()>0&&(this.oe=!0,this.ie=t)},t.prototype.ce=function(){var t=Au(),e=Au(),n=Au();return this.se.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Ds()}})),new Fu(this.ie,this.re,t,e,n)},t.prototype.le=function(){this.oe=!1,this.se=Wu()},t.prototype._e=function(t,e){this.oe=!0,this.se=this.se.nt(t,e)},t.prototype.fe=function(t){this.oe=!0,this.se=this.se.remove(t)},t.prototype.de=function(){this.ne+=1},t.prototype.we=function(){this.ne-=1},t.prototype.Te=function(){this.oe=!0,this.re=!0},t}(),Bu=function(){function t(t){this.Ee=t,this.Ie=new Map,this.me=xu(),this.Ae=zu(),this.Re=new wu(Us)}return t.prototype.Pe=function(t){for(var e=0,n=t.Zt;e<n.length;e++){var r=n[e];t.te instanceof wl?this.Ve(r,t.te):t.te instanceof El&&this.ge(r,t.key,t.te)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var a=o[i];this.ge(a,t.key,t.te)}},t.prototype.ye=function(t){var e=this;this.pe(t,(function(n){var r=e.be(n);switch(t.state){case 0:e.ve(n)&&r.ue(t.resumeToken);break;case 1:r.we(),r.he||r.le(),r.ue(t.resumeToken);break;case 2:r.we(),r.he||e.removeTarget(n);break;case 3:e.ve(n)&&(r.Te(),r.ue(t.resumeToken));break;case 4:e.ve(n)&&(e.Se(n),r.ue(t.resumeToken));break;default:Ds()}}))},t.prototype.pe=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Ie.forEach((function(t,r){n.ve(r)&&e(r)}))},t.prototype.De=function(t){var e=t.targetId,n=t.ee.count,r=this.Ce(e);if(r){var i=r.target;if(lu(i))if(0===n){var o=new nu(i.path);this.ge(e,o,new El(o,Xs.min()))}else Ms(1===n);else this.Fe(e)!==n&&(this.Se(e),this.Re=this.Re.add(e))}},t.prototype.Ne=function(t){var e=this,n=new Map;this.Ie.forEach((function(r,i){var o=e.Ce(i);if(o){if(r.Ht&&lu(o.target)){var a=new nu(o.target.path);null!==e.me.get(a)||e.$e(i,a)||e.ge(i,a,new El(a,t))}r.ae&&(n.set(i,r.ce()),r.le())}}));var r=Au();this.Ae.forEach((function(t,n){var i=!0;n.St((function(t){var n=e.Ce(t);return!n||2===n.J||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Lu(t,n,this.Re,this.me,r);return this.me=xu(),this.Ae=zu(),this.Re=new wu(Us),i},t.prototype.Ve=function(t,e){if(this.ve(t)){var n=this.$e(t,e.key)?2:0;this.be(t)._e(e.key,n),this.me=this.me.nt(e.key,e),this.Ae=this.Ae.nt(e.key,this.ke(e.key).add(t))}},t.prototype.ge=function(t,e,n){if(this.ve(t)){var r=this.be(t);this.$e(t,e)?r._e(e,1):r.fe(e),this.Ae=this.Ae.nt(e,this.ke(e).delete(t)),n&&(this.me=this.me.nt(e,n))}},t.prototype.removeTarget=function(t){this.Ie.delete(t)},t.prototype.Fe=function(t){var e=this.be(t).ce();return this.Ee.xe(t).size+e.Yt.size-e.Xt.size},t.prototype.de=function(t){this.be(t).de()},t.prototype.be=function(t){var e=this.Ie.get(t);return e||(e=new qu,this.Ie.set(t,e)),e},t.prototype.ke=function(t){var e=this.Ae.get(t);return e||(e=new wu(Us),this.Ae=this.Ae.nt(t,e)),e},t.prototype.ve=function(t){var e=null!==this.Ce(t);return e||Ps("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ce=function(t){var e=this.Ie.get(t);return e&&e.he?null:this.Ee.Me(t)},t.prototype.Se=function(t){var e=this;this.Ie.set(t,new qu),this.Ee.xe(t).forEach((function(n){e.ge(t,n,null)}))},t.prototype.$e=function(t,e){return this.Ee.xe(t).has(e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(){return new mu(nu.P)}function Wu(){return new mu(nu.P)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Qu(t){var e=tc(t.mapValue.fields.__local_write_time__.timestampValue);return new $s(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hu(t)?4:10:Ds()}function Ku(t,e){var n=Yu(t);if(n!==Yu(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qu(t).isEqual(Qu(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=tc(t.timestampValue),r=tc(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return nc(t.bytesValue).isEqual(nc(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ec(t.geoPointValue.latitude)===ec(e.geoPointValue.latitude)&&ec(t.geoPointValue.longitude)===ec(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ec(t.integerValue)===ec(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ec(t.doubleValue),r=ec(e.doubleValue);return n===r?iu(n)===iu(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Vs(t.arrayValue.values||[],e.arrayValue.values||[],Ku);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ws(n)!==Ws(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ku(n[i],r[i])))return!1;return!0}(t,e);default:return Ds()}}function $u(t,e){return void 0!==(t.values||[]).find((function(t){return Ku(t,e)}))}function Xu(t,e){var n=Yu(t),r=Yu(e);if(n!==r)return Us(n,r);switch(n){case 0:return 0;case 1:return Us(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ec(t.integerValue||t.doubleValue),r=ec(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ju(t.timestampValue,e.timestampValue);case 4:return Ju(Qu(t),Qu(e));case 5:return Us(t.stringValue,e.stringValue);case 6:return function(t,e){var n=nc(t),r=nc(e);return n.o(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Us(n[i],r[i]);if(0!==o)return o}return Us(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Us(ec(t.latitude),ec(e.latitude));return 0!==n?n:Us(ec(t.longitude),ec(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Xu(n[i],r[i]);if(o)return o}return Us(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Us(r[a],o[a]);if(0!==s)return s;var u=Xu(n[r[a]],i[o[a]]);if(0!==u)return u}return Us(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Ds()}}function Ju(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Us(t,e);var n=tc(t),r=tc(e),i=Us(n.seconds,r.seconds);return 0!==i?i:Us(n.nanos,r.nanos)}function Zu(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=tc(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?nc(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,nu.q(r).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=t(a)}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=a+":"+t(e.fields[a])}return n+"}"}(e.mapValue):Ds();var n,r}(t)}function tc(t){if(Ms(!!t),"string"==typeof t){var e=0,n=Gu.exec(t);if(Ms(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ec(t.seconds),nanos:ec(t.nanos)}}function ec(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function nc(t){return"string"==typeof t?hu.fromBase64String(t):hu.fromUint8Array(t)}function rc(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.N()}}function ic(t){return!!t&&"integerValue"in t}function oc(t){return!!t&&"arrayValue"in t}function ac(t){return!!t&&"nullValue"in t}function sc(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function uc(t){return!!t&&"mapValue"in t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cc={asc:"ASCENDING",desc:"DESCENDING"},lc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hc=function(t,e){this.s=t,this.Oe=e};function fc(t){return{integerValue:""+t}}function pc(t,e){if(t.Oe){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:iu(e)?"-0":e}}function dc(t,e){return ou(e)?fc(e):pc(t,e)}function yc(t,e){return t.Oe?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function vc(t,e){return t.Oe?e.toBase64():e.toUint8Array()}function gc(t,e){return yc(t,e.A())}function mc(t){return Ms(!!t),Xs.I(function(t){var e=tc(t);return new $s(e.seconds,e.nanos)}(t))}function _c(t,e){return function(t){return new Zs(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).N()}function bc(t){var e=Zs.$(t);return Ms(Uc(e)),e}function wc(t,e){return _c(t.s,e.path)}function Ec(t,e){var n=bc(e);return Ms(n.get(1)===t.s.projectId),Ms(!n.get(3)&&!t.s.database||n.get(3)===t.s.database),new nu(Sc(n))}function Tc(t,e){return _c(t.s,e)}function xc(t){var e=bc(t);return 4===e.length?Zs.k():Sc(e)}function Cc(t){return new Zs(["projects",t.s.projectId,"databases",t.s.database]).N()}function Sc(t){return Ms(t.length>4&&"documents"===t.get(4)),t.g(5)}function Ic(t,e,n){return{name:wc(t,e),fields:n.proto.mapValue.fields}}function Nc(t,e){var n;if(e instanceof cl)n={update:Ic(t,e.key,e.value)};else if(e instanceof yl)n={delete:wc(t,e.key)};else if(e instanceof ll)n={update:Ic(t,e.key,e.data),updateMask:jc(e.Le)};else if(e instanceof fl)n={transform:{document:wc(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Wc)return{fieldPath:e.field.N(),setToServerValue:"REQUEST_TIME"};if(n instanceof Hc)return{fieldPath:e.field.N(),appendMissingElements:{values:n.elements}};if(n instanceof Gc)return{fieldPath:e.field.N(),removeAllFromArray:{values:n.elements}};if(n instanceof Kc)return{fieldPath:e.field.N(),increment:n.Be};throw Ds()}(0,t)}))}};else{if(!(e instanceof vl))return Ds();n={verify:wc(t,e.key)}}return e.Ue.qe||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:gc(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Ds()}(t,e.Ue)),n}function kc(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?el.updateTime(mc(t.updateTime)):void 0!==t.exists?el.exists(t.exists):el.Qe()}(e.currentDocument):el.Qe();if(e.update){e.update.name;var r=Ec(t,e.update.name),i=new gl({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new Jc(e.map((function(t){return eu.B(t)})))}(e.updateMask);return new ll(r,i,o,n)}return new cl(r,i,n)}if(e.delete){var a=Ec(t,e.delete);return new yl(a,n)}if(e.transform){var s=Ec(t,e.transform.document),u=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Ms("REQUEST_TIME"===e.setToServerValue),n=new Wc;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Hc(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Gc(i)}else"increment"in e?n=new Kc(t,e.increment):Ds();var o=eu.B(e.fieldPath);return new Zc(o,n)}(t,e)}));return Ms(!0===n.exists),new fl(s,u)}if(e.verify){var c=Ec(t,e.verify);return new vl(c,n)}return Ds()}function Ac(t,e){return{documents:[Tc(t,e.path)]}}function Pc(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Tc(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Tc(t,r.p()),n.structuredQuery.from=[{collectionId:r.S()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return t instanceof Al?function(t){if("=="===t.op){if(sc(t.value))return{unaryFilter:{field:Dc(t.field),op:"IS_NAN"}};if(ac(t.value))return{unaryFilter:{field:Dc(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:Dc(t.field),op:(e=t.op,lc[e]),value:t.value}};var e}(t):Ds()}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:Dc((e=t).field),direction:(n=e.dir,cc[n])};var e,n}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.Oe||ru(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Oc(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Oc(e.endAt)),n}function Oc(t){return{before:t.before,values:t.position}}function Rc(t){var e=!!t.before,n=t.values||[];return new Ll(n,e)}function Dc(t){return{fieldPath:t.N()}}function Mc(t){return eu.B(t.fieldPath)}function Lc(t){return Al.create(Mc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Ds()}}(t.fieldFilter.op),t.fieldFilter.value)}function Fc(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Mc(t.unaryFilter.field);return Al.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Mc(t.unaryFilter.field);return Al.create(n,"==",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Ds()}}function jc(t){var e=[];return t.fields.forEach((function(t){return e.push(t.N())})),{fieldPaths:e}}function Uc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vc=function(){this.je=void 0};function qc(t,e,n){return t instanceof Wc?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Hc?Qc(t,e):t instanceof Gc?Yc(t,e):function(t,e){var n=zc(t,e),r=$c(n)+$c(t.Be);return ic(n)&&ic(t.Be)?fc(r):pc(t.serializer,r)}(t,e)}function Bc(t,e,n){return t instanceof Hc?Qc(t,e):t instanceof Gc?Yc(t,e):n}function zc(t,e){return t instanceof Kc?ic(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Wc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(Vc),Hc=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return o(e,t),e}(Vc);function Qc(t,e){for(var n=Xc(e),r=function(t){n.some((function(e){return Ku(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Gc=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return o(e,t),e}(Vc);function Yc(t,e){for(var n=Xc(e),r=function(t){n=n.filter((function(e){return!Ku(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Kc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.Be=n,r}return o(e,t),e}(Vc);function $c(t){return ec(t.integerValue||t.doubleValue)}function Xc(t){return oc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jc=function(){function t(t){this.fields=t,t.sort(eu.P)}return t.prototype.Ke=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].D(t))return!0;return!1},t.prototype.isEqual=function(t){return Vs(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Zc=function(t,e){this.field=t,this.transform=e},tl=function(t,e){this.version=t,this.transformResults=e},el=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Qe=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"qe",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function nl(t,e){return void 0!==t.updateTime?e instanceof wl&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof wl}var rl=function(){};function il(t,e,n){return t instanceof cl?function(t,e,n){return new wl(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof ll?function(t,e,n){if(!nl(t.Ue,e))return new Tl(t.key,n.version);var r=hl(t,e);return new wl(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof fl?function(t,e,n){if(Ms(null!=n.transformResults),!nl(t.Ue,e))return new Tl(t.key,n.version);var r=pl(t,e),i=function(t,e,n){var r=[];Ms(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=null;e instanceof wl&&(s=e.field(o.field)),r.push(Bc(a,s,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,a=dl(t,r.data(),i);return new wl(t.key,o,a,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new El(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function ol(t,e,n,r){return t instanceof cl?function(t,e){if(!nl(t.Ue,e))return e;var n=ul(e);return new wl(t.key,n,t.value,{Ge:!0})}(t,e):t instanceof ll?function(t,e){if(!nl(t.Ue,e))return e;var n=ul(e),r=hl(t,e);return new wl(t.key,n,r,{Ge:!0})}(t,e):t instanceof fl?function(t,e,n,r){if(!nl(t.Ue,e))return e;var i=pl(t,e),o=function(t,e,n,r){for(var i=[],o=0,a=t;o<a.length;o++){var s=a[o],u=s.transform,c=null;n instanceof wl&&(c=n.field(s.field)),null===c&&r instanceof wl&&(c=r.field(s.field)),i.push(qc(u,c,e))}return i}(t.fieldTransforms,n,e,r),a=dl(t,i.data(),o);return new wl(t.key,i.version,a,{Ge:!0})}(t,e,r,n):function(t,e){return nl(t.Ue,e)?new El(t.key,Xs.min()):e}(t,e)}function al(t,e){return t instanceof fl?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e instanceof wl?e.field(o.field):void 0,s=zc(o.transform,a||null);null!=s&&(n=null==n?(new ml).set(o.field,s):n.set(o.field,s))}return n?n.ze():null}(t,e):null}function sl(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ue.isEqual(e.Ue)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Le.isEqual(e.Le):2!==t.type||Vs(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Hc&&e instanceof Hc||t instanceof Gc&&e instanceof Gc?Vs(t.elements,e.elements,Ku):t instanceof Kc&&e instanceof Kc?Ku(t.Be,e.Be):t instanceof Wc&&e instanceof Wc}(t.transform,e.transform)}(t,e)})))}function ul(t){return t instanceof wl?t.version:Xs.min()}var cl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ue=r,i.type=0,i}return o(e,t),e}(rl),ll=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Le=r,o.Ue=i,o.type=1,o}return o(e,t),e}(rl);function hl(t,e){return function(t,e){var n=new ml(e);return t.Le.fields.forEach((function(e){if(!e._()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.ze()}(t,e instanceof wl?e.data():gl.empty())}var fl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ue=el.exists(!0),r}return o(e,t),e}(rl);function pl(t,e){return e}function dl(t,e,n){for(var r=new ml(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.ze()}var yl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ue=n,r.type=3,r}return o(e,t),e}(rl),vl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ue=n,r.type=4,r}return o(e,t),e}(rl),gl=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!uc(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.S()])||null},t.prototype.isEqual=function(t){return Ku(this.proto,t.proto)},t}(),ml=function(){function t(t){void 0===t&&(t=gl.empty()),this.He=t,this.Ye=new Map}return t.prototype.set=function(t,e){return this.Je(t,e),this},t.prototype.delete=function(t){return this.Je(t,null),this},t.prototype.Je=function(t,e){for(var n=this.Ye,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Yu(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.S(),e)},t.prototype.ze=function(){var t=this.Xe(eu.k(),this.Ye);return null!=t?new gl(t):this.He},t.prototype.Xe=function(t,e){var n=this,r=!1,i=this.He.field(t),o=uc(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var a=n.Xe(t.child(i),e);null!=a&&(o[i]=a,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function _l(t){var e=[];return Hs(t.fields||{},(function(t,n){var r=new eu([t]);if(uc(n)){var i=_l(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new Jc(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var bl=function(t,e){this.key=t,this.version=e},wl=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Ze=r,o.Ge=!!i.Ge,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return o(e,t),e.prototype.field=function(t){return this.Ze.field(t)},e.prototype.data=function(){return this.Ze},e.prototype.tn=function(){return this.Ze.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ge===t.Ge&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Ze.isEqual(t.Ze)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ze.toString()+", {hasLocalMutations: "+this.Ge+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Ge||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(bl),El=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return o(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(bl),Tl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(bl),xl=function(){function t(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.en=n,this.filters=r,this.limit=i,this.nn=o,this.startAt=a,this.endAt=s,this.sn=null,this.rn=null,this.startAt&&this.on(this.startAt),this.endAt&&this.on(this.endAt)}return t.hn=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.sn){this.sn=[];var t=this.an(),e=this.un();if(null!==t&&null===e)t.O()||this.sn.push(new Vl(t)),this.sn.push(new Vl(eu.L(),"asc"));else{for(var n=!1,r=0,i=this.en;r<i.length;r++){var o=i[r];this.sn.push(o),o.field.O()&&(n=!0)}if(!n){var a=this.en.length>0?this.en[this.en.length-1].dir:"asc";this.sn.push(new Vl(eu.L(),a))}}}return this.sn},enumerable:!1,configurable:!0}),t.prototype.cn=function(e){var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.en.slice(),n,this.limit,this.nn,this.startAt,this.endAt)},t.prototype.ln=function(e){var n=this.en.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.nn,this.startAt,this.endAt)},t.prototype._n=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.fn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.dn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),this.limit,this.nn,e,this.endAt)},t.prototype.wn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),this.limit,this.nn,this.startAt,e)},t.prototype.Tn=function(e){return new t(e,null,this.en.slice(),this.filters.slice(),this.limit,this.nn,this.startAt,this.endAt)},t.prototype.En=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.en.length||1===this.en.length&&this.en[0].field.O())},t.prototype.In=function(){return!ru(this.limit)&&"F"===this.nn},t.prototype.mn=function(){return!ru(this.limit)&&"L"===this.nn},t.prototype.un=function(){return this.en.length>0?this.en[0].field:null},t.prototype.an=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Al&&n.An())return n.field}return null},t.prototype.Rn=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Al&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.Pn=function(){return lu(this.We())},t.prototype.Vn=function(){return null!==this.collectionGroup},t.prototype.We=function(){if(!this.rn)if("F"===this.nn)this.rn=su(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i="desc"===r.dir?"asc":"desc";t.push(new Vl(r.field,i))}var o=this.endAt?new Ll(this.endAt.position,!this.endAt.before):null,a=this.startAt?new Ll(this.startAt.position,!this.startAt.before):null;this.rn=su(this.path,this.collectionGroup,t,this.filters,this.limit,o,a)}return this.rn},t.prototype.on=function(t){},t}();function Cl(t,e){return cu(t.We(),e.We())&&t.nn===e.nn}function Sl(t){return uu(t.We())+"|lt:"+t.nn}function Il(t){return"Query(target="+function(t){var e=t.path.N();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.N()+" "+e.op+" "+Zu(e.value);var e})).join(", ")+"]"),ru(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.N()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Fl(t.startAt)),t.endAt&&(e+=", endAt: "+Fl(t.endAt)),"Target("+e+")"}(t.We())+"; limitType="+t.nn+")"}function Nl(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.U(t.collectionGroup)&&t.path.D(n):nu.W(t.path)?t.path.isEqual(n):t.path.C(n)}(t,e)&&function(t,e){for(var n=0,r=t.en;n<r.length;n++){var i=r[n];if(!i.field.O()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!jl(t.startAt,t.orderBy,e)||t.endAt&&jl(t.endAt,t.orderBy,e))}(t,e)}function kl(t){return function(e,n){for(var r=!1,i=0,o=t.orderBy;i<o.length;i++){var a=o[i],s=ql(a,e,n);if(0!==s)return s;r=r||a.field.O()}return 0}}var Al=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return o(e,t),e.create=function(t,n,r){if(t.O())return"in"===n?new Ol(t,r):new Pl(t,n,r);if(ac(r)){if("=="!==n)throw new Ks(Ys.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(sc(r)){if("=="!==n)throw new Ks(Ys.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return"array-contains"===n?new Rl(t,r):"in"===n?new Dl(t,r):"array-contains-any"===n?new Ml(t,r):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Yu(this.value)===Yu(e)&&this.gn(Xu(e,this.value))},e.prototype.gn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case">":return t>0;case">=":return t>=0;default:return Ds()}},e.prototype.An=function(){return["<","<=",">",">="].indexOf(this.op)>=0},e}((function(){})),Pl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=nu.q(r.referenceValue),i}return o(e,t),e.prototype.matches=function(t){var e=nu.P(t.key,this.key);return this.gn(e)},e}(Al),Ol=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=(n.arrayValue.values||[]).map((function(t){return nu.q(t.referenceValue)})),r}return o(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Al),Rl=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return o(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return oc(e)&&$u(e.arrayValue,this.value)},e}(Al),Dl=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return o(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&$u(this.value.arrayValue,e)},e}(Al),Ml=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return o(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!oc(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return $u(e.value.arrayValue,t)}))},e}(Al),Ll=function(t,e){this.position=t,this.before=e};function Fl(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Zu(t)})).join(",")}function jl(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.O()?nu.P(nu.q(a.referenceValue),n.key):Xu(a,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ul(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ku(t.position[n],e.position[n]))return!1;return!0}var Vl=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ql(t,e,n){var r=t.field.O()?nu.P(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Xu(r,i):Ds()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ds()}}function Bl(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zl=function(){function t(t,e,n,r){this.batchId=t,this.yn=e,this.baseMutations=n,this.mutations=r}return t.prototype.pn=function(t,e,n){for(var r=n.bn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=il(o,e,r[i]))}return e},t.prototype.vn=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=ol(i,e,e,this.yn))}for(var o=e,a=0,s=this.mutations;a<s.length;a++){var u=s[a];u.key.isEqual(t)&&(e=ol(u,e,o,this.yn))}return e},t.prototype.Sn=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.vn(r.key,t.get(r.key));i&&(n=n.nt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Au())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Vs(this.mutations,t.mutations,(function(t,e){return sl(t,e)}))&&Vs(this.baseMutations,t.baseMutations,(function(t,e){return sl(t,e)}))},t}(),Wl=function(){function t(t,e,n,r){this.batch=t,this.Dn=e,this.bn=n,this.Cn=r}return t.from=function(e,n,r){Ms(e.mutations.length===r.length);for(var i=Nu,o=e.mutations,a=0;a<o.length;a++)i=i.nt(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Hl=function(){function t(t){var e=this;this.Fn=null,this.Nn=null,this.result=void 0,this.error=void 0,this.$n=!1,this.kn=!1,t((function(t){e.$n=!0,e.result=t,e.Fn&&e.Fn(t)}),(function(t){e.$n=!0,e.error=t,e.Nn&&e.Nn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.kn&&Ds(),this.kn=!0,this.$n?this.error?this.xn(n,this.error):this.Mn(e,this.result):new t((function(t,i){r.Fn=function(n){r.Mn(e,n).next(t,i)},r.Nn=function(e){r.xn(n,e).next(t,i)}}))},t.prototype.On=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Mn=function(e,n){return e?this.Ln((function(){return e(n)})):t.resolve(n)},t.prototype.xn=function(e,n){return e?this.Ln((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Bn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.qn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Bn(r)},t}(),Ql=function(){function t(){this.Un=new Gs((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.Qn=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Wn},set:function(t){this.Wn=t},enumerable:!1,configurable:!0}),t.prototype.jn=function(t,e){this.Kn(),this.readTime=e,this.Un.set(t.key,t)},t.prototype.Gn=function(t,e){this.Kn(),e&&(this.readTime=e),this.Un.set(t,null)},t.prototype.zn=function(t,e){this.Kn();var n=this.Un.get(e);return void 0!==n?Hl.resolve(n):this.Hn(t,e)},t.prototype.getEntries=function(t,e){return this.Yn(t,e)},t.prototype.apply=function(t){return this.Kn(),this.Qn=!0,this.Jn(t)},t.prototype.Kn=function(){},t}(),Gl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Yl=function(){function t(){this.Xn=[]}return t.prototype.Zn=function(t){this.Xn.push(t)},t.prototype.ts=function(){this.Xn.forEach((function(t){return t()}))},t}(),Kl=function(){function t(t,e,n){this.es=t,this.ns=e,this.ss=n}return t.prototype.rs=function(t,e){var n=this;return this.ns.os(t,e).next((function(r){return n.hs(t,e,r)}))},t.prototype.hs=function(t,e,n){return this.es.zn(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].vn(e,t);return t}))},t.prototype.as=function(t,e,n){var r=Cu();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].vn(t,e);r=r.nt(t,e)})),r},t.prototype.us=function(t,e){var n=this;return this.es.getEntries(t,e).next((function(e){return n.cs(t,e)}))},t.prototype.cs=function(t,e){var n=this;return this.ns.ls(t,e).next((function(r){var i=n.as(t,e,r),o=xu();return i.forEach((function(t,e){e||(e=new El(t,Xs.min())),o=o.nt(t,e)})),o}))},t.prototype._s=function(t,e,n){return e.Pn()?this.fs(t,e.path):e.Vn()?this.ds(t,e,n):this.ws(t,e,n)},t.prototype.fs=function(t,e){return this.rs(t,new nu(e)).next((function(t){var e=Iu();return t instanceof wl&&(e=e.nt(t.key,t)),e}))},t.prototype.ds=function(t,e,n){var r=this,i=e.collectionGroup,o=Iu();return this.ss.Ts(t,i).next((function(a){return Hl.forEach(a,(function(a){var s=e.Tn(a.child(i));return r.ws(t,s,n).next((function(t){t.forEach((function(t,e){o=o.nt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.ws=function(t,e,n){var r,i,o=this;return this.es._s(t,e,n).next((function(n){return r=n,o.ns.Es(t,e)})).next((function(e){return i=e,o.Is(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),h=ol(u,l,l,o.yn);r=h instanceof wl?r.nt(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Nl(e,n)||(r=r.remove(t))})),r}))},t.prototype.Is=function(t,e,n){for(var r=Au(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof ll&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.es.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof wl&&(c=c.nt(t,e))})),c}))},t}(),$l=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ms=n,this.As=r}return t.Rs=function(e,n){for(var r=Au(),i=Au(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Xl=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.Ps=function(t){return n.Vs(t)},this.gs=function(t){return e.ys(t)})}return t.prototype.Vs=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.gs&&this.gs(t),t},t}();Xl.ps=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Jl=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Zl=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.bs=t,this.vs=e,this.Ss=n,this.Ds=r,this.Cs=i,this.Fs=0,this.Ns=null,this.$s=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fs=0},t.prototype.ks=function(){this.Fs=this.Cs},t.prototype.xs=function(t){var e=this;this.cancel();var n=Math.floor(this.Fs+this.Ms()),r=Math.max(0,Date.now()-this.$s),i=Math.max(0,n-r);i>0&&Ps("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ns=this.bs.Os(this.vs,i,(function(){return e.$s=Date.now(),t()})),this.Fs*=this.Ds,this.Fs<this.Ss&&(this.Fs=this.Ss),this.Fs>this.Cs&&(this.Fs=this.Cs)},t.prototype.Ls=function(){null!==this.Ns&&(this.Ns.Bs(),this.Ns=null)},t.prototype.cancel=function(){null!==this.Ns&&(this.Ns.cancel(),this.Ns=null)},t.prototype.Ms=function(){return(Math.random()-.5)*this.Fs},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=nh(e)),e=eh(t.get(n),e);return nh(e)}function eh(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function nh(t){return t+""}function rh(t){var e=t.length;if(Ms(e>=2),2===e)return Ms(""===t.charAt(0)&&""===t.charAt(1)),Zs.k();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&Ds(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:Ds()}o=a+2}return new Zs(r)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ih=function(){function t(){this.qs=new oh}return t.prototype.Us=function(t,e){return this.qs.add(e),Hl.resolve()},t.prototype.Ts=function(t,e){return Hl.resolve(this.qs.getEntries(e))},t}(),oh=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.S(),n=t.p(),r=this.index[e]||new wu(Zs.P),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.S(),n=t.p(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new wu(Zs.P)).F()},t}(),ah=function(){function t(){this.Qs=new oh}return t.prototype.Us=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.S(),i=e.p();t.Zn((function(){n.Qs.add(e)}));var o={collectionId:r,parent:th(i)};return sh(t).put(o)}return Hl.resolve()},t.prototype.Ts=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[qs(e),""],!1,!0);return sh(t).Ws(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(rh(o.parent))}return n}))},t}();function sh(t){return Ah.js(t,ef.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uh=function(t){this.Ks=t};function ch(t,e){if(e.document)return function(t,e,n){var r=Ec(t,e.name),i=mc(e.updateTime),o=new gl({mapValue:{fields:e.fields}});return new wl(r,i,o,{hasCommittedMutations:!!n})}(t.Ks,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=nu.j(e.noDocument.path),r=dh(e.noDocument.readTime);return new El(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=nu.j(e.unknownDocument.path),o=dh(e.unknownDocument.version);return new Tl(i,o)}return Ds()}function lh(t,e,n){var r=hh(n),i=e.key.path.p().F();if(e instanceof wl){var o=function(t,e){return{name:wc(t,e.key),fields:e.tn().mapValue.fields,updateTime:yc(t,e.version.A())}}(t.Ks,e),a=e.hasCommittedMutations;return new $h(null,null,o,a,r,i)}if(e instanceof El){var s=e.key.path.F(),u=ph(e.version),c=e.hasCommittedMutations;return new $h(null,new Yh(s,u),null,c,r,i)}if(e instanceof Tl){var l=e.key.path.F(),h=ph(e.version);return new $h(new Kh(l,h),null,null,!0,r,i)}return Ds()}function hh(t){var e=t.A();return[e.seconds,e.nanoseconds]}function fh(t){var e=new $s(t[0],t[1]);return Xs.I(e)}function ph(t){var e=t.A();return new zh(e.seconds,e.nanoseconds)}function dh(t){var e=new $s(t.seconds,t.nanoseconds);return Xs.I(e)}function yh(t,e){var n=(e.baseMutations||[]).map((function(e){return kc(t.Ks,e)})),r=e.mutations.map((function(e){return kc(t.Ks,e)})),i=$s.fromMillis(e.localWriteTimeMs);return new zl(e.batchId,i,n,r)}function vh(t){var e,n=dh(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?dh(t.lastLimboFreeSnapshotVersion):Xs.min();return e=void 0!==t.query.documents?function(t){Ms(1===t.documents.length);var e=t.documents[0];return xl.hn(xc(e)).We()}(t.query):function(t){var e=xc(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ms(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=function t(e){return e?void 0!==e.unaryFilter?[Fc(e)]:void 0!==e.fieldFilter?[Lc(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):Ds():[]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return new Vl(Mc((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u=null;n.limit&&(u=function(t){var e;return ru(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Rc(n.startAt));var l=null;return n.endAt&&(l=Rc(n.endAt)),new xl(e,i,s,a,u,"F",c,l).We()}(t.query),new du(e,t.targetId,0,t.lastListenSequenceNumber,n,r,hu.fromBase64String(t.resumeToken))}function gh(t,e){var n,r=ph(e.X),i=ph(e.lastLimboFreeSnapshotVersion);n=lu(e.target)?Ac(t.Ks,e.target):Pc(t.Ks,e.target);var o=e.resumeToken.toBase64();return new Jh(e.targetId,uu(e.target),r,o,e.sequenceNumber,i,n)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mh=function(){function t(t,e){this.serializer=t,this.ss=e}return t.prototype.jn=function(t,e,n){return bh(t).put(wh(e),n)},t.prototype.Gn=function(t,e){var n=bh(t),r=wh(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Gs(t,r)}))},t.prototype.zn=function(t,e){var n=this;return bh(t).get(wh(e)).next((function(t){return n.zs(t)}))},t.prototype.Hs=function(t,e){var n=this;return bh(t).get(wh(e)).next((function(t){var e=n.zs(t);return e?{Ys:e,size:Eh(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Cu();return this.Js(t,e,(function(t,e){var i=n.zs(e);r=r.nt(t,i)})).next((function(){return r}))},t.prototype.Xs=function(t,e){var n=this,r=Cu(),i=new mu(nu.P);return this.Js(t,e,(function(t,e){var o=n.zs(e);o?(r=r.nt(t,o),i=i.nt(t,Eh(e))):(r=r.nt(t,null),i=i.nt(t,0))})).next((function(){return{Zs:r,ti:i}}))},t.prototype.Js=function(t,e,n){if(e._())return Hl.resolve();var r=IDBKeyRange.bound(e.first().path.F(),e.last().path.F()),i=e.at(),o=i.dt();return bh(t).ei({range:r},(function(t,e,r){for(var a=nu.j(t);o&&nu.P(o,a)<0;)n(o,null),o=i.dt();o&&o.isEqual(a)&&(n(o,e),o=i.wt()?i.dt():null),o?r.ni(o.path.F()):r.done()})).next((function(){for(;o;)n(o,null),o=i.wt()?i.dt():null}))},t.prototype._s=function(t,e,n){var r=this,i=Iu(),o=e.path.length+1,a={};if(n.isEqual(Xs.min())){var s=e.path.F();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.F(),c=hh(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=$h.collectionReadTimeIndex}return bh(t).ei(a,(function(t,n,a){if(t.length===o){var s=ch(r.serializer,n);e.path.D(s.key.path)?s instanceof wl&&Nl(e,s)&&(i=i.nt(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.si=function(t,e){var n=this,r=xu(),i=hh(e),o=bh(t),a=IDBKeyRange.lowerBound(i,!0);return o.ei({index:$h.readTimeIndex,range:a},(function(t,e){var o=ch(n.serializer,e);r=r.nt(o.key,o),i=e.readTime})).next((function(){return{ii:r,readTime:fh(i)}}))},t.prototype.ri=function(t){var e=bh(t),n=Xs.min();return e.ei({index:$h.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=fh(e.readTime)),r.done()})).next((function(){return n}))},t.prototype.oi=function(e){return new t.hi(this,!!e&&e.ai)},t.prototype.ui=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return _h(t).get(Xh.key).next((function(t){return Ms(!!t),t}))},t.prototype.Gs=function(t,e){return _h(t).put(Xh.key,e)},t.prototype.zs=function(t){if(t){var e=ch(this.serializer,t);return e instanceof El&&e.version.isEqual(Xs.min())?null:e}return null},t}();function _h(t){return Ah.js(t,Xh.store)}function bh(t){return Ah.js(t,$h.store)}function wh(t){return t.path.F()}function Eh(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ds();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mh.hi=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ci=e,r.ai=n,r.li=new Gs((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return o(e,t),e.prototype.Jn=function(t){var e=this,n=[],r=0,i=new wu((function(t,e){return Us(t.N(),e.N())}));return this.Un.forEach((function(o,a){var s=e.li.get(o);if(a){var u=lh(e.ci.serializer,a,e.readTime);i=i.add(o.path.p());var c=Eh(u);r+=c-s,n.push(e.ci.jn(t,o,u))}else if(r-=s,e.ai){var l=lh(e.ci.serializer,new El(o,Xs.min()),e.readTime);n.push(e.ci.jn(t,o,l))}else n.push(e.ci.Gn(t,o))})),i.forEach((function(r){n.push(e.ci.ss.Us(t,r))})),n.push(this.ci.updateMetadata(t,r)),Hl.Bn(n)},e.prototype.Hn=function(t,e){var n=this;return this.ci.Hs(t,e).next((function(t){return null===t?(n.li.set(e,0),null):(n.li.set(e,t.size),t.Ys)}))},e.prototype.Yn=function(t,e){var n=this;return this.ci.Xs(t,e).next((function(t){var e=t.Zs;return t.ti.forEach((function(t,e){n.li.set(t,e)})),e}))},e}(Ql);var Th=function(){function t(t){this._i=t}return t.prototype.next=function(){return this._i+=2,this._i},t.fi=function(){return new t(0)},t.di=function(){return new t(-1)},t}(),xh=function(){function t(t,e){this.wi=t,this.serializer=e}return t.prototype.Ti=function(t){var e=this;return this.Ei(t).next((function(n){var r=new Th(n.highestTargetId);return n.highestTargetId=r.next(),e.Ii(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.mi=function(t){return this.Ei(t).next((function(t){return Xs.I(new $s(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ai=function(t){return this.Ei(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Ri=function(t,e,n){var r=this;return this.Ei(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.A()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ii(t,i)}))},t.prototype.Pi=function(t,e){var n=this;return this.Vi(t,e).next((function(){return n.Ei(t).next((function(r){return r.targetCount+=1,n.gi(e,r),n.Ii(t,r)}))}))},t.prototype.yi=function(t,e){return this.Vi(t,e)},t.prototype.pi=function(t,e){var n=this;return this.bi(t,e.targetId).next((function(){return Ch(t).delete(e.targetId)})).next((function(){return n.Ei(t)})).next((function(e){return Ms(e.targetCount>0),e.targetCount-=1,n.Ii(t,e)}))},t.prototype.vi=function(t,e,n){var r=this,i=0,o=[];return Ch(t).ei((function(a,s){var u=vh(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.pi(t,u)))})).next((function(){return Hl.Bn(o)})).next((function(){return i}))},t.prototype.pe=function(t,e){return Ch(t).ei((function(t,n){var r=vh(n);e(r)}))},t.prototype.Ei=function(t){return Sh(t).get(tf.key).next((function(t){return Ms(null!==t),t}))},t.prototype.Ii=function(t,e){return Sh(t).put(tf.key,e)},t.prototype.Vi=function(t,e){return Ch(t).put(gh(this.serializer,e))},t.prototype.gi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Si=function(t){return this.Ei(t).next((function(t){return t.targetCount}))},t.prototype.Di=function(t,e){var n=uu(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ch(t).ei({range:r,index:Jh.queryTargetsIndexName},(function(t,n,r){var o=vh(n);cu(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Ci=function(t,e,n){var r=this,i=[],o=Ih(t);return e.forEach((function(e){var a=th(e.path);i.push(o.put(new Zh(n,a))),i.push(r.wi.Fi(t,n,e))})),Hl.Bn(i)},t.prototype.Ni=function(t,e,n){var r=this,i=Ih(t);return Hl.forEach(e,(function(e){var o=th(e.path);return Hl.Bn([i.delete([n,o]),r.wi.$i(t,n,e)])}))},t.prototype.bi=function(t,e){var n=Ih(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.ki=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ih(t),i=Au();return r.ei({range:n,xi:!0},(function(t,e,n){var r=rh(t[1]),o=new nu(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Mi=function(t,e){var n=th(e.path),r=IDBKeyRange.bound([n],[qs(n)],!1,!0),i=0;return Ih(t).ei({index:Zh.documentTargetsIndex,xi:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Me=function(t,e){return Ch(t).get(e).next((function(t){return t?vh(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(t){return Ah.js(t,Jh.store)}function Sh(t){return Ah.js(t,tf.store)}function Ih(t){return Ah.js(t,Zh.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nh="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",kh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Oi=e,r.Li=n,r}return o(e,t),e}(Yl),Ah=function(){function t(e,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.bs=o,this.window=a,this.document=s,this.Bi=c,this.qi=l,this.Ui=null,this.Qi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Wi=null,this.inForeground=!1,this.ji=null,this.Ki=null,this.Gi=Number.NEGATIVE_INFINITY,this.zi=function(t){return Promise.resolve()},!t.Hi())throw new Ks(Ys.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.wi=new Rh(this,i),this.Yi=n+t.Ji,this.serializer=new uh(u),this.Xi=new xh(this.wi,this.serializer),this.ss=new ah,this.es=new mh(this.serializer,this.ss),this.window&&this.window.localStorage?this.Zi=this.window.localStorage:(this.Zi=null,!1===l&&Os("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.js=function(t,e){if(t instanceof kh)return af.js(t.Oi,e);throw Ds()},t.prototype.start=function(){var t=this;return af.tr(this.Yi,qh,new Bh(this.serializer)).then((function(e){return t.er=e,t.nr()})).then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ks(Ys.FAILED_PRECONDITION,Nh);return t.sr(),t.ir(),t.rr(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Xi.Ai(e)}))})).then((function(e){t.Ui=new Xl(e,t.Bi)})).then((function(){t.Qi=!0})).catch((function(e){return t.er&&t.er.close(),Promise.reject(e)}))},t.prototype.or=function(t){var e=this;return this.zi=function(n){return s(e,void 0,void 0,(function(){return u(this,(function(e){return this.hr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.ar=function(t){var e=this;this.er.ur((function(n){return s(e,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.cr=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.bs.lr((function(){return s(e,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.hr?[4,this.nr()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.nr=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Oh(e).put(new rf(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t._r(e).next((function(e){e||(t.isPrimary=!1,t.bs.dr((function(){return t.zi(!1)})))}))})).next((function(){return t.wr(e)})).next((function(n){return t.isPrimary&&!n?t.Tr(e).next((function(){return!1})):!!n&&t.Er(e).next((function(){return!0}))}))})).catch((function(e){if(cf(e))return Ps("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ps("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.bs.dr((function(){return t.zi(e)})),t.isPrimary=e}))},t.prototype._r=function(t){var e=this;return Ph(t).get(Wh.key).next((function(t){return Hl.resolve(e.Ir(t))}))},t.prototype.mr=function(t){return Oh(t).delete(this.clientId)},t.prototype.Ar=function(){return s(this,void 0,void 0,(function(){var e,n,r,i,o=this;return u(this,(function(a){switch(a.label){case 0:return!this.isPrimary||this.Rr(this.Gi,18e5)?[3,2]:(this.Gi=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.js(e,rf.store);return n.Ws().next((function(t){var e=o.Pr(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return Hl.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=a.sent(),this.Zi)for(n=0,r=e;n<r.length;n++)i=r[n],this.Zi.removeItem(this.Vr(i.clientId));a.label=2;case 2:return[2]}}))}))},t.prototype.rr=function(){var t=this;this.Ki=this.bs.Os("client_metadata_refresh",4e3,(function(){return t.nr().then((function(){return t.Ar()})).then((function(){return t.rr()}))}))},t.prototype.Ir=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.wr=function(t){var e=this;return this.qi?Hl.resolve(!0):Ph(t).get(Wh.key).next((function(n){if(null!==n&&e.Rr(n.leaseTimestampMs,5e3)&&!e.gr(n.ownerId)){if(e.Ir(n)&&e.networkEnabled)return!0;if(!e.Ir(n)){if(!n.allowTabSynchronization)throw new Ks(Ys.FAILED_PRECONDITION,Nh);return!1}}return!(!e.networkEnabled||!e.inForeground)||Oh(t).Ws().next((function(t){return void 0===e.Pr(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Ps("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.yr=function(){return s(this,void 0,void 0,(function(){var t=this;return u(this,(function(e){switch(e.label){case 0:return this.Qi=!1,this.pr(),this.Ki&&(this.Ki.cancel(),this.Ki=null),this.br(),this.vr(),[4,this.runTransaction("shutdown","readwrite",(function(e){return t.Tr(e).next((function(){return t.mr(e)}))})).catch((function(t){Ps("IndexedDbPersistence","Proceeding with shutdown despite failure: ",t)}))];case 1:return e.sent(),this.er.close(),this.Sr(),[2]}}))}))},t.prototype.Pr=function(t,e){var n=this;return t.filter((function(t){return n.Rr(t.updateTimeMs,e)&&!n.gr(t.clientId)}))},t.prototype.Dr=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Oh(e).Ws().next((function(e){return t.Pr(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return s(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return t.Hi()?(n=e+t.Ji,[4,af.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"hr",{get:function(){return this.Qi},enumerable:!1,configurable:!0}),t.prototype.Cr=function(t){return Mh.Fr(t,this.serializer,this.ss,this.wi)},t.prototype.Nr=function(){return this.Xi},t.prototype.$r=function(){return this.es},t.prototype.kr=function(){return this.ss},t.prototype.runTransaction=function(t,e,n){var r=this;Ps("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.er.runTransaction(o,of,(function(o){return i=new kh(o,r.Ui?r.Ui.next():Xl.ps),"readwrite-primary"===e?r._r(i).next((function(t){return!!t||r.wr(i)})).next((function(e){if(!e)throw Os("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.bs.dr((function(){return r.zi(!1)})),new Ks(Ys.FAILED_PRECONDITION,Gl);return n(i)})).next((function(t){return r.Er(i).next((function(){return t}))})):r.xr(i).next((function(){return n(i)}))})).then((function(t){return i.ts(),t}))},t.prototype.xr=function(t){var e=this;return Ph(t).get(Wh.key).next((function(t){if(null!==t&&e.Rr(t.leaseTimestampMs,5e3)&&!e.gr(t.ownerId)&&!e.Ir(t)&&!(e.qi||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ks(Ys.FAILED_PRECONDITION,Nh)}))},t.prototype.Er=function(t){var e=new Wh(this.clientId,this.allowTabSynchronization,Date.now());return Ph(t).put(Wh.key,e)},t.Hi=function(){return af.Hi()},t.Mr=function(t){var e=t.s.projectId;return t.s.i||(e+="."+t.s.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.Tr=function(t){var e=this,n=Ph(t);return n.get(Wh.key).next((function(t){return e.Ir(t)?(Ps("IndexedDbPersistence","Releasing primary lease."),n.delete(Wh.key)):Hl.resolve()}))},t.prototype.Rr=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Os("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.sr=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ji=function(){t.bs.lr((function(){return t.inForeground="visible"===t.document.visibilityState,t.nr()}))},this.document.addEventListener("visibilitychange",this.ji),this.inForeground="visible"===this.document.visibilityState)},t.prototype.br=function(){this.ji&&(this.document.removeEventListener("visibilitychange",this.ji),this.ji=null)},t.prototype.ir=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Wi=function(){e.pr(),e.bs.lr((function(){return e.yr()}))},this.window.addEventListener("unload",this.Wi))},t.prototype.vr=function(){this.Wi&&(this.window.removeEventListener("unload",this.Wi),this.Wi=null)},t.prototype.gr=function(t){var e;try{var n=null!==(null===(e=this.Zi)||void 0===e?void 0:e.getItem(this.Vr(t)));return Ps("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Os("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.pr=function(){if(this.Zi)try{this.Zi.setItem(this.Vr(this.clientId),String(Date.now()))}catch(t){Os("Failed to set zombie client id.",t)}},t.prototype.Sr=function(){if(this.Zi)try{this.Zi.removeItem(this.Vr(this.clientId))}catch(t){}},t.prototype.Vr=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Ph(t){return Ah.js(t,Wh.store)}function Oh(t){return Ah.js(t,rf.store)}Ah.Ji="main";var Rh=function(){function t(t,e){this.db=t,this.Or=new xf(this,e)}return t.prototype.Lr=function(t){var e=this.Br(t);return this.db.Nr().Si(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Br=function(t){var e=0;return this.qr(t,(function(t){e++})).next((function(){return e}))},t.prototype.pe=function(t,e){return this.db.Nr().pe(t,e)},t.prototype.qr=function(t,e){return this.Ur(t,(function(t,n){return e(n)}))},t.prototype.Fi=function(t,e,n){return Dh(t,n)},t.prototype.$i=function(t,e,n){return Dh(t,n)},t.prototype.vi=function(t,e,n){return this.db.Nr().vi(t,e,n)},t.prototype.Qr=function(t,e){return Dh(t,e)},t.prototype.Wr=function(t,e){return function(t,e){var n=!1;return Vh(t).jr((function(r){return Lh(t,r,e).next((function(t){return t&&(n=!0),Hl.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Kr=function(t,e){var n=this,r=this.db.$r().oi(),i=[],o=0;return this.Ur(t,(function(a,s){if(s<=e){var u=n.Wr(t,a).next((function(e){if(!e)return o++,r.zn(t,a).next((function(){return r.Gn(a),Ih(t).delete([0,th(a.path)])}))}));i.push(u)}})).next((function(){return Hl.Bn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Z(t.Li);return this.db.Nr().yi(t,n)},t.prototype.Gr=function(t,e){return Dh(t,e)},t.prototype.Ur=function(t,e){var n,r=Ih(t),i=Xl.ps;return r.ei({index:Zh.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==Xl.ps&&e(new nu(rh(n)),i),i=s,n=a):i=Xl.ps})).next((function(){i!==Xl.ps&&e(new nu(rh(n)),i)}))},t.prototype.zr=function(t){return this.db.$r().ui(t)},t}();function Dh(t,e){return Ih(t).put(function(t,e){return new Zh(0,th(t.path),e)}(e,t.Li))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mh=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.ss=n,this.wi=r,this.Hr={}}return t.Fr=function(e,n,r,i){return Ms(""!==e.uid),new t(e.Yr()?e.uid:"",n,r,i)},t.prototype.Jr=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jh(t).ei({index:Qh.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Xr=function(t,e,n,r){var i=this,o=Uh(t),a=jh(t);return a.add({}).next((function(s){Ms("number"==typeof s);for(var u=new zl(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Nc(t.Ks,e)})),i=n.mutations.map((function(e){return Nc(t.Ks,e)}));return new Qh(e,n.batchId,n.yn.toMillis(),r,i)}(i.serializer,i.userId,u),l=[],h=new wu((function(t,e){return Us(t.N(),e.N())})),f=0,p=r;f<p.length;f++){var d=p[f],y=Gh.key(i.userId,d.key.path,s);h=h.add(d.key.path.p()),l.push(a.put(c)),l.push(o.put(y,Gh.PLACEHOLDER))}return h.forEach((function(e){l.push(i.ss.Us(t,e))})),t.Zn((function(){i.Hr[s]=u.keys()})),Hl.Bn(l).next((function(){return u}))}))},t.prototype.Zr=function(t,e){var n=this;return jh(t).get(e).next((function(t){return t?(Ms(t.userId===n.userId),yh(n.serializer,t)):null}))},t.prototype.to=function(t,e){var n=this;return this.Hr[e]?Hl.resolve(this.Hr[e]):this.Zr(t,e).next((function(t){if(t){var r=t.keys();return n.Hr[e]=r,r}return null}))},t.prototype.eo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return jh(t).ei({index:Qh.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Ms(e.batchId>=r),o=yh(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.no=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return jh(t).ei({index:Qh.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.so=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jh(t).Ws(Qh.userMutationsIndex,n).next((function(t){return t.map((function(t){return yh(e.serializer,t)}))}))},t.prototype.os=function(t,e){var n=this,r=Gh.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Uh(t).ei({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=rh(u);if(s===n.userId&&e.path.isEqual(l))return jh(t).get(c).next((function(t){if(!t)throw Ds();Ms(t.userId===n.userId),o.push(yh(n.serializer,t))}));a.done()})).next((function(){return o}))},t.prototype.ls=function(t,e){var n=this,r=new wu(Us),i=[];return e.forEach((function(e){var o=Gh.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Uh(t).ei({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=rh(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),Hl.Bn(i).next((function(){return n.io(t,r)}))},t.prototype.Es=function(t,e){var n=this,r=e.path,i=r.length+1,o=Gh.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new wu(Us);return Uh(t).ei({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],l=rh(u);a===n.userId&&r.D(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.io(t,s)}))},t.prototype.io=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(jh(t).get(e).next((function(t){if(null===t)throw Ds();Ms(t.userId===n.userId),r.push(yh(n.serializer,t))})))})),Hl.Bn(i).next((function(){return r}))},t.prototype.ro=function(t,e){var n=this;return Fh(t.Oi,this.userId,e).next((function(r){return t.Zn((function(){n.oo(e.batchId)})),Hl.forEach(r,(function(e){return n.wi.Qr(t,e)}))}))},t.prototype.oo=function(t){delete this.Hr[t]},t.prototype.ho=function(t){var e=this;return this.Jr(t).next((function(n){if(!n)return Hl.resolve();var r=IDBKeyRange.lowerBound(Gh.prefixForUser(e.userId)),i=[];return Uh(t).ei({range:r},(function(t,n,r){if(t[0]===e.userId){var o=rh(t[1]);i.push(o)}else r.done()})).next((function(){Ms(0===i.length)}))}))},t.prototype.Mi=function(t,e){return Lh(t,this.userId,e)},t.prototype.ao=function(t){var e=this;return Vh(t).get(this.userId).next((function(t){return t||new Hh(e.userId,-1,"")}))},t}();function Lh(t,e,n){var r=Gh.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Uh(t).ei({range:o,xi:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Fh(t,e,n){var r=t.store(Qh.store),i=t.store(Gh.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.ei({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){Ms(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=Gh.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Hl.Bn(o).next((function(){return c}))}function jh(t){return Ah.js(t,Qh.store)}function Uh(t){return Ah.js(t,Gh.store)}function Vh(t){return Ah.js(t,Hh.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qh=10,Bh=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;Ms(n<r&&n>=0&&r<=qh);var o=new lf(e);n<1&&r>=1&&(function(t){t.createObjectStore(Wh.store)}(t),function(t){t.createObjectStore(Hh.store,{keyPath:Hh.keyPath}),t.createObjectStore(Qh.store,{keyPath:Qh.keyPath,autoIncrement:!0}).createIndex(Qh.userMutationsIndex,Qh.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Gh.store)}(t),nf(t),function(t){t.createObjectStore($h.store)}(t));var a=Hl.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Zh.store),t.deleteObjectStore(Jh.store),t.deleteObjectStore(tf.store)}(t),nf(t)),a=a.next((function(){return function(t){var e=t.store(tf.store),n=new tf(0,0,Xs.min().A(),0);return e.put(tf.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(Qh.store).Ws().next((function(n){t.deleteObjectStore(Qh.store),t.createObjectStore(Qh.store,{keyPath:Qh.keyPath,autoIncrement:!0}).createIndex(Qh.userMutationsIndex,Qh.userMutationsKeyPath,{unique:!0});var r=e.store(Qh.store),i=n.map((function(t){return r.put(t)}));return Hl.Bn(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(rf.store,{keyPath:rf.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Xh.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore($h.store);e.createIndex($h.readTimeIndex,$h.readTimeIndexPath,{unique:!1}),e.createIndex($h.collectionReadTimeIndex,$h.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.rewriteCanonicalIds(o)}))),a},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store($h.store).ei((function(t,n){e+=Eh(n)})).next((function(){var n=new Xh(e);return t.store(Xh.store).put(Xh.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Hh.store),r=t.store(Qh.store);return n.Ws().next((function(n){return Hl.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Ws(Qh.userMutationsIndex,i).next((function(r){return Hl.forEach(r,(function(r){Ms(r.userId===n.userId);var i=yh(e.serializer,r);return Fh(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Zh.store),n=t.store($h.store);return t.store(tf.store).get(tf.key).next((function(t){var r=[];return n.ei((function(n,i){var o=new Zs(n),a=function(t){return[0,th(t)]}(o);r.push(e.get(a).next((function(n){return n?Hl.resolve():function(n){return e.put(new Zh(0,th(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Hl.Bn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(ef.store,{keyPath:ef.keyPath});var n=e.store(ef.store),r=new oh,i=function(t){if(r.add(t)){var e=t.S(),i=t.p();return n.put({collectionId:e,parent:th(i)})}};return e.store($h.store).ei({xi:!0},(function(t,e){var n=new Zs(t);return i(n.p())})).next((function(){return e.store(Gh.store).ei({xi:!0},(function(t,e){t[0];var n=t[1],r=(t[2],rh(n));return i(r.p())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(Jh.store);return n.ei((function(t,r){var i=vh(r),o=gh(e.serializer,i);return n.put(o)}))},t}(),zh=function(t,e){this.seconds=t,this.nanoseconds=e},Wh=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Wh.store="owner",Wh.key="owner";var Hh=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Hh.store="mutationQueues",Hh.keyPath="userId";var Qh=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Qh.store="mutations",Qh.keyPath="batchId",Qh.userMutationsIndex="userMutationsIndex",Qh.userMutationsKeyPath=["userId","batchId"];var Gh=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,th(e)]},t.key=function(t,e,n){return[t,th(e),n]},t}();Gh.store="documentMutations",Gh.PLACEHOLDER=new Gh;var Yh=function(t,e){this.path=t,this.readTime=e},Kh=function(t,e){this.path=t,this.version=e},$h=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};$h.store="remoteDocuments",$h.readTimeIndex="readTimeIndex",$h.readTimeIndexPath="readTime",$h.collectionReadTimeIndex="collectionReadTimeIndex",$h.collectionReadTimeIndexPath=["parentPath","readTime"];var Xh=function(t){this.byteSize=t};Xh.store="remoteDocumentGlobal",Xh.key="remoteDocumentGlobalKey";var Jh=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Jh.store="targets",Jh.keyPath="targetId",Jh.queryTargetsIndexName="queryTargetsIndex",Jh.queryTargetsKeyPath=["canonicalId","targetId"];var Zh=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Zh.store="targetDocuments",Zh.keyPath=["targetId","path"],Zh.documentTargetsIndex="documentTargetsIndex",Zh.documentTargetsKeyPath=["path","targetId"];var tf=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};tf.key="targetGlobalKey",tf.store="targetGlobal";var ef=function(t,e){this.collectionId=t,this.parent=e};function nf(t){t.createObjectStore(Zh.store,{keyPath:Zh.keyPath}).createIndex(Zh.documentTargetsIndex,Zh.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Jh.store,{keyPath:Jh.keyPath}).createIndex(Jh.queryTargetsIndexName,Jh.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(tf.store)}ef.store="collectionParents",ef.keyPath=["collectionId","parent"];var rf=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};rf.store="clientMetadata",rf.keyPath="clientId";var of=f(f(f([Hh.store,Qh.store,Gh.store,$h.store,Jh.store,Wh.store,tf.store,Zh.store],[rf.store]),[Xh.store]),[ef.store]),af=function(){function t(e){this.db=e,12.2===t.uo(T())&&Os("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.tr=function(e,n,r){return Ps("SimpleDb","Opening database:",e),new Hl((function(i,o){var a=indexedDB.open(e,n);a.onsuccess=function(e){var n=e.target.result;i(new t(n))},a.onblocked=function(){o(new Ks(Ys.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(t){var e=t.target.error;"VersionError"===e.name?o(new Ks(Ys.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(e)},a.onupgradeneeded=function(t){Ps("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;r.createOrUpgrade(n,a.transaction,t.oldVersion,qh).next((function(){Ps("SimpleDb","Database upgrade to version "+qh+" complete")}))}})).On()},t.delete=function(t){return Ps("SimpleDb","Removing database:",t),ff(window.indexedDB.deleteDatabase(t)).On()},t.Hi=function(){if("undefined"==typeof indexedDB)return!1;if(t.co())return!0;var e=T(),n=t.uo(e),r=0<n&&n<10,i=t.lo(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.co=function(){var t;return void 0!==r&&"YES"===(null===(t=r.env)||void 0===t?void 0:t._o)},t.js=function(t,e){return t.store(e)},t.uo=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.lo=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.ur=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){return s(this,void 0,void 0,(function(){var r,i,o,a,s;return u(this,(function(c){switch(c.label){case 0:r="readonly"===t,i=0,o=function(){var t,o,s,c,l;return u(this,(function(u){switch(u.label){case 0:++i,t=lf.open(a.db,r?"readonly":"readwrite",e),u.label=1;case 1:return u.trys.push([1,3,,4]),o=n(t).catch((function(e){return t.abort(e),Hl.reject(e)})).On(),s={},o.catch((function(){})),[4,t.fo];case 2:return[2,(s.value=(u.sent(),o),s)];case 3:return c=u.sent(),l="FirebaseError"!==c.name&&i<3,Ps("SimpleDb","Transaction failed with error: %s. Retrying: %s.",c.message,l),l?[3,4]:[2,{value:Promise.reject(c)}];case 4:return[2]}}))},a=this,c.label=1;case 1:return[5,o()];case 2:if("object"==typeof(s=c.sent()))return[2,s.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),sf=function(){function t(t){this.do=t,this.wo=!1,this.To=null}return Object.defineProperty(t.prototype,"$n",{get:function(){return this.wo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Eo",{get:function(){return this.To},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.do=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.wo=!0},t.prototype.ni=function(t){this.To=t},t.prototype.delete=function(){return ff(this.do.delete())},t}(),uf=function(t){function e(e){var n=this;return(n=t.call(this,Ys.UNAVAILABLE,"IndexedDB transaction failed: "+e)||this).name="IndexedDbTransactionError",n}return o(e,t),e}(Ks);function cf(t){return"IndexedDbTransactionError"===t.name}var lf=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.Io=new Jl,this.transaction.oncomplete=function(){e.Io.resolve()},this.transaction.onabort=function(){t.error?e.Io.reject(new uf(t.error)):e.Io.resolve()},this.transaction.onerror=function(t){var n=df(t.target.error);e.Io.reject(new uf(n))}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"fo",{get:function(){return this.Io.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Io.reject(t),this.aborted||(Ps("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new hf(e)},t}(),hf=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ps("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ps("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),ff(n)},t.prototype.add=function(t){return Ps("SimpleDb","ADD",this.store.name,t,t),ff(this.store.add(t))},t.prototype.get=function(t){var e=this;return ff(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Ps("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Ps("SimpleDb","DELETE",this.store.name,t),ff(this.store.delete(t))},t.prototype.count=function(){return Ps("SimpleDb","COUNT",this.store.name),ff(this.store.count())},t.prototype.Ws=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.mo(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ao=function(t,e){Ps("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.xi=!1;var r=this.cursor(n);return this.mo(r,(function(t,e,n){return n.delete()}))},t.prototype.ei=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.mo(r,e)},t.prototype.jr=function(t){var e=this.cursor({});return new Hl((function(n,r){e.onerror=function(t){var e=df(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.mo=function(t,e){var n=[];return new Hl((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new sf(i),a=e(i.primaryKey,i.value,o);if(a instanceof Hl){var s=a.catch((function(t){return o.done(),Hl.reject(t)}));n.push(s)}o.$n?r():null===o.Eo?i.continue():i.continue(o.Eo)}else r()}})).next((function(){return Hl.Bn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.xi?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function ff(t){return new Hl((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=df(t.target.error);n(e)}}))}var pf=!1;function df(t){var e=af.uo(T());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ks("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return pf||(pf=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(){return"undefined"!=typeof window?window:null}var vf=function(){function t(t,e,n,r,i){this.Ro=t,this.vs=e,this.Po=n,this.op=r,this.Vo=i,this.yo=new Jl,this.then=this.yo.promise.then.bind(this.yo.promise),this.yo.promise.catch((function(t){}))}return t.po=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.bo=setTimeout((function(){return e.vo()}),t)},t.prototype.Bs=function(){return this.vo()},t.prototype.cancel=function(t){null!==this.bo&&(this.clearTimeout(),this.yo.reject(new Ks(Ys.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.vo=function(){var t=this;this.Ro.lr((function(){return null!==t.bo?(t.clearTimeout(),t.op().then((function(e){return t.yo.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.bo&&(this.Vo(this),clearTimeout(this.bo),this.bo=null)},t}(),gf=function(){function t(){var t=this;this.So=Promise.resolve(),this.Do=[],this.Co=!1,this.Fo=[],this.No=null,this.$o=!1,this.ko=[],this.xo=new Zl(this,"async_queue_retry"),this.Mo=function(){return t.xo.Ls()};var e=yf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Mo)}return Object.defineProperty(t.prototype,"Oo",{get:function(){return this.Co},enumerable:!1,configurable:!0}),t.prototype.lr=function(t){this.enqueue(t)},t.prototype.Lo=function(t){this.Bo(),this.qo(t)},t.prototype.Uo=function(t){return this.Bo(),this.qo(t)},t.prototype.Qo=function(t){return s(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return this.Bo(),this.Co?[3,2]:(this.Co=!0,(e=yf())&&e.removeEventListener("visibilitychange",this.Mo),[4,this.Uo(t)]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.Bo(),this.Co?new Promise((function(t){})):this.qo(t)},t.prototype.dr=function(t){var e=this;this.Do.push(t),this.lr((function(){return e.Wo()}))},t.prototype.Wo=function(){return s(this,void 0,void 0,(function(){var t,e=this;return u(this,(function(n){switch(n.label){case 0:if(0===this.Do.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Do[0]()];case 2:return n.sent(),this.Do.shift(),this.xo.reset(),[3,4];case 3:if(!cf(t=n.sent()))throw t;return Ps("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Do.length>0&&this.xo.xs((function(){return e.Wo()})),n.label=5;case 5:return[2]}}))}))},t.prototype.qo=function(t){var e=this,n=this.So.then((function(){return e.$o=!0,t().catch((function(t){throw e.No=t,e.$o=!1,Os("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.$o=!1,t}))}));return this.So=n,n},t.prototype.Os=function(t,e,n){var r=this;this.Bo(),this.ko.indexOf(t)>-1&&(e=0);var i=vf.po(this,t,e,n,(function(t){return r.jo(t)}));return this.Fo.push(i),i},t.prototype.Bo=function(){this.No&&Ds()},t.prototype.Ko=function(){},t.prototype.Go=function(){return s(this,void 0,void 0,(function(){var t;return u(this,(function(e){switch(e.label){case 0:return[4,t=this.So];case 1:e.sent(),e.label=2;case 2:if(t!==this.So)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.zo=function(t){for(var e=0,n=this.Fo;e<n.length;e++)if(n[e].vs===t)return!0;return!1},t.prototype.Ho=function(t){var e=this;return this.Go().then((function(){e.Fo.sort((function(t,e){return t.Po-e.Po}));for(var n=0,r=e.Fo;n<r.length;n++){var i=r[n];if(i.Bs(),"all"!==t&&i.vs===t)break}return e.Go()}))},t.prototype.Yo=function(t){this.ko.push(t)},t.prototype.jo=function(t){var e=this.Fo.indexOf(t);this.Fo.splice(e,1)},t}();function mf(t,e){if(Os("AsyncQueue",e+": "+t),cf(t))return new Ks(Ys.UNAVAILABLE,e+": "+t);throw t}function _f(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Us(n,i);return 0===a?Us(r,o):a}var bf=function(){function t(t){this.Jo=t,this.buffer=new wu(_f),this.Xo=0}return t.prototype.Zo=function(){return++this.Xo},t.prototype.th=function(t){var e=[t,this.Zo()];if(this.buffer.size<this.Jo)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();_f(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),wf={eh:!1,nh:0,sh:0,ih:0},Ef=function(){function t(t,e,n){this.rh=t,this.oh=e,this.hh=n}return t.ah=function(e){return new t(e,t.uh,t.lh)},t}();Ef._h=-1,Ef.fh=1048576,Ef.dh=41943040,Ef.uh=10,Ef.lh=1e3,Ef.wh=new Ef(Ef.dh,Ef.uh,Ef.lh),Ef.Th=new Ef(Ef._h,0,0);var Tf=function(){function t(t,e){this.Or=t,this.Ro=e,this.Eh=!1,this.Ih=null}return t.prototype.start=function(t){this.Or.params.rh!==Ef._h&&this.mh(t)},t.prototype.stop=function(){this.Ih&&(this.Ih.cancel(),this.Ih=null)},Object.defineProperty(t.prototype,"hr",{get:function(){return null!==this.Ih},enumerable:!1,configurable:!0}),t.prototype.mh=function(t){var e=this,n=this.Eh?3e5:6e4;Ps("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Ih=this.Ro.Os("lru_garbage_collection",n,(function(){return s(e,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:this.Ih=null,this.Eh=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ah(this.Or)];case 2:return n.sent(),[3,7];case 3:return cf(e=n.sent())?(Ps("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,If(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.mh(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),xf=function(){function t(t,e){this.Rh=t,this.params=e}return t.prototype.Ph=function(t,e){return this.Rh.Lr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Vh=function(t,e){var n=this;if(0===e)return Hl.resolve(Xl.ps);var r=new bf(e);return this.Rh.pe(t,(function(t){return r.th(t.sequenceNumber)})).next((function(){return n.Rh.qr(t,(function(t){return r.th(t)}))})).next((function(){return r.maxValue}))},t.prototype.vi=function(t,e,n){return this.Rh.vi(t,e,n)},t.prototype.Kr=function(t,e){return this.Rh.Kr(t,e)},t.prototype.gh=function(t,e){var n=this;return this.params.rh===Ef._h?(Ps("LruGarbageCollector","Garbage collection skipped; disabled"),Hl.resolve(wf)):this.zr(t).next((function(r){return r<n.params.rh?(Ps("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.rh),wf):n.yh(t,e)}))},t.prototype.zr=function(t){return this.Rh.zr(t)},t.prototype.yh=function(t,e){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.Ph(t,this.params.oh).next((function(e){return e>c.params.hh?(Ps("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.hh+" from "+e),r=c.params.hh):r=e,o=Date.now(),c.Vh(t,r)})).next((function(r){return n=r,a=Date.now(),c.vi(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.Kr(t,n)})).next((function(t){return u=Date.now(),As()<=Z.DEBUG&&Ps("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),Hl.resolve({eh:!0,nh:r,sh:i,ih:t})}))},t}(),Cf=function(){function t(t,e,n){this.persistence=t,this.ph=e,this.bh=new mu(Us),this.vh=new Gs((function(t){return uu(t)}),cu),this.Sh=Xs.min(),this.ns=t.Cr(n),this.Dh=t.$r(),this.Xi=t.Nr(),this.Ch=new Kl(this.Dh,this.ns,this.persistence.kr()),this.ph.Fh(this.Ch)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Nh=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i=this;return u(this,(function(o){switch(o.label){case 0:return e=this.ns,n=this.Ch,[4,this.persistence.runTransaction("Handle user change","readonly",(function(r){var o;return i.ns.so(r).next((function(a){return o=a,e=i.persistence.Cr(t),n=new Kl(i.Dh,e,i.persistence.kr()),e.so(r)})).next((function(t){for(var e=[],i=[],a=Au(),s=0,u=o;s<u.length;s++){var c=u[s];e.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var p=0,d=t;p<d.length;p++){var y=d[p];i.push(y.batchId);for(var v=0,g=y.mutations;v<g.length;v++){var m=g[v];a=a.add(m.key)}}return n.us(r,a).next((function(t){return{$h:t,kh:e,xh:i}}))}))}))];case 1:return r=o.sent(),[2,(this.ns=e,this.Ch=n,this.ph.Fh(this.Ch),r)]}}))}))},t.prototype.Mh=function(t){var e,n=this,r=$s.now(),i=t.reduce((function(t,e){return t.add(e.key)}),Au());return this.persistence.runTransaction("Locally write mutations","readwrite",(function(o){return n.Ch.us(o,i).next((function(i){e=i;for(var a=[],s=0,u=t;s<u.length;s++){var c=u[s],l=al(c,e.get(c.key));null!=l&&a.push(new ll(c.key,l,_l(l.proto.mapValue),el.exists(!0)))}return n.ns.Xr(o,r,a,t)}))})).then((function(t){var n=t.Sn(e);return{batchId:t.batchId,Un:n}}))},t.prototype.Oh=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(n){var r=t.batch.keys(),i=e.Dh.oi({ai:!0});return e.Lh(n,t,i).next((function(){return i.apply(n)})).next((function(){return e.ns.ho(n)})).next((function(){return e.Ch.us(n,r)}))}))},t.prototype.Bh=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",(function(n){var r;return e.ns.Zr(n,t).next((function(t){return Ms(null!==t),r=t.keys(),e.ns.ro(n,t)})).next((function(){return e.ns.ho(n)})).next((function(){return e.Ch.us(n,r)}))}))},t.prototype.no=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.ns.no(e)}))},t.prototype.mi=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Xi.mi(e)}))},t.prototype.qh=function(e){var n=this,r=e.X,i=this.bh;return this.persistence.runTransaction("Apply remote event","readwrite-primary",(function(o){var a=n.Dh.oi({ai:!0});i=n.bh;var s=[];e.Qt.forEach((function(e,a){var u=i.get(a);if(u){s.push(n.Xi.Ni(o,e.Xt,a).next((function(){return n.Xi.Ci(o,e.Yt,a)})));var c=e.resumeToken;if(c.H()>0){var l=u.tt(c,r).Z(o.Li);i=i.nt(a,l),t.Uh(u,l,e)&&s.push(n.Xi.yi(o,l))}}}));var u=xu(),c=Au();if(e.jt.forEach((function(t,e){c=c.add(t)})),s.push(a.getEntries(o,c).next((function(t){e.jt.forEach((function(i,c){var l=t.get(i);c instanceof El&&c.version.isEqual(Xs.min())?(a.Gn(i,r),u=u.nt(i,c)):null==l||c.version.o(l.version)>0||0===c.version.o(l.version)&&l.hasPendingWrites?(a.jn(c,r),u=u.nt(i,c)):Ps("LocalStore","Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",c.version),e.Kt.has(i)&&s.push(n.persistence.wi.Gr(o,i))}))}))),!r.isEqual(Xs.min())){var l=n.Xi.mi(o).next((function(t){return n.Xi.Ri(o,o.Li,r)}));s.push(l)}return Hl.Bn(s).next((function(){return a.apply(o)})).next((function(){return n.Ch.cs(o,u)}))})).then((function(t){return n.bh=i,t}))},t.Uh=function(t,e,n){return Ms(e.resumeToken.H()>0),0===t.resumeToken.H()||e.X.m()-t.X.m()>=this.Qh||n.Yt.size+n.Jt.size+n.Xt.size>0},t.prototype.Wh=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,c,l=this;return u(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Hl.forEach(t,(function(t){return Hl.forEach(t.ms,(function(n){return l.persistence.wi.Fi(e,t.targetId,n)})).next((function(){return Hl.forEach(t.As,(function(n){return l.persistence.wi.$i(e,t.targetId,n)}))}))}))}))];case 1:return u.sent(),[3,3];case 2:if(!cf(e=u.sent()))throw e;return Ps("LocalStore","Failed to update sequence numbers: "+e),[3,3];case 3:for(n=0,r=t;n<r.length;n++)i=r[n],o=i.targetId,i.fromCache||(a=this.bh.get(o),s=a.X,c=a.et(s),this.bh=this.bh.nt(o,c));return[2]}}))}))},t.prototype.jh=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",(function(n){return void 0===t&&(t=-1),e.ns.eo(n,t)}))},t.prototype.Kh=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",(function(n){return e.Ch.rs(n,t)}))},t.prototype.Gh=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite",(function(n){var r;return e.Xi.Di(n,t).next((function(i){return i?(r=i,Hl.resolve(r)):e.Xi.Ti(n).next((function(i){return r=new du(t,i,0,n.Li),e.Xi.Pi(n,r).next((function(){return r}))}))}))})).then((function(n){var r=e.bh.get(n.targetId);return(null===r||n.X.o(r.X)>0)&&(e.bh=e.bh.nt(n.targetId,n),e.vh.set(t,n.targetId)),n}))},t.prototype.Di=function(t,e){var n=this.vh.get(e);return void 0!==n?Hl.resolve(this.bh.get(n)):this.Xi.Di(t,e)},t.prototype.zh=function(t,e){var n=this,r=this.bh.get(t),i=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release target",i,(function(t){return e?Hl.resolve():n.persistence.wi.removeTarget(t,r)})).then((function(){n.bh=n.bh.remove(t),n.vh.delete(r.target)}))},t.prototype.Hh=function(t,e){var n=this,r=Xs.min(),i=Au();return this.persistence.runTransaction("Execute query","readonly",(function(o){return n.Di(o,t.We()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.Xi.ki(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.ph._s(o,t,e?r:Xs.min(),e?i:Au())})).next((function(t){return{documents:t,Yh:i}}))}))},t.prototype.Lh=function(t,e,n){var r=this,i=e.batch,o=i.keys(),a=Hl.resolve();return o.forEach((function(r){a=a.next((function(){return n.zn(t,r)})).next((function(t){var o=t,a=e.Cn.get(r);Ms(null!==a),(!o||o.version.o(a)<0)&&(o=i.pn(r,o,e))&&n.jn(o,e.Dn)}))})),a.next((function(){return r.ns.ro(t,i)}))},t.prototype.Ah=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.gh(n,e.bh)}))},t}();Cf.Qh=3e8;var Sf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).persistence=e,i.ns=e.Cr(r),i.Dh=e.$r(),i.Xi=e.Nr(),i}return o(e,t),e.prototype.start=function(){return this.Jh()},e.prototype.Xh=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",(function(n){return e.ns.to(n,t).next((function(t){return t?e.Ch.us(n,t):Hl.resolve(null)}))}))},e.prototype.Zh=function(t){this.ns.oo(t)},e.prototype.cr=function(t){this.persistence.cr(t)},e.prototype.Dr=function(){return this.persistence.Dr()},e.prototype.ta=function(t){var e=this,n=this.bh.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly",(function(n){return e.Xi.Me(n,t).next((function(t){return t?t.target:null}))}))},e.prototype.si=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",(function(e){return t.Dh.si(e,t.Sh)})).then((function(e){var n=e.ii,r=e.readTime;return t.Sh=r,n}))},e.prototype.Jh=function(){return s(this,void 0,void 0,(function(){var t,e=this;return u(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e.Dh.ri(t)}))];case 1:return t.Sh=n.sent(),[2]}}))}))},e}(Cf);function If(t){return s(this,void 0,void 0,(function(){return u(this,(function(e){if(t.code!==Ys.FAILED_PRECONDITION||t.message!==Gl)throw t;return Ps("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nf=function(){function t(){this.ea=new wu(kf.na),this.sa=new wu(kf.ia)}return t.prototype._=function(){return this.ea._()},t.prototype.Fi=function(t,e){var n=new kf(t,e);this.ea=this.ea.add(n),this.sa=this.sa.add(n)},t.prototype.ra=function(t,e){var n=this;t.forEach((function(t){return n.Fi(t,e)}))},t.prototype.$i=function(t,e){this.oa(new kf(t,e))},t.prototype.ha=function(t,e){var n=this;t.forEach((function(t){return n.$i(t,e)}))},t.prototype.aa=function(t){var e=this,n=new nu(new Zs([])),r=new kf(n,t),i=new kf(n,t+1),o=[];return this.sa.vt([r,i],(function(t){e.oa(t),o.push(t.key)})),o},t.prototype.ua=function(){var t=this;this.ea.forEach((function(e){return t.oa(e)}))},t.prototype.oa=function(t){this.ea=this.ea.delete(t),this.sa=this.sa.delete(t)},t.prototype.ca=function(t){var e=new nu(new Zs([])),n=new kf(e,t),r=new kf(e,t+1),i=Au();return this.sa.vt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Mi=function(t){var e=new kf(t,0),n=this.ea.Dt(e);return null!==n&&t.isEqual(n.key)},t}(),kf=function(){function t(t,e){this.key=t,this.la=e}return t.na=function(t,e){return nu.P(t.key,e.key)||Us(t.la,e.la)},t.ia=function(t,e){return Us(t.la,e.la)||nu.P(t.key,e.key)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t,e){if(0!==e.length)throw new Ks(Ys.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+Yf(e.length,"argument")+".")}function Pf(t,e,n){if(e.length!==n)throw new Ks(Ys.INVALID_ARGUMENT,"Function "+t+"() requires "+Yf(n,"argument")+", but was called with "+Yf(e.length,"argument")+".")}function Of(t,e,n){if(e.length<n)throw new Ks(Ys.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Yf(n,"argument")+", but was called with "+Yf(e.length,"argument")+".")}function Rf(t,e,n,r){if(e.length<n||e.length>r)throw new Ks(Ys.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+Yf(e.length,"argument")+".")}function Df(t,e,n,r){Vf(t,e,Gf(n)+" argument",r)}function Mf(t,e,n,r){void 0!==r&&Df(t,e,n,r)}function Lf(t,e,n,r){Vf(t,e,n+" option",r)}function Ff(t,e,n,r){void 0!==r&&Lf(t,e,n,r)}function jf(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(Bf(u))}var c=Bf(r);throw new Ks(Ys.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function Uf(t,e,n,r){if(!e.some((function(t){return t===r})))throw new Ks(Ys.INVALID_ARGUMENT,"Invalid value "+Bf(r)+" provided to function "+t+"() for its "+Gf(n)+" argument. Acceptable values: "+e.join(", "));return r}function Vf(t,e,n,r){if(!("object"===e?qf(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=Bf(r);throw new Ks(Ys.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function qf(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Bf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Ds()}function zf(t,e,n){if(void 0===n)throw new Ks(Ys.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+Gf(e)+" argument, but it was undefined.")}function Wf(t,e,n){Hs(e,(function(e,r){if(n.indexOf(e)<0)throw new Ks(Ys.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function Hf(t,e,n,r){var i=Bf(r);return new Ks(Ys.INVALID_ARGUMENT,"Function "+t+"() requires its "+Gf(n)+" argument to be a "+e+", but it was: "+i)}function Qf(t,e,n){if(n<=0)throw new Ks(Ys.INVALID_ARGUMENT,"Function "+t+"() requires its "+Gf(e)+" argument to be a positive number, but it was: "+n+".")}function Gf(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Yf(t,e){return t+" "+e+(1===t?"":"s")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(){if("undefined"==typeof Uint8Array)throw new Ks(Ys.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function $f(){if("undefined"==typeof atob)throw new Ks(Ys.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Xf=function(){function t(t){$f(),this._a=t}return t.fromBase64String=function(e){Pf("Blob.fromBase64String",arguments,1),Df("Blob.fromBase64String","string",1,e),$f();try{return new t(hu.fromBase64String(e))}catch(e){throw new Ks(Ys.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},t.fromUint8Array=function(e){if(Pf("Blob.fromUint8Array",arguments,1),Kf(),!(e instanceof Uint8Array))throw Hf("Blob.fromUint8Array","Uint8Array",1,e);return new t(hu.fromUint8Array(e))},t.prototype.toBase64=function(){return Pf("Blob.toBase64",arguments,0),$f(),this._a.toBase64()},t.prototype.toUint8Array=function(){return Pf("Blob.toUint8Array",arguments,0),Kf(),this._a.toUint8Array()},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._a.isEqual(t._a)},t}(),Jf=function(t){!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new Ks(Ys.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+Yf(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(Df("FieldPath","string",e,t[e]),0===t[e].length)throw new Ks(Ys.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.fa=new eu(t)},Zf=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return o(e,t),e.documentId=function(){return new e(eu.L().N())},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Hf("isEqual","FieldPath",1,t);return this.fa.isEqual(t.fa)},e}(Jf),tp=new RegExp("[~\\*/\\[\\]]"),ep=function(){this.da=this},np=function(t){function e(e){var n=this;return(n=t.call(this)||this).wa=e,n}return o(e,t),e.prototype.Ta=function(t){if(2!==t.Ea)throw 1===t.Ea?t.Ia(this.wa+"() can only appear at the top level of your update data"):t.Ia(this.wa+"() cannot be used with set() unless you pass {merge:true}");return t.Le.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ep);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(t,e,n){return new gp({Ea:3,ma:e.settings.ma,methodName:t.wa,Aa:n},e.s,e.serializer,e.ignoreUndefinedProperties)}var ip=function(t){function e(e){var n=this;return(n=t.call(this)||this).wa=e,n}return o(e,t),e.prototype.Ta=function(t){return new Zc(t.path,new Wc)},e.prototype.isEqual=function(t){return t instanceof e},e}(ep),op=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).wa=e,r.Ra=n,r}return o(e,t),e.prototype.Ta=function(t){var e=rp(this,t,!0),n=this.Ra.map((function(t){return Tp(t,e)})),r=new Hc(n);return new Zc(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ep),ap=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).wa=e,r.Ra=n,r}return o(e,t),e.prototype.Ta=function(t){var e=rp(this,t,!0),n=this.Ra.map((function(t){return Tp(t,e)})),r=new Gc(n);return new Zc(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ep),sp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).wa=e,r.Pa=n,r}return o(e,t),e.prototype.Ta=function(t){var e=new Kc(t.serializer,dc(t.serializer,this.Pa));return new Zc(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ep),up=function(t){function e(){return t.call(this)||this}return o(e,t),e.delete=function(){return Af("FieldValue.delete",arguments),new cp(new np("FieldValue.delete"))},e.serverTimestamp=function(){return Af("FieldValue.serverTimestamp",arguments),new cp(new ip("FieldValue.serverTimestamp"))},e.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Of("FieldValue.arrayUnion",arguments,1),new cp(new op("FieldValue.arrayUnion",t))},e.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Of("FieldValue.arrayRemove",arguments,1),new cp(new ap("FieldValue.arrayRemove",t))},e.increment=function(t){return Df("FieldValue.increment","number",1,t),Pf("FieldValue.increment",arguments,1),new cp(new sp("FieldValue.increment",t))},e}(ep),cp=function(t){function e(e){var n=this;return(n=t.call(this)||this).da=e,n.wa=e.wa,n}return o(e,t),e.prototype.Ta=function(t){return this.da.Ta(t)},e.prototype.isEqual=function(t){return t instanceof e&&this.da.isEqual(t.da)},e}(up),lp=function(){function t(t,e){if(Pf("GeoPoint",arguments,2),Df("GeoPoint","number",1,t),Df("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new Ks(Ys.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ks(Ys.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Va=t,this.ga=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.Va},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.ga},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.Va===t.Va&&this.ga===t.ga},t.prototype.T=function(t){return Us(this.Va,t.Va)||Us(this.ga,t.ga)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(t){return new hc(t,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fp=/^__.*__$/,pp=function(t,e,n){this.ya=t,this.pa=e,this.ba=n},dp=function(){function t(t,e,n){this.data=t,this.Le=e,this.fieldTransforms=n}return t.prototype.va=function(t,e){var n=[];return null!==this.Le?n.push(new ll(t,this.data,this.Le,e)):n.push(new cl(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new fl(t,this.fieldTransforms)),n},t}(),yp=function(){function t(t,e,n){this.data=t,this.Le=e,this.fieldTransforms=n}return t.prototype.va=function(t,e){var n=[new ll(t,this.data,this.Le,e)];return this.fieldTransforms.length>0&&n.push(new fl(t,this.fieldTransforms)),n},t}();function vp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ds()}}var gp=function(){function t(t,e,n,r,i,o){this.settings=t,this.s=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sa(),this.fieldTransforms=i||[],this.Le=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ea",{get:function(){return this.settings.Ea},enumerable:!1,configurable:!0}),t.prototype.Da=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Le)},t.prototype.Ca=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Da({path:n,Aa:!1});return r.Fa(t),r},t.prototype.Na=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Da({path:n,Aa:!1});return r.Sa(),r},t.prototype.$a=function(t){return this.Da({path:void 0,Aa:!0})},t.prototype.Ia=function(t){return kp(t,this.settings.methodName,this.settings.ka||!1,this.path,this.settings.ma)},t.prototype.contains=function(t){return void 0!==this.Le.find((function(e){return t.D(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.D(e.field)}))},t.prototype.Sa=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fa(this.path.get(t))},t.prototype.Fa=function(t){if(0===t.length)throw this.Ia("Document fields must not be empty");if(vp(this.Ea)&&fp.test(t))throw this.Ia('Document fields cannot begin and end with "__"')},t}(),mp=function(){function t(t,e,n){this.s=t,this.ignoreUndefinedProperties=e,this.serializer=n||hp(t)}return t.prototype.xa=function(t,e,n,r){return void 0===r&&(r=!1),new gp({Ea:t,methodName:e,ma:n,path:eu.k(),Aa:!1,ka:r},this.s,this.serializer,this.ignoreUndefinedProperties)},t}();function _p(t,e,n,r,i,o){void 0===o&&(o={});var a=t.xa(o.merge||o.mergeFields?2:0,e,n,i);Sp("Data must be an object, but it was:",a,r);var s,u,c=xp(r,a);if(o.merge)s=new Jc(a.Le),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=f[h],d=void 0;if(p instanceof Jf)d=p.fa;else{if("string"!=typeof p)throw Ds();d=Np(e,p,n)}if(!a.contains(d))throw new Ks(Ys.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Ap(l,d)||l.push(d)}s=new Jc(l),u=a.fieldTransforms.filter((function(t){return s.Ke(t.field)}))}else s=null,u=a.fieldTransforms;return new dp(new gl(c),s,u)}function bp(t,e,n,r){var i=t.xa(1,e,n);Sp("Data must be an object, but it was:",i,r);var o=[],a=new ml;Hs(r,(function(t,r){var s=Np(e,t,n),u=i.Na(s);if(r instanceof ep&&r.da instanceof np)o.push(s);else{var c=Tp(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new Jc(o);return new yp(a.ze(),s,i.fieldTransforms)}function wp(t,e,n,r,i,o){var a=t.xa(1,e,n),s=[Ip(e,r,n)],u=[i];if(o.length%2!=0)throw new Ks(Ys.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Ip(e,o[c])),u.push(o[c+1]);for(var l=[],h=new ml,f=s.length-1;f>=0;--f)if(!Ap(l,s[f])){var p=s[f],d=u[f],y=a.Na(p);if(d instanceof ep&&d.da instanceof np)l.push(p);else{var v=Tp(d,y);null!=v&&(l.push(p),h.set(p,v))}}var g=new Jc(l);return new yp(h.ze(),g,a.fieldTransforms)}function Ep(t,e,n,r){return void 0===r&&(r=!1),Tp(n,t.xa(r?4:3,e))}function Tp(t,e){if(Cp(t))return Sp("Unsupported field value:",e,t),xp(t,e);if(t instanceof ep)return function(t,e){if(!vp(e.Ea))throw e.Ia(t.wa+"() can only be used with update() and set()");if(!e.path)throw e.Ia(t.wa+"() is not currently supported inside arrays");var n=t.Ta(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Le.push(e.path),t instanceof Array){if(e.settings.Aa&&4!==e.Ea)throw e.Ia("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Tp(o[i],e.$a(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return dc(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=$s.fromDate(t);return{timestampValue:yc(e.serializer,n)}}if(t instanceof $s){var r=new $s(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:yc(e.serializer,r)}}if(t instanceof lp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Xf)return{bytesValue:vc(e.serializer,t)};if(t instanceof pp){var i=e.s,o=t.ya;if(!o.isEqual(i))throw e.Ia("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:_c(t.ya||e.s,t.pa.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.Ia("Unsupported field value: "+Bf(t))}(t,e)}function xp(t,e){var n={};return Qs(t)?e.path&&e.path.length>0&&e.Le.push(e.path):Hs(t,(function(t,r){var i=Tp(r,e.Ca(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Cp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof $s||t instanceof lp||t instanceof Xf||t instanceof pp||t instanceof ep)}function Sp(t,e,n){if(!Cp(n)||!qf(n)){var r=Bf(n);throw"an object"===r?e.Ia(t+" a custom object"):e.Ia(t+" "+r)}}function Ip(t,e,n){if(e instanceof Jf)return e.fa;if("string"==typeof e)return Np(t,e);throw kp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Np(t,e,n){try{return function(t){if(t.search(tp)>=0)throw new Ks(Ys.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Zf.bind.apply(Zf,f([void 0],t.split("."))))}catch(e){throw new Ks(Ys.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).fa}catch(e){throw kp((r=e)instanceof Error?r.message:r.toString(),t,!1,void 0,n)}var r}function kp(t,e,n,r,i){var o=r&&!r._(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Ks(Ys.INVALID_ARGUMENT,(s+=". ")+t+u)}function Ap(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pp=function(){function t(t){this.uid=t}return t.prototype.Yr=function(){return null!=this.uid},t.prototype.Ma=function(){return this.Yr()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Pp.UNAUTHENTICATED=new Pp(null),Pp.Oa=new Pp("google-credentials-uid"),Pp.La=new Pp("first-party-uid");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Op=function(t,e){this.user=e,this.type="OAuth",this.Ba={},this.Ba.Authorization="Bearer "+t},Rp=function(){function t(){this.qa=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.Ua=function(){},t.prototype.Qa=function(t){this.qa=t,t(Pp.UNAUTHENTICATED)},t.prototype.Wa=function(){this.qa=null},t}(),Dp=function(){function t(t){var e=this;this.ja=null,this.currentUser=Pp.UNAUTHENTICATED,this.Ka=!1,this.Ga=0,this.qa=null,this.forceRefresh=!1,this.ja=function(){e.Ga++,e.currentUser=e.za(),e.Ka=!0,e.qa&&e.qa(e.currentUser)},this.Ga=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.ja):(this.ja(null),t.get().then((function(t){e.auth=t,e.ja&&e.auth.addAuthTokenListener(e.ja)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.Ga,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.Ga!==e?(Ps("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Ms("string"==typeof n.accessToken),new Op(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.Ua=function(){this.forceRefresh=!0},t.prototype.Qa=function(t){this.qa=t,this.Ka&&t(this.currentUser)},t.prototype.Wa=function(){this.auth&&this.auth.removeAuthTokenListener(this.ja),this.ja=null,this.qa=null},t.prototype.za=function(){var t=this.auth&&this.auth.getUid();return Ms(null===t||"string"==typeof t),new Pp(t)},t}(),Mp=function(){function t(t,e){this.Ha=t,this.Ya=e,this.type="FirstParty",this.user=Pp.La}return Object.defineProperty(t.prototype,"Ba",{get:function(){var t={"X-Goog-AuthUser":this.Ya},e=this.Ha.auth.Ja([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Lp=function(){function t(t,e){this.Ha=t,this.Ya=e}return t.prototype.getToken=function(){return Promise.resolve(new Mp(this.Ha,this.Ya))},t.prototype.Qa=function(t){t(Pp.La)},t.prototype.Wa=function(){},t.prototype.Ua=function(){},t}(),Fp=function(){function t(t,e,n,r,i,o){this.bs=t,this.Xa=n,this.Za=r,this.tu=i,this.listener=o,this.state=0,this.eu=0,this.nu=null,this.stream=null,this.xo=new Zl(t,e)}return t.prototype.su=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.iu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ru()},t.prototype.stop=function(){return s(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.su()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.ou=function(){this.state=0,this.xo.reset()},t.prototype.hu=function(){var t=this;this.iu()&&null===this.nu&&(this.nu=this.bs.Os(this.Xa,6e4,(function(){return t.au()})))},t.prototype.uu=function(t){this.cu(),this.stream.send(t)},t.prototype.au=function(){return s(this,void 0,void 0,(function(){return u(this,(function(t){return this.iu()?[2,this.close(0)]:[2]}))}))},t.prototype.cu=function(){this.nu&&(this.nu.cancel(),this.nu=null)},t.prototype.close=function(t,e){return s(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return this.cu(),this.xo.cancel(),this.eu++,3!==t?this.xo.reset():e&&e.code===Ys.RESOURCE_EXHAUSTED?(Os(e.toString()),Os("Using maximum backoff delay to prevent overloading the backend."),this.xo.ks()):e&&e.code===Ys.UNAUTHENTICATED&&this.tu.Ua(),null!==this.stream&&(this.lu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener._u(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.lu=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.fu(this.eu),n=this.eu;this.tu.getToken().then((function(e){t.eu===n&&t.du(e)}),(function(n){e((function(){var e=new Ks(Ys.UNKNOWN,"Fetching auth token failed: "+n.message);return t.wu(e)}))}))},t.prototype.du=function(t){var e=this,n=this.fu(this.eu);this.stream=this.Tu(t),this.stream.Eu((function(){n((function(){return e.state=2,e.listener.Eu()}))})),this.stream._u((function(t){n((function(){return e.wu(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.ru=function(){var t=this;this.state=4,this.xo.xs((function(){return s(t,void 0,void 0,(function(){return u(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.wu=function(t){return Ps("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.fu=function(t){var e=this;return function(n){e.bs.lr((function(){return e.eu===t?n():(Ps("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),jp=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,a}return o(e,t),e.prototype.Tu=function(t){return this.Za.Iu("Listen",t)},e.prototype.onMessage=function(t){this.xo.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Ds()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Oe?(Ms(void 0===e||"string"==typeof e),hu.fromBase64String(e||"")):(Ms(void 0===e||e instanceof Uint8Array),hu.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,s=a&&function(t){var e=void 0===t.code?Ys.UNKNOWN:gu(t.code);return new Ks(e,t.message||"")}(a);n=new Vu(r,i,o,s||null)}else if("documentChange"in e){e.documentChange;var u=e.documentChange;u.document,u.document.name,u.document.updateTime;var c=Ec(t,u.document.name),l=mc(u.document.updateTime),h=new gl({mapValue:{fields:u.document.fields}}),f=new wl(c,l,h,{}),p=u.targetIds||[],d=u.removedTargetIds||[];n=new ju(p,d,f.key,f)}else if("documentDelete"in e){e.documentDelete;var y=e.documentDelete;y.document;var v=Ec(t,y.document),g=y.readTime?mc(y.readTime):Xs.min(),m=new El(v,g),_=y.removedTargetIds||[];n=new ju([],_,m.key,m)}else if("documentRemove"in e){e.documentRemove;var b=e.documentRemove;b.document;var w=Ec(t,b.document),E=b.removedTargetIds||[];n=new ju([],E,w,null)}else{if(!("filter"in e))return Ds();e.filter;var T=e.filter;T.targetId;var x=T.count||0,C=new yu(x),S=T.targetId;n=new Uu(S,C)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Xs.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Xs.min():e.readTime?mc(e.readTime):Xs.min()}(t);return this.listener.mu(e,n)},e.prototype.Au=function(t){var e={};e.database=Cc(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=lu(r)?{documents:Ac(t,r)}:{query:Pc(t,r)}).targetId=e.targetId,e.resumeToken.H()>0&&(n.resumeToken=vc(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ds()}}(0,e.J);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.uu(e)},e.prototype.Ru=function(t){var e={};e.database=Cc(this.serializer),e.removeTarget=t,this.uu(e)},e}(Fp),Up=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,a.Pu=!1,a}return o(e,t),Object.defineProperty(e.prototype,"Vu",{get:function(){return this.Pu},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Pu=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.lu=function(){this.Pu&&this.gu([])},e.prototype.Tu=function(t){return this.Za.Iu("Write",t)},e.prototype.onMessage=function(t){if(Ms(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Pu){this.xo.reset();var e=function(t,e){return t&&t.length>0?(Ms(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?mc(t.updateTime):mc(e);n.isEqual(Xs.min())&&(n=mc(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new tl(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=mc(t.commitTime);return this.listener.yu(n,e)}return Ms(!t.writeResults||0===t.writeResults.length),this.Pu=!0,this.listener.pu()},e.prototype.bu=function(){var t={};t.database=Cc(this.serializer),this.uu(t)},e.prototype.gu=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Nc(e.serializer,t)}))};this.uu(n)},e}(Fp),Vp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Za=e,i.credentials=n,i.serializer=r,i.vu=!1,i}return o(e,t),e.prototype.Su=function(){if(this.vu)throw new Ks(Ys.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Du=function(t,e){var n=this;return this.Su(),this.credentials.getToken().then((function(r){return n.Za.Du(t,e,r)})).catch((function(t){throw t.code===Ys.UNAUTHENTICATED&&n.credentials.Ua(),t}))},e.prototype.Cu=function(t,e){var n=this;return this.Su(),this.credentials.getToken().then((function(r){return n.Za.Cu(t,e,r)})).catch((function(t){throw t.code===Ys.UNAUTHENTICATED&&n.credentials.Ua(),t}))},e}((function(){this.je=void 0})),qp=function(){function t(t){this.Fu=t,this.Nu=new Map,this.mutations=[],this.$u=!1,this.ku=null,this.xu=new Set}return t.prototype.Mu=function(t){return s(this,void 0,void 0,(function(){var e,n=this;return u(this,(function(r){switch(r.label){case 0:if(this.Ou(),this.mutations.length>0)throw new Ks(Ys.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return s(this,void 0,void 0,(function(){var n,r,i,o,a;return u(this,(function(s){switch(s.label){case 0:return n=Ls(t),r={database:Cc(n.serializer),documents:e.map((function(t){return wc(n.serializer,t)}))},[4,n.Cu("BatchGetDocuments",r)];case 1:return i=s.sent(),o=new Map,i.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Ms(!!e.found),e.found.name,e.found.updateTime;var n=Ec(t,e.found.name),r=mc(e.found.updateTime),i=new gl({mapValue:{fields:e.found.fields}});return new wl(n,r,i,{})}(t,e):"missing"in e?function(t,e){Ms(!!e.missing),Ms(!!e.readTime);var n=Ec(t,e.missing),r=mc(e.readTime);return new El(n,r)}(t,e):Ds()}(n.serializer,t);o.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=o.get(t.toString());Ms(!!e),a.push(e)})),a)]}}))}))}(this.Fu,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof El||t instanceof wl?n.Lu(t):Ds()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.va(t,this.Ue(t))),this.xu.add(t)},t.prototype.update=function(t,e){try{this.write(e.va(t,this.Bu(t)))}catch(t){this.ku=t}this.xu.add(t)},t.prototype.delete=function(t){this.write([new yl(t,this.Ue(t))]),this.xu.add(t)},t.prototype.commit=function(){return s(this,void 0,void 0,(function(){var t,e=this;return u(this,(function(n){switch(n.label){case 0:if(this.Ou(),this.ku)throw this.ku;return t=this.Nu,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=new nu(Zs.$(n));e.mutations.push(new vl(r,e.Ue(r)))})),[4,function(t,e){return s(this,void 0,void 0,(function(){var n,r;return u(this,(function(i){switch(i.label){case 0:return n=Ls(t),r={database:Cc(n.serializer),writes:e.map((function(t){return Nc(n.serializer,t)}))},[4,n.Du("Commit",r)];case 1:return i.sent(),[2]}}))}))}(this.Fu,this.mutations)];case 1:return n.sent(),this.$u=!0,[2]}}))}))},t.prototype.Lu=function(t){var e;if(t instanceof wl)e=t.version;else{if(!(t instanceof El))throw Ds();e=Xs.min()}var n=this.Nu.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ks(Ys.ABORTED,"Document version changed between two reads.")}else this.Nu.set(t.key.toString(),e)},t.prototype.Ue=function(t){var e=this.Nu.get(t.toString());return!this.xu.has(t)&&e?el.updateTime(e):el.Qe()},t.prototype.Bu=function(t){var e=this.Nu.get(t.toString());if(!this.xu.has(t)&&e){if(e.isEqual(Xs.min()))throw new Ks(Ys.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return el.updateTime(e)}return el.exists(!0)},t.prototype.write=function(t){this.Ou(),this.mutations=this.mutations.concat(t)},t.prototype.Ou=function(){},t}(),Bp=function(){function t(t,e){this.Ro=t,this.qu=e,this.state="Unknown",this.Uu=0,this.Qu=null,this.Wu=!0}return t.prototype.ju=function(){var t=this;0===this.Uu&&(this.Ku("Unknown"),this.Qu=this.Ro.Os("online_state_timeout",1e4,(function(){return t.Qu=null,t.Gu("Backend didn't respond within 10 seconds."),t.Ku("Offline"),Promise.resolve()})))},t.prototype.zu=function(t){"Online"===this.state?this.Ku("Unknown"):(this.Uu++,this.Uu>=1&&(this.Hu(),this.Gu("Connection failed 1 times. Most recent error: "+t.toString()),this.Ku("Offline")))},t.prototype.set=function(t){this.Hu(),this.Uu=0,"Online"===t&&(this.Wu=!1),this.Ku(t)},t.prototype.Ku=function(t){t!==this.state&&(this.state=t,this.qu(t))},t.prototype.Gu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Wu?(Os(e),this.Wu=!1):Ps("OnlineStateTracker",e)},t.prototype.Hu=function(){null!==this.Qu&&(this.Qu.cancel(),this.Qu=null)},t}(),zp=function(){function t(t,e,n,r,i){var o=this;this.Yu=t,this.Fu=e,this.Ro=n,this.Ju=[],this.Xu=new Map,this.Zu=null,this.tc=new Set,this.ec=i,this.ec.nc((function(t){n.lr((function(){return s(o,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.sc()?(Ps("RemoteStore","Restarting streams for network reachability change."),[4,this.ic()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.rc=new Bp(n,r),this.oc=function(t,e,n){var r=Ls(t);return new jp(e,r.Za,r.credentials,r.serializer,n)}(this.Fu,n,{Eu:this.hc.bind(this),_u:this.ac.bind(this),mu:this.uc.bind(this)}),this.cc=function(t,e,n){var r=Ls(t);return new Up(e,r.Za,r.credentials,r.serializer,n)}(this.Fu,n,{Eu:this.lc.bind(this),_u:this._c.bind(this),pu:this.fc.bind(this),yu:this.yu.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return this.tc.delete(0),this.dc()},t.prototype.dc=function(){return s(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.sc()?(this.wc()?this.Tc():this.rc.set("Unknown"),[4,this.Ec()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.disableNetwork=function(){return s(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.tc.add(0),[4,this.Ic()];case 1:return t.sent(),this.rc.set("Offline"),[2]}}))}))},t.prototype.Ic=function(){return s(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.cc.stop()];case 1:return t.sent(),[4,this.oc.stop()];case 2:return t.sent(),this.Ju.length>0&&(Ps("RemoteStore","Stopping write stream with "+this.Ju.length+" pending writes"),this.Ju=[]),this.mc(),[2]}}))}))},t.prototype.yr=function(){return s(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return Ps("RemoteStore","RemoteStore shutting down."),this.tc.add(5),[4,this.Ic()];case 1:return t.sent(),this.ec.yr(),this.rc.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){this.Xu.has(t.targetId)||(this.Xu.set(t.targetId,t),this.wc()?this.Tc():this.oc.iu()&&this.Ac(t))},t.prototype.Rc=function(t){this.Xu.delete(t),this.oc.iu()&&this.Pc(t),0===this.Xu.size&&(this.oc.iu()?this.oc.hu():this.sc()&&this.rc.set("Unknown"))},t.prototype.Me=function(t){return this.Xu.get(t)||null},t.prototype.xe=function(t){return this.Vc.xe(t)},t.prototype.Ac=function(t){this.Zu.de(t.targetId),this.oc.Au(t)},t.prototype.Pc=function(t){this.Zu.de(t),this.oc.Ru(t)},t.prototype.Tc=function(){this.Zu=new Bu(this),this.oc.start(),this.rc.ju()},t.prototype.wc=function(){return this.sc()&&!this.oc.su()&&this.Xu.size>0},t.prototype.sc=function(){return 0===this.tc.size},t.prototype.mc=function(){this.Zu=null},t.prototype.hc=function(){return s(this,void 0,void 0,(function(){var t=this;return u(this,(function(e){return this.Xu.forEach((function(e,n){t.Ac(e)})),[2]}))}))},t.prototype.ac=function(t){return s(this,void 0,void 0,(function(){return u(this,(function(e){return this.mc(),this.wc()?(this.rc.zu(t),this.Tc()):this.rc.set("Unknown"),[2]}))}))},t.prototype.uc=function(t,e){return s(this,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){switch(o.label){case 0:if(this.rc.set("Online"),!(t instanceof Vu&&2===t.state&&t.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,this.gc(t)];case 2:return o.sent(),[3,5];case 3:return n=o.sent(),Ps("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),[4,this.yc(n)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof ju?this.Zu.Pe(t):t instanceof Uu?this.Zu.De(t):this.Zu.ye(t),e.isEqual(Xs.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,this.Yu.mi()];case 8:return r=o.sent(),e.o(r)>=0?[4,this.pc(e)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return Ps("RemoteStore","Failed to raise snapshot:",i=o.sent()),[4,this.yc(i)];case 12:return o.sent(),[3,13];case 13:return[2]}}))}))},t.prototype.yc=function(t,e){return s(this,void 0,void 0,(function(){var n=this;return u(this,(function(r){switch(r.label){case 0:if(!cf(t))throw t;return this.tc.add(1),[4,this.Ic()];case 1:return r.sent(),this.rc.set("Offline"),e||(e=function(){return n.Yu.mi()}),this.Ro.dr((function(){return s(n,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return Ps("RemoteStore","Retrying IndexedDB access"),[4,e()];case 1:return t.sent(),this.tc.delete(1),[4,this.dc()];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))},t.prototype.bc=function(t){var e=this;return t().catch((function(n){return e.yc(n,t)}))},t.prototype.pc=function(t){var e=this,n=this.Zu.Ne(t);return n.Qt.forEach((function(n,r){if(n.resumeToken.H()>0){var i=e.Xu.get(r);i&&e.Xu.set(r,i.tt(n.resumeToken,t))}})),n.Wt.forEach((function(t){var n=e.Xu.get(t);if(n){e.Xu.set(t,n.tt(hu.Y,n.X)),e.Pc(t);var r=new du(n.target,t,1,n.sequenceNumber);e.Ac(r)}})),this.Vc.qh(n)},t.prototype.gc=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i;return u(this,(function(o){switch(o.label){case 0:e=t.cause,n=0,r=t.targetIds,o.label=1;case 1:return n<r.length?(i=r[n],this.Xu.has(i)?[4,this.Vc.vc(i,e)]:[3,3]):[3,5];case 2:o.sent(),this.Xu.delete(i),this.Zu.removeTarget(i),o.label=3;case 3:o.label=4;case 4:return n++,[3,1];case 5:return[2]}}))}))},t.prototype.Ec=function(){return s(this,void 0,void 0,(function(){var t,e,n;return u(this,(function(r){switch(r.label){case 0:t=this.Ju.length>0?this.Ju[this.Ju.length-1].batchId:-1,r.label=1;case 1:if(!this.Sc())return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,this.Yu.jh(t)];case 3:return null===(e=r.sent())?(0===this.Ju.length&&this.cc.hu(),[3,7]):(t=e.batchId,this.Dc(e),[3,6]);case 4:return n=r.sent(),[4,this.yc(n)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return this.Cc()&&this.Fc(),[2]}}))}))},t.prototype.Sc=function(){return this.sc()&&this.Ju.length<10},t.prototype.Nc=function(){return this.Ju.length},t.prototype.Dc=function(t){this.Ju.push(t),this.cc.iu()&&this.cc.Vu&&this.cc.gu(t.mutations)},t.prototype.Cc=function(){return this.sc()&&!this.cc.su()&&this.Ju.length>0},t.prototype.Fc=function(){this.cc.start()},t.prototype.lc=function(){return s(this,void 0,void 0,(function(){return u(this,(function(t){return this.cc.bu(),[2]}))}))},t.prototype.fc=function(){return s(this,void 0,void 0,(function(){var t,e,n;return u(this,(function(r){for(t=0,e=this.Ju;t<e.length;t++)n=e[t],this.cc.gu(n.mutations);return[2]}))}))},t.prototype.yu=function(t,e){return s(this,void 0,void 0,(function(){var n,r,i=this;return u(this,(function(o){switch(o.label){case 0:return n=this.Ju.shift(),r=Wl.from(n,t,e),[4,this.bc((function(){return i.Vc.$c(r)}))];case 1:return o.sent(),[4,this.Ec()];case 2:return o.sent(),[2]}}))}))},t.prototype._c=function(t){return s(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return t&&this.cc.Vu?[4,this.kc(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.Cc()&&this.Fc(),[2]}}))}))},t.prototype.kc=function(t){return s(this,void 0,void 0,(function(){var e,n,r=this;return u(this,(function(i){switch(i.label){case 0:return vu(n=t.code)&&n!==Ys.ABORTED?(e=this.Ju.shift(),this.cc.ou(),[4,this.bc((function(){return r.Vc.xc(e.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,this.Ec()];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},t.prototype.Mc=function(){return new qp(this.Fu)},t.prototype.ic=function(){return s(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.tc.add(4),[4,this.Ic()];case 1:return t.sent(),this.rc.set("Unknown"),this.tc.delete(4),[4,this.dc()];case 2:return t.sent(),[2]}}))}))},t.prototype.Oc=function(t){return s(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return this.Ro.Ko(),Ps("RemoteStore","RemoteStore received new credentials"),this.tc.add(3),[4,this.Ic()];case 1:return e.sent(),this.rc.set("Unknown"),[4,this.Vc.Oc(t)];case 2:return e.sent(),this.tc.delete(3),[4,this.dc()];case 3:return e.sent(),[2]}}))}))},t.prototype.Lc=function(t){return s(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return t?(this.tc.delete(2),[4,this.dc()]):[3,2];case 1:return e.sent(),[3,5];case 2:return t?[3,4]:(this.tc.add(2),[4,this.Ic()]);case 3:e.sent(),this.rc.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(t,e){return"firestore_clients_"+t+"_"+e}function Hp(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Yr()&&(r+="_"+e.uid),r}function Qp(t,e){return"firestore_targets_"+t+"_"+e}var Gp=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Bc=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new Ks(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(Os("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.qc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Yp=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Bc=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Ks(r.error.code,r.error.message)),i?new t(e,r.state,o):(Os("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.qc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Kp=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Bc=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ou(),a=0;i&&a<r.activeTargetIds.length;++a)i=ou(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(Os("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),$p=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Bc=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Os("SharedClientState","Failed to parse online state: "+e),null)},t}(),Xp=function(){function t(){this.activeTargetIds=Ou()}return t.prototype.Uc=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Qc=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.qc=function(){var t={activeTargetIds:this.activeTargetIds.F(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Jp=function(){function t(t,e,n,r,i){this.window=t,this.bs=e,this.persistenceKey=n,this.Wc=r,this.Vc=null,this.qu=null,this.Ps=null,this.jc=this.Kc.bind(this),this.Gc=new mu(Us),this.hr=!1,this.zc=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Hc=Wp(this.persistenceKey,this.Wc),this.Yc=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Gc=this.Gc.nt(this.Wc,new Xp),this.Jc=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Xc=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Zc=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.tl=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.jc)}return t.Hi=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return s(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,c,l,h,f=this;return u(this,(function(u){switch(u.label){case 0:return[4,this.Vc.Dr()];case 1:for(t=u.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Wc&&(i=this.getItem(Wp(this.persistenceKey,r)))&&(o=Kp.Bc(r,i))&&(this.Gc=this.Gc.nt(o.clientId,o));for(this.el(),(a=this.storage.getItem(this.tl))&&(s=this.nl(a))&&this.sl(s),c=0,l=this.zc;c<l.length;c++)h=l[c],this.Kc(h);return this.zc=[],this.window.addEventListener("unload",(function(){return f.yr()})),this.hr=!0,[2]}}))}))},t.prototype.ys=function(t){this.setItem(this.Yc,JSON.stringify(t))},t.prototype.il=function(){return this.rl(this.Gc)},t.prototype.ol=function(t){var e=!1;return this.Gc.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.hl=function(t){this.al(t,"pending")},t.prototype.ul=function(t,e,n){this.al(t,e,n),this.cl(t)},t.prototype.ll=function(t){var e="not-current";if(this.ol(t)){var n=this.storage.getItem(Qp(this.persistenceKey,t));if(n){var r=Yp.Bc(t,n);r&&(e=r.state)}}return this._l.Uc(t),this.el(),e},t.prototype.fl=function(t){this._l.Qc(t),this.el()},t.prototype.dl=function(t){return this._l.activeTargetIds.has(t)},t.prototype.wl=function(t){this.removeItem(Qp(this.persistenceKey,t))},t.prototype.Tl=function(t,e,n){this.El(t,e,n)},t.prototype.Nh=function(t,e,n){var r=this;e.forEach((function(t){r.cl(t)})),this.currentUser=t,n.forEach((function(t){r.hl(t)}))},t.prototype.Il=function(t){this.ml(t)},t.prototype.yr=function(){this.hr&&(this.window.removeEventListener("storage",this.jc),this.removeItem(this.Hc),this.hr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ps("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ps("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ps("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Kc=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ps("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Hc)return void Os("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.bs.dr((function(){return s(e,void 0,void 0,(function(){var t,e,r,i,o,a;return u(this,(function(s){if(this.hr){if(null!==n.key)if(this.Jc.test(n.key)){if(null==n.newValue)return t=this.Al(n.key),[2,this.Rl(t,null)];if(e=this.Pl(n.key,n.newValue))return[2,this.Rl(e.clientId,e)]}else if(this.Xc.test(n.key)){if(null!==n.newValue&&(r=this.Vl(n.key,n.newValue)))return[2,this.gl(r)]}else if(this.Zc.test(n.key)){if(null!==n.newValue&&(i=this.yl(n.key,n.newValue)))return[2,this.pl(i)]}else if(n.key===this.tl){if(null!==n.newValue&&(o=this.nl(n.newValue)))return[2,this.sl(o)]}else n.key===this.Yc&&(a=function(t){var e=Xl.ps;if(null!=t)try{var n=JSON.parse(t);Ms("number"==typeof n),e=n}catch(t){Os("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Xl.ps&&this.Ps(a)}else this.zc.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"_l",{get:function(){return this.Gc.get(this.Wc)},enumerable:!1,configurable:!0}),t.prototype.el=function(){this.setItem(this.Hc,this._l.qc())},t.prototype.al=function(t,e,n){var r=new Gp(this.currentUser,t,e,n),i=Hp(this.persistenceKey,this.currentUser,t);this.setItem(i,r.qc())},t.prototype.cl=function(t){var e=Hp(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ml=function(t){var e={clientId:this.Wc,onlineState:t};this.storage.setItem(this.tl,JSON.stringify(e))},t.prototype.El=function(t,e,n){var r=Qp(this.persistenceKey,t),i=new Yp(t,e,n);this.setItem(r,i.qc())},t.prototype.Al=function(t){var e=this.Jc.exec(t);return e?e[1]:null},t.prototype.Pl=function(t,e){var n=this.Al(t);return Kp.Bc(n,e)},t.prototype.Vl=function(t,e){var n=this.Xc.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Gp.Bc(new Pp(i),r,e)},t.prototype.yl=function(t,e){var n=this.Zc.exec(t),r=Number(n[1]);return Yp.Bc(r,e)},t.prototype.nl=function(t){return $p.Bc(t)},t.prototype.gl=function(t){return s(this,void 0,void 0,(function(){return u(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.Vc.bl(t.batchId,t.state,t.error)]:(Ps("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.pl=function(t){return this.Vc.vl(t.targetId,t.state,t.error)},t.prototype.Rl=function(t,e){var n=this,r=e?this.Gc.nt(t,e):this.Gc.remove(t),i=this.rl(this.Gc),o=this.rl(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.Vc.Sl(a,s).then((function(){n.Gc=r}))},t.prototype.sl=function(t){this.Gc.get(t.clientId)&&this.qu(t.onlineState)},t.prototype.rl=function(t){var e=Ou();return t.forEach((function(t,n){e=e.Ct(n.activeTargetIds)})),e},t}(),Zp=function(){function t(){this.Dl=new Xp,this.Cl={},this.Vc=null,this.qu=null,this.Ps=null}return t.prototype.hl=function(t){},t.prototype.ul=function(t,e,n){},t.prototype.ll=function(t){return this.Dl.Uc(t),this.Cl[t]||"not-current"},t.prototype.Tl=function(t,e,n){this.Cl[t]=e},t.prototype.fl=function(t){this.Dl.Qc(t)},t.prototype.dl=function(t){return this.Dl.activeTargetIds.has(t)},t.prototype.wl=function(t){delete this.Cl[t]},t.prototype.il=function(){return this.Dl.activeTargetIds},t.prototype.ol=function(t){return this.Dl.activeTargetIds.has(t)},t.prototype.start=function(){return this.Dl=new Xp,Promise.resolve()},t.prototype.Nh=function(t,e,n){},t.prototype.Il=function(t){},t.prototype.yr=function(){},t.prototype.ys=function(t){},t}(),td=function(t){this.key=t},ed=function(t){this.key=t},nd=function(){function t(t,e){this.query=t,this.Fl=e,this.Nl=null,this.Ht=!1,this.$l=Au(),this.Lt=Au(),this.kl=kl(t),this.xl=new Ru(this.kl)}return Object.defineProperty(t.prototype,"Ml",{get:function(){return this.Fl},enumerable:!1,configurable:!0}),t.prototype.Ol=function(t,e){var n=this,r=e?e.Ll:new Du,i=e?e.xl:this.xl,o=e?e.Lt:this.Lt,a=i,s=!1,u=this.query.In()&&i.size===this.query.limit?i.last():null,c=this.query.mn()&&i.size===this.query.limit?i.first():null;if(t.ot((function(t,e){var l=i.get(t),h=e instanceof wl?e:null;h&&(h=Nl(n.query,h)?h:null);var f=!!l&&n.Lt.has(l.key),p=!!h&&(h.Ge||n.Lt.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?f!==p&&(r.track({type:3,doc:h}),d=!0):n.Bl(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.kl(h,u)>0||c&&n.kl(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(s=!0)),d&&(h?(a=a.add(h),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),this.query.In()||this.query.mn())for(;a.size>this.query.limit;){var l=this.query.In()?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{xl:a,Ll:r,ql:s,Lt:o}},t.prototype.Bl=function(t,e){return t.Ge&&e.hasCommittedMutations&&!e.Ge},t.prototype.Jn=function(t,e,n){var r=this,i=this.xl;this.xl=t.xl,this.Lt=t.Lt;var o=t.Ll.Mt();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ds()}};return n(t)-n(e)}(t.type,e.type)||r.kl(t.doc,e.doc)})),this.Ul(n);var a=e?this.Ql():[],s=0===this.$l.size&&this.Ht?1:0,u=s!==this.Nl;return this.Nl=s,0!==o.length||u?{snapshot:new Mu(this.query,t.xl,i,o,t.Lt,0===s,u,!1),Wl:a}:{Wl:a}},t.prototype.jl=function(t){return this.Ht&&"Offline"===t?(this.Ht=!1,this.Jn({xl:this.xl,Ll:new Du,Lt:this.Lt,ql:!1},!1)):{Wl:[]}},t.prototype.Kl=function(t){return!this.Fl.has(t)&&!!this.xl.has(t)&&!this.xl.get(t).Ge},t.prototype.Ul=function(t){var e=this;t&&(t.Yt.forEach((function(t){return e.Fl=e.Fl.add(t)})),t.Jt.forEach((function(t){})),t.Xt.forEach((function(t){return e.Fl=e.Fl.delete(t)})),this.Ht=t.Ht)},t.prototype.Ql=function(){var t=this;if(!this.Ht)return[];var e=this.$l;this.$l=Au(),this.xl.forEach((function(e){t.Kl(e.key)&&(t.$l=t.$l.add(e.key))}));var n=[];return e.forEach((function(e){t.$l.has(e)||n.push(new ed(e))})),this.$l.forEach((function(t){e.has(t)||n.push(new td(t))})),n},t.prototype.Gl=function(t){this.Fl=t.Yh,this.$l=Au();var e=this.Ol(t.documents);return this.Jn(e,!0)},t.prototype.zl=function(){return Mu.Ut(this.query,this.xl,this.Lt,0===this.Nl)},t}(),rd=function(){function t(t,e,n,r){this.Ro=t,this.Fu=e,this.updateFunction=n,this.yo=r,this.Hl=5,this.xo=new Zl(this.Ro,"transaction_retry")}return t.prototype.run=function(){this.Yl()},t.prototype.Yl=function(){var t=this;this.xo.xs((function(){return s(t,void 0,void 0,(function(){var t,e,n=this;return u(this,(function(r){return t=new qp(this.Fu),(e=this.Jl(t))&&e.then((function(e){n.Ro.lr((function(){return t.commit().then((function(){n.yo.resolve(e)})).catch((function(t){n.Xl(t)}))}))})).catch((function(t){n.Xl(t)})),[2]}))}))}))},t.prototype.Jl=function(t){try{var e=this.updateFunction(t);return!ru(e)&&e.catch&&e.then?e:(this.yo.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.yo.reject(t),null}},t.prototype.Xl=function(t){var e=this;this.Hl>0&&this.Zl(t)?(this.Hl-=1,this.Ro.lr((function(){return e.Yl(),Promise.resolve()}))):this.yo.reject(t)},t.prototype.Zl=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!vu(e)}return!1},t}(),id=function(t,e,n){this.query=t,this.targetId=e,this.view=n},od=function(t){this.key=t,this.t_=!1},ad=function(){function t(t,e,n,r,i,o){this.Yu=t,this.e_=e,this.Fu=n,this.n_=r,this.currentUser=i,this.s_=o,this.i_=null,this.r_=new Gs((function(t){return Sl(t)}),Cl),this.o_=new Map,this.h_=[],this.a_=new mu(nu.P),this.u_=new Map,this.c_=new Nf,this.l_={},this.__=new Map,this.f_=Th.di(),this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"d_",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){this.i_=t},t.prototype.listen=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i,o;return u(this,(function(a){switch(a.label){case 0:return this.w_("listen()"),(r=this.r_.get(t))?(e=r.targetId,this.n_.ll(e),n=r.view.zl(),[3,4]):[3,1];case 1:return[4,this.Yu.Gh(t.We())];case 2:return i=a.sent(),o=this.n_.ll(i.targetId),e=i.targetId,[4,this.T_(t,e,"current"===o)];case 3:n=a.sent(),this.d_&&this.e_.listen(i),a.label=4;case 4:return[2,n]}}))}))},t.prototype.T_=function(t,e,n){return s(this,void 0,void 0,(function(){var r,i,o,a,s,c;return u(this,(function(u){switch(u.label){case 0:return[4,this.Yu.Hh(t,!0)];case 1:return r=u.sent(),i=new nd(t,r.Yh),o=i.Ol(r.documents),a=Fu.zt(e,n&&"Offline"!==this.onlineState),s=i.Jn(o,this.d_,a),this.E_(e,s.Wl),c=new id(t,e,i),[2,(this.r_.set(t,c),this.o_.has(e)?this.o_.get(e).push(t):this.o_.set(e,[t]),s.snapshot)]}}))}))},t.prototype.Rc=function(t){return s(this,void 0,void 0,(function(){var e,n,r=this;return u(this,(function(i){switch(i.label){case 0:return this.w_("unlisten()"),e=this.r_.get(t),(n=this.o_.get(e.targetId)).length>1?[2,(this.o_.set(e.targetId,n.filter((function(e){return!Cl(e,t)}))),void this.r_.delete(t))]:this.d_?(this.n_.fl(e.targetId),this.n_.ol(e.targetId)?[3,2]:[4,this.Yu.zh(e.targetId,!1).then((function(){r.n_.wl(e.targetId),r.e_.Rc(e.targetId),r.I_(e.targetId)})).catch(If)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.I_(e.targetId),[4,this.Yu.zh(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return s(this,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){switch(o.label){case 0:this.w_("write()"),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,this.Yu.Mh(t)];case 2:return n=o.sent(),this.n_.hl(n.batchId),this.m_(n.batchId,e),[4,this.A_(n.Un)];case 3:return o.sent(),[4,this.e_.Ec()];case 4:return o.sent(),[3,6];case 5:return r=o.sent(),i=mf(r,"Failed to persist write"),e.reject(i),[3,6];case 6:return[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new rd(t,this.Fu,e,n).run()},t.prototype.qh=function(t){return s(this,void 0,void 0,(function(){var e,n=this;return u(this,(function(r){switch(r.label){case 0:this.w_("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Yu.qh(t)];case 2:return e=r.sent(),t.Qt.forEach((function(t,e){var r=n.u_.get(e);r&&(Ms(t.Yt.size+t.Jt.size+t.Xt.size<=1),t.Yt.size>0?r.t_=!0:t.Jt.size>0?Ms(r.t_):t.Xt.size>0&&(Ms(r.t_),r.t_=!1))})),[4,this.A_(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,If(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.jl=function(t,e){this.w_("applyOnlineStateChange()");var n=[];this.r_.forEach((function(e,r){var i=r.view.jl(t);i.snapshot&&n.push(i.snapshot)})),this.i_.R_(t),this.i_.mu(n),this.onlineState=t},t.prototype.vc=function(t,e){return s(this,void 0,void 0,(function(){var n,r,i,o,a,s=this;return u(this,(function(u){switch(u.label){case 0:return this.w_("rejectListens()"),this.n_.Tl(t,"rejected",e),n=this.u_.get(t),(r=n&&n.key)?(i=(i=new mu(nu.P)).nt(r,new El(r,Xs.min())),o=Au().add(r),a=new Lu(Xs.min(),new Map,new wu(Us),i,o),[4,this.qh(a)]):[3,2];case 1:return u.sent(),this.a_=this.a_.remove(r),this.u_.delete(t),this.P_(),[3,4];case 2:return[4,this.Yu.zh(t,!1).then((function(){return s.I_(t,e)})).catch(If)];case 3:u.sent(),u.label=4;case 4:return[2]}}))}))},t.prototype.$c=function(t){return s(this,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:this.w_("applySuccessfulWrite()"),e=t.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Yu.Oh(t)];case 2:return n=r.sent(),this.V_(e,null),this.g_(e),this.n_.ul(e,"acknowledged"),[4,this.A_(n)];case 3:return r.sent(),[3,6];case 4:return[4,If(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.xc=function(t,e){return s(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:this.w_("rejectFailedWrite()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Yu.Bh(t)];case 2:return n=r.sent(),this.V_(t,e),this.g_(t),this.n_.ul(t,"rejected",e),[4,this.A_(n)];case 3:return r.sent(),[3,6];case 4:return[4,If(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.y_=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i;return u(this,(function(o){switch(o.label){case 0:this.e_.sc()||Ps("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.Yu.no()];case 2:return-1===(e=o.sent())?[2,void t.resolve()]:((n=this.__.get(e)||[]).push(t),this.__.set(e,n),[3,4]);case 3:return r=o.sent(),i=mf(r,"Initialization of waitForPendingWrites() operation failed"),t.reject(i),[3,4];case 4:return[2]}}))}))},t.prototype.g_=function(t){(this.__.get(t)||[]).forEach((function(t){t.resolve()})),this.__.delete(t)},t.prototype.p_=function(t){this.__.forEach((function(e){e.forEach((function(e){e.reject(new Ks(Ys.CANCELLED,t))}))})),this.__.clear()},t.prototype.m_=function(t,e){var n=this.l_[this.currentUser.Ma()];n||(n=new mu(Us)),n=n.nt(t,e),this.l_[this.currentUser.Ma()]=n},t.prototype.V_=function(t,e){var n=this.l_[this.currentUser.Ma()];if(n){var r=n.get(t);r&&(e?r.reject(e):r.resolve(),n=n.remove(t)),this.l_[this.currentUser.Ma()]=n}},t.prototype.I_=function(t,e){var n=this;void 0===e&&(e=null),this.n_.fl(t);for(var r=0,i=this.o_.get(t);r<i.length;r++){var o=i[r];this.r_.delete(o),e&&this.i_.b_(o,e)}this.o_.delete(t),this.d_&&this.c_.aa(t).forEach((function(t){n.c_.Mi(t)||n.v_(t)}))},t.prototype.v_=function(t){var e=this.a_.get(t);null!==e&&(this.e_.Rc(e),this.a_=this.a_.remove(t),this.u_.delete(e),this.P_())},t.prototype.E_=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof td?(this.c_.Fi(i.key,t),this.S_(i)):i instanceof ed?(Ps("SyncEngine","Document no longer in limbo: "+i.key),this.c_.$i(i.key,t),this.c_.Mi(i.key)||this.v_(i.key)):Ds()}},t.prototype.S_=function(t){var e=t.key;this.a_.get(e)||(Ps("SyncEngine","New document in limbo: "+e),this.h_.push(e),this.P_())},t.prototype.P_=function(){for(;this.h_.length>0&&this.a_.size<this.s_;){var t=this.h_.shift(),e=this.f_.next();this.u_.set(e,new od(t)),this.a_=this.a_.nt(t,e),this.e_.listen(new du(xl.hn(t.path).We(),e,2,Xl.ps))}},t.prototype.D_=function(){return this.a_},t.prototype.C_=function(){return this.h_},t.prototype.A_=function(t,e){return s(this,void 0,void 0,(function(){var n,r,i,o=this;return u(this,(function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.r_.forEach((function(a,s){i.push(Promise.resolve().then((function(){var e=s.view.Ol(t);return e.ql?o.Yu.Hh(s.query,!1).then((function(t){var n=t.documents;return s.view.Ol(n,e)})):e})).then((function(t){var i=e&&e.Qt.get(s.targetId),a=s.view.Jn(t,o.d_,i);if(o.E_(s.targetId,a.Wl),a.snapshot){o.d_&&o.n_.Tl(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=$l.Rs(s.targetId,a.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return a.sent(),this.i_.mu(n),[4,this.Yu.Wh(r)];case 2:return a.sent(),[2]}}))}))},t.prototype.w_=function(t){},t.prototype.Oc=function(t){return s(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return this.currentUser.isEqual(t)?[3,3]:(Ps("SyncEngine","User change. New user:",t.Ma()),[4,this.Yu.Nh(t)]);case 1:return e=n.sent(),this.currentUser=t,this.p_("'waitForPendingWrites' promise is rejected due to a user change."),this.n_.Nh(t,e.kh,e.xh),[4,this.A_(e.$h)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.e_.enableNetwork()},t.prototype.disableNetwork=function(){return this.e_.disableNetwork()},t.prototype.xe=function(t){var e=this.u_.get(t);if(e&&e.t_)return Au().add(e.key);var n=Au(),r=this.o_.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.r_.get(a);n=n.Ct(s.view.Ml)}return n},t}(),sd=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,o,a)||this).Yu=e,s.F_=void 0,s}return o(e,t),Object.defineProperty(e.prototype,"d_",{get:function(){return!0===this.F_},enumerable:!1,configurable:!0}),e.prototype.enableNetwork=function(){return this.Yu.cr(!0),t.prototype.enableNetwork.call(this)},e.prototype.disableNetwork=function(){return this.Yu.cr(!1),t.prototype.disableNetwork.call(this)},e.prototype.N_=function(t){return s(this,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:return[4,this.Yu.Hh(t.query,!0)];case 1:return e=r.sent(),n=t.view.Gl(e),[2,(this.F_&&this.E_(t.targetId,n.Wl),n)]}}))}))},e.prototype.jl=function(e,n){this.d_&&0===n&&(t.prototype.jl.call(this,e,n),this.n_.Il(e)),this.d_||1!==n||t.prototype.jl.call(this,e,n)},e.prototype.bl=function(t,e,n){return s(this,void 0,void 0,(function(){var r;return u(this,(function(i){switch(i.label){case 0:return this.w_("applyBatchState()"),[4,this.Yu.Xh(t)];case 1:return null===(r=i.sent())?[3,6]:"pending"!==e?[3,3]:[4,this.e_.Ec()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.V_(t,n||null),this.Yu.Zh(t)):Ds(),i.label=4;case 4:return[4,this.A_(r)];case 5:return i.sent(),[3,7];case 6:Ps("SyncEngine","Cannot apply mutation batch with id: "+t),i.label=7;case 7:return[2]}}))}))},e.prototype.Lc=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,c=this;return u(this,(function(u){switch(u.label){case 0:return!0!==t||!0===this.F_?[3,3]:(e=this.n_.il(),[4,this.k_(e.F(),!0)]);case 1:return n=u.sent(),this.F_=!0,[4,this.e_.Lc(!0)];case 2:for(u.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.e_.listen(o);return[3,7];case 3:return!1!==t||!1===this.F_?[3,7]:(a=[],s=Promise.resolve(),this.o_.forEach((function(t,e){c.n_.dl(e)?a.push(e):s=s.then((function(){return c.I_(e),c.Yu.zh(e,!0)})),c.e_.Rc(e)})),[4,s]);case 4:return u.sent(),[4,this.k_(a,!1)];case 5:return u.sent(),this.x_(),this.F_=!1,[4,this.e_.Lc(!1)];case 6:u.sent(),u.label=7;case 7:return[2]}}))}))},e.prototype.x_=function(){var t=this;this.u_.forEach((function(e,n){t.e_.Rc(n)})),this.c_.ua(),this.u_=new Map,this.a_=new mu(nu.P)},e.prototype.k_=function(t,e){return s(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,c,l,h,f,p,d;return u(this,(function(u){switch(u.label){case 0:e=[],n=[],r=0,i=t,u.label=1;case 1:return r<i.length?(o=i[r],a=void 0,(s=this.o_.get(o))&&0!==s.length?[4,this.Yu.Gh(s[0].We())]:[3,7]):[3,13];case 2:a=u.sent(),c=0,l=s,u.label=3;case 3:return c<l.length?(h=l[c],f=this.r_.get(h),[4,this.N_(f)]):[3,6];case 4:(p=u.sent()).snapshot&&n.push(p.snapshot),u.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,this.Yu.ta(o)];case 8:return d=u.sent(),[4,this.Yu.Gh(d)];case 9:return a=u.sent(),[4,this.T_(this.M_(d),o,!1)];case 10:u.sent(),u.label=11;case 11:e.push(a),u.label=12;case 12:return r++,[3,1];case 13:return[2,(this.i_.mu(n),e)]}}))}))},e.prototype.M_=function(t){return new xl(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},e.prototype.Dr=function(){return this.Yu.Dr()},e.prototype.vl=function(t,e,n){return s(this,void 0,void 0,(function(){var r,i;return u(this,(function(o){switch(o.label){case 0:return this.F_?(Ps("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.o_.has(t))return[3,8];switch(e){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.Yu.si()];case 3:return r=o.sent(),i=Lu.Gt(t,"current"===e),[4,this.A_(r,i)];case 4:return o.sent(),[3,8];case 5:return[4,this.Yu.zh(t,!0)];case 6:return o.sent(),this.I_(t,n),[3,8];case 7:Ds(),o.label=8;case 8:return[2]}}))}))},e.prototype.Sl=function(t,e){return s(this,void 0,void 0,(function(){var n,r,i,o,a,s,c,l,h,f,p=this;return u(this,(function(d){switch(d.label){case 0:if(!this.F_)return[3,10];n=0,r=t,d.label=1;case 1:return n<r.length?(i=r[n],this.o_.has(i)?(Ps("SyncEngine","Adding an already active target "+i),[3,5]):[4,this.Yu.ta(i)]):[3,6];case 2:return o=d.sent(),[4,this.Yu.Gh(o)];case 3:return a=d.sent(),[4,this.T_(this.M_(o),a.targetId,!1)];case 4:d.sent(),this.e_.listen(a),d.label=5;case 5:return n++,[3,1];case 6:s=function(t){return u(this,(function(e){switch(e.label){case 0:return c.o_.has(t)?[4,c.Yu.zh(t,!1).then((function(){p.e_.Rc(t),p.I_(t)})).catch(If)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},c=this,l=0,h=e,d.label=7;case 7:return l<h.length?(f=h[l],[5,s(f)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))},e}(ad),ud=function(){this.O_=void 0,this.listeners=[]},cd=function(){function t(t){this.Vc=t,this.L_=new Gs((function(t){return Sl(t)}),Cl),this.onlineState="Unknown",this.B_=new Set,this.Vc.subscribe(this)}return t.prototype.listen=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i,o,a;return u(this,(function(s){switch(s.label){case 0:if(e=t.query,n=!1,(r=this.L_.get(e))||(n=!0,r=new ud),!n)return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),i=r,[4,this.Vc.listen(e)];case 2:return i.O_=s.sent(),[3,4];case 3:return o=s.sent(),a=mf(o,"Initialization of query '"+Il(t.query)+"' failed"),[2,void t.onError(a)];case 4:return this.L_.set(e,r),r.listeners.push(t),t.jl(this.onlineState),r.O_&&t.q_(r.O_)&&this.U_(),[2]}}))}))},t.prototype.Rc=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i;return u(this,(function(o){return e=t.query,n=!1,(r=this.L_.get(e))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?[2,(this.L_.delete(e),this.Vc.Rc(e))]:[2]}))}))},t.prototype.mu=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,a=this.L_.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++)u[s].q_(i)&&(e=!0);a.O_=i}}e&&this.U_()},t.prototype.b_=function(t,e){var n=this.L_.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.L_.delete(t)},t.prototype.R_=function(t){this.onlineState=t;var e=!1;this.L_.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].jl(t)&&(e=!0)})),e&&this.U_()},t.prototype.Q_=function(t){this.B_.add(t),t.next()},t.prototype.W_=function(t){this.B_.delete(t)},t.prototype.U_=function(){this.B_.forEach((function(t){t.next()}))},t}(),ld=function(){function t(t,e,n){this.query=t,this.j_=e,this.K_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.q_=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Mu(t.query,t.docs,t.Ot,e,t.Lt,t.fromCache,t.Bt,!0)}var o=!1;return this.K_?this.z_(t)&&(this.j_.next(t),o=!0):this.H_(t,this.onlineState)&&(this.Y_(t),o=!0),this.G_=t,o},t.prototype.onError=function(t){this.j_.error(t)},t.prototype.jl=function(t){this.onlineState=t;var e=!1;return this.G_&&!this.K_&&this.H_(this.G_,t)&&(this.Y_(this.G_),e=!0),e},t.prototype.H_=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.J_&&n||t.docs._()&&"Offline"!==e)},t.prototype.z_=function(t){if(t.docChanges.length>0)return!0;var e=this.G_&&this.G_.hasPendingWrites!==t.hasPendingWrites;return!(!t.Bt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.Y_=function(t){t=Mu.Ut(t.query,t.docs,t.Lt,t.fromCache),this.K_=!0,this.j_.next(t)},t}(),hd=function(){function t(){}return t.prototype.Fh=function(t){this.X_=t},t.prototype._s=function(t,e,n,r){var i=this;return e.En()||n.isEqual(Xs.min())?this.Z_(t,e):this.X_.us(t,r).next((function(o){var a=i.tf(e,o);return(e.In()||e.mn())&&i.ql(e.nn,a,r,n)?i.Z_(t,e):(As()<=Z.DEBUG&&Ps("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Il(e)),i.X_._s(t,e,n).next((function(t){return a.forEach((function(e){t=t.nt(e.key,e)})),t})))}))},t.prototype.tf=function(t,e){var n=new wu(kl(t));return e.forEach((function(e,r){r instanceof wl&&Nl(t,r)&&(n=n.add(r))})),n},t.prototype.ql=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.o(r)>0)},t.prototype.Z_=function(t,e){return As()<=Z.DEBUG&&Ps("IndexFreeQueryEngine","Using full collection scan to execute query:",Il(e)),this.X_._s(t,e,Xs.min())},t}(),fd=function(){function t(t,e){this.ss=t,this.wi=e,this.ns=[],this.ef=1,this.nf=new wu(kf.na)}return t.prototype.Jr=function(t){return Hl.resolve(0===this.ns.length)},t.prototype.Xr=function(t,e,n,r){var i=this.ef;this.ef++,this.ns.length>0&&this.ns[this.ns.length-1];var o=new zl(i,e,n,r);this.ns.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.nf=this.nf.add(new kf(u.key,i)),this.ss.Us(t,u.key.path.p())}return Hl.resolve(o)},t.prototype.Zr=function(t,e){return Hl.resolve(this.sf(e))},t.prototype.eo=function(t,e){var n=e+1,r=this.if(n),i=r<0?0:r;return Hl.resolve(this.ns.length>i?this.ns[i]:null)},t.prototype.no=function(){return Hl.resolve(0===this.ns.length?-1:this.ef-1)},t.prototype.so=function(t){return Hl.resolve(this.ns.slice())},t.prototype.os=function(t,e){var n=this,r=new kf(e,0),i=new kf(e,Number.POSITIVE_INFINITY),o=[];return this.nf.vt([r,i],(function(t){var e=n.sf(t.la);o.push(e)})),Hl.resolve(o)},t.prototype.ls=function(t,e){var n=this,r=new wu(Us);return e.forEach((function(t){var e=new kf(t,0),i=new kf(t,Number.POSITIVE_INFINITY);n.nf.vt([e,i],(function(t){r=r.add(t.la)}))})),Hl.resolve(this.rf(r))},t.prototype.Es=function(t,e){var n=e.path,r=n.length+1,i=n;nu.W(i)||(i=i.child(""));var o=new kf(new nu(i),0),a=new wu(Us);return this.nf.St((function(t){var e=t.key.path;return!!n.D(e)&&(e.length===r&&(a=a.add(t.la)),!0)}),o),Hl.resolve(this.rf(a))},t.prototype.rf=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.sf(t);null!==r&&n.push(r)})),n},t.prototype.ro=function(t,e){var n=this;Ms(0===this.hf(e.batchId,"removed")),this.ns.shift();var r=this.nf;return Hl.forEach(e.mutations,(function(i){var o=new kf(i.key,e.batchId);return r=r.delete(o),n.wi.Qr(t,i.key)})).next((function(){n.nf=r}))},t.prototype.oo=function(t){},t.prototype.Mi=function(t,e){var n=new kf(e,0),r=this.nf.Dt(n);return Hl.resolve(e.isEqual(r&&r.key))},t.prototype.ho=function(t){return this.ns.length,Hl.resolve()},t.prototype.hf=function(t,e){return this.if(t)},t.prototype.if=function(t){return 0===this.ns.length?0:t-this.ns[0].batchId},t.prototype.sf=function(t){var e=this.if(t);return e<0||e>=this.ns.length?null:this.ns[e]},t}(),pd=function(){function t(t,e){this.ss=t,this.af=e,this.docs=new mu(nu.P),this.size=0}return t.prototype.jn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.af(e);return this.docs=this.docs.nt(r,{Ys:e,size:a,readTime:n}),this.size+=a-o,this.ss.Us(t,r.path.p())},t.prototype.Gn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.zn=function(t,e){var n=this.docs.get(e);return Hl.resolve(n?n.Ys:null)},t.prototype.getEntries=function(t,e){var n=this,r=Cu();return e.forEach((function(t){var e=n.docs.get(t);r=r.nt(t,e?e.Ys:null)})),Hl.resolve(r)},t.prototype._s=function(t,e,n){for(var r=Iu(),i=new nu(e.path.child("")),o=this.docs.ut(i);o.wt();){var a=o.dt(),s=a.key,u=a.value,c=u.Ys,l=u.readTime;if(!e.path.D(s.path))break;l.o(n)<=0||c instanceof wl&&Nl(e,c)&&(r=r.nt(c.key,c))}return Hl.resolve(r)},t.prototype.uf=function(t,e){return Hl.forEach(this.docs,(function(t){return e(t)}))},t.prototype.oi=function(e){return new t.hi(this)},t.prototype.ui=function(t){return Hl.resolve(this.size)},t}();pd.hi=function(t){function e(e){var n=this;return(n=t.call(this)||this).ci=e,n}return o(e,t),e.prototype.Jn=function(t){var e=this,n=[];return this.Un.forEach((function(r,i){i?n.push(e.ci.jn(t,i,e.readTime)):e.ci.Gn(r)})),Hl.Bn(n)},e.prototype.Hn=function(t,e){return this.ci.zn(t,e)},e.prototype.Yn=function(t,e){return this.ci.getEntries(t,e)},e}(Ql);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var dd=function(){function t(t){this.persistence=t,this.cf=new Gs((function(t){return uu(t)}),cu),this.lastRemoteSnapshotVersion=Xs.min(),this.highestTargetId=0,this.lf=0,this._f=new Nf,this.targetCount=0,this.ff=Th.fi()}return t.prototype.pe=function(t,e){return this.cf.forEach((function(t,n){return e(n)})),Hl.resolve()},t.prototype.mi=function(t){return Hl.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ai=function(t){return Hl.resolve(this.lf)},t.prototype.Ti=function(t){return this.highestTargetId=this.ff.next(),Hl.resolve(this.highestTargetId)},t.prototype.Ri=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.lf&&(this.lf=e),Hl.resolve()},t.prototype.Vi=function(t){this.cf.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ff=new Th(e),this.highestTargetId=e),t.sequenceNumber>this.lf&&(this.lf=t.sequenceNumber)},t.prototype.Pi=function(t,e){return this.Vi(e),this.targetCount+=1,Hl.resolve()},t.prototype.yi=function(t,e){return this.Vi(e),Hl.resolve()},t.prototype.pi=function(t,e){return this.cf.delete(e.target),this._f.aa(e.targetId),this.targetCount-=1,Hl.resolve()},t.prototype.vi=function(t,e,n){var r=this,i=0,o=[];return this.cf.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.cf.delete(a),o.push(r.bi(t,s.targetId)),i++)})),Hl.Bn(o).next((function(){return i}))},t.prototype.Si=function(t){return Hl.resolve(this.targetCount)},t.prototype.Di=function(t,e){var n=this.cf.get(e)||null;return Hl.resolve(n)},t.prototype.Ci=function(t,e,n){return this._f.ra(e,n),Hl.resolve()},t.prototype.Ni=function(t,e,n){this._f.ha(e,n);var r=this.persistence.wi,i=[];return r&&e.forEach((function(e){i.push(r.Qr(t,e))})),Hl.Bn(i)},t.prototype.bi=function(t,e){return this._f.aa(e),Hl.resolve()},t.prototype.ki=function(t,e){var n=this._f.ca(e);return Hl.resolve(n)},t.prototype.Mi=function(t,e){return Hl.resolve(this._f.Mi(e))},t}(),yd=function(){function t(t){var e=this;this.df={},this.Ui=new Xl(0),this.Qi=!1,this.Qi=!0,this.wi=t(this),this.Xi=new dd(this),this.ss=new ih,this.es=new pd(this.ss,(function(t){return e.wi.wf(t)}))}return t.prototype.start=function(){return Promise.resolve()},t.prototype.yr=function(){return this.Qi=!1,Promise.resolve()},Object.defineProperty(t.prototype,"hr",{get:function(){return this.Qi},enumerable:!1,configurable:!0}),t.prototype.ar=function(){},t.prototype.kr=function(){return this.ss},t.prototype.Cr=function(t){var e=this.df[t.Ma()];return e||(e=new fd(this.ss,this.wi),this.df[t.Ma()]=e),e},t.prototype.Nr=function(){return this.Xi},t.prototype.$r=function(){return this.es},t.prototype.runTransaction=function(t,e,n){var r=this;Ps("MemoryPersistence","Starting transaction:",t);var i=new vd(this.Ui.next());return this.wi.Tf(),n(i).next((function(t){return r.wi.Ef(i).next((function(){return t}))})).On().then((function(t){return i.ts(),t}))},t.prototype.If=function(t,e){return Hl.qn(Object.values(this.df).map((function(n){return function(){return n.Mi(t,e)}})))},t}(),vd=function(t){function e(e){var n=this;return(n=t.call(this)||this).Li=e,n}return o(e,t),e}(Yl),gd=function(){function t(t){this.persistence=t,this.mf=new Nf,this.Af=null}return t.Rf=function(e){return new t(e)},Object.defineProperty(t.prototype,"Pf",{get:function(){if(this.Af)return this.Af;throw Ds()},enumerable:!1,configurable:!0}),t.prototype.Fi=function(t,e,n){return this.mf.Fi(n,e),this.Pf.delete(n),Hl.resolve()},t.prototype.$i=function(t,e,n){return this.mf.$i(n,e),this.Pf.add(n),Hl.resolve()},t.prototype.Qr=function(t,e){return this.Pf.add(e),Hl.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.mf.aa(e.targetId).forEach((function(t){return n.Pf.add(t)}));var r=this.persistence.Nr();return r.ki(t,e.targetId).next((function(t){t.forEach((function(t){return n.Pf.add(t)}))})).next((function(){return r.pi(t,e)}))},t.prototype.Tf=function(){this.Af=new Set},t.prototype.Ef=function(t){var e=this,n=this.persistence.$r().oi();return Hl.forEach(this.Pf,(function(r){return e.Vf(t,r).next((function(t){t||n.Gn(r)}))})).next((function(){return e.Af=null,n.apply(t)}))},t.prototype.Gr=function(t,e){var n=this;return this.Vf(t,e).next((function(t){t?n.Pf.delete(e):n.Pf.add(e)}))},t.prototype.wf=function(t){return 0},t.prototype.Vf=function(t,e){var n=this;return Hl.qn([function(){return Hl.resolve(n.mf.Mi(e))},function(){return n.persistence.Nr().Mi(t,e)},function(){return n.persistence.If(t,e)}])},t}(),md=function(){function t(t){this.gf=t.gf,this.yf=t.yf}return t.prototype.Eu=function(t){this.pf=t},t.prototype._u=function(t){this.bf=t},t.prototype.onMessage=function(t){this.vf=t},t.prototype.close=function(){this.yf()},t.prototype.send=function(t){this.gf(t)},t.prototype.Sf=function(){this.pf()},t.prototype.Df=function(t){this.bf(t)},t.prototype.Cf=function(t){this.vf(t)},t}(),_d={BatchGetDocuments:"batchGet",Commit:"commit"},bd="gl-js/ fire/"+Ns,wd=function(){function t(t){this.s=t.s;var e=t.ssl?"https":"http";this.Ff=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.Nf=function(t,e){if(e)for(var n in e.Ba)e.Ba.hasOwnProperty(n)&&(t[n]=e.Ba[n]);t["X-Goog-Api-Client"]=bd},t.prototype.Du=function(t,e,n){var r=this,i=this.$f(t);return new Promise((function(o,a){var s=new Is;s.listenOnce(Cs.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case xs.NO_ERROR:var e=s.getResponseJson();Ps("Connection","XHR received:",JSON.stringify(e)),o(e);break;case xs.TIMEOUT:Ps("Connection",'RPC "'+t+'" timed out'),a(new Ks(Ys.DEADLINE_EXCEEDED,"Request time out"));break;case xs.HTTP_ERROR:var n=s.getStatus();if(Ps("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var i=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(Ys).indexOf(e)>=0?e:Ys.UNKNOWN}(r.status);a(new Ks(i,r.message))}else a(new Ks(Ys.UNKNOWN,"Server responded with status "+s.getStatus()))}else Ps("Connection",'RPC "'+t+'" failed'),a(new Ks(Ys.UNAVAILABLE,"Connection failed."));break;default:Ds()}}finally{Ps("Connection",'RPC "'+t+'" completed.')}}));var u=Object.assign({},e);delete u.database;var c=JSON.stringify(u);Ps("Connection","XHR sending: ",i+" "+c);var l={"Content-Type":"text/plain"};r.Nf(l,n),s.send(i,"POST",c,l,15)}))},t.prototype.Cu=function(t,e,n){return this.Du(t,e,n)},t.prototype.Iu=function(t,e){var n,r,i=[this.Ff,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Ts(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Nf(a.initMessageHeaders,e),x()||S()||T().indexOf("Electron/")>=0||((r=T()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0)||T().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(a.httpHeadersOverwriteParam="$httpHeaders");var s=i.join("");Ps("Connection","Creating WebChannel: "+s+" "+a);var u=o.createWebChannel(s,a),c=!1,l=!1,h=new md({gf:function(t){l?Ps("Connection","Not sending because WebChannel is closed:",t):(c||(Ps("Connection","Opening WebChannel transport."),u.open(),c=!0),Ps("Connection","WebChannel sending:",t),u.send(t))},yf:function(){return u.close()}}),p=function(t,e){u.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return p(Ss.EventType.OPEN,(function(){l||Ps("Connection","WebChannel transport opened.")})),p(Ss.EventType.CLOSE,(function(){l||(l=!0,Ps("Connection","WebChannel transport closed"),h.Df())})),p(Ss.EventType.ERROR,(function(t){l||(l=!0,function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ks.logLevel<=Z.WARN){var r=e.map(Rs);ks.warn.apply(ks,f(["Firestore ("+Ns+"): "+t],r))}}("Connection","WebChannel transport errored:",t),h.Df(new Ks(Ys.UNAVAILABLE,"The operation could not be completed")))})),p(Ss.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];Ms(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Ps("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=fu[t];if(void 0!==e)return gu(e)}(o),s=i.message;void 0===a&&(a=Ys.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),l=!0,h.Df(new Ks(a,s)),u.close()}else Ps("Connection","WebChannel received:",n),h.Cf(n)}})),setTimeout((function(){h.Sf()}),0),h},t.prototype.$f=function(t){var e=_d[t];return this.Ff+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+e},t}(),Ed=function(){function t(){var t=this;this.kf=function(){return t.xf()},this.Mf=function(){return t.Of()},this.Lf=[],this.Bf()}return t.prototype.nc=function(t){this.Lf.push(t)},t.prototype.yr=function(){window.removeEventListener("online",this.kf),window.removeEventListener("offline",this.Mf)},t.prototype.Bf=function(){window.addEventListener("online",this.kf),window.addEventListener("offline",this.Mf)},t.prototype.xf=function(){Ps("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Lf;t<e.length;t++)(0,e[t])(0)},t.prototype.Of=function(){Ps("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Lf;t<e.length;t++)(0,e[t])(1)},t.Hi=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Td=function(){function t(){}return t.prototype.nc=function(t){},t.prototype.yr=function(){},t}(),xd="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Cd=function(){function t(){}return t.prototype.initialize=function(t){return s(this,void 0,void 0,(function(){var e=this;return u(this,(function(n){switch(n.label){case 0:return this.n_=this.qf(t),this.persistence=this.Uf(t),[4,this.persistence.start()];case 1:return n.sent(),this.Qf=this.Wf(t),this.Yu=this.jf(t),this.e_=this.Kf(t),this.Vc=this.Gf(t),this.zf=this.Hf(t),this.n_.qu=function(t){return e.Vc.jl(t,1)},this.e_.Vc=this.Vc,[4,this.Yu.start()];case 2:return n.sent(),[4,this.n_.start()];case 3:return n.sent(),[4,this.e_.start()];case 4:return n.sent(),[4,this.e_.Lc(this.Vc.d_)];case 5:return n.sent(),[2]}}))}))},t.prototype.Hf=function(t){return new cd(this.Vc)},t.prototype.Wf=function(t){return null},t.prototype.jf=function(t){return e=this.persistence,n=new hd,r=t.Yf,new Cf(e,n,r);var e,n,r},t.prototype.Uf=function(t){if(t.Xf.Jf)throw new Ks(Ys.FAILED_PRECONDITION,xd);return new yd(gd.Rf)},t.prototype.Kf=function(t){var e=this;return new zp(this.Yu,t.Fu,t.Ro,(function(t){return e.Vc.jl(t,0)}),Ed.Hi()?new Ed:new Td)},t.prototype.qf=function(t){return new Zp},t.prototype.Gf=function(t){return e=this.Yu,n=this.e_,r=t.Fu,i=this.n_,o=t.Yf,a=t.s_,new ad(e,n,r,i,o,a);var e,n,r,i,o,a},t.prototype.clearPersistence=function(t){throw new Ks(Ys.FAILED_PRECONDITION,xd)},t}(),Sd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initialize=function(e){return s(this,void 0,void 0,(function(){var n=this;return u(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,this.persistence.or((function(t){return s(n,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this.Vc.Lc(t)];case 1:return e.sent(),this.Qf&&(t&&!this.Qf.hr?this.Qf.start(this.Yu):t||this.Qf.stop()),[2]}}))}))}))];case 2:return r.sent(),[2]}}))}))},e.prototype.jf=function(t){return e=this.persistence,n=new hd,r=t.Yf,new Sf(e,n,r);var e,n,r},e.prototype.Gf=function(t){var e,n,r,i,o,a,s=(e=this.Yu,n=this.e_,r=t.Fu,i=this.n_,o=t.Yf,a=t.s_,new sd(e,n,r,i,o,a));return this.n_ instanceof Jp&&(this.n_.Vc=s),s},e.prototype.Wf=function(t){var e=this.persistence.wi.Or;return new Tf(e,t.Ro)},e.prototype.Uf=function(t){var e=Ah.Mr(t.Zf),n=hp(t.Zf.s);return new Ah(t.Xf.synchronizeTabs,e,t.clientId,Ef.ah(t.Xf.cacheSizeBytes),t.Ro,yf(),"undefined"!=typeof document?document:null,n,this.n_,t.Xf.qi)},e.prototype.qf=function(t){if(t.Xf.Jf&&t.Xf.synchronizeTabs){var e=yf();if(!Jp.Hi(e))throw new Ks(Ys.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ah.Mr(t.Zf);return new Jp(e,t.Ro,n,t.clientId,t.Yf)}return new Zp},e.prototype.clearPersistence=function(t){var e=Ah.Mr(t);return Ah.clearPersistence(e)},e}(Cd),Id=function(){function t(t,e){this.credentials=t,this.Ro=e,this.clientId=js.t()}return t.prototype.start=function(t,e,n){var r=this;this.Su(),this.Zf=t;var i=new Jl,o=new Jl,a=!1;return this.credentials.Qa((function(t){if(!a)return a=!0,Ps("FirestoreClient","Initializing. user=",t.uid),r.td(e,n,t,o).then(i.resolve,i.reject);r.Ro.dr((function(){return r.e_.Oc(t)}))})),this.Ro.lr((function(){return i.promise})),o.promise},t.prototype.enableNetwork=function(){var t=this;return this.Su(),this.Ro.enqueue((function(){return t.Vc.enableNetwork()}))},t.prototype.td=function(t,e,n,r){return s(this,void 0,void 0,(function(){var i,o,a,c,l,h=this;return u(this,(function(f){switch(f.label){case 0:return f.trys.push([0,3,,4]),[4,(l=this.Zf,Promise.resolve(new wd(l)))];case 1:return i=f.sent(),o=hp(this.Zf.s),a=function(t,e,n){return new Vp(t,e,n)}(i,this.credentials,o),[4,t.initialize({Ro:this.Ro,Zf:this.Zf,Fu:a,clientId:this.clientId,Yf:n,s_:100,Xf:e})];case 2:return f.sent(),this.persistence=t.persistence,this.n_=t.n_,this.Yu=t.Yu,this.e_=t.e_,this.Vc=t.Vc,this.Qf=t.Qf,this.ed=t.zf,this.persistence.ar((function(){return s(h,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),r.resolve(),[3,4];case 3:if(c=f.sent(),r.reject(c),!this.nd(c))throw c;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+c),this.td(new Cd,{Jf:!1},n,r))];case 4:return[2]}}))}))},t.prototype.nd=function(t){return"FirebaseError"===t.name?t.code===Ys.FAILED_PRECONDITION||t.code===Ys.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.Su=function(){if(this.Ro.Oo)throw new Ks(Ys.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.Su(),this.Ro.enqueue((function(){return t.Vc.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.Ro.Qo((function(){return s(t,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.Qf&&this.Qf.stop(),[4,this.e_.yr()];case 1:return t.sent(),[4,this.n_.yr()];case 2:return t.sent(),[4,this.persistence.yr()];case 3:return t.sent(),this.credentials.Wa(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.Su();var e=new Jl;return this.Ro.lr((function(){return t.Vc.y_(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.Su();var i=new ld(t,e,n);return this.Ro.lr((function(){return r.ed.listen(i)})),i},t.prototype.Rc=function(t){var e=this;this.sd||this.Ro.lr((function(){return e.ed.Rc(t)}))},t.prototype.rd=function(t){return s(this,void 0,void 0,(function(){var e,n=this;return u(this,(function(r){switch(r.label){case 0:return this.Su(),e=new Jl,[4,this.Ro.enqueue((function(){return s(n,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.Yu.Kh(t)];case 1:return(n=o.sent())instanceof wl?e.resolve(n):n instanceof El?e.resolve(null):e.reject(new Ks(Ys.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=mf(r,"Failed to get document '"+t+" from cache"),e.reject(i),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(r.sent(),e.promise)]}}))}))},t.prototype.od=function(t){return s(this,void 0,void 0,(function(){var e,n=this;return u(this,(function(r){switch(r.label){case 0:return this.Su(),e=new Jl,[4,this.Ro.enqueue((function(){return s(n,void 0,void 0,(function(){var n,r,i,o,a,s;return u(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.Yu.Hh(t,!0)];case 1:return n=u.sent(),r=new nd(t,n.Yh),i=r.Ol(n.documents),o=r.Jn(i,!1),e.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=mf(a,"Failed to execute query '"+t+" against cache"),e.reject(s),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(r.sent(),e.promise)]}}))}))},t.prototype.write=function(t){var e=this;this.Su();var n=new Jl;return this.Ro.lr((function(){return e.Vc.write(t,n)})),n.promise},t.prototype.s=function(){return this.Zf.s},t.prototype.Q_=function(t){var e=this;this.Su(),this.Ro.lr((function(){return e.ed.Q_(t),Promise.resolve()}))},t.prototype.W_=function(t){var e=this;this.sd||this.Ro.lr((function(){return e.ed.W_(t),Promise.resolve()}))},Object.defineProperty(t.prototype,"sd",{get:function(){return this.Ro.Oo},enumerable:!1,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.Su();var n=new Jl;return this.Ro.lr((function(){return e.Vc.runTransaction(e.Ro,t,n),Promise.resolve()})),n.promise},t}(),Nd=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.hd(this.observer.next,t)},t.prototype.error=function(t){this.hd(this.observer.error,t)},t.prototype.ad=function(){this.muted=!0},t.prototype.hd=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Ad=function(){function t(t,e,n,r){this.s=t,this.timestampsInSnapshots=e,this.ud=n,this.ld=r}return t.prototype._d=function(t){switch(Yu(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ec(t.integerValue||t.doubleValue);case 3:return this.fd(t.timestampValue);case 4:return this.dd(t);case 5:return t.stringValue;case 6:return new Xf(nc(t.bytesValue));case 7:return this.wd(t.referenceValue);case 8:return this.Td(t.geoPointValue);case 9:return this.Ed(t.arrayValue);case 10:return this.Id(t.mapValue);default:throw Ds()}},t.prototype.Id=function(t){var e=this,n={};return Hs(t.fields||{},(function(t,r){n[t]=e._d(r)})),n},t.prototype.Td=function(t){return new lp(ec(t.latitude),ec(t.longitude))},t.prototype.Ed=function(t){var e=this;return(t.values||[]).map((function(t){return e._d(t)}))},t.prototype.dd=function(t){switch(this.ud){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return Hu(n)?t(n):n}(t);return null==e?null:this._d(e);case"estimate":return this.fd(Qu(t));default:return null}},t.prototype.fd=function(t){var e=tc(t),n=new $s(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.wd=function(t){var e=Zs.$(t);Ms(Uc(e));var n=new zs(e.get(1),e.get(3)),r=new nu(e.g(5));return n.isEqual(this.s)||Os("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.ld(r)},t}(),Pd=Ef._h,Od=function(){function t(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new Ks(Ys.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Lf("settings","non-empty string","host",t.host),this.host=t.host,Ff("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(Wf("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),Ff("settings","object","credentials",t.credentials),this.credentials=t.credentials,Ff("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),Ff("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?Os("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&Os("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,Ff("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Ef.dh;else{if(t.cacheSizeBytes!==Pd&&t.cacheSizeBytes<Ef.fh)throw new Ks(Ys.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Ef.fh);this.cacheSizeBytes=t.cacheSizeBytes}Ff("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Rd=function(){function t(e,n,r){var i=this;if(void 0===r&&(r=new Cd),this.md=null,this.Ad=new gf,this.INTERNAL={delete:function(){return s(i,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.Rd(),[4,this.Pd.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var o=e;this.md=o,this.ya=t.Vd(o),this.gd=o.name,this.yd=new Dp(n)}else{var a=e;if(!a.projectId)throw new Ks(Ys.INVALID_ARGUMENT,"Must provide projectId");this.ya=new zs(a.projectId,a.database),this.gd="[DEFAULT]",this.yd=new Rp}this.pd=r,this.bd=new Od({})}return Object.defineProperty(t.prototype,"vd",{get:function(){return this.Sd||(this.Sd=new mp(this.ya,this.bd.ignoreUndefinedProperties)),this.Sd},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){Pf("Firestore.settings",arguments,1),Df("Firestore.settings","object",1,t);var e=new Od(t);if(this.Pd&&!this.bd.isEqual(e))throw new Ks(Ys.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.bd=e,void 0!==e.credentials&&(this.yd=function(t){if(!t)return new Rp;switch(t.type){case"gapi":var e=t.Dd;return Ms(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Lp(e,t.Ya||"0");case"provider":return t.Dd;default:throw new Ks(Ys.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.Rd(),this.Pd.enableNetwork()},t.prototype.disableNetwork=function(){return this.Rd(),this.Pd.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.Pd)throw new Ks(Ys.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&Os("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new Ks(Ys.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Cd(this.pd,{Jf:!0,cacheSizeBytes:this.bd.cacheSizeBytes,synchronizeTabs:r,qi:i})},t.prototype.clearPersistence=function(){return s(this,void 0,void 0,(function(){var t,e=this;return u(this,(function(n){if(void 0!==this.Pd&&!this.Pd.sd)throw new Ks(Ys.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return t=new Jl,[2,(this.Ad.Lo((function(){return s(e,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=this.Fd(),[4,this.pd.clearPersistence(e)];case 1:return r.sent(),t.resolve(),[3,3];case 2:return n=r.sent(),t.reject(n),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"Nd",{get:function(){return this.Rd(),this.Pd.sd},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.Rd(),this.Pd.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.Rd(),kd(t))return Dd(this.Pd,t);Df("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return Dd(this.Pd,e)},t.prototype.Rd=function(){return this.Pd||this.Cd(new Cd,{Jf:!1}),this.Pd},t.prototype.Fd=function(){return new Bs(this.ya,this.gd,this.bd.host,this.bd.ssl,this.bd.forceLongPolling)},t.prototype.Cd=function(t,e){var n=this.Fd();return this.Pd=new Id(this.yd,this.Ad),this.Pd.start(n,t,e)},t.Vd=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new Ks(Ys.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(!n||"string"!=typeof n)throw new Ks(Ys.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new zs(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.md)throw new Ks(Ys.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return Pf("Firestore.collection",arguments,1),Df("Firestore.collection","non-empty string",1,t),this.Rd(),new Qd(Zs.$(t),this,null)},t.prototype.doc=function(t){return Pf("Firestore.doc",arguments,1),Df("Firestore.doc","non-empty string",1,t),this.Rd(),Fd.$d(Zs.$(t),this,null)},t.prototype.collectionGroup=function(t){if(Pf("Firestore.collectionGroup",arguments,1),Df("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new Ks(Ys.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Rd(),new zd(new xl(Zs.k(),t),this,null)},t.prototype.runTransaction=function(t){var e=this;return Pf("Firestore.runTransaction",arguments,1),Df("Firestore.runTransaction","function",1,t),this.Rd().transaction((function(n){return t(new Md(e,n))}))},t.prototype.batch=function(){return this.Rd(),new Ld(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(As()){case Z.DEBUG:return"debug";case Z.ERROR:return"error";case Z.SILENT:return"silent";case Z.WARN:return"warn";case Z.INFO:return"info";case Z.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),t.setLogLevel=function(t){var e;Pf("Firestore.setLogLevel",arguments,1),Uf("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),e=t,ks.setLogLevel(e)},t.prototype.kd=function(){return this.bd.timestampsInSnapshots},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(t,e){var n=new Nd({next:function(){e.next&&e.next()},error:function(t){throw Ds()}});return t.Q_(n),function(){n.ad(),t.W_(n)}}var Md=function(){function t(t,e){this.xd=t,this.Md=e}return t.prototype.get=function(t){var e=this;Pf("Transaction.get",arguments,1);var n=$d("Transaction.get",t,this.xd);return this.Md.Mu([n.pa]).then((function(t){if(!t||1!==t.length)return Ds();var r=t[0];if(r instanceof El)return new Vd(e.xd,n.pa,null,!1,!1,n.ba);if(r instanceof wl)return new Vd(e.xd,n.pa,r,!1,!1,n.ba);throw Ds()}))},t.prototype.set=function(t,e,n){Rf("Transaction.set",arguments,2,3);var r=$d("Transaction.set",t,this.xd);n=Gd("Transaction.set",n);var i=Jd(r.ba,e,n),o=_p(this.xd.vd,"Transaction.set",r.pa,i,null!==r.ba,n);return this.Md.set(r.pa,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof e||e instanceof Zf?(Of("Transaction.update",arguments,3),r=$d("Transaction.update",t,this.xd),i=wp(this.xd.vd,"Transaction.update",r.pa,e,n,o)):(Pf("Transaction.update",arguments,2),r=$d("Transaction.update",t,this.xd),i=bp(this.xd.vd,"Transaction.update",r.pa,e)),this.Md.update(r.pa,i),this},t.prototype.delete=function(t){Pf("Transaction.delete",arguments,1);var e=$d("Transaction.delete",t,this.xd);return this.Md.delete(e.pa),this},t}(),Ld=function(){function t(t){this.xd=t,this.Od=[],this.Ld=!1}return t.prototype.set=function(t,e,n){Rf("WriteBatch.set",arguments,2,3),this.Bd();var r=$d("WriteBatch.set",t,this.xd);n=Gd("WriteBatch.set",n);var i=Jd(r.ba,e,n),o=_p(this.xd.vd,"WriteBatch.set",r.pa,i,null!==r.ba,n);return this.Od=this.Od.concat(o.va(r.pa,el.Qe())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.Bd(),"string"==typeof e||e instanceof Zf?(Of("WriteBatch.update",arguments,3),r=$d("WriteBatch.update",t,this.xd),i=wp(this.xd.vd,"WriteBatch.update",r.pa,e,n,o)):(Pf("WriteBatch.update",arguments,2),r=$d("WriteBatch.update",t,this.xd),i=bp(this.xd.vd,"WriteBatch.update",r.pa,e)),this.Od=this.Od.concat(i.va(r.pa,el.exists(!0))),this},t.prototype.delete=function(t){Pf("WriteBatch.delete",arguments,1),this.Bd();var e=$d("WriteBatch.delete",t,this.xd);return this.Od=this.Od.concat(new yl(e.pa,el.Qe())),this},t.prototype.commit=function(){return this.Bd(),this.Ld=!0,this.Od.length>0?this.xd.Rd().write(this.Od):Promise.resolve()},t.prototype.Bd=function(){if(this.Ld)throw new Ks(Ys.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Fd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.ya,e,r)||this).pa=e,i.firestore=n,i.ba=r,i.Pd=i.firestore.Rd(),i}return o(e,t),e.$d=function(t,n,r){if(t.length%2!=0)throw new Ks(Ys.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.N()+" has "+t.length);return new e(new nu(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.pa.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Qd(this.pa.path.p(),this.firestore,this.ba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.pa.path.N()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(Pf("DocumentReference.collection",arguments,1),Df("DocumentReference.collection","non-empty string",1,t),!t)throw new Ks(Ys.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Zs.$(t);return new Qd(this.pa.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Hf("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.pa.isEqual(t.pa)&&this.ba===t.ba},e.prototype.set=function(t,e){Rf("DocumentReference.set",arguments,1,2),e=Gd("DocumentReference.set",e);var n=Jd(this.ba,t,e),r=_p(this.firestore.vd,"DocumentReference.set",this.pa,n,null!==this.ba,e);return this.Pd.write(r.va(this.pa,el.Qe()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof Zf?(Of("DocumentReference.update",arguments,2),n=wp(this.firestore.vd,"DocumentReference.update",this.pa,t,e,r)):(Pf("DocumentReference.update",arguments,1),n=bp(this.firestore.vd,"DocumentReference.update",this.pa,t)),this.Pd.write(n.va(this.pa,el.exists(!0)))},e.prototype.delete=function(){return Pf("DocumentReference.delete",arguments,0),this.Pd.write([new yl(this.pa,el.Qe())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];Rf("DocumentReference.onSnapshot",arguments,1,4);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||kd(i[s])||(Wf("DocumentReference.onSnapshot",a=i[s],["includeMetadataChanges"]),Ff("DocumentReference.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),s++);var u={includeMetadataChanges:a.includeMetadataChanges};if(kd(i[s])){var c=i[s];i[s]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[s+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[s+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}else Df("DocumentReference.onSnapshot","function",s,i[s]),Mf("DocumentReference.onSnapshot","function",s+1,i[s+1]),Mf("DocumentReference.onSnapshot","function",s+2,i[s+2]);var l={next:function(t){i[s]&&i[s](r.qd(t))},error:i[s+1],complete:i[s+2]};return jd(this.Pd,this.pa,u,l)},e.prototype.get=function(t){var e=this;return Rf("DocumentReference.get",arguments,0,1),Kd("DocumentReference.get",t),t&&"cache"===t.source?this.firestore.Rd().rd(this.pa).then((function(t){return new Vd(e.firestore,e.pa,t,!0,t instanceof wl&&t.Ge,e.ba)})):function(t,e,n){var r=new Jl,i=jd(t,e,{includeMetadataChanges:!0,J_:!0},{next:function(t){i();var o=t.docs.has(e);!o&&t.fromCache?r.reject(new Ks(Ys.UNAVAILABLE,"Failed to get document because the client is offline.")):o&&t.fromCache&&n&&"server"===n.source?r.reject(new Ks(Ys.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(t)},error:function(t){return r.reject(t)}});return r.promise}(this.Pd,this.pa,t).then((function(t){return e.qd(t)}))},e.prototype.withConverter=function(t){return new e(this.pa,this.firestore,t)},e.prototype.qd=function(t){var e=t.docs.get(this.pa);return new Vd(this.firestore,this.pa,e,t.fromCache,t.hasPendingWrites,this.ba)},e}(pp);function jd(t,e,n,r){var i=function(t){console.error("Uncaught Error in onSnapshot:",t)};r.error&&(i=r.error.bind(r));var o=new Nd({next:function(t){r.next&&r.next(t)},error:i}),a=t.listen(xl.hn(e.path),o,n);return function(){o.ad(),t.Rc(a)}}var Ud=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Vd=function(){function t(t,e,n,r,i,o){this.xd=t,this.pa=e,this.Ud=n,this.Qd=r,this.Wd=i,this.ba=o}return t.prototype.data=function(t){var e=this;if(Rf("DocumentSnapshot.data",arguments,0,1),t=Yd("DocumentSnapshot.data",t),this.Ud){if(this.ba){var n=new qd(this.xd,this.pa,this.Ud,this.Qd,this.Wd,null);return this.ba.fromFirestore(n,t)}return new Ad(this.xd.ya,this.xd.kd(),t.serverTimestamps||"none",(function(t){return new Fd(t,e.xd,null)}))._d(this.Ud.tn())}},t.prototype.get=function(t,e){var n=this;if(Rf("DocumentSnapshot.get",arguments,1,2),e=Yd("DocumentSnapshot.get",e),this.Ud){var r=this.Ud.data().field(Ip("DocumentSnapshot.get",t,this.pa));if(null!==r)return new Ad(this.xd.ya,this.xd.kd(),e.serverTimestamps||"none",(function(t){return new Fd(t,n.xd,n.ba)}))._d(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.pa.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Fd(this.pa,this.xd,this.ba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Ud},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Ud(this.Wd,this.Qd)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw Hf("isEqual","DocumentSnapshot",1,e);return this.xd===e.xd&&this.Qd===e.Qd&&this.pa.isEqual(e.pa)&&(null===this.Ud?null===e.Ud:this.Ud.isEqual(e.Ud))&&this.ba===e.ba},t}(),qd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(Vd);function Bd(t){if(t.mn()&&0===t.en.length)throw new Ks(Ys.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var zd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.ya,n.vd,e)||this).jd=e,i.firestore=n,i.ba=r,i}return o(e,t),e.prototype.where=function(t,n,r){Pf("Query.where",arguments,3),zf("Query.where",3,r);var i=Uf("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,n),o=Ip("Query.where",t),a=this.Kd(o,i,r);return new e(this.jd.cn(a),this.firestore,this.ba)},e.prototype.orderBy=function(t,n){var r;if(Rf("Query.orderBy",arguments,1,2),Mf("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new Ks(Ys.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Ip("Query.orderBy",t),o=this.Yd(i,r);return new e(this.jd.ln(o),this.firestore,this.ba)},e.prototype.limit=function(t){return Pf("Query.limit",arguments,1),Df("Query.limit","number",1,t),Qf("Query.limit",1,t),new e(this.jd._n(t),this.firestore,this.ba)},e.prototype.limitToLast=function(t){return Pf("Query.limitToLast",arguments,1),Df("Query.limitToLast","number",1,t),Qf("Query.limitToLast",1,t),new e(this.jd.fn(t),this.firestore,this.ba)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Of("Query.startAt",arguments,1);var i=this.ew("Query.startAt",t,n,!0);return new e(this.jd.dn(i),this.firestore,this.ba)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Of("Query.startAfter",arguments,1);var i=this.ew("Query.startAfter",t,n,!1);return new e(this.jd.dn(i),this.firestore,this.ba)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Of("Query.endBefore",arguments,1);var i=this.ew("Query.endBefore",t,n,!0);return new e(this.jd.wn(i),this.firestore,this.ba)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Of("Query.endAt",arguments,1);var i=this.ew("Query.endAt",t,n,!1);return new e(this.jd.wn(i),this.firestore,this.ba)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Hf("isEqual","Query",1,t);return this.firestore===t.firestore&&Cl(this.jd,t.jd)&&this.ba===t.ba},e.prototype.withConverter=function(t){return new e(this.jd,this.firestore,t)},e.prototype.ew=function(t,e,n,r){if(zf(t,1,e),e instanceof Vd)return Pf(t,f([e],n),1),this.Xd(t,e.Ud,r);var i=[e].concat(n);return this.Zd(t,i,r)},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];Rf("Query.onSnapshot",arguments,1,4);var a={},s=0;if("object"!=typeof i[s]||kd(i[s])||(Wf("Query.onSnapshot",a=i[s],["includeMetadataChanges"]),Ff("Query.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),s++),kd(i[s])){var u=i[s];i[s]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[s+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[s+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)}else Df("Query.onSnapshot","function",s,i[s]),Mf("Query.onSnapshot","function",s+1,i[s+1]),Mf("Query.onSnapshot","function",s+2,i[s+2]);var c={next:function(t){i[s]&&i[s](new Hd(r.firestore,r.jd,t,r.ba))},error:i[s+1],complete:i[s+2]};return Bd(this.jd),Wd(this.firestore.Rd(),this.jd,a,c)},e.prototype.get=function(t){var e=this;Rf("Query.get",arguments,0,1),Kd("Query.get",t),Bd(this.jd);var n=this.firestore.Rd();return(t&&"cache"===t.source?n.od(this.jd):function(t,e,n){var r=new Jl,i=Wd(t,e,{includeMetadataChanges:!0,J_:!0},{next:function(t){i(),t.fromCache&&n&&"server"===n.source?r.reject(new Ks(Ys.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(t)},error:function(t){return r.reject(t)}});return r.promise}(n,this.jd,t)).then((function(t){return new Hd(e.firestore,e.jd,t,e.ba)}))},e}(function(){function t(t,e,n){this.ya=t,this.vd=e,this.jd=n}return t.prototype.Kd=function(t,e,n){var r;if(t.O()){if("array-contains"===e||"array-contains-any"===e)throw new Ks(Ys.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+e+"' queries on FieldPath.documentId().");if("in"===e){this.Gd(n,e);for(var i=[],o=0,a=n;o<a.length;o++){var s=a[o];i.push(this.zd(s))}r={arrayValue:{values:i}}}else r=this.zd(n)}else"in"!==e&&"array-contains-any"!==e||this.Gd(n,e),r=Ep(this.vd,"Query.where",n,"in"===e);var u=Al.create(t,e,r);return this.Hd(u),u},t.prototype.Yd=function(t,e){if(null!==this.jd.startAt)throw new Ks(Ys.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.jd.endAt)throw new Ks(Ys.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var n=new Vl(t,e);return this.Jd(n),n},t.prototype.Xd=function(t,e,n){if(!e)throw new Ks(Ys.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");for(var r=[],i=0,o=this.jd.orderBy;i<o.length;i++){var a=o[i];if(a.field.O())r.push(rc(this.ya,e.key));else{var s=e.field(a.field);if(Hu(s))throw new Ks(Ys.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.N();throw new Ks(Ys.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Ll(r,n)},t.prototype.Zd=function(t,e,n){var r=this.jd.en;if(e.length>r.length)throw new Ks(Ys.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.O()){if("string"!=typeof a)throw new Ks(Ys.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(!this.jd.Vn()&&-1!==a.indexOf("/"))throw new Ks(Ys.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this.jd.path.child(Zs.$(a));if(!nu.W(s))throw new Ks(Ys.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new nu(s);i.push(rc(this.ya,u))}else{var c=Ep(this.vd,t,a);i.push(c)}}return new Ll(i,n)},t.prototype.zd=function(t){if("string"==typeof t){if(""===t)throw new Ks(Ys.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.jd.Vn()&&-1!==t.indexOf("/"))throw new Ks(Ys.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.jd.path.child(Zs.$(t));if(!nu.W(e))throw new Ks(Ys.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return rc(this.ya,new nu(e))}if(t instanceof pp)return rc(this.ya,t.pa);throw new Ks(Ys.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Bf(t)+".")},t.prototype.Gd=function(t,e){if(!Array.isArray(t)||0===t.length)throw new Ks(Ys.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ks(Ys.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new Ks(Ys.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new Ks(Ys.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.Hd=function(t){if(t instanceof Al){var e=["array-contains","array-contains-any"],n=["in","array-contains-any"],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.An()){var o=this.jd.an();if(null!==o&&!o.isEqual(t.field))throw new Ks(Ys.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var a=this.jd.un();null!==a&&this.tw(t.field,a)}else if(i||r){var s=null;if(i&&(s=this.jd.Rn(n)),null===s&&r&&(s=this.jd.Rn(e)),null!==s)throw s===t.op?new Ks(Ys.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new Ks(Ys.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},t.prototype.Jd=function(t){if(null===this.jd.un()){var e=this.jd.an();null!==e&&this.tw(e,t.field)}},t.prototype.tw=function(t,e){if(!e.isEqual(t))throw new Ks(Ys.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}());function Wd(t,e,n,r){var i=function(t){console.error("Uncaught Error in onSnapshot:",t)};r.error&&(i=r.error.bind(r));var o=new Nd({next:function(t){r.next&&r.next(t)},error:i}),a=t.listen(e,o,n);return function(){o.ad(),t.Rc(a)}}var Hd=function(){function t(t,e,n,r){this.xd=t,this.nw=e,this.sw=n,this.ba=r,this.iw=null,this.rw=null,this.metadata=new Ud(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.sw.docs._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.sw.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;Rf("QuerySnapshot.forEach",arguments,1,2),Df("QuerySnapshot.forEach","function",1,t),this.sw.docs.forEach((function(r){t.call(e,n.ow(r,n.metadata.fromCache,n.sw.Lt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new zd(this.nw,this.xd,this.ba)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){t&&(Wf("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),Ff("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.sw.qt)throw new Ks(Ys.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.iw&&this.rw===e||(this.iw=function(t,e,n){if(t.Ot._()){var r=0;return t.docChanges.map((function(e){var i=n(e.doc,t.fromCache,t.Lt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=t.Ot;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Lt.has(e.doc.key)),o=-1,a=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(a=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:Xd(e.type),doc:r,oldIndex:o,newIndex:a}}))}(this.sw,e,this.ow.bind(this)),this.rw=e),this.iw},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Hf("isEqual","QuerySnapshot",1,e);return this.xd===e.xd&&Cl(this.nw,e.nw)&&this.sw.isEqual(e.sw)&&this.ba===e.ba},t.prototype.ow=function(t,e,n){return new qd(this.xd,t.key,t,e,n,this.ba)},t}(),Qd=function(t){function e(e,n,r){var i=this;if((i=t.call(this,xl.hn(e),n,r)||this).hw=e,e.length%2!=1)throw new Ks(Ys.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.N()+" has "+e.length);return i}return o(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.jd.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.jd.path.p();return t._()?null:new Fd(new nu(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.jd.path.N()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){Rf("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=js.t()),Df("CollectionReference.doc","non-empty string",1,t);var e=Zs.$(t);return Fd.$d(this.jd.path.child(e),this.firestore,this.ba)},e.prototype.add=function(t){Pf("CollectionReference.add",arguments,1),Df("CollectionReference.add","object",1,this.ba?this.ba.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},e.prototype.withConverter=function(t){return new e(this.hw,this.firestore,t)},e}(zd);function Gd(t,e){if(void 0===e)return{merge:!1};if(Wf(t,e,["merge","mergeFields"]),Ff(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new Ks(Ys.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+Bf(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new Ks(Ys.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+Bf(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof Zf}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new Ks(Ys.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Yd(t,e){return void 0===e?{}:(Wf(t,e,["serverTimestamps"]),jf(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Kd(t,e){Mf(t,"object",1,e),e&&(Wf(t,e,["source"]),jf(t,0,"source",e.source,["default","server","cache"]))}function $d(t,e,n){if(e instanceof pp){if(e.firestore!==n)throw new Ks(Ys.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Hf(t,"DocumentReference",1,e)}function Xd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ds()}}function Jd(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Zd={Firestore:Rd,GeoPoint:lp,Timestamp:$s,Blob:Xf,Transaction:Md,WriteBatch:Ld,DocumentReference:Fd,DocumentSnapshot:Vd,Query:zd,QueryDocumentSnapshot:qd,QuerySnapshot:Hd,CollectionReference:Qd,FieldPath:Zf,FieldValue:up,setLogLevel:Rd.setLogLevel,CACHE_SIZE_UNLIMITED:Pd};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t){if(t instanceof Array){var e=[];return t.forEach((function(t){e.push(t)})),e.map((function(t){return ty(t)}))}if("object"==typeof t&&t!=={}){var n=a({},t);return Object.keys(n).forEach((function(t){n[t]=ty(n[t])})),n}return t}!function(t){!function(t,e){t.INTERNAL.registerComponent(new Y("firestore",(function(t){return function(t,e){return new Rd(t,e,new Sd)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Zd)))}(t),t.registerVersion("@firebase/firestore","1.16.0")}(_t);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
_t.registerVersion("firebase","7.16.0","app");var ey=function(){function t(t,e,n){this.label=t,this.action=e,this.args=void 0,this.metadata={},this.artifacts={extra:[]},this.eventType=void 0,this.complex=!1,this.prov=n}return t.prototype.addLabel=function(t){return this.label=t,this},t.prototype.addAction=function(t){return this.action=t,this},t.prototype.addArgs=function(t){return this.args=t,this},t.prototype.addMetadata=function(t){return this.metadata=t,this},t.prototype.addArtifacts=function(t){return this.artifacts=t,this},t.prototype.addExtra=function(t){return this.artifacts.extra.push({time:Date.now(),e:t}),this},t.prototype.addEventType=function(t){return this.eventType=t,this},t.prototype.alwaysStoreState=function(t){return this.complex=t,this},t.prototype.isEphemeral=function(t){return this.ephemeral=t,this},t.prototype.applyAction=function(){this.prov.applyAction(this.label,this.action,this.args,this.metadata,this.artifacts,this.eventType,this.complex,this.ephemeral)},t}();n(2).applyChange;function ny(t){return"parent"in t&&"state"in t}function ry(t){return"diffs"in t}function iy(t){return"parent"in t}function oy(){var t=(new Date).getTime();return t+=(new Date).valueOf(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))}function ay(){return(new Date).getTime()}var sy=n(2).diff;function uy(t,e){return sy(t,e)}var cy=n(2).applyChange;function ly(t,e){var n=ty(t),r=t.nodes[e];if(!r)throw new Error("No such node exists");return n.current=r.id,n}function hy(){var t={},e={};return{addGlobalObserver:function(e){t.GLOBAL||(t.GLOBAL=[]),t.GLOBAL.push(e)},addObserver:function(e,n){var r=e.join("|");t[r]||(t[r]=[]),t[r].push(n)},addArtifactObserver:function(t){e.ARTIFACT||(e.ARTIFACT=[]),e.ARTIFACT.push(t)},callEvents:function(n,r,i){if(iy(i)&&function(t){if(e.ARTIFACT&&e.ARTIFACT.length>0&&iy(t)&&t.artifacts.extra){var n=t.artifacts.extra||[];e.ARTIFACT.forEach((function(t){return t(n)}))}}(i),0!==n.length){!function(e){t.GLOBAL&&t.GLOBAL.length>0&&t.GLOBAL.forEach((function(t){return t(e)}))}(r);var o=[];n.forEach((function(e){var n=e.path,i=[],a=n.join("|");o.includes(a)||(o.push(a),n.forEach((function(t){0===i.length?i.push(t):i.push([i.reverse()[0],t].join("|"))})),i.reverse().forEach((function(e){t[e]&&t[e].forEach((function(t){return t(r)}))})))}))}}}}var fy=n(2).applyChange,py=n(4).decompressFromEncodedURIComponent,dy=n(4).compressToEncodedURIComponent;function yy(t,e,n,r){void 0===e&&(e=!0),void 0===n&&(n=!1);var i,o,s,u,c,l=function(t){var e,n={id:oy(),label:"Root",metadata:{createdOn:ay(),type:"Root"},children:[],state:t,getState:function(){return t},ephemeral:!1,bookmarked:!1};return{nodes:(e={},e[n.id]=n,e),root:n.id,current:n.id}}(t),h=ty(t),p=hy(),d=void 0;function y(t){var e=l.nodes[l.current].getState(),n=uy(t,e);p.callEvents(n||[],e,l.nodes[l.current])}function v(t,e,n){l=function(t,e,n){var r=ty(t),i=r.current,o=(ty(t.nodes[i].getState()),t.nodes[i]),a=void 0,s="",u=!0;iy(o)?ny(o)?(a=o.getState(),s=o.id):(a=t.nodes[o.lastStateNode].getState(),s=o.lastStateNode):(u=!1,a=o.getState(),s=o.id);var c=n,l=t.current,h=uy(a,c);void 0===h&&(h=[]),u&&Object.keys(a).length/2<h.length&&(u=!1);var f=u?function(t,e,n,i){return{id:oy(),label:"Import Node",metadata:{createdOn:ay()},artifacts:{diffs:n,extra:[]},parent:t,children:[],lastStateNode:e,diffs:n,getState:function(){var t=ty(r.nodes[e].getState()),i=n;return 0===i.length||i.forEach((function(e){cy(t,null,e)})),t},ephemeral:!1,bookmarked:!1}}(l,s,h):function(t,e,n,r){return{id:oy(),label:"Import Node",metadata:{createdOn:ay()},artifacts:{diffs:n,extra:[]},parent:t,children:[],state:e,getState:function(){return e},ephemeral:!1,bookmarked:!1}}(l,c,h);return r.nodes[f.id]=f,r.nodes[i].children.push(f.id),r.current=f.id,r}(l,0,t),void 0!==e&&(l.nodes[l.current].label=e),void 0!==n&&(l.nodes[l.current].metadata=n)}function g(t){if(e){var n=new URL(window.location.href),r=new URLSearchParams(n.search);r.delete("provState");r.set("provState",t),window.history.replaceState({},"",n.pathname+"?"+r)}}function m(t){var e={},n=l.nodes[l.current].getState();t?Object.keys(n).forEach((function(t){var r,i=h[t],o=n[t];JSON.stringify(i)!==JSON.stringify(o)&&(e=a(a({},e),((r={})[t]=n[t],r)))})):e=a({},n);var r=e;return""+dy(JSON.stringify(r))}return n&&r&&(u=r,c=0===_t.apps.length?_t.initializeApp(u):_t.app(),d={config:u,app:c,db:_t.database(c)},o=null==d?void 0:d.db,s=[],i=function(t){for(var e=""+t.root,n=[],r=0,i=Object.keys(t.nodes);r<i.length;r++){var a=i[r];s.includes(a)||(n.push(a),s.push(a))}n.forEach((function(n){var r=JSON.parse(JSON.stringify(t.nodes[n]));o.ref(e+"/nodes/"+n).set(r).then((function(){Date.now(),t.current})).catch((function(t){throw console.log(t),new Error("Something went wrong while logging.")}))}))}),{graph:function(){return ty(l)},current:function(){return ty(l.nodes[l.current])},root:function(){return ty(l.nodes[l.root])},addAction:function(t,e){return new ey(t,e,this)},applyAction:function(t,e,r,o,s,u,c,h){void 0===o&&(o={}),void 0===c&&(c=!1),void 0===h&&(h=!1);var p=ty(l.nodes[l.current].getState());return u&&(o.type=u),l=function(t,e,n,r,i,o,s,u){void 0===u&&(u={});var c=ty(t),l=c.current,h=ty(t.nodes[l].getState()),p=t.nodes[l],d=void 0,y="",v=!0;iy(p)?ny(p)?(d=p.getState(),y=p.id):(d=t.nodes[p.lastStateNode].getState(),y=p.lastStateNode):(v=!1,d=p.getState(),y=p.id);var g=o?n.apply(void 0,f([h],o)):n(h),m=t.current,_=uy(d,g);void 0===_&&(_=[]),v&&Object.keys(d).length/2<_.length&&(v=!1);var b=v&&!r?function(t,n,r,i){return{id:oy(),label:e,metadata:a({createdOn:ay()},s),artifacts:a({diffs:r,extra:[]},u),parent:t,children:[],lastStateNode:n,diffs:r,getState:function(){var t=ty(c.nodes[n].getState()),e=r;return 0===e.length||e.forEach((function(e){cy(t,null,e)})),t},ephemeral:i,bookmarked:!1}}(m,y,_,i):function(t,n,r,i){return{id:oy(),label:e,metadata:a({createdOn:ay()},s),artifacts:a({diffs:r,extra:[]},u),parent:t,children:[],state:n,getState:function(){return n},ephemeral:i,bookmarked:!1}}(m,g,_,i);return c.nodes[b.id]=b,c.nodes[l].children.push(b.id),c.current=b.id,c}(l,t,e,c,h,r,o,s),y(p),g(m(!1)),n&&i(l),l.nodes[l.current].getState()},goToNode:function(t){var e=ty(l.nodes[l.current].getState());l=ly(l,t),y(e),g(m(!1))},addExtraToNodeArtifact:function(t,e){l=function(t,e,n){var r=ty(t),i=r.nodes[e];if(!iy(i))throw new Error("Cannot add artifacts to Root Node");return i.artifacts.extra.push({time:ay(),e:n}),r}(l,t,e),p.callEvents([],l.nodes[t].getState(),l.nodes[t])},addAnnotationToNode:function(t,e){l=function(t,e,n){var r=ty(t),i=r.nodes[e];if(!iy(i))throw new Error("Cannot add annotation to Root Node");return i.artifacts.annotation=n,r}(l,t,e),p.callEvents([],l.nodes[t].getState(),l.nodes[t])},getExtraFromArtifact:function(t){return function(t,e){var n=t.nodes[e];if(iy(n))return n.artifacts.extra;throw new Error("Root does not have artifacts")}(l,t)},goBackOneStep:function(){var t=ty(l.nodes[l.current].getState()),e=l.nodes[l.current];if(!iy(e))throw new Error("Already at root");l=ly(l,e.parent),y(t),g(m(!1))},goBackNSteps:function(t){for(var e=ty(l.nodes[l.current].getState()),n=t,r=ty(l);t>0;){var i=r.nodes[r.current];if(!iy(i))throw new Error("Cannot go back "+n+" steps. Reached root after "+(n-t)+" steps");r=ly(l,i.parent),t--}l=r,y(e),g(m(!1))},goBackToNonEphemeral:function(){for(var t=ty(l.nodes[l.current].getState()),e=ty(l),n=e.nodes[e.current];;){if(!iy(n)){e=ly(e,e.root);break}if(!(e=ly(l,n.parent)).nodes[e.current].ephemeral)break;n=e.nodes[e.current]}l=e,y(t),g(m(!1))},goForwardToNonEphemeral:function(){for(var t=ty(l.nodes[l.current].getState()),e=ty(l),n=e.nodes[e.current];;){if(!(n.children.length>0))throw new Error("Already at the latest node in this branch or no non ephemeral nodes later");if(!(e=ly(e,n.children.reverse()[0])).nodes[e.current].ephemeral)break;n=e.nodes[e.current]}l=e,y(t),g(m(!1))},goForwardOneStep:function(){var t=ty(l.nodes[l.current].getState()),e=l.nodes[l.current];if(!(e.children.length>0))throw new Error("Already at the latest node in this branch");l=ly(l,e.children.reverse()[0]),y(t),g(m(!1))},reset:function(){var t=ty(l.nodes[l.current].getState());l=ly(l,l.root),y(t),g(m(!1))},done:function(){if(e){var t=ty(l.nodes[l.current].getState());!function(){if(!window||!window.location||!window.location.href)throw new Error("Please use in a browser environment, or set loadFromUrl parameter in initProvenance to false");var t=new URL(window.location.href),e=new URLSearchParams(t.search);if(null!==e.get("provState")){var n=e.get("provState");v(JSON.parse(py(n)))}}(),y(t)}},addObserver:function(t,e){var n=l.nodes[l.current].getState();t.forEach((function(e){if(!Object.keys(n).includes(e))throw new Error("Path "+t.join(".")+" does not exist");n=n[e]})),p.addObserver(t,e)},addGlobalObserver:function(t){p.addGlobalObserver(t)},addArtifactObserver:function(t){p.addArtifactObserver(t)},exportState:function(t){return void 0===t&&(t=!1),m(t)},importState:function(t){var e=ty(l.nodes[l.current].getState()),n=JSON.parse(py(t.replace("||","")));v(a(a({},l.nodes[l.current].getState()),n)),y(e)},importLinearStates:function(t,e,n){for(var r=0;r<t.length;r++){var i=ty(l.nodes[l.current].getState());void 0!==e&&void 0!==n?v(t[r],e[r],n[r]):v(t[r]),y(i)}},exportProvenanceGraph:function(){return JSON.stringify(l)},getDiffFromNode:function(t){var e=l.nodes[t];if(iy(e)){var n=uy(l.nodes[e.parent].getState(),e.getState());return void 0===n?[]:n}return console.log("Cannot get diff from root node"),[]},setBookmark:function(t,e){l.nodes[t].bookmarked=e},getBookmark:function(t){return l.nodes[t].bookmarked},importProvenanceGraph:function(t){var e=ty(l.nodes[l.current].getState());l=JSON.parse(t);var n=function(t){var e=l.nodes[t];if(ry(e)){var n=ty(l.nodes[e.lastStateNode].state),r=e.diffs;return 0===r.length||r.forEach((function(t){fy(n,null,t)})),{value:n}}var i=ty(e.state);e.getState=function(){return i}};for(var r in l.nodes){var i=n(r);if("object"==typeof i)return i.value}y(e)}}}}.call(this,n(6),n(7))},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});const a=o(n(5));e.default=class{constructor(t,e,n,r){this.graph=void 0,this.graph=t,this.hoverOver=e,this.hoverOut=n,this.select=r,this.drawBar()}drawBar(){let t=new Map;for(let e=0;e<this.graph.links.length;e++)null==t.get(this.graph.links[e].source.id)?t.set(this.graph.links[e].source.id,1):t.set(this.graph.links[e].source.id,t.get(this.graph.links[e].source.id)+1),null==t.get(this.graph.links[e].target.id)?t.set(this.graph.links[e].target.id,1):t.set(this.graph.links[e].target.id,t.get(this.graph.links[e].target.id)+1);let e=a.select("#bars"),n=+e.attr("width")-10,r=+e.attr("height")-10,i=e.append("g"),o=a.scaleLinear(),s=Array.from(t.keys()),u=Array.from(t.values());s=s.sort((function(e,n){return t.get(e)<t.get(n)?1:t.get(e)>t.get(n)?-1:0})),o.domain([0,Math.max(...u)]),o.range([0,r-180]),i.selectAll("rect").data(s).enter().append("rect").attr("x",(function(t,e){return e*((n-50)/s.length)+1+50-4})).attr("y",(function(e){return r-o(t.get(e))-90})).attr("width",(n-50)/s.length-1).attr("height",(function(e){return o(t.get(e))})).attr("id",(function(t){return t+"B"})).classed("bar",!0).on("click",t=>this.select(t)).on("mouseover",t=>this.hoverOver(t)).on("mouseout",t=>this.hoverOut());let c=a.scaleLinear();c.domain([Math.max(...u),0]),c.range([0,r-180]);let l=a.axisLeft(c),h=a.scaleBand().domain(s).range([47,1+n-4]),f=a.axisBottom(h);i.append("g").attr("class","axis").attr("transform","translate(44,90)").call(l),i.append("g").attr("class","axis").attr("transform","translate(0,"+(r-90+1)+")").call(f).selectAll("text").style("text-anchor","end").attr("font-size","11px").attr("dx","-1em").attr("dy","-.45em").attr("transform","rotate(-90)"),i.append("text").attr("transform","rotate(-90)").attr("y",0).attr("x",0-r/2).attr("dy","1em").style("text-anchor","middle").text("Node Degree")}selectBar(t){this.deselectAllBars(),a.select("#bars").selectAll("rect[id='"+t+"B']").classed("barSelected",!0)}deselectAllBars(){a.select("#bars").selectAll(".barSelected").classed("barSelected",!1)}hoverBar(t){a.select("#bars").selectAll("rect[id='"+t+"B']").classed("barHover",!0)}dehoverBars(){a.select("#bars").selectAll(".barHover").classed("barHover",!1)}}},function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});const a=o(n(5));e.default=class{constructor(t,e,n,r,i){this.graph=t,this.hoverOver=e,this.hoverOut=n,this.select=r,this.dragEnded=i,this.drawGraph()}drawGraph(){let t=void 0,e=void 0,n=a.select("#viz");n.attr("width"),n.attr("height");n.selectAll("g").remove();let r=a.scaleOrdinal(a.schemeCategory10);n.append("button").attr("class","undoRedoButton"),t=n.append("g").attr("class","links").selectAll("line").data(this.graph.links).join("line").attr("stroke-width",(function(t){return Math.sqrt(t.value)})),e=n.append("g").classed("circleG",!0).selectAll("circle").data(this.graph.nodes).join("circle").classed("nodes",!0).attr("id",(function(t){return t.id+"N"})).attr("fill",(function(t){return r(t.group)})).call(a.drag().on("drag",n=>this.dragged(n,t,e)).on("end",t=>this.dragEnded(t))).on("click",t=>this.select(t)).on("mouseover",t=>this.hoverOver(t)).on("mouseout",t=>this.hoverOut()),e.append("title").text(t=>t.id),this.draw(t,e)}dragged(t,e,n){t.x=a.event.x,t.y=a.event.y,this.draw(e,n)}draw(t,e){t.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y})),e.attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y}))}selectNode(t){this.deselectAllNodes(),a.select("circle[id='"+t+"N']").classed("selectedNode",!0),this.graph.links.filter((function(e){return e.source.id==t||e.target.id==t})).forEach((function(e){a.select("circle[id='"+e.source.id+"N']").filter((function(e){return e.id!=t})).classed("nodeEdges",!0),a.select("circle[id='"+e.target.id+"N']").filter((function(e){return e.id!=t})).classed("nodeEdges",!0)}))}deselectAllNodes(){a.select("#viz").selectAll("circle").classed("nodeEdges",!1).classed("selectedNode",!1)}hoverNode(t){a.select("#viz").select("circle[id='"+t+"N']").classed("hoverNode",!0)}dehoverNodes(){a.select("#viz").select(".hoverNode").classed("hoverNode",!1)}moveNodes(t){for(let e of this.graph.nodes)e.x=t[e.id][0],e.y=t[e.id][1];for(let e of this.graph.links)e.source.x=t[e.source.id][0],e.source.y=t[e.source.id][1],e.target.x=t[e.target.id][0],e.target.y=t[e.target.id][1];let e=a.select("#viz").select("g.links").selectAll("line"),n=a.select("#viz").select("g.circleG").selectAll("circle");this.draw(e,n)}}},function(t,e,n){"use strict";n.r(e),function(t,r){n.d(e,"ProvVis",(function(){return mk})),n.d(e,"ProvVisCreator",(function(){return bk})),n.d(e,"UndoRedoButtonCreator",(function(){return wk}));var i=n(0),o=n.n(i),a=n(1),s=n.n(a),u=n(3),c=n.n(u),l=function(){return(l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function h(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function f(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function p(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function y(t,e){function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var v=function(){return(v=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function g(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function m(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function _(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function b(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function w(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(b(arguments[e]));return t}function E(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var T=!1,x="${JSCORE_VERSION}",C=function(t,e){if(!t)throw S(e)},S=function(t){return new Error("Firebase Database ("+x+") INTERNAL ASSERT FAILED: "+t)},I=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},N={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(I(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},k=function(t){try{return N.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function A(t){return P(void 0,t)}function P(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=P(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var O=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function D(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(R())}function M(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}}function L(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function F(){return!0===T}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var j=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,U.prototype.create),i}return y(e,t),e}(Error),U=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?V(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new j(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},t}();function V(t,e){return t.replace(q,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var q=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(t){return JSON.parse(t)}function z(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=B(k(o[0])||""),n=B(k(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function H(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Q(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function G(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Y(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var K=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function $(t,e){var n=new X(t,e);return n.subscribe.bind(n)}var X=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=J),void 0===r.error&&(r.error=J),void 0===r.complete&&(r.complete=J);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function J(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function tt(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function et(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(tt(t,e,r)+"must be a valid function.")}function nt(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(tt(t,e,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},it=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),ot=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new O;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=v({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var r=_(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=b(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService(u);s.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return g(this,void 0,void 0,(function(){var t;return m(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();var at,st=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new ot(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function ut(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,lt=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(ct||(ct={}));var ht,ft={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},pt=ct.INFO,dt=((at={})[ct.DEBUG]="log",at[ct.VERBOSE]="log",at[ct.INFO]="info",at[ct.WARN]="warn",at[ct.ERROR]="error",at),yt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=dt[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,ut(["["+i+"]  "+t.name+":"],n))}},vt=function(){function t(t){this.name=t,this._logLevel=pt,this._logHandler=yt,this._userLogHandler=null,lt.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in ct))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?ft[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ut([this,ct.DEBUG],t)),this._logHandler.apply(this,ut([this,ct.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ut([this,ct.VERBOSE],t)),this._logHandler.apply(this,ut([this,ct.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ut([this,ct.INFO],t)),this._logHandler.apply(this,ut([this,ct.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ut([this,ct.WARN],t)),this._logHandler.apply(this,ut([this,ct.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ut([this,ct.ERROR],t)),this._logHandler.apply(this,ut([this,ct.ERROR],t))},t}();function gt(t){lt.forEach((function(e){e.setLogLevel(t)}))}var mt,_t=((ht={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",ht["bad-app-name"]="Illegal App name: '{$appName}",ht["duplicate-app"]="Firebase App named '{$appName}' already exists",ht["app-deleted"]="Firebase App named '{$appName}' already deleted",ht["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",ht["invalid-log-argument"]="First argument to `onLog` must be null or a function.",ht),bt=new U("app","Firebase",_t),wt=((mt={})["@firebase/app"]="fire-core",mt["@firebase/analytics"]="fire-analytics",mt["@firebase/auth"]="fire-auth",mt["@firebase/database"]="fire-rtdb",mt["@firebase/functions"]="fire-fn",mt["@firebase/installations"]="fire-iid",mt["@firebase/messaging"]="fire-fcm",mt["@firebase/performance"]="fire-perf",mt["@firebase/remote-config"]="fire-rc",mt["@firebase/storage"]="fire-gcs",mt["@firebase/firestore"]="fire-fst",mt["fire-js"]="fire-js",mt["firebase-wrapper"]="fire-js-all",mt),Et=new vt("@firebase/app"),Tt=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=A(t),this.container=new st(e.name),this._addComponent(new it("app",(function(){return o}),"PUBLIC"));try{for(var a=_(this.firebase_.INTERNAL.components.values()),s=a.next();!s.done;s=a.next()){var u=s.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){Et.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw bt.create("app-deleted",{appName:this.name_})},t}();Tt.prototype.name&&Tt.prototype.options||Tt.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function xt(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw bt.create("bad-app-name",{appName:String(a)});if(H(e,a))throw bt.create("duplicate-app",{appName:a});var s=new t(n,o,r);return e[a]=s,s},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=wt[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Et.warn(u.join(" "))}o(new it(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:gt,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw bt.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=ft[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:ct[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=lt;r<i.length;r++){n(i[r])}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"7.16.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!H(e,t=t||"[DEFAULT]"))throw bt.create("no-app",{appName:t});return e[t]}function o(o){var a,s,u=o.name;if(n.has(u))return Et.debug("There were multiple attempts to register component "+u+"."),"PUBLIC"===o.type?r[u]:null;if(n.set(u,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[u])throw bt.create("invalid-app-argument",{appName:u});return t[u]()};void 0!==o.serviceProps&&P(c,o.serviceProps),r[u]=c,t.prototype[u]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,u);return n.apply(this,o.multipleInstances?t:[])}}try{for(var l=_(Object.keys(e)),h=l.next();!h.done;h=l.next()){var f=h.value;e[f]._addComponent(o)}}catch(t){a={error:t}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}return"PUBLIC"===o.type?r[u]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct=function t(){var e=xt(Tt);return e.INTERNAL=v(v({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){P(e,t)},createSubscribe:$,ErrorFactory:U,deepExtend:P}),e}(),St=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Et.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var It=self.firebase.SDK_VERSION;It&&It.indexOf("LITE")>=0&&Et.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Nt=Ct.initializeApp;Ct.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return M()&&Et.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),Nt.apply(void 0,t)};var kt=Ct;!function(t,e){t.INTERNAL.registerComponent(new it("platform-logger",(function(t){return new St(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.8",e),t.registerVersion("fire-js","")}(kt);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var At=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),z(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:B(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),Pt=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return H(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),Ot=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new At(e)}}catch(t){}return new Pt},Rt=Ot("localStorage"),Dt=Ot("sessionStorage"),Mt=new vt("@firebase/database"),Lt=function(){var t=1;return function(){return t++}}(),Ft=function(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,C(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new K;n.update(e);var r=n.digest();return N.encodeByteArray(r)},jt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=jt.apply(null,i):n+="object"==typeof i?z(i):i,n+=" "}return n},Ut=null,Vt=!0,qt=function(t,e){C(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(Mt.logLevel=ct.VERBOSE,Ut=Mt.log.bind(Mt),e&&Dt.set("logging_enabled",!0)):"function"==typeof t?Ut=t:(Ut=null,Dt.remove("logging_enabled"))},Bt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===Vt&&(Vt=!1,null===Ut&&!0===Dt.get("logging_enabled")&&qt(!0)),Ut){var n=jt.apply(null,t);Ut(n)}},zt=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Bt.apply(void 0,w([t],e))}},Wt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+jt.apply(void 0,w(t));Mt.error(n)},Ht=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+jt.apply(void 0,w(t));throw Mt.error(n),new Error(n)},Qt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+jt.apply(void 0,w(t));Mt.warn(n)},Gt=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Yt="[MIN_NAME]",Kt="[MAX_NAME]",$t=function(t,e){if(t===e)return 0;if(t===Yt||e===Kt)return-1;if(e===Yt||t===Kt)return 1;var n=ie(t),r=ie(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},Xt=function(t,e){return t===e?0:t<e?-1:1},Jt=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+z(e))},Zt=function(t){if("object"!=typeof t||null===t)return z(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=z(e[i]),r+=":",r+=Zt(t[e[i]]);return r+="}"},te=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var ne=function(t){C(!Gt(t),"Invalid JSON number");var e,n,r,i,o;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var s=a.join(""),u="";for(o=0;o<64;o+=8){var c=parseInt(s.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()},re=new RegExp("^-?(0*)\\d{1,10}$"),ie=function(t){if(re.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},oe=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw Qt("Exception was thrown by user callback.",e),t}),Math.floor(0))}},ae=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},se=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=$t(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),ue=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=rt(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=rt(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=rt(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),ce=function(){function t(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=Rt.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Rt.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(C("string"==typeof t,"typeof type must == string"),C("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return ee(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}();var le,he,fe,pe,de,ye=function(t){var e=ve(t),n=e.namespace;"firebase.com"===e.domain&&Ht(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||Ht("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Qt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new ce(e.host,e.secure,n,r,"",n!==e.subdomain),path:new se(e.pathString)}},ve=function(t){var e="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"==typeof t){var c=t.indexOf("//");c>=0&&(s=t.substring(0,c-1),t=t.substring(c+2));var l=t.indexOf("/");-1===l&&(l=t.length);var h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(l,h)),l<h&&(i=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(l,h)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=_(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Qt("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,h)));(c=e.indexOf(":"))>=0?(a="https"===s||"wss"===s,u=parseInt(e.substring(c+1),10)):c=e.length;var p=e.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),n=e.substring(d+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},ge=/[\[\].#$\/\u0000-\u001F\u007F]/,me=/[\[\].#$\u0000-\u001F\u007F]/,_e=function(t){return"string"==typeof t&&0!==t.length&&!ge.test(t)},be=function(t){return"string"==typeof t&&0!==t.length&&!me.test(t)},we=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!Gt(t)||t&&"object"==typeof t&&H(t,".sv")},Ee=function(t,e,n,r,i){i&&void 0===n||Te(tt(t,e,i),n,r)},Te=function(t,e,n){var r=n instanceof se?new ue(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(Gt(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&rt(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(ee(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!_e(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),Te(t,n,r),r.pop()})),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},xe=function(t,e,n,r,i){if(!i||void 0!==n){var o=tt(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];ee(n,(function(t,e){var n=new se(t);if(Te(o,e,r.child(n)),".priority"===n.getBack()&&!we(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!_e(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(se.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&a.contains(r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}},Ce=function(t,e,n,r){if(!r||void 0!==n){if(Gt(n))throw new Error(tt(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!we(n))throw new Error(tt(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Se=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(tt(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ie=function(t,e,n,r){if(!(r&&void 0===n||_e(n)))throw new Error(tt(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ne=function(t,e,n,r){if(!(r&&void 0===n||be(n)))throw new Error(tt(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ke=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ne(t,e,n,r)},Ae=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},Pe=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!_e(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),be(t)}(r))throw new Error(tt(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Oe=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(tt(t,e,r)+"must be a boolean.")},Re=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Z("OnDisconnect.cancel",0,1,arguments.length),et("OnDisconnect.cancel",1,t,!0);var e=new O;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Z("OnDisconnect.remove",0,1,arguments.length),Ae("OnDisconnect.remove",this.path_),et("OnDisconnect.remove",1,t,!0);var e=new O;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Z("OnDisconnect.set",1,2,arguments.length),Ae("OnDisconnect.set",this.path_),Ee("OnDisconnect.set",1,t,this.path_,!1),et("OnDisconnect.set",2,e,!0);var n=new O;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Z("OnDisconnect.setWithPriority",2,3,arguments.length),Ae("OnDisconnect.setWithPriority",this.path_),Ee("OnDisconnect.setWithPriority",1,t,this.path_,!1),Ce("OnDisconnect.setWithPriority",2,e,!1),et("OnDisconnect.setWithPriority",3,n,!0);var r=new O;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Z("OnDisconnect.update",1,2,arguments.length),Ae("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Qt("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xe("OnDisconnect.update",1,t,this.path_,!1),et("OnDisconnect.update",2,e,!0);var i=new O;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),De=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Z("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Me=(le="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",he=0,fe=[],function(t){var e,n=t===he;he=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=le.charAt(t%64),t=Math.floor(t/64);C(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===fe[e];e--)fe[e]=0;fe[e]++}else for(e=0;e<12;e++)fe[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=le.charAt(fe[e]);return C(20===i.length,"nextPushId: Length should be 20."),i}),Le=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Fe=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Le(Yt,t),r=new Le(Yt,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Le.MIN},t}(),je=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return pe},set:function(t){pe=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return $t(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw S("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Le.MIN},e.prototype.maxPost=function(){return new Le(Kt,pe)},e.prototype.makePost=function(t,e){return C("string"==typeof t,"KeyIndex indexValue must always be a string."),new Le(t,pe)},e.prototype.toString=function(){return".key"},e}(Fe),Ue=new je;var Ve,qe,Be,ze=function(t){return"number"==typeof t?"number:"+ne(t):"string:"+t},We=function(t){if(t.isLeafNode()){var e=t.val();C("string"==typeof e||"number"==typeof e||"object"==typeof e&&H(e,".sv"),"Priority must be a string or number.")}else C(t===de||t.isEmpty(),"priority of unexpected type.");C(t===de||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},He=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,C(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),We(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ve},set:function(t){Ve=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(C(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+ze(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?ne(this.value_):this.value_,this.lazyHash_=Ft(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(C(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return C(i>=0,"Unknown leaf type: "+n),C(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var Qe,Ge,Ye=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?$t(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Le.MIN},e.prototype.maxPost=function(){return new Le(Kt,new He("[PRIORITY-POST]",Be))},e.prototype.makePost=function(t,e){var n=qe(t);return new Le(e,new He("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Fe)),Ke=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),$e=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Je.EMPTY_NODE,this.right=null!=o?o:Je.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Je.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Je.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Xe=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new $e(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Je=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,$e.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,$e.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ke(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ke(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ke(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ke(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Xe,t}(),Ze=Math.log(2),tn=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Ze,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),en=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new $e(a,o.node,$e.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],a=n?n(o):o,new $e(a,o.node,$e.BLACK,c,l)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),l=t[o],h=n?n(l):l;u(new $e(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?s(h,$e.BLACK):(s(h,$e.BLACK),s(h,$e.RED))}return o}(new tn(t.length));return new Je(r||e,o)},nn={},rn=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return C(nn&&Ye,"ChildrenNode.ts has not been loaded"),Qe=Qe||new t({".priority":nn},{".priority":Ye})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Q(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Je?e:null},t.prototype.hasIndex=function(t){return H(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){C(e!==Ue,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(Le.Wrap),s=a.getNext();s;)o=o||e.isDefinedOn(s.node),i.push(s),s=a.getNext();r=o?en(i,e.getCompare()):nn;var u=e.toString(),c=v({},this.indexSet_);c[u]=e;var l=v({},this.indexes_);return l[u]=r,new t(l,c)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Y(this.indexes_,(function(t,i){var o=Q(r.indexSet_,i);if(C(o,"Missing index implementation for "+i),t===nn){if(o.isDefinedOn(e.node)){for(var a=[],s=n.getIterator(Le.Wrap),u=s.getNext();u;)u.name!==e.name&&a.push(u),u=s.getNext();return a.push(e),en(a,o.getCompare())}return nn}var c=n.get(e.name),l=t;return c&&(l=l.remove(new Le(e.name,c))),l.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Y(this.indexes_,(function(t){if(t===nn)return t;var r=n.get(e.name);return r?t.remove(new Le(e.name,r)):t})),this.indexSet_)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function on(t,e){return $t(t.name,e.name)}function an(t,e){return $t(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sn=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&We(this.priorityNode_),this.children_.isEmpty()&&C(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Ge||(Ge=new t(new Je(an),null,rn.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Ge},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Ge:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(C(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Le(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Ge:this.priorityNode_;return new t(i,a,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;C(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Ye,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+ze(this.getPriority().val())+":"),this.forEachChild(Ye,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":Ft(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Le(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Le(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Le(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Le.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Le.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===un?-1:0},t.prototype.withIndex=function(e){if(e===Ue||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Ue||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Ye),r=e.getIterator(Ye),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Ue?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),un=new(function(t){function e(){return t.call(this,new Je(an),sn.EMPTY_NODE,rn.Default)||this}return y(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return sn.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(sn));Object.defineProperties(Le,{MIN:{value:new Le(Yt,sn.EMPTY_NODE)},MAX:{value:new Le(Kt,un)}}),je.__EMPTY_NODE=sn.EMPTY_NODE,He.__childrenNodeConstructor=sn,de=un,function(t){Be=t}(un);function cn(t,e){if(void 0===e&&(e=null),null===t)return sn.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),C(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new He(t,cn(e));if(t instanceof Array){var n=sn.EMPTY_NODE;return ee(t,(function(e,r){if(H(t,e)&&"."!==e.substring(0,1)){var i=cn(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(cn(e))}var r=[],i=!1;if(ee(t,(function(t,e){if("."!==t.substring(0,1)){var n=cn(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Le(t,n)))}})),0===r.length)return sn.EMPTY_NODE;var o=en(r,on,(function(t){return t.name}),an);if(i){var a=en(r,Ye.getCompare());return new sn(o,cn(e),new rn({".priority":a},{".priority":Ye}))}return new sn(o,cn(e),rn.Default)}!function(t){qe=t}(cn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ln,hn=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?$t(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Le.MIN},e.prototype.maxPost=function(){return Le.MAX},e.prototype.makePost=function(t,e){var n=cn(t);return new Le(e,n)},e.prototype.toString=function(){return".value"},e}(Fe)),fn=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,C(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return y(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?$t(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=cn(t),r=sn.EMPTY_NODE.updateChild(this.indexPath_,n);return new Le(e,r)},e.prototype.maxPost=function(){var t=sn.EMPTY_NODE.updateChild(this.indexPath_,un);return new Le(Kt,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Fe),pn=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Z("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Z("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Z("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Z("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Z("DataSnapshot.child",0,1,arguments.length),e=String(e),Ne("DataSnapshot.child",1,e,!1);var n=new se(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Ye)},t.prototype.hasChild=function(t){Z("DataSnapshot.hasChild",1,1,arguments.length),Ne("DataSnapshot.hasChild",1,t,!1);var e=new se(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Z("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Z("DataSnapshot.forEach",1,1,arguments.length),et("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Ye))}))},t.prototype.hasChildren=function(){return Z("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Z("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Z("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),dn=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+z(this.snapshot.exportVal())},t}(),yn=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),vn=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new dn("value",this,new pn(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){C(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new yn(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),gn=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,H(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new yn(this,t,e):null},t.prototype.createEvent=function(t,e){C(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new dn(t.type,this,new pn(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){C(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var a=r[0],s=i[0];return!(s!==a||e.callbacks_[a]&&this.callbacks_[s]&&e.callbacks_[a]!==this.callbacks_[s])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),mn=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return C(ln,"Reference.ts has not been loaded"),ln},set:function(t){ln=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ue){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Yt)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Kt)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Ye){if(null!=e&&!we(e)||null!=n&&!we(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(C(t.getIndex()instanceof fn||t.getIndex()===hn,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Z("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Z("Query.on",2,4,arguments.length),Se("Query.on",1,e,!1),et("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new vn(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new gn(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Z("Query.off",0,3,arguments.length),Se("Query.off",1,t,!0),et("Query.off",2,e,!0),nt("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new vn(o,null,n||null)}else t&&(e&&((i={})[t]=e),r=new gn(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;Z("Query.once",1,4,arguments.length),Se("Query.once",1,e,!1),et("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),s=!0,u=new O;u.promise.catch((function(){}));var c=function(t){s&&(s=!1,o.off(e,c),n&&n.bind(a.context)(t),u.resolve(t))};return this.on(e,c,(function(t){o.off(e,c),a.cancel&&a.cancel.bind(a.context)(t),u.reject(t)})),u.promise},t.prototype.limitToFirst=function(e){if(Z("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Z("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Z("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Ne("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new se(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new fn(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Z("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Ue);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Z("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Ye);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Z("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(hn);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Z("Query.startAt",0,2,arguments.length),Ee("Query.startAt",1,e,this.path,!0),Ie("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Z("Query.endAt",0,2,arguments.length),Ee("Query.endAt",1,e,this.path,!0),Ie("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Z("Query.equalTo",1,2,arguments.length),Ee("Query.equalTo",1,t,this.path,!1),Ie("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Z("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Z("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=Zt(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Z("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,et(t,3,r.cancel,!0),r.context=n,nt(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(tt(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),_n=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),bn=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),wn=function(t,e,n){return t&&"object"==typeof t?(C(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?En(t[".sv"],e,n):"object"==typeof t[".sv"]?Tn(t[".sv"],e):void C(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},En=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:C(!1,"Unexpected server value: "+t)}},Tn=function(t,e,n){t.hasOwnProperty("increment")||C(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&C(!1,"Unexpected increment value: "+r);var i=e.node();if(C(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},xn=function(t,e,n,r){return Sn(e,new bn(n,t),r)},Cn=function(t,e,n){return Sn(t,new _n(e),n)};function Sn(t,e,n){var r,i=t.getPriority().val(),o=wn(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=wn(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new He(s,cn(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new He(o))),u.forEachChild(Ye,(function(t,i){var o=Sn(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var In,Nn=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Ye,(function(t,e){n.remember(new se(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();if(t=t.popFront(),this.children.has(r))this.children.get(r).forget(t)&&this.children.delete(r);return 0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new se(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(In||(In={}));var kn,An,Pn=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,C(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),On=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=In.ACK_USER_WRITE,this.source=Pn.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return C(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new se(e));return new t(se.Empty,n,this.revert)}return C(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),Rn=function(){function t(t,e){void 0===e&&(kn||(kn=new Je(Xt)),e=kn),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return ee(e,(function(t,e){n=n.set(new se(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:se.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new se(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),i=(this.children.get(r)||t.Empty).setTree(e.popFront(),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(se.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,se.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,se.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(se.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),Dn=function(){function t(t,e){this.source=t,this.path=e,this.type=In.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,se.Empty):new t(this.source,this.path.popFront())},t}(),Mn=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=In.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,se.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),Ln=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=In.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new se(e));return n.isEmpty()?null:n.value?new Mn(this.source,se.Empty,n.value):new t(this.source,se.Empty,n)}return C(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Fn=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),jn=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new Fn(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new Fn(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new Fn(sn.EMPTY_NODE,!1,!1),new Fn(sn.EMPTY_NODE,!1,!1)),t}(),Un=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),Vn=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){C(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Un.childRemovedChange(e,a)):C(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Un.childAddedChange(e,n)):o.trackChildChange(Un.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Ye,(function(t,r){e.hasChild(t)||n.trackChildChange(Un.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(Ye,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(Un.childChangedChange(e,r,i))}else n.trackChildChange(Un.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?sn.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),qn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;C(e===Un.CHILD_ADDED||e===Un.CHILD_CHANGED||e===Un.CHILD_REMOVED,"Only child changes supported for tracking"),C(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===Un.CHILD_ADDED&&i===Un.CHILD_REMOVED)this.changeMap.set(n,Un.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===Un.CHILD_REMOVED&&i===Un.CHILD_ADDED)this.changeMap.delete(n);else if(e===Un.CHILD_REMOVED&&i===Un.CHILD_CHANGED)this.changeMap.set(n,Un.childRemovedChange(n,r.oldSnap));else if(e===Un.CHILD_CHANGED&&i===Un.CHILD_ADDED)this.changeMap.set(n,Un.childAddedChange(n,t.snapshotNode));else{if(e!==Un.CHILD_CHANGED||i!==Un.CHILD_CHANGED)throw S("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Un.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Bn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),zn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Fn(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Wn=function(t,e){this.viewCache=t,this.changes=e},Hn=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){C(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),C(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,a,s=new qn;if(n.type===In.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(e,u.path,u.snap,r,i,s):(C(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.getServerCache().isFiltered()&&!u.path.isEmpty(),o=this.applyServerOverwrite_(e,u.path,u.snap,r,i,a,s))}else if(n.type===In.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(e,c.path,c.children,r,i,s):(C(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,c.path,c.children,r,i,a,s))}else if(n.type===In.ACK_USER_WRITE){var l=n;o=l.revert?this.revertUserWrite_(e,l.path,r,i,s):this.ackUserWrite_(e,l.path,l.affectedTree,r,i,s)}else{if(n.type!==In.LISTEN_COMPLETE)throw S("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,s)}var h=s.getChanges();return t.maybeAddValueEvent_(e,o,h),new Wn(o,h)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Un.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,s=void 0;if(e.isEmpty())if(C(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof sn?u:sn.EMPTY_NODE,l=n.calcCompleteEventChildren(c);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){C(1===e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();s=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,s);a=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var y=e.popFront(),v=void 0;if(o.isCompleteForChild(f)){s=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),s);v=null!=g?o.getNode().getImmediateChild(f).updateChild(y,g):o.getNode().getImmediateChild(f)}else v=n.calcCompleteChild(f,t.getServerCache());a=null!=v?this.filter_.updateChild(o.getNode(),f,v,y,r,i):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);s=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(h).updateChild(f,n);s=".priority"===h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,f,Bn,null)}var d=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),y=new zn(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,y,a)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,s,u=t.getEventCache(),c=new zn(r,t,i);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var d=c.getCompleteChild(l);p=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):sn.EMPTY_NODE}if(f.equals(p))a=t;else{var y=this.filter_.updateChild(u.getNode(),l,p,h,c,o);a=t.updateEventSnap(y,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,a){var s=this,u=e;return r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=s.applyUserOverwrite_(u,l,c,i,o,a))})),r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=s.applyUserOverwrite_(u,l,c,i,o,a))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:Rn.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new se(e),h,r,i,o,a)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=s.applyMerge_(h,n);c=s.applyServerOverwrite_(c,new se(e),f,r,i,o,a)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),r,i,a,o);if(e.isEmpty()){var u=Rn.Empty;return s.getNode().forEachChild(Ue,(function(t,e){u=u.set(new se(t),e)})),this.applyServerMerge_(t,e,u,r,i,a,o)}return t}var c=Rn.Empty;return n.foreach((function(t,n){var r=e.child(t);s.isCompleteForPath(r)&&(c=c.set(t,s.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,a,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Bn,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var a=new zn(n,t,r),s=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var l=t.getServerCache().getNode();C(l instanceof sn,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(l)}c=c,u=this.filter_.updateFullNode(s,c,i)}else{var h=e.getFront(),f=n.calcCompleteChild(h,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(h)&&(f=s.getImmediateChild(h)),(u=null!=f?this.filter_.updateChild(s,h,f,e.popFront(),a,i):t.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(s,h,sn.EMPTY_NODE,e.popFront(),a,i):s).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(se.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},t}(),Qn=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===Un.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(Un.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,Un.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,Un.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,Un.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,Un.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,Un.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,a=n.filter((function(t){return t.type===e}));a.sort(this.compareChanges_.bind(this)),a.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw S("Should only compare child_ events.");var n=new Le(t.childName,t.snapshotNode),r=new Le(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Gn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Vn(n.getIndex()),i=n.getNodeFilter();this.processor_=new Hn(i);var o=e.getServerCache(),a=e.getEventCache(),s=r.updateFullNode(sn.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(sn.EMPTY_NODE,a.getNode(),null),c=new Fn(s,o.isFullyInitialized(),r.filtersNodes()),l=new Fn(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new jn(l,c),this.eventGenerator_=new Qn(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){C(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){e=e;var i=t.createCancelEvent(e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===In.MERGE&&null!==t.source.queryId&&(C(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),C(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),C(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];e.getNode().isLeafNode()||e.getNode().forEachChild(Ye,(function(t,e){n.push(Un.childAddedChange(t,e))}));return e.isFullyInitialized()&&n.push(Un.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),Yn=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return C(An,"Reference.ts has not been loaded"),An},set:function(t){C(!An,"__referenceConstructor has already been defined"),An=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var a=this.views.get(o);return C(null!=a,"SyncTree gave us an op for an invalid query."),a.applyOperation(t,e,n)}var s=[];try{for(var u=_(this.views.values()),c=u.next();!c.done;c=u.next()){a=c.value;s=s.concat(a.applyOperation(t,e,n))}}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return s},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),a=this.views.get(o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;s?u=!0:r instanceof sn?(s=n.calcCompleteEventChildren(r),u=!1):(s=sn.EMPTY_NODE,u=!1);var c=new jn(new Fn(s,u,!1),new Fn(r,i,!1));a=new Gn(t,c),this.views.set(o,a)}return a.addEventRegistration(e),a.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,o,a=e.queryIdentifier(),s=[],u=[],c=this.hasCompleteView();if("default"===a)try{for(var l=_(this.views.entries()),h=l.next();!h.done;h=l.next()){var f=b(h.value,2),p=f[0],d=f[1];u=u.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(p),d.getQuery().getQueryParams().loadsAllData()||s.push(d.getQuery()))}}catch(t){i={error:t}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}else(d=this.views.get(a))&&(u=u.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(a),d.getQuery().getQueryParams().loadsAllData()||s.push(d.getQuery())));return c&&!this.hasCompleteView()&&s.push(new t.__referenceConstructor(e.repo,e.path)),{removed:s,events:u}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=_(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=_(this.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r||a.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=_(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Kn=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new Rn(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=se.relativePath(i,e);return o=o.updateChild(a,n),new t(this.writeTree_.set(i,o))}var s=new Rn(n);return new t(this.writeTree_.setTree(e,s))},t.prototype.addWrites=function(t,e){var n=this;return ee(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,Rn.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(se.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Ye,(function(e,n){t.push(new Le(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Le(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new Rn(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(C(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t(e.child(n),o,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(se.Empty,this.writeTree_,t)},t.Empty=new t(new Rn(null)),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $n=function(){function t(){this.visibleWrites_=Kn.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Xn(t,this)},t.prototype.addOverwrite=function(t,e,n,r){C(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){C(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));C(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&a>=0;){var s=this.allWrites_[a];s.visible&&(a>=n&&this.recordContainsPath_(s,r.path)?i=!1:r.path.contains(s.path)&&(o=!0)),a--}if(i){if(o)return this.resetTree_(),!0;r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):ee(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))}));return!0}return!1},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(se.Empty)){var a=t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e);c=n||sn.EMPTY_NODE;return a.apply(c)}return null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return n;if(null!=n||u.hasCompleteWrite(se.Empty)){var c=n||sn.EMPTY_NODE;return u.apply(c)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=sn.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Ye,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Ye,(function(t,e){var r=i.childCompoundWrite(new se(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){C(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(se.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,se.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Kn.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=se.relativePath(n,a),r=r.addWrite(s,o.snap)):a.contains(n)&&(s=se.relativePath(a,n),r=r.addWrite(se.Empty,o.snap.getChild(s)));else{if(!o.children)throw S("WriteRecord should have .snap or .children");if(n.contains(a))s=se.relativePath(n,a),r=r.addWrites(s,o.children);else if(a.contains(n))if((s=se.relativePath(a,n)).isEmpty())r=r.addWrites(se.Empty,o.children);else{var u=Q(o.children,s.getFront());if(u){var c=u.getChild(s.popFront());r=r.addWrite(se.Empty,c)}}}}}return r},t}(),Xn=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Jn=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=Rn.Empty,this.pendingWriteTree_=new $n,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Mn(Pn.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Rn.fromObject(e);return this.applyOperationToSyncPoints_(new Ln(Pn.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Rn.Empty;return null!=n.snap?r=r.set(se.Empty,!0):ee(n.children,(function(t,e){r=r.set(new se(t),e)})),this.applyOperationToSyncPoints_(new On(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Mn(Pn.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=Rn.fromObject(e);return this.applyOperationToSyncPoints_(new Ln(Pn.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Dn(Pn.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=se.relativePath(a,e),c=new Mn(Pn.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=se.relativePath(a,e),c=Rn.fromObject(n),l=new Ln(Pn.forServerTaggedQuery(s),u,c);return this.applyTaggedOperation_(a,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,a=i.queryId,s=se.relativePath(o,e),u=new Dn(Pn.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=se.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var a,s=this.syncPointTree_.get(r);(s?(o=o||s.hasCompleteView(),i=i||s.getCompleteServerCache(se.Empty)):(s=new Yn,this.syncPointTree_=this.syncPointTree_.set(r,s)),null!=i)?a=!0:(a=!1,i=sn.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(se.Empty);n&&(i=i.updateImmediateChild(t,n))})));var u=s.viewExistsForQuery(e);if(!u&&!e.getQueryParams().loadsAllData()){var c=t.makeQueryKey_(e);C(!this.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=t.getNextQueryTag_();this.queryToTagMap.set(c,l),this.tagToQueryMap.set(l,c)}var h=this.pendingWriteTree_.childWrites(r),f=s.addEventRegistration(e,n,h,i,a);if(!u&&!o){var p=s.viewForQuery(e);f=f.concat(this.setupListener_(e,p))}return f},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var u=a.removeEventRegistration(e,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;s=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var y=p[d],v=y.getQuery(),g=this.createListenerForView_(y);this.listenProvider_.startListening(t.queryForListening_(v),this.tagForQuery_(v),g.hashFn,g.onComplete)}}if(!h&&c.length>0&&!r)if(l){this.listenProvider_.stopListening(t.queryForListening_(e),null)}else c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}));this.removeTags_(c)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=se.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),ee(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),s=this.syncPointTree_.subtree(r);if(i)C(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),ee(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var l=u[c];this.listenProvider_.stopListening(t.queryForListening_(l),this.tagForQuery_(l))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||sn.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return C(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new se(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);C(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(se.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(se.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(se.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(se.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(se.Empty));var a=[];return e.children.inorderTraversal((function(e,o){var s=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))})),o&&(a=a.concat(o.applyOperation(t,r,n))),a},t.nextQueryTag_=1,t}(),Zn=function(){function t(){this.rootNode_=sn.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),tr=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(Bt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qt(t)},t}(),er=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),H(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return A(this.counters_)},t}(),nr=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new er),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),rr=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=v({},t);return this.last_&&ee(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),ir=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new rr(t);var n=1e4+2e4*Math.random();ae(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;ee(e,(function(e,i){i>0&&H(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),ae(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),or=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new ar(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r)t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),ar=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();Ut&&Bt("event: "+e.toString()),oe(n)}}},t.prototype.getPath=function(){return this.path_},t}(),sr=function(){function t(t){this.allowedEvents_=t,this.listeners_={},C(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=w(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){C(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),ur=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return y(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return C("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(sr),cr=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||D()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return y(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return C("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(sr),lr=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&oe((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),hr=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zt(t),this.stats_=nr.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new lr(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new fr((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=b(t,5),i=r[0],o=r[1],a=r[2];r[3],r[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=b(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=z(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=I(e),N.encodeByteArray(n,!0)),i=te(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},t.prototype.incrementIncomingBytes_=function(t){var e=z(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),fr=function(){function t(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Lt(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(t){Bt("frame writing exception"),t.stack&&Bt(t.stack),Bt(t)}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Bt("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){Bt("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},t}(),pr="";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var dr=null;"undefined"!=typeof MozWebSocket?dr=MozWebSocket:"undefined"!=typeof WebSocket&&(dr=WebSocket);var yr=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zt(this.connId),this.stats_=nr.getCollection(n),this.connURL=t.connectionURL_(n,i,o)}return t.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Rt.set("previous_websocket_failure",!0);try{if(F()){var i=T?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/5/"+pr+"/"+r.platform+"/"+i,"X-Firebase-GMPID":this.applicationId||""}},a=r.env,s=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;s&&(o.proxy={origin:s}),this.mySock=new dr(this.connURL,[],o)}else{o={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new dr(this.connURL,[],o)}}catch(t){this.log_("Error instantiating WebSocket.");var u=t.message||t.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==dr&&!t.forceDisallow_},t.previouslyFailed=function(){return Rt.isInMemoryStorage||!0===Rt.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){Rt.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=B(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(C(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=z(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=te(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),vr=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[hr,yr]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=yr&&yr.isAvailable(),o=i&&!yr.previouslyFailed();if(e.webSocketOnly&&(i||Qt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[yr];else{var a=this.transports_=[];try{for(var s=_(t.ALL_TRANSPORTS),u=s.next();!u.done;u=s.next()){var c=u.value;c&&c.isAvailable()&&a.push(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),gr=function(){function t(t,e,n,r,i,o,a,s){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=a,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zt("c:"+this.id+":"),this.transportManager_=new vr(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ae((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=Jt("t",t),n=Jt("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=Jt("t",t),n=Jt("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=Jt("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?Wt("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Wt("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Qt("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ae((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ae((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Rt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),mr=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),_r=function(t){function e(n,r,i,o,a,s,u){var c=t.call(this)||this;if(c.repoInfo_=n,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=o,c.onServerInfoUpdate_=a,c.authTokenProvider_=s,c.authOverride_=u,c.id=e.nextPersistentConnectionId_++,c.log_=zt("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingPutCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=1e3,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,u&&!F())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return c.scheduleConnect_(0),ur.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&cr.getInstance().on("online",c.onOnline_,c),c}return y(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(z(i)),C(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),C(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),C(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&H(t,"w")){var n=Q(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();Qt("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=W(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t,e=this;if(this.connected_&&this.authToken_){var n=this.authToken_,r=(t=W(n).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,(function(t){var r=t.s,i=t.d||"error";e.authToken_===n&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),C(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+z(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Wt("Unrecognized action received from server: "+z(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;C(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this,a=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,r())};this.realtime_={close:c,sendRequest:function(t){C(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}};var l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(l).then((function(e){s?Bt("getToken() completed but was canceled"):(Bt("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,u=new gr(i,o.repoInfo_,o.applicationId_,t,n,r,(function(t){Qt(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")}),a))})).then(null,(function(t){o.log_("Failed to get token: "+t),s||c()}))}},e.prototype.interrupt=function(t){Bt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){Bt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],G(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return Zt(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new se(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){Bt("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=_(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,_(a.values())),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},e.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+pr.replace(/\./g,"-")]=1,D()?t["framework.cordova"]=1:L()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=cr.getInstance().currentlyOnline();return G(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(mr),br=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=zt("p:rest:"),i.listens_={},i}return y(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(C(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var s=e.getListenId_(t,r),u={};this.listens_[s]=u;var c=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",c,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),Q(o.listens_,s)===u)&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){r.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);var t=null;if(s.status>=200&&s.status<300){try{t=B(s.responseText)}catch(t){Qt("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,t)}else 401!==s.status&&404!==s.status&&Qt("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()}))},e}(mr),wr=function(){function t(t,e,n,r){var i=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new or,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Nn,this.persistentConnection_=null;var o=new tr(n,r);if(this.stats_=nr.getCollection(t),e||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new br(this.repoInfo_,this.onDataUpdate_.bind(this),o),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var a=n.options.databaseAuthVariableOverride;if(null!=a){if("object"!=typeof a)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{z(a)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new _r(this.repoInfo_,n.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),o,a),this.server_=this.persistentConnection_}o.addTokenChangeListener((function(t){i.server_.refreshAuthToken(t)})),this.statsReporter_=nr.getOrCreateReporter(t,(function(){return new ir(i.stats_,i.server_)})),this.transactionsInit_(),this.infoData_=new Zn,this.infoSyncTree_=new Jn({startListening:function(t,e,n,r){var o=[],a=i.infoData_.getNode(t.path);return a.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(t.path,a),setTimeout((function(){r("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Jn({startListening:function(t,e,n,r){return i.server_.listen(t,n,e,(function(e,n){var o=r(e,n);i.eventQueue_.raiseEventsForChangedPath(t.path,o)})),[]},stopListening:function(t,e){i.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new se(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t}({timestamp:this.serverTime()})},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new se(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var a=Y(e,(function(t){return cn(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var s=cn(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)}else if(n){var u=Y(e,(function(t){return cn(t)}));o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=cn(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var l=i;o.length>0&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;ee(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new se("/.info/"+t),r=cn(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),a=cn(e,n),s=this.serverSyncTree_.calcCompleteEventCache(t),u=Cn(a,s,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),a.val(!0),(function(e,n){var o="ok"===e;o||Qt("set at "+t+" failed: "+e);var a=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,a),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),a={};if(ee(e,(function(e,n){i=!1,a[e]=xn(t.child(e),cn(n),r.serverSyncTree_,o)})),i)Bt("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||Qt("update at "+t+" failed: "+e);var a=r.serverSyncTree_.ackUserWrite(s,!o),u=a.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,e,i)})),ee(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new Nn;this.onDisconnect_.forEachTree(se.Empty,(function(r,i){var o=xn(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(se.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new Nn,this.eventQueue_.raiseEventsForChangedPath(se.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=cn(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=cn(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(G(e))return Bt("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&ee(e,(function(e,n){var i=cn(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new rr(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);ee(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),Bt.apply(void 0,w([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&oe((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new Pr(this))},enumerable:!1,configurable:!0}),t}(),Er=function(){function t(e){this.indexedFilter_=new Vn(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Le(e,n))||(n=sn.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=sn.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(sn.EMPTY_NODE);var i=this;return e.forEachChild(Ye,(function(t,e){i.matches(new Le(t,e))||(r=r.updateImmediateChild(t,sn.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Tr=function(){function t(t){this.rangedFilter_=new Er(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Le(e,n))||(n=sn.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=sn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=sn.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(sn.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){a=i.getNext();!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,sn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;C(s.numChildren()===this.limit_,"");var u=new Le(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var h=s.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(l&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(Un.childChangedChange(e,n,h)),s.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Un.childRemovedChange(e,h));var d=s.updateImmediateChild(e,sn.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Un.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?t:l&&o(c,u)>=0?(null!=i&&(i.trackChildChange(Un.childRemovedChange(c.name,c.node)),i.trackChildChange(Un.childAddedChange(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,sn.EMPTY_NODE)):t},t}(),xr=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ye}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return C(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return C(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Yt},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return C(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return C(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Kt},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return C(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Ye&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ye},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new Vn(this.getIndex()):this.hasLimit()?new Tr(this):new Er(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===Ye?e=n.PRIORITY_INDEX:this.index_===hn?e=n.VALUE_INDEX:this.index_===Ue?e=n.KEY_INDEX:(C(this.index_ instanceof fn,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=z(e),this.startSet_&&(r[n.START_AT]=z(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+z(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=z(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+z(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),Cr=function(t){function e(e,n){if(!(e instanceof wr))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,xr.DEFAULT,!1)||this}return y(e,t),e.prototype.getKey=function(){return Z("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Z("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof se||(null===this.path.getFront()?ke("Reference.child",1,t,!1):Ne("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Z("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Z("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Z("Reference.set",1,2,arguments.length),Ae("Reference.set",this.path),Ee("Reference.set",1,t,this.path,!1),et("Reference.set",2,e,!0);var n=new O;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Z("Reference.update",1,2,arguments.length),Ae("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Qt("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xe("Reference.update",1,t,this.path,!1),et("Reference.update",2,e,!0);var i=new O;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Z("Reference.setWithPriority",2,3,arguments.length),Ae("Reference.setWithPriority",this.path),Ee("Reference.setWithPriority",1,t,this.path,!1),Ce("Reference.setWithPriority",2,e,!1),et("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new O;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Z("Reference.remove",0,1,arguments.length),Ae("Reference.remove",this.path),et("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Z("Reference.transaction",1,3,arguments.length),Ae("Reference.transaction",this.path),et("Reference.transaction",1,t,!1),et("Reference.transaction",2,e,!0),Oe("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new O;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new De(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Z("Reference.setPriority",1,2,arguments.length),Ae("Reference.setPriority",this.path),Ce("Reference.setPriority",1,t,!1),et("Reference.setPriority",2,e,!0);var n=new O;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Z("Reference.push",0,2,arguments.length),Ae("Reference.push",this.path),Ee("Reference.push",1,t,this.path,!0),et("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Me(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return Ae("Reference.onDisconnect",this.path),new Re(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(mn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mn.__referenceConstructor=Cr,Yn.__referenceConstructor=Cr;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Sr,Ir=function(){this.children={},this.childCount=0,this.value=null},Nr=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Ir),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof se?e:new se(e),r=this,i=n.getFront();null!==i;){r=new t(i,r,Q(r.node_.children,i)||new Ir),i=(n=n.popFront()).getFront()}return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){C(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;ee(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new se(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=H(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(Sr||(Sr={})),wr.MAX_TRANSACTION_RETRIES_=25,wr.prototype.transactionsInit_=function(){this.transactionQueueTree_=new Nr},wr.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new Cr(this,t);o.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:Lt(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=this.getLatestState_(t);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var c=new pn(a.currentInputSnapshot,new Cr(this,a.path),Ye);a.onComplete(null,!1,c)}}else{Te("transaction failed: Data returned ",u,a.path),a.status=Sr.RUN;var l=this.transactionQueueTree_.subTree(t),h=l.getValue()||[];h.push(a),l.setValue(h);var f=void 0;if("object"==typeof u&&null!==u&&H(u,".priority"))f=Q(u,".priority"),C(we(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else f=(this.serverSyncTree_.calcCompleteEventCache(t)||sn.EMPTY_NODE).getPriority().val();f=f;var p=this.generateServerValues(),d=cn(u,f),y=Cn(d,s,p);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(t,y,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_()}},wr.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||sn.EMPTY_NODE},wr.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);C(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===Sr.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},wr.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,a=i.hash(),s=0;s<e.length;s++){var u=e[s];C(u.status===Sr.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=Sr.SENT,u.retryCount++;var c=se.relativePath(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=t;this.server_.put(h.toString(),l,(function(r){n.log_("transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<e.length;a++){if(e[a].status=Sr.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,u=new Cr(n,e[a].path),c=new pn(s,u,Ye);o.push(e[a].onComplete.bind(null,null,!0,c))}e[a].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i);for(a=0;a<o.length;a++)oe(o[a])}else{if("datastale"===r)for(a=0;a<e.length;a++)e[a].status===Sr.SENT_NEEDS_ABORT?e[a].status=Sr.NEEDS_ABORT:e[a].status=Sr.RUN;else{Qt("transaction at "+h.toString()+" failed: "+r);for(a=0;a<e.length;a++)e[a].status=Sr.NEEDS_ABORT,e[a].abortReason=r}n.rerunTransactions_(t)}}),a)},wr.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},wr.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter((function(t){return t.status===Sr.RUN})).map((function(t){return t.currentWriteId})),a=0;a<t.length;a++){var s=t[a],u=se.relativePath(e,s.path),c=!1,l=void 0;if(C(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===Sr.NEEDS_ABORT)c=!0,l=s.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===Sr.RUN)if(s.retryCount>=wr.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var h=this.getLatestState_(s.path,o);s.currentInputSnapshot=h;var f=t[a].update(h.val());if(void 0!==f){Te("transaction failed: Data returned ",f,s.path);var p=cn(f);"object"==typeof f&&null!=f&&H(f,".priority")||(p=p.updatePriority(h.getPriority()));var d=s.currentWriteId,y=this.generateServerValues(),v=Cn(p,h,y);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=v,s.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(d),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(s.path,v,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,l="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],c&&(t[a].status=Sr.COMPLETED,n=t[a].unwatcher,setTimeout(n,Math.floor(0)),t[a].onComplete))if("nodata"===l){var g=new Cr(this,t[a].path),m=t[a].currentInputSnapshot,_=new pn(m,g,Ye);r.push(t[a].onComplete.bind(null,null,!1,_))}else r.push(t[a].onComplete.bind(null,new Error(l),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(a=0;a<r.length;a++)oe(r[a]);this.sendReadyTransactions_()}},wr.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},wr.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},wr.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},wr.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Sr.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},wr.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},wr.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status===Sr.SENT_NEEDS_ABORT);else if(e[o].status===Sr.SENT)C(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=Sr.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(C(e[o].status===Sr.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)oe(n[o])}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var kr,Ar=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return kr||(kr=new t),kr},t.prototype.interrupt=function(){var t,e,n,r;try{for(var i=_(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,_(Object.keys(this.repos_[a]))),u=s.next();!u.done;u=s.next()){var c=u.value;this.repos_[a][c].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var i=_(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,_(Object.keys(this.repos_[a]))),u=s.next();!u.done;u=s.next()){var c=u.value;this.repos_[a][c].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.databaseFromApp=function(t,e,n){var i=n||t.options.databaseURL;void 0===i&&Ht("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var o=ye(i),a=o.repoInfo,s=void 0;return void 0!==r&&(s=r.env.FIREBASE_DATABASE_EMULATOR_HOST),s&&(i="http://"+s+"?ns="+a.namespace,a=(o=ye(i)).repoInfo),Pe("Invalid Firebase Database URL",1,o),o.path.isEmpty()||Ht("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,e).database},t.prototype.deleteRepo=function(t){var e=Q(this.repos_,t.app.name);e&&Q(e,t.repoInfo_.toURLString())===t||Ht("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e,n){var r=Q(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=Q(r,t.toURLString());return i&&Ht("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new wr(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),Pr=function(){function t(t){this.repo_=t,t instanceof wr||Ht("Don't call new Database() directly - please use firebase.database()."),this.root_=new Cr(t,se.Empty),this.INTERNAL=new Or(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),Z("database.ref",0,1,arguments.length),t instanceof Cr?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Z(e,1,1,arguments.length);var n=ye(t);Pe(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&Ht(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&Ht("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Z("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Z("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),Or=function(){function t(t){this.database=t}return t.prototype.delete=function(){return g(this,void 0,void 0,(function(){return m(this,(function(t){return this.database.checkDeleted_("delete"),Ar.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},t}(),Rr=Object.freeze({__proto__:null,forceLongPolling:function(){yr.forceDisallow(),hr.forceAllow()},forceWebSockets:function(){hr.forceDisallow()},isWebSocketsAvailable:function(){return yr.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),Dr=_r;_r.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},_r.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Mr=gr,Lr=ce,Fr=Object.freeze({__proto__:null,DataConnection:Dr,RealTimeConnection:Mr,hijackHash:function(t){var e=_r.prototype.put;return _r.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){_r.prototype.put=e}},ConnectionTarget:Lr,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Ar.getInstance().forceRestClient(t)}}),jr=Pr.ServerValue;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function Ur(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}!function(t){!function(t){pr=t}(t.SDK_VERSION),t.INTERNAL.registerComponent(new it("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return Ar.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:Cr,Query:mn,Database:Pr,DataSnapshot:pn,enableLogging:qt,INTERNAL:Rr,ServerValue:jr,TEST_ACCESS:Fr}).setMultipleInstances(!0)),t.registerVersion("@firebase/database","0.6.7")}(kt);var Vr,qr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},Br=Br||{},zr=qr||self;function Wr(){}function Hr(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function Qr(t){var e=Hr(t);return"array"==e||"object"==e&&"number"==typeof t.length}function Gr(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Yr="closure_uid_"+(1e9*Math.random()>>>0),Kr=0;function $r(t,e,n){return t.call.apply(t.bind,arguments)}function Xr(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Jr(t,e,n){return(Jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$r:Xr).apply(null,arguments)}function Zr(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var ti=Date.now||function(){return+new Date};function ei(t,e){function n(){}n.prototype=e.prototype,t.M=e.prototype,t.prototype=new n,t.prototype.constructor=t}function ni(){this.j=this.j,this.i=this.i}ni.prototype.j=!1,ni.prototype.da=function(){if(!this.j&&(this.j=!0,this.C(),0))(function(t){Object.prototype.hasOwnProperty.call(t,Yr)&&t[Yr]||(t[Yr]=++Kr)})(this)},ni.prototype.C=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var ri=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ii=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function oi(t){return Array.prototype.concat.apply([],arguments)}function ai(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function si(t){return/^[\s\xa0]*$/.test(t)}var ui,ci=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function li(t,e){return-1!=t.indexOf(e)}function hi(t,e){return t<e?-1:t>e?1:0}t:{var fi=zr.navigator;if(fi){var pi=fi.userAgent;if(pi){ui=pi;break t}}ui=""}function di(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function yi(t){var e={};for(var n in t)e[n]=t[n];return e}var vi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gi(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<vi.length;o++)n=vi[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function mi(t){return mi[" "](t),t}mi[" "]=Wr;var _i,bi=li(ui,"Opera"),wi=li(ui,"Trident")||li(ui,"MSIE"),Ei=li(ui,"Edge"),Ti=Ei||wi,xi=li(ui,"Gecko")&&!(li(ui.toLowerCase(),"webkit")&&!li(ui,"Edge"))&&!(li(ui,"Trident")||li(ui,"MSIE"))&&!li(ui,"Edge"),Ci=li(ui.toLowerCase(),"webkit")&&!li(ui,"Edge");function Si(){var t=zr.document;return t?t.documentMode:void 0}t:{var Ii="",Ni=function(){var t=ui;return xi?/rv:([^\);]+)(\)|;)/.exec(t):Ei?/Edge\/([\d\.]+)/.exec(t):wi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Ci?/WebKit\/(\S+)/.exec(t):bi?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Ni&&(Ii=Ni?Ni[1]:""),wi){var ki=Si();if(null!=ki&&ki>parseFloat(Ii)){_i=String(ki);break t}}_i=Ii}var Ai,Pi={};function Oi(t){return function(t,e){var n=Pi;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=ci(String(_i)).split("."),r=ci(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=hi(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||hi(0==a[2].length,0==s[2].length)||hi(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(zr.document&&wi){var Ri=Si();Ai=Ri||(parseInt(_i,10)||void 0)}else Ai=void 0;var Di=Ai,Mi=!wi||9<=Number(Di),Li=wi&&!Oi("9"),Fi=function(){if(!zr.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{zr.addEventListener("test",Wr,e),zr.removeEventListener("test",Wr,e)}catch(t){}return t}();function ji(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Ui(t,e){if(ji.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(xi){t:{try{mi(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Vi[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ji.prototype.b=function(){this.defaultPrevented=!0},ei(Ui,ji);var Vi={2:"touch",3:"pen",4:"mouse"};Ui.prototype.b=function(){Ui.M.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Li)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var qi="closure_listenable_"+(1e6*Math.random()|0),Bi=0;function zi(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.aa=i,this.key=++Bi,this.V=this.X=!1}function Wi(t){t.V=!0,t.listener=null,t.proxy=null,t.src=null,t.aa=null}function Hi(t){this.src=t,this.a={},this.b=0}function Qi(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=ri(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Wi(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Gi(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.V&&o.listener==e&&o.capture==!!n&&o.aa==r)return i}return-1}Hi.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=Gi(t,e,r,i);return-1<a?(e=t[a],n||(e.X=!1)):((e=new zi(e,this.src,o,!!r,i)).X=n,t.push(e)),e};var Yi="closure_lm_"+(1e6*Math.random()|0),Ki={};function $i(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=io(r),e&&e[qi]?e.sa(n,r,Gr(i)?!!i.capture:!!i,o):Xi(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)$i(t,e[o],n,r,i);return null}return n=io(n),t&&t[qi]?t.ra(e,n,Gr(r)?!!r.capture:!!r,i):Xi(t,e,n,!1,r,i)}function Xi(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=Gr(i)?!!i.capture:!!i;if(a&&!Mi)return null;var s=no(t);if(s||(t[Yi]=s=new Hi(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=eo,e=Mi?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Fi||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Zi(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ji(t){if("number"!=typeof t&&t&&!t.V){var e=t.src;if(e&&e[qi])Qi(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Zi(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=no(e))?(Qi(n,t),0==n.b&&(n.src=null,e[Yi]=null)):Wi(t)}}}function Zi(t){return t in Ki?Ki[t]:Ki[t]="on"+t}function to(t,e){var n=t.listener,r=t.aa||t.src;return t.X&&Ji(t),n.call(r,e)}function eo(t,e){if(t.V)return!0;if(!Mi){if(!e)t:{e=["window","event"];for(var n=zr,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return to(t,e=new Ui(e,this))}return to(t,new Ui(e,this))}function no(t){return(t=t[Yi])instanceof Hi?t:null}var ro="__closure_events_fn_"+(1e9*Math.random()>>>0);function io(t){return"function"==Hr(t)?t:(t[ro]||(t[ro]=function(e){return t.handleEvent(e)}),t[ro])}function oo(){ni.call(this),this.c=new Hi(this),this.J=this,this.A=null}function ao(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.V&&a.capture==n){var s=a.listener,u=a.aa||a.src;a.X&&Qi(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}ei(oo,ni),oo.prototype[qi]=!0,(Vr=oo.prototype).addEventListener=function(t,e,n,r){$i(this,t,e,n,r)},Vr.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=Gr(i)?!!i.capture:!!i,r=io(r),e&&e[qi]?(e=e.c,(n=String(n).toString())in e.a&&(-1<(r=Gi(a=e.a[n],r,i,o))&&(Wi(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--)))):e&&(e=no(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Gi(n,r,i,o)),(r=-1<e?n[e]:null)&&Ji(r))}(this,t,e,n,r)},Vr.dispatchEvent=function(t){var e,n=this.A;if(n)for(e=[];n;n=n.A)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new ji(t,n);else if(t instanceof ji)t.target=t.target||n;else{var i=t;gi(t=new ji(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.a=e[o];i=ao(a,r,!0,t)&&i}if(i=ao(a=t.a=n,r,!0,t)&&i,i=ao(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=ao(a=t.a=e[o],r,!1,t)&&i;return i},Vr.C=function(){if(oo.M.C.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Wi(n[r]);delete e.a[t],e.b--}}this.A=null},Vr.ra=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Vr.sa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var so=zr.JSON.stringify;function uo(){this.b=this.a=null}var co,lo=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new fo}),(function(t){t.reset()}),100);function ho(){var t=go,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function fo(){this.next=this.b=this.a=null}function po(t){zr.setTimeout((function(){throw t}),0)}function yo(t,e){co||function(){var t=zr.Promise.resolve(void 0);co=function(){t.then(mo)}}(),vo||(co(),vo=!0),go.add(t,e)}uo.prototype.add=function(t,e){var n=lo.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},fo.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},fo.prototype.reset=function(){this.next=this.b=this.a=null};var vo=!1,go=new uo;function mo(){for(var t;t=ho();){try{t.a.call(t.b)}catch(t){po(t)}var e=lo;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}vo=!1}function _o(t,e){oo.call(this),this.b=t||1,this.a=e||zr,this.f=Jr(this.Ua,this),this.g=ti()}function bo(t){t.Z=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function wo(t,e,n){if("function"==Hr(t))n&&(t=Jr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Jr(t.handleEvent,t)}return 2147483647<Number(e)?-1:zr.setTimeout(t,e||0)}function Eo(t,e,n){ni.call(this),this.f=null!=n?Jr(t,n):t,this.c=e,this.b=Jr(this.Pa,this),this.a=[]}function To(t){t.T=wo(t.b,t.c),t.f.apply(null,t.a)}function xo(t){ni.call(this),this.b=t,this.a={}}ei(_o,oo),(Vr=_o.prototype).Z=!1,Vr.L=null,Vr.Ua=function(){if(this.Z){var t=ti()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.Z&&(bo(this),this.start()))}},Vr.start=function(){this.Z=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=ti())},Vr.C=function(){_o.M.C.call(this),bo(this),delete this.a},ei(Eo,ni),(Vr=Eo.prototype).ba=!1,Vr.T=null,Vr.Ia=function(t){this.a=arguments,this.T?this.ba=!0:To(this)},Vr.C=function(){Eo.M.C.call(this),this.T&&(zr.clearTimeout(this.T),this.T=null,this.ba=!1,this.a=[])},Vr.Pa=function(){this.T=null,this.ba&&(this.ba=!1,To(this))},ei(xo,ni);var Co=[];function So(t,e,n,r){Array.isArray(n)||(n&&(Co[0]=n.toString()),n=Co);for(var i=0;i<n.length;i++){var o=$i(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Io(t){di(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Ji(t)}),t),t.a={}}function No(){}xo.prototype.C=function(){xo.M.C.call(this),Io(this)},xo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ko=null;function Ao(){return ko=ko||new oo}function Po(t){ji.call(this,"serverreachability",t)}function Oo(t){var e=Ao();e.dispatchEvent(new Po(e,t))}function Ro(t){ji.call(this,"statevent",t)}function Do(t){var e=Ao();e.dispatchEvent(new Ro(e,t))}function Mo(t){ji.call(this,"timingevent",t)}function Lo(t,e){if("function"!=Hr(t))throw Error("Fn must not be null and must be a function");return zr.setTimeout((function(){t()}),e)}ei(Po,ji),ei(Ro,ji),ei(Mo,ji);var Fo={NO_ERROR:0,Va:1,bb:2,ab:3,Ya:4,$a:5,cb:6,za:7,TIMEOUT:8,gb:9},jo={Xa:"complete",kb:"success",Aa:"error",za:"abort",ib:"ready",jb:"readystatechange",TIMEOUT:"timeout",eb:"incrementaldata",hb:"progress",Za:"downloadprogress",lb:"uploadprogress"};function Uo(){}function Vo(t){var e;return(e=t.a)||(e=t.a={}),e}function qo(){}Uo.prototype.a=null;var Bo,zo={OPEN:"a",Wa:"b",Aa:"c",fb:"d"};function Wo(){ji.call(this,"d")}function Ho(){ji.call(this,"c")}function Qo(){}function Go(t,e,n){this.g=t,this.W=e,this.U=n||1,this.G=new xo(this),this.N=Yo,t=Ti?125:void 0,this.O=new _o(t),this.m=null,this.b=!1,this.j=this.A=this.f=this.B=this.s=this.P=this.h=null,this.i=[],this.a=null,this.w=0,this.c=this.v=null,this.H=-1,this.l=!1,this.J=0,this.D=null,this.o=this.R=this.F=!1}ei(Wo,ji),ei(Ho,ji),ei(Qo,Uo),Bo=new Qo;var Yo=45e3,Ko={},$o={};function Xo(t,e,n){t.B=1,t.f=_a(pa(e)),t.j=n,t.F=!0,Jo(t,null)}function Jo(t,e){t.s=ti(),ea(t),t.A=pa(t.f);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),Oa(n.b,"t",r),t.w=0,t.a=Ts(t.g,t.g.w?e:null),0<t.J&&(t.D=new Eo(Jr(t.ya,t,t.a),t.J)),So(t.G,t.a,"readystatechange",t.Sa),e=t.m?yi(t.m):{},t.j?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.$(t.A,t.v,t.j,e)):(t.v="GET",t.a.$(t.A,t.v,null,e)),Oo(1)}function Zo(t,e,n){for(var r=!0;!t.l&&t.w<n.length;){var i=ta(t,n);if(i==$o){4==e&&(t.c=4,Do(14),r=!1);break}if(i==Ko){t.c=4,Do(15),r=!1;break}aa(t,i)}4==e&&0==n.length&&(t.c=1,Do(16),r=!1),t.b=t.b&&r,r||(oa(t),ia(t))}function ta(t,e){var n=t.w,r=e.indexOf("\n",n);return-1==r?$o:(n=Number(e.substring(n,r)),isNaN(n)?Ko:(r+=1)+n>e.length?$o:(e=e.substr(r,n),t.w=r+n,e))}function ea(t){t.P=ti()+t.N,na(t,t.N)}function na(t,e){if(null!=t.h)throw Error("WatchDog timer not null");t.h=Lo(Jr(t.Qa,t),e)}function ra(t){t.h&&(zr.clearTimeout(t.h),t.h=null)}function ia(t){0==t.g.u||t.l||ms(t.g,t)}function oa(t){ra(t);var e=t.D;e&&"function"==typeof e.da&&e.da(),t.D=null,bo(t.O),Io(t.G),t.a&&(e=t.a,t.a=null,e.abort(),e.da())}function aa(t,e){try{var n=t.g;if(0!=n.u&&(n.a==t||Ua(n.b,t)))if(n.A=t.H,!t.o&&Ua(n.b,t)&&3==n.u){try{var r=n.ja.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.i){if(n.a){if(!(n.a.s+3e3<t.s))break t;gs(n),n.a.cancel(),n.a=null}vs(n),Do(18)}}else n.ia=i[1],0<n.ia-n.G&&37500>i[2]&&n.U&&0==n.m&&!n.l&&(n.l=Lo(Jr(n.Na,n),6e3));if(1>=ja(n.b)&&n.O){try{n.O()}catch(t){}n.O=void 0}}else bs(n,11)}else if((t.o||n.a==t)&&gs(n),!si(e))for(e=r=n.ja.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.G=i[0],i=i[1],2==n.u)if("c"==i[0]){n.B=i[1],n.R=i[2];var o=i[3];null!=o&&(n.oa=o);var a=i[5];null!=a&&"number"==typeof a&&0<a&&(n.D=1.5*a);var s=n,u=t.a;if(u){var c=u.a?u.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var l=s.b;!l.a&&(li(c,"spdy")||li(c,"quic")||li(c,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(Va(l,l.b),l.b=null))}if(s.s){var h=u.a?u.a.getResponseHeader("X-HTTP-Session-Id"):null;h&&(s.ha=h,ma(s.v,s.s,h))}}n.u=3,n.c&&n.c.na();var f=t;if((s=n).ea=Es(s,s.w?s.R:null,s.P),f.o){qa(s.b,f);var p=f,d=s.D;d&&p.setTimeout(d),p.h&&(ra(p),ea(p)),s.a=f}else ys(s);0<n.f.length&&hs(n)}else"stop"!=i[0]&&"close"!=i[0]||bs(n,7);else 3==n.u&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?bs(n,7):us(n):"noop"!=i[0]&&n.c&&n.c.ma(i),n.m=0);Oo(4)}catch(t){}}function sa(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Qr(t)||"string"==typeof t)ii(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.I&&"function"==typeof t.I)n=void 0;else if(Qr(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.I&&"function"==typeof t.I)return t.I();if("string"==typeof t)return t.split("");if(Qr(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ua(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ua)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function ca(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];la(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)la(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function la(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Vr=Go.prototype).setTimeout=function(t){this.N=t},Vr.Sa=function(t){t=t.target;var e=this.D;e&&3==is(t)?e.Ia():this.ya(t)},Vr.ya=function(t){try{if(t==this.a)t:{var e=is(this.a),n=this.a.qa(),r=this.a.S();if(!(3>e||3==e&&!Ti&&!this.a.Y())){this.l||4!=e||7==n||Oo(8==n||0>=r?3:2),ra(this);var i=this.a.S();this.H=i;var o=this.a.Y();if(this.b=200==i){if(this.R&&!this.o){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!si(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.c=3,Do(12),oa(this),ia(this);break t}this.o=!0,aa(this,u)}this.F?(Zo(this,e,o),Ti&&this.b&&3==e&&(So(this.G,this.O,"tick",this.Ra),this.O.start())):aa(this,o),4==e&&oa(this),this.b&&!this.l&&(4==e?ms(this.g,this):(this.b=!1,ea(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Do(12)):(this.c=0,Do(13)),oa(this),ia(this)}}}catch(t){}},Vr.Ra=function(){if(this.a){var t=is(this.a),e=this.a.Y();this.w<e.length&&(ra(this),Zo(this,t,e),this.b&&4!=t&&ea(this))}},Vr.cancel=function(){this.l=!0,oa(this)},Vr.Qa=function(){this.h=null;var t=ti();0<=t-this.P?(2!=this.B&&(Oo(3),Do(17)),oa(this),this.c=2,ia(this)):na(this,this.P-t)},(Vr=ua.prototype).I=function(){ca(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Vr.K=function(){return ca(this),this.a.concat()},Vr.get=function(t,e){return la(this.b,t)?this.b[t]:e},Vr.set=function(t,e){la(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Vr.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ha=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function fa(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof fa){this.a=void 0!==e?e:t.a,da(this,t.f),this.j=t.j,ya(this,t.c),va(this,t.h),this.g=t.g,e=t.b;var n=new Na;n.c=e.c,e.a&&(n.a=new ua(e.a),n.b=e.b),ga(this,n),this.i=t.i}else t&&(n=String(t).match(ha))?(this.a=!!e,da(this,n[1]||"",!0),this.j=ba(n[2]||""),ya(this,n[3]||"",!0),va(this,n[4]),this.g=ba(n[5]||"",!0),ga(this,n[6]||"",!0),this.i=ba(n[7]||"")):(this.a=!!e,this.b=new Na(null,this.a))}function pa(t){return new fa(t)}function da(t,e,n){t.f=n?ba(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function ya(t,e,n){t.c=n?ba(e,!0):e}function va(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function ga(t,e,n){e instanceof Na?(t.b=e,function(t,e){e&&!t.f&&(ka(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Aa(this,e),Oa(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=wa(e,Sa)),t.b=new Na(e,t.a))}function ma(t,e,n){t.b.set(e,n)}function _a(t){return ma(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ti()).toString(36)),t}function ba(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function wa(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ea),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ea(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}fa.prototype.toString=function(){var t=[],e=this.f;e&&t.push(wa(e,Ta,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(wa(e,Ta,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(wa(n,"/"==n.charAt(0)?Ca:xa,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",wa(n,Ia)),t.join("")};var Ta=/[#\/\?@]/g,xa=/[#\?:]/g,Ca=/[#\?]/g,Sa=/[#\?@]/g,Ia=/#/g;function Na(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function ka(t){t.a||(t.a=new ua,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Aa(t,e){ka(t),e=Ra(t,e),la(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,la((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&ca(t)))}function Pa(t,e){return ka(t),e=Ra(t,e),la(t.a.b,e)}function Oa(t,e,n){Aa(t,e),0<n.length&&(t.c=null,t.a.set(Ra(t,e),ai(n)),t.b+=n.length)}function Ra(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Da(t,e){this.b=t,this.a=e}function Ma(t){this.g=t||La,zr.PerformanceNavigationTiming?t=0<(t=zr.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(zr.ca&&zr.ca.ua&&zr.ca.ua()&&zr.ca.ua().mb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(Vr=Na.prototype).add=function(t,e){ka(this),this.c=null,t=Ra(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Vr.forEach=function(t,e){ka(this),this.a.forEach((function(n,r){ii(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Vr.K=function(){ka(this);for(var t=this.a.I(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Vr.I=function(t){ka(this);var e=[];if("string"==typeof t)Pa(this,t)&&(e=oi(e,this.a.get(Ra(this,t))));else{t=this.a.I();for(var n=0;n<t.length;n++)e=oi(e,t[n])}return e},Vr.set=function(t,e){return ka(this),this.c=null,Pa(this,t=Ra(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Vr.get=function(t,e){return t&&0<(t=this.I(t)).length?String(t[0]):e},Vr.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.I(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var La=10;function Fa(t){return!!t.b||!!t.a&&t.a.size>=t.f}function ja(t){return t.b?1:t.a?t.a.size:0}function Ua(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Va(t,e){t.a?t.a.add(e):t.b=e}function qa(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Ba(t){var e,n;if(null!=t.b)return t.c.concat(t.b.i);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Ur(t.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.i)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return ai(t.c)}function za(){}function Wa(){this.a=new za}function Ha(t,e,n){var r=n||"";try{sa(t,(function(t,n){var i=t;Gr(t)&&(i=so(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Qa(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Ma.prototype.cancel=function(){var t,e;if(this.c=Ba(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Ur(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},za.prototype.stringify=function(t){return zr.JSON.stringify(t,void 0)},za.prototype.parse=function(t){return zr.JSON.parse(t,void 0)};var Ga=zr.JSON.parse;function Ya(t){oo.call(this),this.headers=new ua,this.G=t||null,this.b=!1,this.s=this.a=null,this.D="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.H=Ka,this.B=this.F=!1}ei(Ya,oo);var Ka="",$a=/^https?$/i,Xa=["POST","PUT"];function Ja(t){return"content-type"==t.toLowerCase()}function Za(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,ts(t),ns(t)}function ts(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function es(t){if(t.b&&void 0!==Br&&(!t.s[1]||4!=is(t)||2!=t.S()))if(t.l&&4==is(t))wo(t.va,0,t);else if(t.dispatchEvent("readystatechange"),4==is(t)){t.b=!1;try{var e,n=t.S();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.D).match(ha)[1]||null;if(!o&&zr.self&&zr.self.location){var a=zr.self.location.protocol;o=a.substr(0,a.length-1)}i=!$a.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var s=2<is(t)?t.a.statusText:""}catch(t){s=""}t.f=s+" ["+t.S()+"]",ts(t)}}finally{ns(t)}}}function ns(t,e){if(t.a){rs(t);var n=t.a,r=t.s[0]?Wr:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function rs(t){t.a&&t.B&&(t.a.ontimeout=null),t.m&&(zr.clearTimeout(t.m),t.m=null)}function is(t){return t.a?t.a.readyState:0}function os(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return di(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ma(t,e,n))}function as(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ss(t){this.f=[],this.R=this.ea=this.v=this.P=this.a=this.ha=this.s=this.N=this.h=this.F=this.j=null,this.Fa=this.H=0,this.Ca=as("failFast",!1,t),this.U=this.l=this.i=this.g=this.c=null,this.W=!0,this.A=this.ia=this.G=-1,this.J=this.m=this.o=0,this.Ba=as("baseRetryDelayMs",5e3,t),this.Ga=as("retryDelaySeedMs",1e4,t),this.Da=as("forwardChannelMaxRetries",2,t),this.ga=as("forwardChannelRequestTimeoutMs",2e4,t),this.Ea=t&&t.nb||void 0,this.D=void 0,this.w=t&&t.supportsCrossDomainXhr||!1,this.B="",this.b=new Ma(t&&t.concurrentRequestLimit),this.ja=new Wa,this.fa=t&&t.fastHandshake||!1,t&&t.forceLongPolling&&(this.W=!1),this.O=void 0}function us(t){if(cs(t),3==t.u){var e=t.H++,n=pa(t.v);ma(n,"SID",t.B),ma(n,"RID",e),ma(n,"TYPE","terminate"),ps(t,n),(e=new Go(t,e,void 0)).B=2,e.f=_a(pa(n)),n=!1,zr.navigator&&zr.navigator.sendBeacon&&(n=zr.navigator.sendBeacon(e.f.toString(),"")),!n&&zr.Image&&((new Image).src=e.f,n=!0),n||(e.a=Ts(e.g,null),e.a.$(e.f)),e.s=ti(),ea(e)}ws(t)}function cs(t){t.a&&(t.a.cancel(),t.a=null),t.i&&(zr.clearTimeout(t.i),t.i=null),gs(t),t.b.cancel(),t.g&&("number"==typeof t.g&&zr.clearTimeout(t.g),t.g=null)}function ls(t,e){t.f.push(new Da(t.Fa++,e)),3==t.u&&hs(t)}function hs(t){Fa(t.b)||t.g||(t.g=!0,yo(t.xa,t),t.o=0)}function fs(t,e){var n;n=e?e.W:t.H++;var r=pa(t.v);ma(r,"SID",t.B),ma(r,"RID",n),ma(r,"AID",t.G),ps(t,r),t.h&&t.j&&os(r,t.h,t.j),n=new Go(t,n,t.o+1),null===t.h&&(n.m=t.j),e&&(t.f=e.i.concat(t.f)),e=ds(t,n,1e3),n.setTimeout(Math.round(.5*t.ga)+Math.round(.5*t.ga*Math.random())),Va(t.b,n),Xo(n,r,e)}function ps(t,e){t.c&&sa({},(function(t,n){ma(e,n,t)}))}function ds(t,e,n){n=Math.min(t.f.length,n);var r=t.c?Jr(t.c.Ha,t.c,t):null;t:for(var i=t.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{Ha(l,a,"req"+c+"_")}catch(t){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.f.splice(0,n),e.i=t,r}function ys(t){t.a||t.i||(t.J=1,yo(t.wa,t),t.m=0)}function vs(t){return!(t.a||t.i||3<=t.m)&&(t.J++,t.i=Lo(Jr(t.wa,t),_s(t,t.m)),t.m++,!0)}function gs(t){null!=t.l&&(zr.clearTimeout(t.l),t.l=null)}function ms(t,e){var n=null;if(t.a==e){gs(t),t.a=null;var r=2}else{if(!Ua(t.b,e))return;n=e.i,qa(t.b,e),r=1}if(t.A=e.H,0!=t.u)if(e.b)if(1==r){n=e.j?e.j.length:0,e=ti()-e.s;var i=t.o;(r=Ao()).dispatchEvent(new Mo(r,n,e,i)),hs(t)}else ys(t);else if(3==(i=e.c)||0==i&&0<t.A||!(1==r&&function(t,e){return!(ja(t.b)>=t.b.f-(t.g?1:0))&&(t.g?(t.f=e.i.concat(t.f),!0):!(1==t.u||2==t.u||t.o>=(t.Ca?0:t.Da))&&(t.g=Lo(Jr(t.xa,t,e),_s(t,t.o)),t.o++,!0))}(t,e)||2==r&&vs(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:bs(t,5);break;case 4:bs(t,10);break;case 3:bs(t,6);break;default:bs(t,2)}}function _s(t,e){var n=t.Ba+Math.floor(Math.random()*t.Ga);return t.c||(n*=2),n*e}function bs(t,e){if(2==e){var n=null;t.c&&(n=null);var r=Jr(t.Ta,t);n||(n=new fa("//www.google.com/images/cleardot.gif"),zr.location&&"http"==zr.location.protocol||da(n,"https"),_a(n)),function(t,e){var n=new No;if(zr.Image){var r=new Image;r.onload=Zr(Qa,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Zr(Qa,n,r,"TestLoadImage: error",!1,e),r.onabort=Zr(Qa,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Zr(Qa,n,r,"TestLoadImage: timeout",!1,e),zr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Do(2);t.u=0,t.c&&t.c.la(e),ws(t),cs(t)}function ws(t){t.u=0,t.A=-1,t.c&&(0==Ba(t.b).length&&0==t.f.length||(t.b.c.length=0,ai(t.f),t.f.length=0),t.c.ka())}function Es(t,e,n){var r=function(t){return t instanceof fa?pa(t):new fa(t,void 0)}(n);if(""!=r.c)e&&ya(r,e+"."+r.c),va(r,r.h);else{var i=zr.location;r=function(t,e,n,r){var i=new fa(null,void 0);return t&&da(i,t),e&&ya(i,e),n&&va(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.N&&di(t.N,(function(t,e){ma(r,e,t)})),e=t.s,n=t.ha,e&&n&&ma(r,e,n),ma(r,"VER",t.oa),ps(t,r),r}function Ts(t,e){if(e&&!t.w)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ya(t.Ea)).F=t.w,e}function xs(){}function Cs(){if(wi&&!(10<=Number(Di)))throw Error("Environmental error: no available transport.")}function Ss(t,e){oo.call(this),this.a=new ss(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.j=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.pa&&(t?t["X-WebChannel-Client-Profile"]=e.pa:t={"X-WebChannel-Client-Profile":e.pa}),this.a.F=t,(t=e&&e.httpHeadersOverwriteParam)&&!si(t)&&(this.a.h=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!si(e)&&(this.a.s=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new ks(this)}function Is(t){Wo.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Ns(){Ho.call(this),this.status=1}function ks(t){this.a=t}(Vr=Ya.prototype).$=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.G?Vo(this.G):Vo(Bo),this.a.onreadystatechange=Jr(this.va,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void Za(this,t)}t=n||"";var i=new ua(this.headers);r&&sa(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Ja,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.K()),n=zr.FormData&&t instanceof zr.FormData,!(0<=ri(Xa,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.H&&(this.a.responseType=this.H),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{rs(this),0<this.o&&((this.B=function(t){return wi&&Oi(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Jr(this.ta,this)):this.m=wo(this.ta,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Za(this,t)}},Vr.ta=function(){void 0!==Br&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},Vr.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ns(this))},Vr.C=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),ns(this,!0)),Ya.M.C.call(this)},Vr.va=function(){this.j||(this.w||this.l||this.g?es(this):this.Oa())},Vr.Oa=function(){es(this)},Vr.S=function(){try{return 2<is(this)?this.a.status:-1}catch(t){return-1}},Vr.Y=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Vr.Ja=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ga(e)}},Vr.qa=function(){return this.h},Vr.Ma=function(){return"string"==typeof this.f?this.f:String(this.f)},(Vr=ss.prototype).oa=8,Vr.u=1,Vr.xa=function(t){if(this.g)if(this.g=null,1==this.u){if(!t){this.H=Math.floor(1e5*Math.random());var e,n=new Go(this,t=this.H++,void 0),r=this.j;if(this.F&&(r?gi(r=yi(r),this.F):r=this.F),null===this.h&&(n.m=r),this.fa)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ds(this,n,e),ma(i=pa(this.v),"RID",t),ma(i,"CVER",22),this.s&&ma(i,"X-HTTP-Session-Id",this.s),ps(this,i),this.h&&r&&os(i,this.h,r),Va(this.b,n),this.fa?(ma(i,"$req",e),ma(i,"SID","null"),n.R=!0,Xo(n,i,null)):Xo(n,i,e),this.u=2}}else 3==this.u&&(t?fs(this,t):0==this.f.length||Fa(this.b)||fs(this))},Vr.wa=function(){this.i=null,this.a=new Go(this,"rpc",this.J),null===this.h&&(this.a.m=this.j),this.a.J=0;var t=pa(this.ea);ma(t,"RID","rpc"),ma(t,"SID",this.B),ma(t,"CI",this.U?"0":"1"),ma(t,"AID",this.G),ps(this,t),ma(t,"TYPE","xmlhttp"),this.h&&this.j&&os(t,this.h,this.j),this.D&&this.a.setTimeout(this.D);var e=this.a,n=this.R;e.B=1,e.f=_a(pa(t)),e.j=null,e.F=!0,Jo(e,n)},Vr.Na=function(){null!=this.l&&(this.l=null,this.a.cancel(),this.a=null,vs(this),Do(19))},Vr.Ta=function(t){Do(t?2:1)},(Vr=xs.prototype).na=function(){},Vr.ma=function(){},Vr.la=function(){},Vr.ka=function(){},Vr.Ha=function(){},Cs.prototype.a=function(t,e){return new Ss(t,e)},ei(Ss,oo),(Vr=Ss.prototype).addEventListener=function(t,e,n,r){Ss.M.addEventListener.call(this,t,e,n,r)},Vr.removeEventListener=function(t,e,n,r){Ss.M.removeEventListener.call(this,t,e,n,r)},Vr.Ka=function(){this.a.c=this.f,this.h&&(this.a.w=!0);var t=this.a,e=this.l,n=this.b||void 0;Do(0),t.P=e,t.N=n||{},t.U=t.W,t.v=Es(t,null,t.P),hs(t)},Vr.close=function(){us(this.a)},Vr.La=function(t){if("string"==typeof t){var e={};e.__data__=t,ls(this.a,e)}else this.g?((e={}).__data__=so(t),ls(this.a,e)):ls(this.a,t)},Vr.C=function(){this.a.c=null,delete this.f,us(this.a),delete this.a,Ss.M.C.call(this)},ei(Is,Wo),ei(Ns,Ho),ei(ks,xs),ks.prototype.na=function(){this.a.dispatchEvent("a")},ks.prototype.ma=function(t){this.a.dispatchEvent(new Is(t))},ks.prototype.la=function(t){this.a.dispatchEvent(new Ns(t))},ks.prototype.ka=function(){this.a.dispatchEvent("b")},Cs.prototype.createWebChannel=Cs.prototype.a,Ss.prototype.send=Ss.prototype.La,Ss.prototype.open=Ss.prototype.Ka,Ss.prototype.close=Ss.prototype.close,Fo.NO_ERROR=0,Fo.TIMEOUT=8,Fo.HTTP_ERROR=6,jo.COMPLETE="complete",qo.EventType=zo,zo.OPEN="a",zo.CLOSE="b",zo.ERROR="c",zo.MESSAGE="d",oo.prototype.listen=oo.prototype.ra,Ya.prototype.listenOnce=Ya.prototype.sa,Ya.prototype.getLastError=Ya.prototype.Ma,Ya.prototype.getLastErrorCode=Ya.prototype.qa,Ya.prototype.getStatus=Ya.prototype.S,Ya.prototype.getResponseJson=Ya.prototype.Ja,Ya.prototype.getResponseText=Ya.prototype.Y,Ya.prototype.send=Ya.prototype.$;var As={createWebChannelTransport:function(){return new Cs},ErrorCode:Fo,EventType:jo,WebChannel:qo,XhrIo:Ya},Ps=As.createWebChannelTransport,Os=As.ErrorCode,Rs=As.EventType,Ds=As.WebChannel,Ms=As.XhrIo,Ls=kt.SDK_VERSION,Fs=new vt("@firebase/firestore");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function js(){return Fs.logLevel}function Us(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fs.logLevel<=ct.DEBUG){var r=e.map(qs);Fs.debug.apply(Fs,E(["Firestore ("+Ls+"): "+t],r))}}function Vs(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fs.logLevel<=ct.ERROR){var r=e.map(qs);Fs.error.apply(Fs,E(["Firestore ("+Ls+"): "+t],r))}}function qs(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE ("+Ls+") INTERNAL ASSERTION FAILED: "+t;throw Vs(e),new Error(e)}function zs(t,e){t||Bs()}function Ws(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qs=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Hs(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Gs(t,e){return t<e?-1:t>e?1:0}function Ys(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Ks(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $s=function(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},Xs=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.o=function(t){return Gs(this.projectId,t.projectId)||Gs(this.database,t.database)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zs(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tu(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eu=function(){function t(t,e){this.h=t,this.u=e,this.l={}}return t.prototype.get=function(t){var e=this.h(t),n=this.l[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.u(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.h(t),r=this.l[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.u(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.l[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.h(t),n=this.l[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.u(n[r][0],t))return 1===n.length?delete this.l[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Zs(this.l,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype._=function(){return tu(this.l)},t}(),nu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ru=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return y(e,t),e}(Error),iu=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ru(nu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ru(nu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ru(nu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ru(nu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.T=function(t){return this.seconds===t.seconds?Gs(this.nanoseconds,t.nanoseconds):Gs(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ou=function(){function t(t){this.timestamp=t}return t.I=function(e){return new t(e)},t.min=function(){return new t(new iu(0,0))},t.prototype.o=function(t){return this.timestamp.T(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.m=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.A=function(){return this.timestamp},t}(),au=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Bs(),void 0===n?n=t.length-e:n>t.length-e&&Bs(),this.segments=t,this.offset=e,this.R=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.R},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.P(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.V(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.g=function(t){return t=void 0===t?1:t,this.V(this.segments,this.offset+t,this.length-t)},t.prototype.p=function(){return this.V(this.segments,this.offset,this.length-1)},t.prototype.v=function(){return this.segments[this.offset]},t.prototype.S=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype._=function(){return 0===this.length},t.prototype.D=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.C=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.F=function(){return this.segments.slice(this.offset,this.limit())},t.P=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),su=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.V=function(t,n,r){return new e(t,n,r)},e.prototype.N=function(){return this.F().join("/")},e.prototype.toString=function(){return this.N()},e.$=function(t){if(t.indexOf("//")>=0)throw new ru(nu.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e.k=function(){return new e([])},e}(au),uu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,cu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.V=function(t,n,r){return new e(t,n,r)},e.M=function(t){return uu.test(t)},e.prototype.N=function(){return this.F().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.M(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.N()},e.prototype.O=function(){return 1===this.length&&"__name__"===this.get(0)},e.L=function(){return new e(["__name__"])},e.B=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new ru(nu.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new ru(nu.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ru(nu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new ru(nu.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.k=function(){return new e([])},e}(au),lu=function(){function t(t){this.path=t}return t.q=function(e){return new t(su.$(e).g(5))},t.prototype.U=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===su.P(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.P=function(t,e){return su.P(t.path,e.path)},t.W=function(t){return t.length%2==0},t.j=function(e){return new t(new su(e.slice()))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t){return null==t}function fu(t){return-0===t&&1/t==-1/0}function pu(t){return"number"==typeof t&&Number.isInteger(t)&&!fu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var du=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.K=null};function yu(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new du(t,e,n,r,i,o,a)}function vu(t){var e=Ws(t);if(null===e.K){var n=e.path.N();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.N()+t.op.toString()+sc(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.N()+e.dir;var e})).join(","),hu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Hl(e.startAt)),e.endAt&&(n+="|ub:",n+=Hl(e.endAt)),e.K=n}return e.K}function gu(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!$l(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],!(i instanceof jl&&o instanceof jl&&i.op===o.op&&i.field.isEqual(o.field)&&rc(i.value,o.value)))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Gl(t.startAt,e.startAt)&&Gl(t.endAt,e.endAt)}function mu(t){return lu.W(t.path)&&null===t.collectionGroup&&0===t.filters.length}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _u=function(){function t(t){this.G=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.G,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.G)},t.prototype.H=function(){return 2*this.G.length},t.prototype.o=function(t){return Gs(this.G,t.G)},t.prototype.isEqual=function(t){return this.G===t.G},t}();_u.Y=new _u("");var bu,wu,Eu=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=ou.min()),void 0===o&&(o=ou.min()),void 0===a&&(a=_u.Y),this.target=t,this.targetId=e,this.J=n,this.sequenceNumber=r,this.X=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.Z=function(e){return new t(this.target,this.targetId,this.J,e,this.X,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.tt=function(e,n){return new t(this.target,this.targetId,this.J,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.et=function(e){return new t(this.target,this.targetId,this.J,this.sequenceNumber,this.X,e,this.resumeToken)},t}(),Tu=function(t){this.count=t};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t){switch(t){case nu.OK:return Bs();case nu.CANCELLED:case nu.UNKNOWN:case nu.DEADLINE_EXCEEDED:case nu.RESOURCE_EXHAUSTED:case nu.INTERNAL:case nu.UNAVAILABLE:case nu.UNAUTHENTICATED:return!1;case nu.INVALID_ARGUMENT:case nu.NOT_FOUND:case nu.ALREADY_EXISTS:case nu.PERMISSION_DENIED:case nu.FAILED_PRECONDITION:case nu.ABORTED:case nu.OUT_OF_RANGE:case nu.UNIMPLEMENTED:case nu.DATA_LOSS:return!0;default:return Bs()}}function Cu(t){if(void 0===t)return Vs("GRPC error has no .code"),nu.UNKNOWN;switch(t){case bu.OK:return nu.OK;case bu.CANCELLED:return nu.CANCELLED;case bu.UNKNOWN:return nu.UNKNOWN;case bu.DEADLINE_EXCEEDED:return nu.DEADLINE_EXCEEDED;case bu.RESOURCE_EXHAUSTED:return nu.RESOURCE_EXHAUSTED;case bu.INTERNAL:return nu.INTERNAL;case bu.UNAVAILABLE:return nu.UNAVAILABLE;case bu.UNAUTHENTICATED:return nu.UNAUTHENTICATED;case bu.INVALID_ARGUMENT:return nu.INVALID_ARGUMENT;case bu.NOT_FOUND:return nu.NOT_FOUND;case bu.ALREADY_EXISTS:return nu.ALREADY_EXISTS;case bu.PERMISSION_DENIED:return nu.PERMISSION_DENIED;case bu.FAILED_PRECONDITION:return nu.FAILED_PRECONDITION;case bu.ABORTED:return nu.ABORTED;case bu.OUT_OF_RANGE:return nu.OUT_OF_RANGE;case bu.UNIMPLEMENTED:return nu.UNIMPLEMENTED;case bu.DATA_LOSS:return nu.DATA_LOSS;default:return Bs()}}(wu=bu||(bu={}))[wu.OK=0]="OK",wu[wu.CANCELLED=1]="CANCELLED",wu[wu.UNKNOWN=2]="UNKNOWN",wu[wu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wu[wu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wu[wu.NOT_FOUND=5]="NOT_FOUND",wu[wu.ALREADY_EXISTS=6]="ALREADY_EXISTS",wu[wu.PERMISSION_DENIED=7]="PERMISSION_DENIED",wu[wu.UNAUTHENTICATED=16]="UNAUTHENTICATED",wu[wu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wu[wu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wu[wu.ABORTED=10]="ABORTED",wu[wu.OUT_OF_RANGE=11]="OUT_OF_RANGE",wu[wu.UNIMPLEMENTED=12]="UNIMPLEMENTED",wu[wu.INTERNAL=13]="INTERNAL",wu[wu.UNAVAILABLE=14]="UNAVAILABLE",wu[wu.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Su=function(){function t(t,e){this.P=t,this.root=e||Nu.EMPTY}return t.prototype.nt=function(e,n){return new t(this.P,this.root.nt(e,n,this.P).copy(null,null,Nu.st,null,null))},t.prototype.remove=function(e){return new t(this.P,this.root.remove(e,this.P).copy(null,null,Nu.st,null,null))},t.prototype.get=function(t){for(var e=this.root;!e._();){var n=this.P(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n._();){var r=this.P(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype._=function(){return this.root._()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.it=function(){return this.root.it()},t.prototype.rt=function(){return this.root.rt()},t.prototype.ot=function(t){return this.root.ot(t)},t.prototype.forEach=function(t){this.ot((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ot((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.at=function(){return new Iu(this.root,null,this.P,!1)},t.prototype.ut=function(t){return new Iu(this.root,t,this.P,!1)},t.prototype.ct=function(){return new Iu(this.root,null,this.P,!0)},t.prototype.lt=function(t){return new Iu(this.root,t,this.P,!0)},t}(),Iu=function(){function t(t,e,n,r){this._t=r,this.ft=[];for(var i=1;!t._();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this._t?t.left:t.right;else{if(0===i){this.ft.push(t);break}this.ft.push(t),t=this._t?t.right:t.left}}return t.prototype.dt=function(){var t=this.ft.pop(),e={key:t.key,value:t.value};if(this._t)for(t=t.left;!t._();)this.ft.push(t),t=t.right;else for(t=t.right;!t._();)this.ft.push(t),t=t.left;return e},t.prototype.wt=function(){return this.ft.length>0},t.prototype.Tt=function(){if(0===this.ft.length)return null;var t=this.ft[this.ft.length-1];return{key:t.key,value:t.value}},t}(),Nu=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype._=function(){return!1},t.prototype.ot=function(t){return this.left.ot(t)||t(this.key,this.value)||this.right.ot(t)},t.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},t.prototype.min=function(){return this.left._()?this:this.left.min()},t.prototype.it=function(){return this.min().key},t.prototype.rt=function(){return this.right._()?this.key:this.right.rt()},t.prototype.nt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.nt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.nt(t,e,n))).Et()},t.prototype.It=function(){if(this.left._())return t.EMPTY;var e=this;return e.left.At()||e.left.left.At()||(e=e.Rt()),(e=e.copy(null,null,null,e.left.It(),null)).Et()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left._()||i.left.At()||i.left.left.At()||(i=i.Rt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.At()&&(i=i.Pt()),i.right._()||i.right.At()||i.right.left.At()||(i=i.Vt()),0===n(e,i.key)){if(i.right._())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.It())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Et()},t.prototype.At=function(){return this.color},t.prototype.Et=function(){var t=this;return t.right.At()&&!t.left.At()&&(t=t.gt()),t.left.At()&&t.left.left.At()&&(t=t.Pt()),t.left.At()&&t.right.At()&&(t=t.yt()),t},t.prototype.Rt=function(){var t=this.yt();return t.right.left.At()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Pt())).gt()).yt()),t},t.prototype.Vt=function(){var t=this.yt();return t.left.left.At()&&(t=(t=t.Pt()).yt()),t},t.prototype.gt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Pt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.yt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.pt=function(){var t=this.bt();return Math.pow(2,t)<=this.size+1},t.prototype.bt=function(){if(this.At()&&this.left.At())throw Bs();if(this.right.At())throw Bs();var t=this.left.bt();if(t!==this.right.bt())throw Bs();return t+(this.At()?0:1)},t}();Nu.EMPTY=null,Nu.RED=!0,Nu.st=!1,Nu.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Bs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Bs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Bs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Bs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Bs()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.nt=function(t,e,n){return new Nu(t,e)},t.prototype.remove=function(t,e){return this},t.prototype._=function(){return!0},t.prototype.ot=function(t){return!1},t.prototype.ht=function(t){return!1},t.prototype.it=function(){return null},t.prototype.rt=function(){return null},t.prototype.At=function(){return!1},t.prototype.pt=function(){return!0},t.prototype.bt=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ku=function(){function t(t){this.P=t,this.data=new Su(this.P)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.it()},t.prototype.last=function(){return this.data.rt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ot((function(e,n){return t(e),!1}))},t.prototype.vt=function(t,e){for(var n=this.data.ut(t[0]);n.wt();){var r=n.dt();if(this.P(r.key,t[1])>=0)return;e(r.key)}},t.prototype.St=function(t,e){var n;for(n=void 0!==e?this.data.ut(e):this.data.at();n.wt();)if(!t(n.dt().key))return},t.prototype.Dt=function(t){var e=this.data.ut(t);return e.wt()?e.dt().key:null},t.prototype.at=function(){return new Au(this.data.at())},t.prototype.ut=function(t){return new Au(this.data.ut(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).nt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype._=function(){return this.data._()},t.prototype.Ct=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.at(),r=e.data.at();n.wt();){var i=n.dt().key,o=r.dt().key;if(0!==this.P(i,o))return!1}return!0},t.prototype.F=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.P);return n.data=e,n},t}(),Au=function(){function t(t){this.Ft=t}return t.prototype.dt=function(){return this.Ft.dt().key},t.prototype.wt=function(){return this.Ft.wt()},t}(),Pu=new Su(lu.P);function Ou(){return Pu}function Ru(){return Ou()}var Du=new Su(lu.P);function Mu(){return Du}var Lu=new Su(lu.P),Fu=new ku(lu.P);function ju(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Fu,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Uu=new ku(Gs);function Vu(){return Uu}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qu=function(){function t(t){this.P=t?function(e,n){return t(e,n)||lu.P(e.key,n.key)}:function(t,e){return lu.P(t.key,e.key)},this.Nt=Mu(),this.$t=new Su(this.P)}return t.kt=function(e){return new t(e.P)},t.prototype.has=function(t){return null!=this.Nt.get(t)},t.prototype.get=function(t){return this.Nt.get(t)},t.prototype.first=function(){return this.$t.it()},t.prototype.last=function(){return this.$t.rt()},t.prototype._=function(){return this.$t._()},t.prototype.indexOf=function(t){var e=this.Nt.get(t);return e?this.$t.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.$t.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.$t.ot((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Nt.nt(t.key,t),e.$t.nt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Nt.remove(t),this.$t.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.$t.at(),r=e.$t.at();n.wt();){var i=n.dt().key,o=r.dt().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.P=this.P,r.Nt=e,r.$t=n,r},t}(),Bu=function(){function t(){this.xt=new Su(lu.P)}return t.prototype.track=function(t){var e=t.doc.key,n=this.xt.get(e);n?0!==t.type&&3===n.type?this.xt=this.xt.nt(e,t):3===t.type&&1!==n.type?this.xt=this.xt.nt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.xt=this.xt.nt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.xt=this.xt.remove(e):1===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):Bs():this.xt=this.xt.nt(e,t)},t.prototype.Mt=function(){var t=[];return this.xt.ot((function(e,n){t.push(n)})),t},t}(),zu=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.Ot=n,this.docChanges=r,this.Lt=i,this.fromCache=o,this.Bt=a,this.qt=s}return t.Ut=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,qu.kt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Lt._()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Bt===t.Bt&&this.Lt.isEqual(t.Lt)&&Rl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ot.isEqual(t.Ot)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Wu=function(){function t(t,e,n,r,i){this.X=t,this.Qt=e,this.Wt=n,this.jt=r,this.Kt=i}return t.Gt=function(e,n){var r=new Map;return r.set(e,Hu.zt(e,n)),new t(ou.min(),r,Vu(),Ou(),ju())},t}(),Hu=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Ht=e,this.Yt=n,this.Jt=r,this.Xt=i}return t.zt=function(e,n){return new t(_u.Y,n,ju(),ju(),ju())},t}(),Qu=function(t,e,n,r){this.Zt=t,this.removedTargetIds=e,this.key=n,this.te=r},Gu=function(t,e){this.targetId=t,this.ee=e},Yu=function(t,e,n,r){void 0===n&&(n=_u.Y),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ku=function(){function t(){this.ne=0,this.se=Ju(),this.ie=_u.Y,this.re=!1,this.oe=!0}return Object.defineProperty(t.prototype,"Ht",{get:function(){return this.re},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ie},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"he",{get:function(){return 0!==this.ne},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ae",{get:function(){return this.oe},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){t.H()>0&&(this.oe=!0,this.ie=t)},t.prototype.ce=function(){var t=ju(),e=ju(),n=ju();return this.se.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Bs()}})),new Hu(this.ie,this.re,t,e,n)},t.prototype.le=function(){this.oe=!1,this.se=Ju()},t.prototype._e=function(t,e){this.oe=!0,this.se=this.se.nt(t,e)},t.prototype.fe=function(t){this.oe=!0,this.se=this.se.remove(t)},t.prototype.de=function(){this.ne+=1},t.prototype.we=function(){this.ne-=1},t.prototype.Te=function(){this.oe=!0,this.re=!0},t}(),$u=function(){function t(t){this.Ee=t,this.Ie=new Map,this.me=Ou(),this.Ae=Xu(),this.Re=new ku(Gs)}return t.prototype.Pe=function(t){for(var e=0,n=t.Zt;e<n.length;e++){var r=n[e];t.te instanceof kl?this.Ve(r,t.te):t.te instanceof Al&&this.ge(r,t.key,t.te)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var a=o[i];this.ge(a,t.key,t.te)}},t.prototype.ye=function(t){var e=this;this.pe(t,(function(n){var r=e.be(n);switch(t.state){case 0:e.ve(n)&&r.ue(t.resumeToken);break;case 1:r.we(),r.he||r.le(),r.ue(t.resumeToken);break;case 2:r.we(),r.he||e.removeTarget(n);break;case 3:e.ve(n)&&(r.Te(),r.ue(t.resumeToken));break;case 4:e.ve(n)&&(e.Se(n),r.ue(t.resumeToken));break;default:Bs()}}))},t.prototype.pe=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Ie.forEach((function(t,r){n.ve(r)&&e(r)}))},t.prototype.De=function(t){var e=t.targetId,n=t.ee.count,r=this.Ce(e);if(r){var i=r.target;if(mu(i))if(0===n){var o=new lu(i.path);this.ge(e,o,new Al(o,ou.min()))}else zs(1===n);else this.Fe(e)!==n&&(this.Se(e),this.Re=this.Re.add(e))}},t.prototype.Ne=function(t){var e=this,n=new Map;this.Ie.forEach((function(r,i){var o=e.Ce(i);if(o){if(r.Ht&&mu(o.target)){var a=new lu(o.target.path);null!==e.me.get(a)||e.$e(i,a)||e.ge(i,a,new Al(a,t))}r.ae&&(n.set(i,r.ce()),r.le())}}));var r=ju();this.Ae.forEach((function(t,n){var i=!0;n.St((function(t){var n=e.Ce(t);return!n||2===n.J||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Wu(t,n,this.Re,this.me,r);return this.me=Ou(),this.Ae=Xu(),this.Re=new ku(Gs),i},t.prototype.Ve=function(t,e){if(this.ve(t)){var n=this.$e(t,e.key)?2:0;this.be(t)._e(e.key,n),this.me=this.me.nt(e.key,e),this.Ae=this.Ae.nt(e.key,this.ke(e.key).add(t))}},t.prototype.ge=function(t,e,n){if(this.ve(t)){var r=this.be(t);this.$e(t,e)?r._e(e,1):r.fe(e),this.Ae=this.Ae.nt(e,this.ke(e).delete(t)),n&&(this.me=this.me.nt(e,n))}},t.prototype.removeTarget=function(t){this.Ie.delete(t)},t.prototype.Fe=function(t){var e=this.be(t).ce();return this.Ee.xe(t).size+e.Yt.size-e.Xt.size},t.prototype.de=function(t){this.be(t).de()},t.prototype.be=function(t){var e=this.Ie.get(t);return e||(e=new Ku,this.Ie.set(t,e)),e},t.prototype.ke=function(t){var e=this.Ae.get(t);return e||(e=new ku(Gs),this.Ae=this.Ae.nt(t,e)),e},t.prototype.ve=function(t){var e=null!==this.Ce(t);return e||Us("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ce=function(t){var e=this.Ie.get(t);return e&&e.he?null:this.Ee.Me(t)},t.prototype.Se=function(t){var e=this;this.Ie.set(t,new Ku),this.Ee.xe(t).forEach((function(n){e.ge(t,n,null)}))},t.prototype.$e=function(t,e){return this.Ee.xe(t).has(e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(){return new Su(lu.P)}function Ju(){return new Su(lu.P)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function tc(t){var e=uc(t.mapValue.fields.__local_write_time__.timestampValue);return new iu(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ec=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zu(t)?4:10:Bs()}function rc(t,e){var n=nc(t);if(n!==nc(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tc(t).isEqual(tc(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=uc(t.timestampValue),r=uc(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return lc(t.bytesValue).isEqual(lc(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return cc(t.geoPointValue.latitude)===cc(e.geoPointValue.latitude)&&cc(t.geoPointValue.longitude)===cc(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return cc(t.integerValue)===cc(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=cc(t.doubleValue),r=cc(e.doubleValue);return n===r?fu(n)===fu(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Ys(t.arrayValue.values||[],e.arrayValue.values||[],rc);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Js(n)!==Js(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!rc(n[i],r[i])))return!1;return!0}(t,e);default:return Bs()}}function ic(t,e){return void 0!==(t.values||[]).find((function(t){return rc(t,e)}))}function oc(t,e){var n=nc(t),r=nc(e);if(n!==r)return Gs(n,r);switch(n){case 0:return 0;case 1:return Gs(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=cc(t.integerValue||t.doubleValue),r=cc(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ac(t.timestampValue,e.timestampValue);case 4:return ac(tc(t),tc(e));case 5:return Gs(t.stringValue,e.stringValue);case 6:return function(t,e){var n=lc(t),r=lc(e);return n.o(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Gs(n[i],r[i]);if(0!==o)return o}return Gs(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Gs(cc(t.latitude),cc(e.latitude));return 0!==n?n:Gs(cc(t.longitude),cc(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=oc(n[i],r[i]);if(o)return o}return Gs(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Gs(r[a],o[a]);if(0!==s)return s;var u=oc(n[r[a]],i[o[a]]);if(0!==u)return u}return Gs(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Bs()}}function ac(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Gs(t,e);var n=uc(t),r=uc(e),i=Gs(n.seconds,r.seconds);return 0!==i?i:Gs(n.nanos,r.nanos)}function sc(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=uc(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?lc(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,lu.q(r).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=t(a)}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=a+":"+t(e.fields[a])}return n+"}"}(e.mapValue):Bs();var n,r}(t)}function uc(t){if(zs(!!t),"string"==typeof t){var e=0,n=ec.exec(t);if(zs(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:cc(t.seconds),nanos:cc(t.nanos)}}function cc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function lc(t){return"string"==typeof t?_u.fromBase64String(t):_u.fromUint8Array(t)}function hc(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.N()}}function fc(t){return!!t&&"integerValue"in t}function pc(t){return!!t&&"arrayValue"in t}function dc(t){return!!t&&"nullValue"in t}function yc(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vc(t){return!!t&&"mapValue"in t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gc={asc:"ASCENDING",desc:"DESCENDING"},mc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_c=function(t,e){this.s=t,this.Oe=e};function bc(t){return{integerValue:""+t}}function wc(t,e){if(t.Oe){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fu(e)?"-0":e}}function Ec(t,e){return pu(e)?bc(e):wc(t,e)}function Tc(t,e){return t.Oe?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function xc(t,e){return t.Oe?e.toBase64():e.toUint8Array()}function Cc(t,e){return Tc(t,e.A())}function Sc(t){return zs(!!t),ou.I(function(t){var e=uc(t);return new iu(e.seconds,e.nanos)}(t))}function Ic(t,e){return function(t){return new su(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).N()}function Nc(t){var e=su.$(t);return zs(Gc(e)),e}function kc(t,e){return Ic(t.s,e.path)}function Ac(t,e){var n=Nc(e);return zs(n.get(1)===t.s.projectId),zs(!n.get(3)&&!t.s.database||n.get(3)===t.s.database),new lu(Dc(n))}function Pc(t,e){return Ic(t.s,e)}function Oc(t){var e=Nc(t);return 4===e.length?su.k():Dc(e)}function Rc(t){return new su(["projects",t.s.projectId,"databases",t.s.database]).N()}function Dc(t){return zs(t.length>4&&"documents"===t.get(4)),t.g(5)}function Mc(t,e,n){return{name:kc(t,e),fields:n.proto.mapValue.fields}}function Lc(t,e){var n;if(e instanceof gl)n={update:Mc(t,e.key,e.value)};else if(e instanceof Tl)n={delete:kc(t,e.key)};else if(e instanceof ml)n={update:Mc(t,e.key,e.data),updateMask:Qc(e.Le)};else if(e instanceof bl)n={transform:{document:kc(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Jc)return{fieldPath:e.field.N(),setToServerValue:"REQUEST_TIME"};if(n instanceof Zc)return{fieldPath:e.field.N(),appendMissingElements:{values:n.elements}};if(n instanceof el)return{fieldPath:e.field.N(),removeAllFromArray:{values:n.elements}};if(n instanceof rl)return{fieldPath:e.field.N(),increment:n.Be};throw Bs()}(0,t)}))}};else{if(!(e instanceof xl))return Bs();n={verify:kc(t,e.key)}}return e.Ue.qe||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Cc(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Bs()}(t,e.Ue)),n}function Fc(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?cl.updateTime(Sc(t.updateTime)):void 0!==t.exists?cl.exists(t.exists):cl.Qe()}(e.currentDocument):cl.Qe();if(e.update){e.update.name;var r=Ac(t,e.update.name),i=new Cl({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new al(e.map((function(t){return cu.B(t)})))}(e.updateMask);return new ml(r,i,o,n)}return new gl(r,i,n)}if(e.delete){var a=Ac(t,e.delete);return new Tl(a,n)}if(e.transform){var s=Ac(t,e.transform.document),u=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)zs("REQUEST_TIME"===e.setToServerValue),n=new Jc;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Zc(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new el(i)}else"increment"in e?n=new rl(t,e.increment):Bs();var o=cu.B(e.fieldPath);return new sl(o,n)}(t,e)}));return zs(!0===n.exists),new bl(s,u)}if(e.verify){var c=Ac(t,e.verify);return new xl(c,n)}return Bs()}function jc(t,e){return{documents:[Pc(t,e.path)]}}function Uc(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Pc(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Pc(t,r.p()),n.structuredQuery.from=[{collectionId:r.S()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return t instanceof jl?function(t){if("=="===t.op){if(yc(t.value))return{unaryFilter:{field:Bc(t.field),op:"IS_NAN"}};if(dc(t.value))return{unaryFilter:{field:Bc(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:Bc(t.field),op:(e=t.op,mc[e]),value:t.value}};var e}(t):Bs()}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:Bc((e=t).field),direction:(n=e.dir,gc[n])};var e,n}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.Oe||hu(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Vc(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Vc(e.endAt)),n}function Vc(t){return{before:t.before,values:t.position}}function qc(t){var e=!!t.before,n=t.values||[];return new Wl(n,e)}function Bc(t){return{fieldPath:t.N()}}function zc(t){return cu.B(t.fieldPath)}function Wc(t){return jl.create(zc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Bs()}}(t.fieldFilter.op),t.fieldFilter.value)}function Hc(t){switch(t.unaryFilter.op){case"IS_NAN":var e=zc(t.unaryFilter.field);return jl.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=zc(t.unaryFilter.field);return jl.create(n,"==",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Bs()}}function Qc(t){var e=[];return t.fields.forEach((function(t){return e.push(t.N())})),{fieldPaths:e}}function Gc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yc=function(){this.je=void 0};function Kc(t,e,n){return t instanceof Jc?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Zc?tl(t,e):t instanceof el?nl(t,e):function(t,e){var n=Xc(t,e),r=il(n)+il(t.Be);return fc(n)&&fc(t.Be)?bc(r):wc(t.serializer,r)}(t,e)}function $c(t,e,n){return t instanceof Zc?tl(t,e):t instanceof el?nl(t,e):n}function Xc(t,e){return t instanceof rl?fc(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Jc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e}(Yc),Zc=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return y(e,t),e}(Yc);function tl(t,e){for(var n=ol(e),r=function(t){n.some((function(e){return rc(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var el=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return y(e,t),e}(Yc);function nl(t,e){for(var n=ol(e),r=function(t){n=n.filter((function(e){return!rc(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var rl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.Be=n,r}return y(e,t),e}(Yc);function il(t){return cc(t.integerValue||t.doubleValue)}function ol(t){return pc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var al=function(){function t(t){this.fields=t,t.sort(cu.P)}return t.prototype.Ke=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].D(t))return!0;return!1},t.prototype.isEqual=function(t){return Ys(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),sl=function(t,e){this.field=t,this.transform=e},ul=function(t,e){this.version=t,this.transformResults=e},cl=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Qe=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"qe",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function ll(t,e){return void 0!==t.updateTime?e instanceof kl&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof kl}var hl=function(){};function fl(t,e,n){return t instanceof gl?function(t,e,n){return new kl(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof ml?function(t,e,n){if(!ll(t.Ue,e))return new Pl(t.key,n.version);var r=_l(t,e);return new kl(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof bl?function(t,e,n){if(zs(null!=n.transformResults),!ll(t.Ue,e))return new Pl(t.key,n.version);var r=wl(t,e),i=function(t,e,n){var r=[];zs(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=null;e instanceof kl&&(s=e.field(o.field)),r.push($c(a,s,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,a=El(t,r.data(),i);return new kl(t.key,o,a,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Al(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function pl(t,e,n,r){return t instanceof gl?function(t,e){if(!ll(t.Ue,e))return e;var n=vl(e);return new kl(t.key,n,t.value,{Ge:!0})}(t,e):t instanceof ml?function(t,e){if(!ll(t.Ue,e))return e;var n=vl(e),r=_l(t,e);return new kl(t.key,n,r,{Ge:!0})}(t,e):t instanceof bl?function(t,e,n,r){if(!ll(t.Ue,e))return e;var i=wl(t,e),o=function(t,e,n,r){for(var i=[],o=0,a=t;o<a.length;o++){var s=a[o],u=s.transform,c=null;n instanceof kl&&(c=n.field(s.field)),null===c&&r instanceof kl&&(c=r.field(s.field)),i.push(Kc(u,c,e))}return i}(t.fieldTransforms,n,e,r),a=El(t,i.data(),o);return new kl(t.key,i.version,a,{Ge:!0})}(t,e,r,n):function(t,e){return ll(t.Ue,e)?new Al(t.key,ou.min()):e}(t,e)}function dl(t,e){return t instanceof bl?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e instanceof kl?e.field(o.field):void 0,s=Xc(o.transform,a||null);null!=s&&(n=null==n?(new Sl).set(o.field,s):n.set(o.field,s))}return n?n.ze():null}(t,e):null}function yl(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ue.isEqual(e.Ue)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Le.isEqual(e.Le):2!==t.type||Ys(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Zc&&e instanceof Zc||t instanceof el&&e instanceof el?Ys(t.elements,e.elements,rc):t instanceof rl&&e instanceof rl?rc(t.Be,e.Be):t instanceof Jc&&e instanceof Jc}(t.transform,e.transform)}(t,e)})))}function vl(t){return t instanceof kl?t.version:ou.min()}var gl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ue=r,i.type=0,i}return y(e,t),e}(hl),ml=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Le=r,o.Ue=i,o.type=1,o}return y(e,t),e}(hl);function _l(t,e){return function(t,e){var n=new Sl(e);return t.Le.fields.forEach((function(e){if(!e._()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.ze()}(t,e instanceof kl?e.data():Cl.empty())}var bl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ue=cl.exists(!0),r}return y(e,t),e}(hl);function wl(t,e){return e}function El(t,e,n){for(var r=new Sl(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.ze()}var Tl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ue=n,r.type=3,r}return y(e,t),e}(hl),xl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ue=n,r.type=4,r}return y(e,t),e}(hl),Cl=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!vc(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.S()])||null},t.prototype.isEqual=function(t){return rc(this.proto,t.proto)},t}(),Sl=function(){function t(t){void 0===t&&(t=Cl.empty()),this.He=t,this.Ye=new Map}return t.prototype.set=function(t,e){return this.Je(t,e),this},t.prototype.delete=function(t){return this.Je(t,null),this},t.prototype.Je=function(t,e){for(var n=this.Ye,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===nc(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.S(),e)},t.prototype.ze=function(){var t=this.Xe(cu.k(),this.Ye);return null!=t?new Cl(t):this.He},t.prototype.Xe=function(t,e){var n=this,r=!1,i=this.He.field(t),o=vc(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var a=n.Xe(t.child(i),e);null!=a&&(o[i]=a,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Il(t){var e=[];return Zs(t.fields||{},(function(t,n){var r=new cu([t]);if(vc(n)){var i=Il(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new al(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Nl=function(t,e){this.key=t,this.version=e},kl=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Ze=r,o.Ge=!!i.Ge,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return y(e,t),e.prototype.field=function(t){return this.Ze.field(t)},e.prototype.data=function(){return this.Ze},e.prototype.tn=function(){return this.Ze.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ge===t.Ge&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Ze.isEqual(t.Ze)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ze.toString()+", {hasLocalMutations: "+this.Ge+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Ge||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Nl),Al=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return y(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Nl),Pl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Nl),Ol=function(){function t(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.en=n,this.filters=r,this.limit=i,this.nn=o,this.startAt=a,this.endAt=s,this.sn=null,this.rn=null,this.startAt&&this.on(this.startAt),this.endAt&&this.on(this.endAt)}return t.hn=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.sn){this.sn=[];var t=this.an(),e=this.un();if(null!==t&&null===e)t.O()||this.sn.push(new Yl(t)),this.sn.push(new Yl(cu.L(),"asc"));else{for(var n=!1,r=0,i=this.en;r<i.length;r++){var o=i[r];this.sn.push(o),o.field.O()&&(n=!0)}if(!n){var a=this.en.length>0?this.en[this.en.length-1].dir:"asc";this.sn.push(new Yl(cu.L(),a))}}}return this.sn},enumerable:!1,configurable:!0}),t.prototype.cn=function(e){var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.en.slice(),n,this.limit,this.nn,this.startAt,this.endAt)},t.prototype.ln=function(e){var n=this.en.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.nn,this.startAt,this.endAt)},t.prototype._n=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.fn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.dn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),this.limit,this.nn,e,this.endAt)},t.prototype.wn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),this.limit,this.nn,this.startAt,e)},t.prototype.Tn=function(e){return new t(e,null,this.en.slice(),this.filters.slice(),this.limit,this.nn,this.startAt,this.endAt)},t.prototype.En=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.en.length||1===this.en.length&&this.en[0].field.O())},t.prototype.In=function(){return!hu(this.limit)&&"F"===this.nn},t.prototype.mn=function(){return!hu(this.limit)&&"L"===this.nn},t.prototype.un=function(){return this.en.length>0?this.en[0].field:null},t.prototype.an=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof jl&&n.An())return n.field}return null},t.prototype.Rn=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof jl&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.Pn=function(){return mu(this.We())},t.prototype.Vn=function(){return null!==this.collectionGroup},t.prototype.We=function(){if(!this.rn)if("F"===this.nn)this.rn=yu(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i="desc"===r.dir?"asc":"desc";t.push(new Yl(r.field,i))}var o=this.endAt?new Wl(this.endAt.position,!this.endAt.before):null,a=this.startAt?new Wl(this.startAt.position,!this.startAt.before):null;this.rn=yu(this.path,this.collectionGroup,t,this.filters,this.limit,o,a)}return this.rn},t.prototype.on=function(t){},t}();function Rl(t,e){return gu(t.We(),e.We())&&t.nn===e.nn}function Dl(t){return vu(t.We())+"|lt:"+t.nn}function Ml(t){return"Query(target="+function(t){var e=t.path.N();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.N()+" "+e.op+" "+sc(e.value);var e})).join(", ")+"]"),hu(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.N()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Hl(t.startAt)),t.endAt&&(e+=", endAt: "+Hl(t.endAt)),"Target("+e+")"}(t.We())+"; limitType="+t.nn+")"}function Ll(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.U(t.collectionGroup)&&t.path.D(n):lu.W(t.path)?t.path.isEqual(n):t.path.C(n)}(t,e)&&function(t,e){for(var n=0,r=t.en;n<r.length;n++){var i=r[n];if(!i.field.O()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Ql(t.startAt,t.orderBy,e)||t.endAt&&Ql(t.endAt,t.orderBy,e))}(t,e)}function Fl(t){return function(e,n){for(var r=!1,i=0,o=t.orderBy;i<o.length;i++){var a=o[i],s=Kl(a,e,n);if(0!==s)return s;r=r||a.field.O()}return 0}}var jl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return y(e,t),e.create=function(t,n,r){if(t.O())return"in"===n?new Vl(t,r):new Ul(t,n,r);if(dc(r)){if("=="!==n)throw new ru(nu.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(yc(r)){if("=="!==n)throw new ru(nu.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return"array-contains"===n?new ql(t,r):"in"===n?new Bl(t,r):"array-contains-any"===n?new zl(t,r):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&nc(this.value)===nc(e)&&this.gn(oc(e,this.value))},e.prototype.gn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case">":return t>0;case">=":return t>=0;default:return Bs()}},e.prototype.An=function(){return["<","<=",">",">="].indexOf(this.op)>=0},e}((function(){})),Ul=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=lu.q(r.referenceValue),i}return y(e,t),e.prototype.matches=function(t){var e=lu.P(t.key,this.key);return this.gn(e)},e}(jl),Vl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=(n.arrayValue.values||[]).map((function(t){return lu.q(t.referenceValue)})),r}return y(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(jl),ql=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return y(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return pc(e)&&ic(e.arrayValue,this.value)},e}(jl),Bl=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return y(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&ic(this.value.arrayValue,e)},e}(jl),zl=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return y(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!pc(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ic(e.value.arrayValue,t)}))},e}(jl),Wl=function(t,e){this.position=t,this.before=e};function Hl(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return sc(t)})).join(",")}function Ql(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.O()?lu.P(lu.q(a.referenceValue),n.key):oc(a,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Gl(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!rc(t.position[n],e.position[n]))return!1;return!0}var Yl=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Kl(t,e,n){var r=t.field.O()?lu.P(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?oc(r,i):Bs()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Bs()}}function $l(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xl=function(){function t(t,e,n,r){this.batchId=t,this.yn=e,this.baseMutations=n,this.mutations=r}return t.prototype.pn=function(t,e,n){for(var r=n.bn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=fl(o,e,r[i]))}return e},t.prototype.vn=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=pl(i,e,e,this.yn))}for(var o=e,a=0,s=this.mutations;a<s.length;a++){var u=s[a];u.key.isEqual(t)&&(e=pl(u,e,o,this.yn))}return e},t.prototype.Sn=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.vn(r.key,t.get(r.key));i&&(n=n.nt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),ju())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ys(this.mutations,t.mutations,(function(t,e){return yl(t,e)}))&&Ys(this.baseMutations,t.baseMutations,(function(t,e){return yl(t,e)}))},t}(),Jl=function(){function t(t,e,n,r){this.batch=t,this.Dn=e,this.bn=n,this.Cn=r}return t.from=function(e,n,r){zs(e.mutations.length===r.length);for(var i=Lu,o=e.mutations,a=0;a<o.length;a++)i=i.nt(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Zl=function(){function t(t){var e=this;this.Fn=null,this.Nn=null,this.result=void 0,this.error=void 0,this.$n=!1,this.kn=!1,t((function(t){e.$n=!0,e.result=t,e.Fn&&e.Fn(t)}),(function(t){e.$n=!0,e.error=t,e.Nn&&e.Nn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.kn&&Bs(),this.kn=!0,this.$n?this.error?this.xn(n,this.error):this.Mn(e,this.result):new t((function(t,i){r.Fn=function(n){r.Mn(e,n).next(t,i)},r.Nn=function(e){r.xn(n,e).next(t,i)}}))},t.prototype.On=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Mn=function(e,n){return e?this.Ln((function(){return e(n)})):t.resolve(n)},t.prototype.xn=function(e,n){return e?this.Ln((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Bn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.qn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Bn(r)},t}(),th=function(){function t(){this.Un=new eu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.Qn=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Wn},set:function(t){this.Wn=t},enumerable:!1,configurable:!0}),t.prototype.jn=function(t,e){this.Kn(),this.readTime=e,this.Un.set(t.key,t)},t.prototype.Gn=function(t,e){this.Kn(),e&&(this.readTime=e),this.Un.set(t,null)},t.prototype.zn=function(t,e){this.Kn();var n=this.Un.get(e);return void 0!==n?Zl.resolve(n):this.Hn(t,e)},t.prototype.getEntries=function(t,e){return this.Yn(t,e)},t.prototype.apply=function(t){return this.Kn(),this.Qn=!0,this.Jn(t)},t.prototype.Kn=function(){},t}(),eh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",nh=function(){function t(){this.Xn=[]}return t.prototype.Zn=function(t){this.Xn.push(t)},t.prototype.ts=function(){this.Xn.forEach((function(t){return t()}))},t}(),rh=function(){function t(t,e,n){this.es=t,this.ns=e,this.ss=n}return t.prototype.rs=function(t,e){var n=this;return this.ns.os(t,e).next((function(r){return n.hs(t,e,r)}))},t.prototype.hs=function(t,e,n){return this.es.zn(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].vn(e,t);return t}))},t.prototype.as=function(t,e,n){var r=Ru();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].vn(t,e);r=r.nt(t,e)})),r},t.prototype.us=function(t,e){var n=this;return this.es.getEntries(t,e).next((function(e){return n.cs(t,e)}))},t.prototype.cs=function(t,e){var n=this;return this.ns.ls(t,e).next((function(r){var i=n.as(t,e,r),o=Ou();return i.forEach((function(t,e){e||(e=new Al(t,ou.min())),o=o.nt(t,e)})),o}))},t.prototype._s=function(t,e,n){return e.Pn()?this.fs(t,e.path):e.Vn()?this.ds(t,e,n):this.ws(t,e,n)},t.prototype.fs=function(t,e){return this.rs(t,new lu(e)).next((function(t){var e=Mu();return t instanceof kl&&(e=e.nt(t.key,t)),e}))},t.prototype.ds=function(t,e,n){var r=this,i=e.collectionGroup,o=Mu();return this.ss.Ts(t,i).next((function(a){return Zl.forEach(a,(function(a){var s=e.Tn(a.child(i));return r.ws(t,s,n).next((function(t){t.forEach((function(t,e){o=o.nt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.ws=function(t,e,n){var r,i,o=this;return this.es._s(t,e,n).next((function(n){return r=n,o.ns.Es(t,e)})).next((function(e){return i=e,o.Is(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),h=pl(u,l,l,o.yn);r=h instanceof kl?r.nt(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Ll(e,n)||(r=r.remove(t))})),r}))},t.prototype.Is=function(t,e,n){for(var r=ju(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof ml&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.es.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof kl&&(c=c.nt(t,e))})),c}))},t}(),ih=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ms=n,this.As=r}return t.Rs=function(e,n){for(var r=ju(),i=ju(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),oh=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.Ps=function(t){return n.Vs(t)},this.gs=function(t){return e.ys(t)})}return t.prototype.Vs=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.gs&&this.gs(t),t},t}();oh.ps=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ah=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},sh=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.bs=t,this.vs=e,this.Ss=n,this.Ds=r,this.Cs=i,this.Fs=0,this.Ns=null,this.$s=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fs=0},t.prototype.ks=function(){this.Fs=this.Cs},t.prototype.xs=function(t){var e=this;this.cancel();var n=Math.floor(this.Fs+this.Ms()),r=Math.max(0,Date.now()-this.$s),i=Math.max(0,n-r);i>0&&Us("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ns=this.bs.Os(this.vs,i,(function(){return e.$s=Date.now(),t()})),this.Fs*=this.Ds,this.Fs<this.Ss&&(this.Fs=this.Ss),this.Fs>this.Cs&&(this.Fs=this.Cs)},t.prototype.Ls=function(){null!==this.Ns&&(this.Ns.Bs(),this.Ns=null)},t.prototype.cancel=function(){null!==this.Ns&&(this.Ns.cancel(),this.Ns=null)},t.prototype.Ms=function(){return(Math.random()-.5)*this.Fs},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=lh(e)),e=ch(t.get(n),e);return lh(e)}function ch(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function lh(t){return t+""}function hh(t){var e=t.length;if(zs(e>=2),2===e)return zs(""===t.charAt(0)&&""===t.charAt(1)),su.k();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&Bs(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:Bs()}o=a+2}return new su(r)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fh=function(){function t(){this.qs=new ph}return t.prototype.Us=function(t,e){return this.qs.add(e),Zl.resolve()},t.prototype.Ts=function(t,e){return Zl.resolve(this.qs.getEntries(e))},t}(),ph=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.S(),n=t.p(),r=this.index[e]||new ku(su.P),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.S(),n=t.p(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ku(su.P)).F()},t}(),dh=function(){function t(){this.Qs=new ph}return t.prototype.Us=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.S(),i=e.p();t.Zn((function(){n.Qs.add(e)}));var o={collectionId:r,parent:uh(i)};return yh(t).put(o)}return Zl.resolve()},t.prototype.Ts=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ks(e),""],!1,!0);return yh(t).Ws(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(hh(o.parent))}return n}))},t}();function yh(t){return jh.js(t,lf.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vh=function(t){this.Ks=t};function gh(t,e){if(e.document)return function(t,e,n){var r=Ac(t,e.name),i=Sc(e.updateTime),o=new Cl({mapValue:{fields:e.fields}});return new kl(r,i,o,{hasCommittedMutations:!!n})}(t.Ks,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=lu.j(e.noDocument.path),r=Eh(e.noDocument.readTime);return new Al(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=lu.j(e.unknownDocument.path),o=Eh(e.unknownDocument.version);return new Pl(i,o)}return Bs()}function mh(t,e,n){var r=_h(n),i=e.key.path.p().F();if(e instanceof kl){var o=function(t,e){return{name:kc(t,e.key),fields:e.tn().mapValue.fields,updateTime:Tc(t,e.version.A())}}(t.Ks,e),a=e.hasCommittedMutations;return new of(null,null,o,a,r,i)}if(e instanceof Al){var s=e.key.path.F(),u=wh(e.version),c=e.hasCommittedMutations;return new of(null,new nf(s,u),null,c,r,i)}if(e instanceof Pl){var l=e.key.path.F(),h=wh(e.version);return new of(new rf(l,h),null,null,!0,r,i)}return Bs()}function _h(t){var e=t.A();return[e.seconds,e.nanoseconds]}function bh(t){var e=new iu(t[0],t[1]);return ou.I(e)}function wh(t){var e=t.A();return new Xh(e.seconds,e.nanoseconds)}function Eh(t){var e=new iu(t.seconds,t.nanoseconds);return ou.I(e)}function Th(t,e){var n=(e.baseMutations||[]).map((function(e){return Fc(t.Ks,e)})),r=e.mutations.map((function(e){return Fc(t.Ks,e)})),i=iu.fromMillis(e.localWriteTimeMs);return new Xl(e.batchId,i,n,r)}function xh(t){var e,n=Eh(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?Eh(t.lastLimboFreeSnapshotVersion):ou.min();return e=void 0!==t.query.documents?function(t){zs(1===t.documents.length);var e=t.documents[0];return Ol.hn(Oc(e)).We()}(t.query):function(t){var e=Oc(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){zs(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=function t(e){return e?void 0!==e.unaryFilter?[Hc(e)]:void 0!==e.fieldFilter?[Wc(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):Bs():[]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return new Yl(zc((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u=null;n.limit&&(u=function(t){var e;return hu(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=qc(n.startAt));var l=null;return n.endAt&&(l=qc(n.endAt)),new Ol(e,i,s,a,u,"F",c,l).We()}(t.query),new Eu(e,t.targetId,0,t.lastListenSequenceNumber,n,r,_u.fromBase64String(t.resumeToken))}function Ch(t,e){var n,r=wh(e.X),i=wh(e.lastLimboFreeSnapshotVersion);n=mu(e.target)?jc(t.Ks,e.target):Uc(t.Ks,e.target);var o=e.resumeToken.toBase64();return new sf(e.targetId,vu(e.target),r,o,e.sequenceNumber,i,n)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sh=function(){function t(t,e){this.serializer=t,this.ss=e}return t.prototype.jn=function(t,e,n){return Nh(t).put(kh(e),n)},t.prototype.Gn=function(t,e){var n=Nh(t),r=kh(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Gs(t,r)}))},t.prototype.zn=function(t,e){var n=this;return Nh(t).get(kh(e)).next((function(t){return n.zs(t)}))},t.prototype.Hs=function(t,e){var n=this;return Nh(t).get(kh(e)).next((function(t){var e=n.zs(t);return e?{Ys:e,size:Ah(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Ru();return this.Js(t,e,(function(t,e){var i=n.zs(e);r=r.nt(t,i)})).next((function(){return r}))},t.prototype.Xs=function(t,e){var n=this,r=Ru(),i=new Su(lu.P);return this.Js(t,e,(function(t,e){var o=n.zs(e);o?(r=r.nt(t,o),i=i.nt(t,Ah(e))):(r=r.nt(t,null),i=i.nt(t,0))})).next((function(){return{Zs:r,ti:i}}))},t.prototype.Js=function(t,e,n){if(e._())return Zl.resolve();var r=IDBKeyRange.bound(e.first().path.F(),e.last().path.F()),i=e.at(),o=i.dt();return Nh(t).ei({range:r},(function(t,e,r){for(var a=lu.j(t);o&&lu.P(o,a)<0;)n(o,null),o=i.dt();o&&o.isEqual(a)&&(n(o,e),o=i.wt()?i.dt():null),o?r.ni(o.path.F()):r.done()})).next((function(){for(;o;)n(o,null),o=i.wt()?i.dt():null}))},t.prototype._s=function(t,e,n){var r=this,i=Mu(),o=e.path.length+1,a={};if(n.isEqual(ou.min())){var s=e.path.F();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.F(),c=_h(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=of.collectionReadTimeIndex}return Nh(t).ei(a,(function(t,n,a){if(t.length===o){var s=gh(r.serializer,n);e.path.D(s.key.path)?s instanceof kl&&Ll(e,s)&&(i=i.nt(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.si=function(t,e){var n=this,r=Ou(),i=_h(e),o=Nh(t),a=IDBKeyRange.lowerBound(i,!0);return o.ei({index:of.readTimeIndex,range:a},(function(t,e){var o=gh(n.serializer,e);r=r.nt(o.key,o),i=e.readTime})).next((function(){return{ii:r,readTime:bh(i)}}))},t.prototype.ri=function(t){var e=Nh(t),n=ou.min();return e.ei({index:of.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=bh(e.readTime)),r.done()})).next((function(){return n}))},t.prototype.oi=function(e){return new t.hi(this,!!e&&e.ai)},t.prototype.ui=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Ih(t).get(af.key).next((function(t){return zs(!!t),t}))},t.prototype.Gs=function(t,e){return Ih(t).put(af.key,e)},t.prototype.zs=function(t){if(t){var e=gh(this.serializer,t);return e instanceof Al&&e.version.isEqual(ou.min())?null:e}return null},t}();function Ih(t){return jh.js(t,af.store)}function Nh(t){return jh.js(t,of.store)}function kh(t){return t.path.F()}function Ah(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Bs();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sh.hi=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ci=e,r.ai=n,r.li=new eu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return y(e,t),e.prototype.Jn=function(t){var e=this,n=[],r=0,i=new ku((function(t,e){return Gs(t.N(),e.N())}));return this.Un.forEach((function(o,a){var s=e.li.get(o);if(a){var u=mh(e.ci.serializer,a,e.readTime);i=i.add(o.path.p());var c=Ah(u);r+=c-s,n.push(e.ci.jn(t,o,u))}else if(r-=s,e.ai){var l=mh(e.ci.serializer,new Al(o,ou.min()),e.readTime);n.push(e.ci.jn(t,o,l))}else n.push(e.ci.Gn(t,o))})),i.forEach((function(r){n.push(e.ci.ss.Us(t,r))})),n.push(this.ci.updateMetadata(t,r)),Zl.Bn(n)},e.prototype.Hn=function(t,e){var n=this;return this.ci.Hs(t,e).next((function(t){return null===t?(n.li.set(e,0),null):(n.li.set(e,t.size),t.Ys)}))},e.prototype.Yn=function(t,e){var n=this;return this.ci.Xs(t,e).next((function(t){var e=t.Zs;return t.ti.forEach((function(t,e){n.li.set(t,e)})),e}))},e}(th);var Ph=function(){function t(t){this._i=t}return t.prototype.next=function(){return this._i+=2,this._i},t.fi=function(){return new t(0)},t.di=function(){return new t(-1)},t}(),Oh=function(){function t(t,e){this.wi=t,this.serializer=e}return t.prototype.Ti=function(t){var e=this;return this.Ei(t).next((function(n){var r=new Ph(n.highestTargetId);return n.highestTargetId=r.next(),e.Ii(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.mi=function(t){return this.Ei(t).next((function(t){return ou.I(new iu(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ai=function(t){return this.Ei(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Ri=function(t,e,n){var r=this;return this.Ei(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.A()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ii(t,i)}))},t.prototype.Pi=function(t,e){var n=this;return this.Vi(t,e).next((function(){return n.Ei(t).next((function(r){return r.targetCount+=1,n.gi(e,r),n.Ii(t,r)}))}))},t.prototype.yi=function(t,e){return this.Vi(t,e)},t.prototype.pi=function(t,e){var n=this;return this.bi(t,e.targetId).next((function(){return Rh(t).delete(e.targetId)})).next((function(){return n.Ei(t)})).next((function(e){return zs(e.targetCount>0),e.targetCount-=1,n.Ii(t,e)}))},t.prototype.vi=function(t,e,n){var r=this,i=0,o=[];return Rh(t).ei((function(a,s){var u=xh(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.pi(t,u)))})).next((function(){return Zl.Bn(o)})).next((function(){return i}))},t.prototype.pe=function(t,e){return Rh(t).ei((function(t,n){var r=xh(n);e(r)}))},t.prototype.Ei=function(t){return Dh(t).get(cf.key).next((function(t){return zs(null!==t),t}))},t.prototype.Ii=function(t,e){return Dh(t).put(cf.key,e)},t.prototype.Vi=function(t,e){return Rh(t).put(Ch(this.serializer,e))},t.prototype.gi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Si=function(t){return this.Ei(t).next((function(t){return t.targetCount}))},t.prototype.Di=function(t,e){var n=vu(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Rh(t).ei({range:r,index:sf.queryTargetsIndexName},(function(t,n,r){var o=xh(n);gu(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Ci=function(t,e,n){var r=this,i=[],o=Mh(t);return e.forEach((function(e){var a=uh(e.path);i.push(o.put(new uf(n,a))),i.push(r.wi.Fi(t,n,e))})),Zl.Bn(i)},t.prototype.Ni=function(t,e,n){var r=this,i=Mh(t);return Zl.forEach(e,(function(e){var o=uh(e.path);return Zl.Bn([i.delete([n,o]),r.wi.$i(t,n,e)])}))},t.prototype.bi=function(t,e){var n=Mh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.ki=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Mh(t),i=ju();return r.ei({range:n,xi:!0},(function(t,e,n){var r=hh(t[1]),o=new lu(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Mi=function(t,e){var n=uh(e.path),r=IDBKeyRange.bound([n],[Ks(n)],!1,!0),i=0;return Mh(t).ei({index:uf.documentTargetsIndex,xi:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Me=function(t,e){return Rh(t).get(e).next((function(t){return t?xh(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(t){return jh.js(t,sf.store)}function Dh(t){return jh.js(t,cf.store)}function Mh(t){return jh.js(t,uf.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lh="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Fh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Oi=e,r.Li=n,r}return y(e,t),e}(nh),jh=function(){function t(e,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.bs=o,this.window=a,this.document=s,this.Bi=c,this.qi=l,this.Ui=null,this.Qi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Wi=null,this.inForeground=!1,this.ji=null,this.Ki=null,this.Gi=Number.NEGATIVE_INFINITY,this.zi=function(t){return Promise.resolve()},!t.Hi())throw new ru(nu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.wi=new qh(this,i),this.Yi=n+t.Ji,this.serializer=new vh(u),this.Xi=new Oh(this.wi,this.serializer),this.ss=new dh,this.es=new Sh(this.serializer,this.ss),this.window&&this.window.localStorage?this.Zi=this.window.localStorage:(this.Zi=null,!1===l&&Vs("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.js=function(t,e){if(t instanceof Fh)return df.js(t.Oi,e);throw Bs()},t.prototype.start=function(){var t=this;return df.tr(this.Yi,Kh,new $h(this.serializer)).then((function(e){return t.er=e,t.nr()})).then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new ru(nu.FAILED_PRECONDITION,Lh);return t.sr(),t.ir(),t.rr(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Xi.Ai(e)}))})).then((function(e){t.Ui=new oh(e,t.Bi)})).then((function(){t.Qi=!0})).catch((function(e){return t.er&&t.er.close(),Promise.reject(e)}))},t.prototype.or=function(t){var e=this;return this.zi=function(n){return g(e,void 0,void 0,(function(){return m(this,(function(e){return this.hr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.ar=function(t){var e=this;this.er.ur((function(n){return g(e,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.cr=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.bs.lr((function(){return g(e,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return this.hr?[4,this.nr()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.nr=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Vh(e).put(new ff(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t._r(e).next((function(e){e||(t.isPrimary=!1,t.bs.dr((function(){return t.zi(!1)})))}))})).next((function(){return t.wr(e)})).next((function(n){return t.isPrimary&&!n?t.Tr(e).next((function(){return!1})):!!n&&t.Er(e).next((function(){return!0}))}))})).catch((function(e){if(gf(e))return Us("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Us("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.bs.dr((function(){return t.zi(e)})),t.isPrimary=e}))},t.prototype._r=function(t){var e=this;return Uh(t).get(Jh.key).next((function(t){return Zl.resolve(e.Ir(t))}))},t.prototype.mr=function(t){return Vh(t).delete(this.clientId)},t.prototype.Ar=function(){return g(this,void 0,void 0,(function(){var e,n,r,i,o=this;return m(this,(function(a){switch(a.label){case 0:return!this.isPrimary||this.Rr(this.Gi,18e5)?[3,2]:(this.Gi=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.js(e,ff.store);return n.Ws().next((function(t){var e=o.Pr(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return Zl.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=a.sent(),this.Zi)for(n=0,r=e;n<r.length;n++)i=r[n],this.Zi.removeItem(this.Vr(i.clientId));a.label=2;case 2:return[2]}}))}))},t.prototype.rr=function(){var t=this;this.Ki=this.bs.Os("client_metadata_refresh",4e3,(function(){return t.nr().then((function(){return t.Ar()})).then((function(){return t.rr()}))}))},t.prototype.Ir=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.wr=function(t){var e=this;return this.qi?Zl.resolve(!0):Uh(t).get(Jh.key).next((function(n){if(null!==n&&e.Rr(n.leaseTimestampMs,5e3)&&!e.gr(n.ownerId)){if(e.Ir(n)&&e.networkEnabled)return!0;if(!e.Ir(n)){if(!n.allowTabSynchronization)throw new ru(nu.FAILED_PRECONDITION,Lh);return!1}}return!(!e.networkEnabled||!e.inForeground)||Vh(t).Ws().next((function(t){return void 0===e.Pr(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Us("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.yr=function(){return g(this,void 0,void 0,(function(){var t=this;return m(this,(function(e){switch(e.label){case 0:return this.Qi=!1,this.pr(),this.Ki&&(this.Ki.cancel(),this.Ki=null),this.br(),this.vr(),[4,this.runTransaction("shutdown","readwrite",(function(e){return t.Tr(e).next((function(){return t.mr(e)}))})).catch((function(t){Us("IndexedDbPersistence","Proceeding with shutdown despite failure: ",t)}))];case 1:return e.sent(),this.er.close(),this.Sr(),[2]}}))}))},t.prototype.Pr=function(t,e){var n=this;return t.filter((function(t){return n.Rr(t.updateTimeMs,e)&&!n.gr(t.clientId)}))},t.prototype.Dr=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Vh(e).Ws().next((function(e){return t.Pr(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return g(this,void 0,void 0,(function(){var n;return m(this,(function(r){switch(r.label){case 0:return t.Hi()?(n=e+t.Ji,[4,df.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"hr",{get:function(){return this.Qi},enumerable:!1,configurable:!0}),t.prototype.Cr=function(t){return zh.Fr(t,this.serializer,this.ss,this.wi)},t.prototype.Nr=function(){return this.Xi},t.prototype.$r=function(){return this.es},t.prototype.kr=function(){return this.ss},t.prototype.runTransaction=function(t,e,n){var r=this;Us("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.er.runTransaction(o,pf,(function(o){return i=new Fh(o,r.Ui?r.Ui.next():oh.ps),"readwrite-primary"===e?r._r(i).next((function(t){return!!t||r.wr(i)})).next((function(e){if(!e)throw Vs("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.bs.dr((function(){return r.zi(!1)})),new ru(nu.FAILED_PRECONDITION,eh);return n(i)})).next((function(t){return r.Er(i).next((function(){return t}))})):r.xr(i).next((function(){return n(i)}))})).then((function(t){return i.ts(),t}))},t.prototype.xr=function(t){var e=this;return Uh(t).get(Jh.key).next((function(t){if(null!==t&&e.Rr(t.leaseTimestampMs,5e3)&&!e.gr(t.ownerId)&&!e.Ir(t)&&!(e.qi||e.allowTabSynchronization&&t.allowTabSynchronization))throw new ru(nu.FAILED_PRECONDITION,Lh)}))},t.prototype.Er=function(t){var e=new Jh(this.clientId,this.allowTabSynchronization,Date.now());return Uh(t).put(Jh.key,e)},t.Hi=function(){return df.Hi()},t.Mr=function(t){var e=t.s.projectId;return t.s.i||(e+="."+t.s.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.Tr=function(t){var e=this,n=Uh(t);return n.get(Jh.key).next((function(t){return e.Ir(t)?(Us("IndexedDbPersistence","Releasing primary lease."),n.delete(Jh.key)):Zl.resolve()}))},t.prototype.Rr=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Vs("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.sr=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ji=function(){t.bs.lr((function(){return t.inForeground="visible"===t.document.visibilityState,t.nr()}))},this.document.addEventListener("visibilitychange",this.ji),this.inForeground="visible"===this.document.visibilityState)},t.prototype.br=function(){this.ji&&(this.document.removeEventListener("visibilitychange",this.ji),this.ji=null)},t.prototype.ir=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Wi=function(){e.pr(),e.bs.lr((function(){return e.yr()}))},this.window.addEventListener("unload",this.Wi))},t.prototype.vr=function(){this.Wi&&(this.window.removeEventListener("unload",this.Wi),this.Wi=null)},t.prototype.gr=function(t){var e;try{var n=null!==(null===(e=this.Zi)||void 0===e?void 0:e.getItem(this.Vr(t)));return Us("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Vs("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.pr=function(){if(this.Zi)try{this.Zi.setItem(this.Vr(this.clientId),String(Date.now()))}catch(t){Vs("Failed to set zombie client id.",t)}},t.prototype.Sr=function(){if(this.Zi)try{this.Zi.removeItem(this.Vr(this.clientId))}catch(t){}},t.prototype.Vr=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Uh(t){return jh.js(t,Jh.store)}function Vh(t){return jh.js(t,ff.store)}jh.Ji="main";var qh=function(){function t(t,e){this.db=t,this.Or=new Of(this,e)}return t.prototype.Lr=function(t){var e=this.Br(t);return this.db.Nr().Si(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Br=function(t){var e=0;return this.qr(t,(function(t){e++})).next((function(){return e}))},t.prototype.pe=function(t,e){return this.db.Nr().pe(t,e)},t.prototype.qr=function(t,e){return this.Ur(t,(function(t,n){return e(n)}))},t.prototype.Fi=function(t,e,n){return Bh(t,n)},t.prototype.$i=function(t,e,n){return Bh(t,n)},t.prototype.vi=function(t,e,n){return this.db.Nr().vi(t,e,n)},t.prototype.Qr=function(t,e){return Bh(t,e)},t.prototype.Wr=function(t,e){return function(t,e){var n=!1;return Yh(t).jr((function(r){return Wh(t,r,e).next((function(t){return t&&(n=!0),Zl.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Kr=function(t,e){var n=this,r=this.db.$r().oi(),i=[],o=0;return this.Ur(t,(function(a,s){if(s<=e){var u=n.Wr(t,a).next((function(e){if(!e)return o++,r.zn(t,a).next((function(){return r.Gn(a),Mh(t).delete([0,uh(a.path)])}))}));i.push(u)}})).next((function(){return Zl.Bn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Z(t.Li);return this.db.Nr().yi(t,n)},t.prototype.Gr=function(t,e){return Bh(t,e)},t.prototype.Ur=function(t,e){var n,r=Mh(t),i=oh.ps;return r.ei({index:uf.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==oh.ps&&e(new lu(hh(n)),i),i=s,n=a):i=oh.ps})).next((function(){i!==oh.ps&&e(new lu(hh(n)),i)}))},t.prototype.zr=function(t){return this.db.$r().ui(t)},t}();function Bh(t,e){return Mh(t).put(function(t,e){return new uf(0,uh(t.path),e)}(e,t.Li))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zh=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.ss=n,this.wi=r,this.Hr={}}return t.Fr=function(e,n,r,i){return zs(""!==e.uid),new t(e.Yr()?e.uid:"",n,r,i)},t.prototype.Jr=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qh(t).ei({index:tf.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Xr=function(t,e,n,r){var i=this,o=Gh(t),a=Qh(t);return a.add({}).next((function(s){zs("number"==typeof s);for(var u=new Xl(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Lc(t.Ks,e)})),i=n.mutations.map((function(e){return Lc(t.Ks,e)}));return new tf(e,n.batchId,n.yn.toMillis(),r,i)}(i.serializer,i.userId,u),l=[],h=new ku((function(t,e){return Gs(t.N(),e.N())})),f=0,p=r;f<p.length;f++){var d=p[f],y=ef.key(i.userId,d.key.path,s);h=h.add(d.key.path.p()),l.push(a.put(c)),l.push(o.put(y,ef.PLACEHOLDER))}return h.forEach((function(e){l.push(i.ss.Us(t,e))})),t.Zn((function(){i.Hr[s]=u.keys()})),Zl.Bn(l).next((function(){return u}))}))},t.prototype.Zr=function(t,e){var n=this;return Qh(t).get(e).next((function(t){return t?(zs(t.userId===n.userId),Th(n.serializer,t)):null}))},t.prototype.to=function(t,e){var n=this;return this.Hr[e]?Zl.resolve(this.Hr[e]):this.Zr(t,e).next((function(t){if(t){var r=t.keys();return n.Hr[e]=r,r}return null}))},t.prototype.eo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Qh(t).ei({index:tf.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(zs(e.batchId>=r),o=Th(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.no=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Qh(t).ei({index:tf.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.so=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qh(t).Ws(tf.userMutationsIndex,n).next((function(t){return t.map((function(t){return Th(e.serializer,t)}))}))},t.prototype.os=function(t,e){var n=this,r=ef.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Gh(t).ei({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=hh(u);if(s===n.userId&&e.path.isEqual(l))return Qh(t).get(c).next((function(t){if(!t)throw Bs();zs(t.userId===n.userId),o.push(Th(n.serializer,t))}));a.done()})).next((function(){return o}))},t.prototype.ls=function(t,e){var n=this,r=new ku(Gs),i=[];return e.forEach((function(e){var o=ef.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Gh(t).ei({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=hh(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),Zl.Bn(i).next((function(){return n.io(t,r)}))},t.prototype.Es=function(t,e){var n=this,r=e.path,i=r.length+1,o=ef.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new ku(Gs);return Gh(t).ei({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],l=hh(u);a===n.userId&&r.D(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.io(t,s)}))},t.prototype.io=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Qh(t).get(e).next((function(t){if(null===t)throw Bs();zs(t.userId===n.userId),r.push(Th(n.serializer,t))})))})),Zl.Bn(i).next((function(){return r}))},t.prototype.ro=function(t,e){var n=this;return Hh(t.Oi,this.userId,e).next((function(r){return t.Zn((function(){n.oo(e.batchId)})),Zl.forEach(r,(function(e){return n.wi.Qr(t,e)}))}))},t.prototype.oo=function(t){delete this.Hr[t]},t.prototype.ho=function(t){var e=this;return this.Jr(t).next((function(n){if(!n)return Zl.resolve();var r=IDBKeyRange.lowerBound(ef.prefixForUser(e.userId)),i=[];return Gh(t).ei({range:r},(function(t,n,r){if(t[0]===e.userId){var o=hh(t[1]);i.push(o)}else r.done()})).next((function(){zs(0===i.length)}))}))},t.prototype.Mi=function(t,e){return Wh(t,this.userId,e)},t.prototype.ao=function(t){var e=this;return Yh(t).get(this.userId).next((function(t){return t||new Zh(e.userId,-1,"")}))},t}();function Wh(t,e,n){var r=ef.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Gh(t).ei({range:o,xi:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Hh(t,e,n){var r=t.store(tf.store),i=t.store(ef.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.ei({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){zs(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=ef.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Zl.Bn(o).next((function(){return c}))}function Qh(t){return jh.js(t,tf.store)}function Gh(t){return jh.js(t,ef.store)}function Yh(t){return jh.js(t,Zh.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kh=10,$h=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;zs(n<r&&n>=0&&r<=Kh);var o=new mf(e);n<1&&r>=1&&(function(t){t.createObjectStore(Jh.store)}(t),function(t){t.createObjectStore(Zh.store,{keyPath:Zh.keyPath}),t.createObjectStore(tf.store,{keyPath:tf.keyPath,autoIncrement:!0}).createIndex(tf.userMutationsIndex,tf.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ef.store)}(t),hf(t),function(t){t.createObjectStore(of.store)}(t));var a=Zl.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(uf.store),t.deleteObjectStore(sf.store),t.deleteObjectStore(cf.store)}(t),hf(t)),a=a.next((function(){return function(t){var e=t.store(cf.store),n=new cf(0,0,ou.min().A(),0);return e.put(cf.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(tf.store).Ws().next((function(n){t.deleteObjectStore(tf.store),t.createObjectStore(tf.store,{keyPath:tf.keyPath,autoIncrement:!0}).createIndex(tf.userMutationsIndex,tf.userMutationsKeyPath,{unique:!0});var r=e.store(tf.store),i=n.map((function(t){return r.put(t)}));return Zl.Bn(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(ff.store,{keyPath:ff.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(af.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(of.store);e.createIndex(of.readTimeIndex,of.readTimeIndexPath,{unique:!1}),e.createIndex(of.collectionReadTimeIndex,of.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.rewriteCanonicalIds(o)}))),a},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(of.store).ei((function(t,n){e+=Ah(n)})).next((function(){var n=new af(e);return t.store(af.store).put(af.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Zh.store),r=t.store(tf.store);return n.Ws().next((function(n){return Zl.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Ws(tf.userMutationsIndex,i).next((function(r){return Zl.forEach(r,(function(r){zs(r.userId===n.userId);var i=Th(e.serializer,r);return Hh(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(uf.store),n=t.store(of.store);return t.store(cf.store).get(cf.key).next((function(t){var r=[];return n.ei((function(n,i){var o=new su(n),a=function(t){return[0,uh(t)]}(o);r.push(e.get(a).next((function(n){return n?Zl.resolve():function(n){return e.put(new uf(0,uh(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Zl.Bn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(lf.store,{keyPath:lf.keyPath});var n=e.store(lf.store),r=new ph,i=function(t){if(r.add(t)){var e=t.S(),i=t.p();return n.put({collectionId:e,parent:uh(i)})}};return e.store(of.store).ei({xi:!0},(function(t,e){var n=new su(t);return i(n.p())})).next((function(){return e.store(ef.store).ei({xi:!0},(function(t,e){t[0];var n=t[1],r=(t[2],hh(n));return i(r.p())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(sf.store);return n.ei((function(t,r){var i=xh(r),o=Ch(e.serializer,i);return n.put(o)}))},t}(),Xh=function(t,e){this.seconds=t,this.nanoseconds=e},Jh=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Jh.store="owner",Jh.key="owner";var Zh=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Zh.store="mutationQueues",Zh.keyPath="userId";var tf=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};tf.store="mutations",tf.keyPath="batchId",tf.userMutationsIndex="userMutationsIndex",tf.userMutationsKeyPath=["userId","batchId"];var ef=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,uh(e)]},t.key=function(t,e,n){return[t,uh(e),n]},t}();ef.store="documentMutations",ef.PLACEHOLDER=new ef;var nf=function(t,e){this.path=t,this.readTime=e},rf=function(t,e){this.path=t,this.version=e},of=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};of.store="remoteDocuments",of.readTimeIndex="readTimeIndex",of.readTimeIndexPath="readTime",of.collectionReadTimeIndex="collectionReadTimeIndex",of.collectionReadTimeIndexPath=["parentPath","readTime"];var af=function(t){this.byteSize=t};af.store="remoteDocumentGlobal",af.key="remoteDocumentGlobalKey";var sf=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};sf.store="targets",sf.keyPath="targetId",sf.queryTargetsIndexName="queryTargetsIndex",sf.queryTargetsKeyPath=["canonicalId","targetId"];var uf=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};uf.store="targetDocuments",uf.keyPath=["targetId","path"],uf.documentTargetsIndex="documentTargetsIndex",uf.documentTargetsKeyPath=["path","targetId"];var cf=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};cf.key="targetGlobalKey",cf.store="targetGlobal";var lf=function(t,e){this.collectionId=t,this.parent=e};function hf(t){t.createObjectStore(uf.store,{keyPath:uf.keyPath}).createIndex(uf.documentTargetsIndex,uf.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(sf.store,{keyPath:sf.keyPath}).createIndex(sf.queryTargetsIndexName,sf.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(cf.store)}lf.store="collectionParents",lf.keyPath=["collectionId","parent"];var ff=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ff.store="clientMetadata",ff.keyPath="clientId";var pf=E(E(E([Zh.store,tf.store,ef.store,of.store,sf.store,Jh.store,cf.store,uf.store],[ff.store]),[af.store]),[lf.store]),df=function(){function t(e){this.db=e,12.2===t.uo(R())&&Vs("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.tr=function(e,n,r){return Us("SimpleDb","Opening database:",e),new Zl((function(i,o){var a=indexedDB.open(e,n);a.onsuccess=function(e){var n=e.target.result;i(new t(n))},a.onblocked=function(){o(new ru(nu.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(t){var e=t.target.error;"VersionError"===e.name?o(new ru(nu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(e)},a.onupgradeneeded=function(t){Us("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;r.createOrUpgrade(n,a.transaction,t.oldVersion,Kh).next((function(){Us("SimpleDb","Database upgrade to version "+Kh+" complete")}))}})).On()},t.delete=function(t){return Us("SimpleDb","Removing database:",t),bf(window.indexedDB.deleteDatabase(t)).On()},t.Hi=function(){if("undefined"==typeof indexedDB)return!1;if(t.co())return!0;var e=R(),n=t.uo(e),r=0<n&&n<10,i=t.lo(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.co=function(){var t;return void 0!==r&&"YES"===(null===(t=r.env)||void 0===t?void 0:t._o)},t.js=function(t,e){return t.store(e)},t.uo=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.lo=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.ur=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){return g(this,void 0,void 0,(function(){var r,i,o,a,s;return m(this,(function(u){switch(u.label){case 0:r="readonly"===t,i=0,o=function(){var t,o,s,u,c;return m(this,(function(l){switch(l.label){case 0:++i,t=mf.open(a.db,r?"readonly":"readwrite",e),l.label=1;case 1:return l.trys.push([1,3,,4]),o=n(t).catch((function(e){return t.abort(e),Zl.reject(e)})).On(),s={},o.catch((function(){})),[4,t.fo];case 2:return[2,(s.value=(l.sent(),o),s)];case 3:return u=l.sent(),c="FirebaseError"!==u.name&&i<3,Us("SimpleDb","Transaction failed with error: %s. Retrying: %s.",u.message,c),c?[3,4]:[2,{value:Promise.reject(u)}];case 4:return[2]}}))},a=this,u.label=1;case 1:return[5,o()];case 2:if("object"==typeof(s=u.sent()))return[2,s.value];u.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),yf=function(){function t(t){this.do=t,this.wo=!1,this.To=null}return Object.defineProperty(t.prototype,"$n",{get:function(){return this.wo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Eo",{get:function(){return this.To},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.do=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.wo=!0},t.prototype.ni=function(t){this.To=t},t.prototype.delete=function(){return bf(this.do.delete())},t}(),vf=function(t){function e(e){var n=this;return(n=t.call(this,nu.UNAVAILABLE,"IndexedDB transaction failed: "+e)||this).name="IndexedDbTransactionError",n}return y(e,t),e}(ru);function gf(t){return"IndexedDbTransactionError"===t.name}var mf=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.Io=new ah,this.transaction.oncomplete=function(){e.Io.resolve()},this.transaction.onabort=function(){t.error?e.Io.reject(new vf(t.error)):e.Io.resolve()},this.transaction.onerror=function(t){var n=Ef(t.target.error);e.Io.reject(new vf(n))}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"fo",{get:function(){return this.Io.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Io.reject(t),this.aborted||(Us("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new _f(e)},t}(),_f=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Us("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Us("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),bf(n)},t.prototype.add=function(t){return Us("SimpleDb","ADD",this.store.name,t,t),bf(this.store.add(t))},t.prototype.get=function(t){var e=this;return bf(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Us("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Us("SimpleDb","DELETE",this.store.name,t),bf(this.store.delete(t))},t.prototype.count=function(){return Us("SimpleDb","COUNT",this.store.name),bf(this.store.count())},t.prototype.Ws=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.mo(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ao=function(t,e){Us("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.xi=!1;var r=this.cursor(n);return this.mo(r,(function(t,e,n){return n.delete()}))},t.prototype.ei=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.mo(r,e)},t.prototype.jr=function(t){var e=this.cursor({});return new Zl((function(n,r){e.onerror=function(t){var e=Ef(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.mo=function(t,e){var n=[];return new Zl((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new yf(i),a=e(i.primaryKey,i.value,o);if(a instanceof Zl){var s=a.catch((function(t){return o.done(),Zl.reject(t)}));n.push(s)}o.$n?r():null===o.Eo?i.continue():i.continue(o.Eo)}else r()}})).next((function(){return Zl.Bn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.xi?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function bf(t){return new Zl((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Ef(t.target.error);n(e)}}))}var wf=!1;function Ef(t){var e=df.uo(R());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new ru("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return wf||(wf=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(){return"undefined"!=typeof window?window:null}var xf=function(){function t(t,e,n,r,i){this.Ro=t,this.vs=e,this.Po=n,this.op=r,this.Vo=i,this.yo=new ah,this.then=this.yo.promise.then.bind(this.yo.promise),this.yo.promise.catch((function(t){}))}return t.po=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.bo=setTimeout((function(){return e.vo()}),t)},t.prototype.Bs=function(){return this.vo()},t.prototype.cancel=function(t){null!==this.bo&&(this.clearTimeout(),this.yo.reject(new ru(nu.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.vo=function(){var t=this;this.Ro.lr((function(){return null!==t.bo?(t.clearTimeout(),t.op().then((function(e){return t.yo.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.bo&&(this.Vo(this),clearTimeout(this.bo),this.bo=null)},t}(),Cf=function(){function t(){var t=this;this.So=Promise.resolve(),this.Do=[],this.Co=!1,this.Fo=[],this.No=null,this.$o=!1,this.ko=[],this.xo=new sh(this,"async_queue_retry"),this.Mo=function(){return t.xo.Ls()};var e=Tf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Mo)}return Object.defineProperty(t.prototype,"Oo",{get:function(){return this.Co},enumerable:!1,configurable:!0}),t.prototype.lr=function(t){this.enqueue(t)},t.prototype.Lo=function(t){this.Bo(),this.qo(t)},t.prototype.Uo=function(t){return this.Bo(),this.qo(t)},t.prototype.Qo=function(t){return g(this,void 0,void 0,(function(){var e;return m(this,(function(n){switch(n.label){case 0:return this.Bo(),this.Co?[3,2]:(this.Co=!0,(e=Tf())&&e.removeEventListener("visibilitychange",this.Mo),[4,this.Uo(t)]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.Bo(),this.Co?new Promise((function(t){})):this.qo(t)},t.prototype.dr=function(t){var e=this;this.Do.push(t),this.lr((function(){return e.Wo()}))},t.prototype.Wo=function(){return g(this,void 0,void 0,(function(){var t,e=this;return m(this,(function(n){switch(n.label){case 0:if(0===this.Do.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Do[0]()];case 2:return n.sent(),this.Do.shift(),this.xo.reset(),[3,4];case 3:if(!gf(t=n.sent()))throw t;return Us("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Do.length>0&&this.xo.xs((function(){return e.Wo()})),n.label=5;case 5:return[2]}}))}))},t.prototype.qo=function(t){var e=this,n=this.So.then((function(){return e.$o=!0,t().catch((function(t){throw e.No=t,e.$o=!1,Vs("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.$o=!1,t}))}));return this.So=n,n},t.prototype.Os=function(t,e,n){var r=this;this.Bo(),this.ko.indexOf(t)>-1&&(e=0);var i=xf.po(this,t,e,n,(function(t){return r.jo(t)}));return this.Fo.push(i),i},t.prototype.Bo=function(){this.No&&Bs()},t.prototype.Ko=function(){},t.prototype.Go=function(){return g(this,void 0,void 0,(function(){var t;return m(this,(function(e){switch(e.label){case 0:return[4,t=this.So];case 1:e.sent(),e.label=2;case 2:if(t!==this.So)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.zo=function(t){for(var e=0,n=this.Fo;e<n.length;e++)if(n[e].vs===t)return!0;return!1},t.prototype.Ho=function(t){var e=this;return this.Go().then((function(){e.Fo.sort((function(t,e){return t.Po-e.Po}));for(var n=0,r=e.Fo;n<r.length;n++){var i=r[n];if(i.Bs(),"all"!==t&&i.vs===t)break}return e.Go()}))},t.prototype.Yo=function(t){this.ko.push(t)},t.prototype.jo=function(t){var e=this.Fo.indexOf(t);this.Fo.splice(e,1)},t}();function Sf(t,e){if(Vs("AsyncQueue",e+": "+t),gf(t))return new ru(nu.UNAVAILABLE,e+": "+t);throw t}function If(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Gs(n,i);return 0===a?Gs(r,o):a}var Nf=function(){function t(t){this.Jo=t,this.buffer=new ku(If),this.Xo=0}return t.prototype.Zo=function(){return++this.Xo},t.prototype.th=function(t){var e=[t,this.Zo()];if(this.buffer.size<this.Jo)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();If(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),kf={eh:!1,nh:0,sh:0,ih:0},Af=function(){function t(t,e,n){this.rh=t,this.oh=e,this.hh=n}return t.ah=function(e){return new t(e,t.uh,t.lh)},t}();Af._h=-1,Af.fh=1048576,Af.dh=41943040,Af.uh=10,Af.lh=1e3,Af.wh=new Af(Af.dh,Af.uh,Af.lh),Af.Th=new Af(Af._h,0,0);var Pf=function(){function t(t,e){this.Or=t,this.Ro=e,this.Eh=!1,this.Ih=null}return t.prototype.start=function(t){this.Or.params.rh!==Af._h&&this.mh(t)},t.prototype.stop=function(){this.Ih&&(this.Ih.cancel(),this.Ih=null)},Object.defineProperty(t.prototype,"hr",{get:function(){return null!==this.Ih},enumerable:!1,configurable:!0}),t.prototype.mh=function(t){var e=this,n=this.Eh?3e5:6e4;Us("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Ih=this.Ro.Os("lru_garbage_collection",n,(function(){return g(e,void 0,void 0,(function(){var e;return m(this,(function(n){switch(n.label){case 0:this.Ih=null,this.Eh=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ah(this.Or)];case 2:return n.sent(),[3,7];case 3:return gf(e=n.sent())?(Us("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Mf(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.mh(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Of=function(){function t(t,e){this.Rh=t,this.params=e}return t.prototype.Ph=function(t,e){return this.Rh.Lr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Vh=function(t,e){var n=this;if(0===e)return Zl.resolve(oh.ps);var r=new Nf(e);return this.Rh.pe(t,(function(t){return r.th(t.sequenceNumber)})).next((function(){return n.Rh.qr(t,(function(t){return r.th(t)}))})).next((function(){return r.maxValue}))},t.prototype.vi=function(t,e,n){return this.Rh.vi(t,e,n)},t.prototype.Kr=function(t,e){return this.Rh.Kr(t,e)},t.prototype.gh=function(t,e){var n=this;return this.params.rh===Af._h?(Us("LruGarbageCollector","Garbage collection skipped; disabled"),Zl.resolve(kf)):this.zr(t).next((function(r){return r<n.params.rh?(Us("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.rh),kf):n.yh(t,e)}))},t.prototype.zr=function(t){return this.Rh.zr(t)},t.prototype.yh=function(t,e){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.Ph(t,this.params.oh).next((function(e){return e>c.params.hh?(Us("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.hh+" from "+e),r=c.params.hh):r=e,o=Date.now(),c.Vh(t,r)})).next((function(r){return n=r,a=Date.now(),c.vi(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.Kr(t,n)})).next((function(t){return u=Date.now(),js()<=ct.DEBUG&&Us("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),Zl.resolve({eh:!0,nh:r,sh:i,ih:t})}))},t}(),Rf=function(){function t(t,e,n){this.persistence=t,this.ph=e,this.bh=new Su(Gs),this.vh=new eu((function(t){return vu(t)}),gu),this.Sh=ou.min(),this.ns=t.Cr(n),this.Dh=t.$r(),this.Xi=t.Nr(),this.Ch=new rh(this.Dh,this.ns,this.persistence.kr()),this.ph.Fh(this.Ch)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Nh=function(t){return g(this,void 0,void 0,(function(){var e,n,r,i=this;return m(this,(function(o){switch(o.label){case 0:return e=this.ns,n=this.Ch,[4,this.persistence.runTransaction("Handle user change","readonly",(function(r){var o;return i.ns.so(r).next((function(a){return o=a,e=i.persistence.Cr(t),n=new rh(i.Dh,e,i.persistence.kr()),e.so(r)})).next((function(t){for(var e=[],i=[],a=ju(),s=0,u=o;s<u.length;s++){var c=u[s];e.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var p=0,d=t;p<d.length;p++){var y=d[p];i.push(y.batchId);for(var v=0,g=y.mutations;v<g.length;v++){var m=g[v];a=a.add(m.key)}}return n.us(r,a).next((function(t){return{$h:t,kh:e,xh:i}}))}))}))];case 1:return r=o.sent(),[2,(this.ns=e,this.Ch=n,this.ph.Fh(this.Ch),r)]}}))}))},t.prototype.Mh=function(t){var e,n=this,r=iu.now(),i=t.reduce((function(t,e){return t.add(e.key)}),ju());return this.persistence.runTransaction("Locally write mutations","readwrite",(function(o){return n.Ch.us(o,i).next((function(i){e=i;for(var a=[],s=0,u=t;s<u.length;s++){var c=u[s],l=dl(c,e.get(c.key));null!=l&&a.push(new ml(c.key,l,Il(l.proto.mapValue),cl.exists(!0)))}return n.ns.Xr(o,r,a,t)}))})).then((function(t){var n=t.Sn(e);return{batchId:t.batchId,Un:n}}))},t.prototype.Oh=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(n){var r=t.batch.keys(),i=e.Dh.oi({ai:!0});return e.Lh(n,t,i).next((function(){return i.apply(n)})).next((function(){return e.ns.ho(n)})).next((function(){return e.Ch.us(n,r)}))}))},t.prototype.Bh=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",(function(n){var r;return e.ns.Zr(n,t).next((function(t){return zs(null!==t),r=t.keys(),e.ns.ro(n,t)})).next((function(){return e.ns.ho(n)})).next((function(){return e.Ch.us(n,r)}))}))},t.prototype.no=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.ns.no(e)}))},t.prototype.mi=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Xi.mi(e)}))},t.prototype.qh=function(e){var n=this,r=e.X,i=this.bh;return this.persistence.runTransaction("Apply remote event","readwrite-primary",(function(o){var a=n.Dh.oi({ai:!0});i=n.bh;var s=[];e.Qt.forEach((function(e,a){var u=i.get(a);if(u){s.push(n.Xi.Ni(o,e.Xt,a).next((function(){return n.Xi.Ci(o,e.Yt,a)})));var c=e.resumeToken;if(c.H()>0){var l=u.tt(c,r).Z(o.Li);i=i.nt(a,l),t.Uh(u,l,e)&&s.push(n.Xi.yi(o,l))}}}));var u=Ou(),c=ju();if(e.jt.forEach((function(t,e){c=c.add(t)})),s.push(a.getEntries(o,c).next((function(t){e.jt.forEach((function(i,c){var l=t.get(i);c instanceof Al&&c.version.isEqual(ou.min())?(a.Gn(i,r),u=u.nt(i,c)):null==l||c.version.o(l.version)>0||0===c.version.o(l.version)&&l.hasPendingWrites?(a.jn(c,r),u=u.nt(i,c)):Us("LocalStore","Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",c.version),e.Kt.has(i)&&s.push(n.persistence.wi.Gr(o,i))}))}))),!r.isEqual(ou.min())){var l=n.Xi.mi(o).next((function(t){return n.Xi.Ri(o,o.Li,r)}));s.push(l)}return Zl.Bn(s).next((function(){return a.apply(o)})).next((function(){return n.Ch.cs(o,u)}))})).then((function(t){return n.bh=i,t}))},t.Uh=function(t,e,n){return zs(e.resumeToken.H()>0),0===t.resumeToken.H()||e.X.m()-t.X.m()>=this.Qh||n.Yt.size+n.Jt.size+n.Xt.size>0},t.prototype.Wh=function(t){return g(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c=this;return m(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,this.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Zl.forEach(t,(function(t){return Zl.forEach(t.ms,(function(n){return c.persistence.wi.Fi(e,t.targetId,n)})).next((function(){return Zl.forEach(t.As,(function(n){return c.persistence.wi.$i(e,t.targetId,n)}))}))}))}))];case 1:return l.sent(),[3,3];case 2:if(!gf(e=l.sent()))throw e;return Us("LocalStore","Failed to update sequence numbers: "+e),[3,3];case 3:for(n=0,r=t;n<r.length;n++)i=r[n],o=i.targetId,i.fromCache||(a=this.bh.get(o),s=a.X,u=a.et(s),this.bh=this.bh.nt(o,u));return[2]}}))}))},t.prototype.jh=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",(function(n){return void 0===t&&(t=-1),e.ns.eo(n,t)}))},t.prototype.Kh=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",(function(n){return e.Ch.rs(n,t)}))},t.prototype.Gh=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite",(function(n){var r;return e.Xi.Di(n,t).next((function(i){return i?(r=i,Zl.resolve(r)):e.Xi.Ti(n).next((function(i){return r=new Eu(t,i,0,n.Li),e.Xi.Pi(n,r).next((function(){return r}))}))}))})).then((function(n){var r=e.bh.get(n.targetId);return(null===r||n.X.o(r.X)>0)&&(e.bh=e.bh.nt(n.targetId,n),e.vh.set(t,n.targetId)),n}))},t.prototype.Di=function(t,e){var n=this.vh.get(e);return void 0!==n?Zl.resolve(this.bh.get(n)):this.Xi.Di(t,e)},t.prototype.zh=function(t,e){var n=this,r=this.bh.get(t),i=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release target",i,(function(t){return e?Zl.resolve():n.persistence.wi.removeTarget(t,r)})).then((function(){n.bh=n.bh.remove(t),n.vh.delete(r.target)}))},t.prototype.Hh=function(t,e){var n=this,r=ou.min(),i=ju();return this.persistence.runTransaction("Execute query","readonly",(function(o){return n.Di(o,t.We()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.Xi.ki(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.ph._s(o,t,e?r:ou.min(),e?i:ju())})).next((function(t){return{documents:t,Yh:i}}))}))},t.prototype.Lh=function(t,e,n){var r=this,i=e.batch,o=i.keys(),a=Zl.resolve();return o.forEach((function(r){a=a.next((function(){return n.zn(t,r)})).next((function(t){var o=t,a=e.Cn.get(r);zs(null!==a),(!o||o.version.o(a)<0)&&(o=i.pn(r,o,e))&&n.jn(o,e.Dn)}))})),a.next((function(){return r.ns.ro(t,i)}))},t.prototype.Ah=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.gh(n,e.bh)}))},t}();Rf.Qh=3e8;var Df=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).persistence=e,i.ns=e.Cr(r),i.Dh=e.$r(),i.Xi=e.Nr(),i}return y(e,t),e.prototype.start=function(){return this.Jh()},e.prototype.Xh=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",(function(n){return e.ns.to(n,t).next((function(t){return t?e.Ch.us(n,t):Zl.resolve(null)}))}))},e.prototype.Zh=function(t){this.ns.oo(t)},e.prototype.cr=function(t){this.persistence.cr(t)},e.prototype.Dr=function(){return this.persistence.Dr()},e.prototype.ta=function(t){var e=this,n=this.bh.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly",(function(n){return e.Xi.Me(n,t).next((function(t){return t?t.target:null}))}))},e.prototype.si=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",(function(e){return t.Dh.si(e,t.Sh)})).then((function(e){var n=e.ii,r=e.readTime;return t.Sh=r,n}))},e.prototype.Jh=function(){return g(this,void 0,void 0,(function(){var t,e=this;return m(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e.Dh.ri(t)}))];case 1:return t.Sh=n.sent(),[2]}}))}))},e}(Rf);function Mf(t){return g(this,void 0,void 0,(function(){return m(this,(function(e){if(t.code!==nu.FAILED_PRECONDITION||t.message!==eh)throw t;return Us("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lf=function(){function t(){this.ea=new ku(Ff.na),this.sa=new ku(Ff.ia)}return t.prototype._=function(){return this.ea._()},t.prototype.Fi=function(t,e){var n=new Ff(t,e);this.ea=this.ea.add(n),this.sa=this.sa.add(n)},t.prototype.ra=function(t,e){var n=this;t.forEach((function(t){return n.Fi(t,e)}))},t.prototype.$i=function(t,e){this.oa(new Ff(t,e))},t.prototype.ha=function(t,e){var n=this;t.forEach((function(t){return n.$i(t,e)}))},t.prototype.aa=function(t){var e=this,n=new lu(new su([])),r=new Ff(n,t),i=new Ff(n,t+1),o=[];return this.sa.vt([r,i],(function(t){e.oa(t),o.push(t.key)})),o},t.prototype.ua=function(){var t=this;this.ea.forEach((function(e){return t.oa(e)}))},t.prototype.oa=function(t){this.ea=this.ea.delete(t),this.sa=this.sa.delete(t)},t.prototype.ca=function(t){var e=new lu(new su([])),n=new Ff(e,t),r=new Ff(e,t+1),i=ju();return this.sa.vt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Mi=function(t){var e=new Ff(t,0),n=this.ea.Dt(e);return null!==n&&t.isEqual(n.key)},t}(),Ff=function(){function t(t,e){this.key=t,this.la=e}return t.na=function(t,e){return lu.P(t.key,e.key)||Gs(t.la,e.la)},t.ia=function(t,e){return Gs(t.la,e.la)||lu.P(t.key,e.key)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t,e){if(0!==e.length)throw new ru(nu.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+np(e.length,"argument")+".")}function Uf(t,e,n){if(e.length!==n)throw new ru(nu.INVALID_ARGUMENT,"Function "+t+"() requires "+np(n,"argument")+", but was called with "+np(e.length,"argument")+".")}function Vf(t,e,n){if(e.length<n)throw new ru(nu.INVALID_ARGUMENT,"Function "+t+"() requires at least "+np(n,"argument")+", but was called with "+np(e.length,"argument")+".")}function qf(t,e,n,r){if(e.length<n||e.length>r)throw new ru(nu.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+np(e.length,"argument")+".")}function Bf(t,e,n,r){Yf(t,e,ep(n)+" argument",r)}function zf(t,e,n,r){void 0!==r&&Bf(t,e,n,r)}function Wf(t,e,n,r){Yf(t,e,n+" option",r)}function Hf(t,e,n,r){void 0!==r&&Wf(t,e,n,r)}function Qf(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push($f(u))}var c=$f(r);throw new ru(nu.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function Gf(t,e,n,r){if(!e.some((function(t){return t===r})))throw new ru(nu.INVALID_ARGUMENT,"Invalid value "+$f(r)+" provided to function "+t+"() for its "+ep(n)+" argument. Acceptable values: "+e.join(", "));return r}function Yf(t,e,n,r){if(!("object"===e?Kf(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=$f(r);throw new ru(nu.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function Kf(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function $f(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Bs()}function Xf(t,e,n){if(void 0===n)throw new ru(nu.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+ep(e)+" argument, but it was undefined.")}function Jf(t,e,n){Zs(e,(function(e,r){if(n.indexOf(e)<0)throw new ru(nu.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function Zf(t,e,n,r){var i=$f(r);return new ru(nu.INVALID_ARGUMENT,"Function "+t+"() requires its "+ep(n)+" argument to be a "+e+", but it was: "+i)}function tp(t,e,n){if(n<=0)throw new ru(nu.INVALID_ARGUMENT,"Function "+t+"() requires its "+ep(e)+" argument to be a positive number, but it was: "+n+".")}function ep(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function np(t,e){return t+" "+e+(1===t?"":"s")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(){if("undefined"==typeof Uint8Array)throw new ru(nu.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ip(){if("undefined"==typeof atob)throw new ru(nu.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var op=function(){function t(t){ip(),this._a=t}return t.fromBase64String=function(e){Uf("Blob.fromBase64String",arguments,1),Bf("Blob.fromBase64String","string",1,e),ip();try{return new t(_u.fromBase64String(e))}catch(e){throw new ru(nu.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},t.fromUint8Array=function(e){if(Uf("Blob.fromUint8Array",arguments,1),rp(),!(e instanceof Uint8Array))throw Zf("Blob.fromUint8Array","Uint8Array",1,e);return new t(_u.fromUint8Array(e))},t.prototype.toBase64=function(){return Uf("Blob.toBase64",arguments,0),ip(),this._a.toBase64()},t.prototype.toUint8Array=function(){return Uf("Blob.toUint8Array",arguments,0),rp(),this._a.toUint8Array()},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._a.isEqual(t._a)},t}(),ap=function(t){!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new ru(nu.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+np(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(Bf("FieldPath","string",e,t[e]),0===t[e].length)throw new ru(nu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.fa=new cu(t)},sp=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return y(e,t),e.documentId=function(){return new e(cu.L().N())},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Zf("isEqual","FieldPath",1,t);return this.fa.isEqual(t.fa)},e}(ap),up=new RegExp("[~\\*/\\[\\]]"),cp=function(){this.da=this},lp=function(t){function e(e){var n=this;return(n=t.call(this)||this).wa=e,n}return y(e,t),e.prototype.Ta=function(t){if(2!==t.Ea)throw 1===t.Ea?t.Ia(this.wa+"() can only appear at the top level of your update data"):t.Ia(this.wa+"() cannot be used with set() unless you pass {merge:true}");return t.Le.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(cp);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(t,e,n){return new Cp({Ea:3,ma:e.settings.ma,methodName:t.wa,Aa:n},e.s,e.serializer,e.ignoreUndefinedProperties)}var fp=function(t){function e(e){var n=this;return(n=t.call(this)||this).wa=e,n}return y(e,t),e.prototype.Ta=function(t){return new sl(t.path,new Jc)},e.prototype.isEqual=function(t){return t instanceof e},e}(cp),pp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).wa=e,r.Ra=n,r}return y(e,t),e.prototype.Ta=function(t){var e=hp(this,t,!0),n=this.Ra.map((function(t){return Pp(t,e)})),r=new Zc(n);return new sl(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(cp),dp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).wa=e,r.Ra=n,r}return y(e,t),e.prototype.Ta=function(t){var e=hp(this,t,!0),n=this.Ra.map((function(t){return Pp(t,e)})),r=new el(n);return new sl(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(cp),yp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).wa=e,r.Pa=n,r}return y(e,t),e.prototype.Ta=function(t){var e=new rl(t.serializer,Ec(t.serializer,this.Pa));return new sl(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(cp),vp=function(t){function e(){return t.call(this)||this}return y(e,t),e.delete=function(){return jf("FieldValue.delete",arguments),new gp(new lp("FieldValue.delete"))},e.serverTimestamp=function(){return jf("FieldValue.serverTimestamp",arguments),new gp(new fp("FieldValue.serverTimestamp"))},e.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Vf("FieldValue.arrayUnion",arguments,1),new gp(new pp("FieldValue.arrayUnion",t))},e.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Vf("FieldValue.arrayRemove",arguments,1),new gp(new dp("FieldValue.arrayRemove",t))},e.increment=function(t){return Bf("FieldValue.increment","number",1,t),Uf("FieldValue.increment",arguments,1),new gp(new yp("FieldValue.increment",t))},e}(cp),gp=function(t){function e(e){var n=this;return(n=t.call(this)||this).da=e,n.wa=e.wa,n}return y(e,t),e.prototype.Ta=function(t){return this.da.Ta(t)},e.prototype.isEqual=function(t){return t instanceof e&&this.da.isEqual(t.da)},e}(vp),mp=function(){function t(t,e){if(Uf("GeoPoint",arguments,2),Bf("GeoPoint","number",1,t),Bf("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new ru(nu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ru(nu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Va=t,this.ga=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.Va},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.ga},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.Va===t.Va&&this.ga===t.ga},t.prototype.T=function(t){return Gs(this.Va,t.Va)||Gs(this.ga,t.ga)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t){return new _c(t,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bp=/^__.*__$/,wp=function(t,e,n){this.ya=t,this.pa=e,this.ba=n},Ep=function(){function t(t,e,n){this.data=t,this.Le=e,this.fieldTransforms=n}return t.prototype.va=function(t,e){var n=[];return null!==this.Le?n.push(new ml(t,this.data,this.Le,e)):n.push(new gl(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new bl(t,this.fieldTransforms)),n},t}(),Tp=function(){function t(t,e,n){this.data=t,this.Le=e,this.fieldTransforms=n}return t.prototype.va=function(t,e){var n=[new ml(t,this.data,this.Le,e)];return this.fieldTransforms.length>0&&n.push(new bl(t,this.fieldTransforms)),n},t}();function xp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bs()}}var Cp=function(){function t(t,e,n,r,i,o){this.settings=t,this.s=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sa(),this.fieldTransforms=i||[],this.Le=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ea",{get:function(){return this.settings.Ea},enumerable:!1,configurable:!0}),t.prototype.Da=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Le)},t.prototype.Ca=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Da({path:n,Aa:!1});return r.Fa(t),r},t.prototype.Na=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Da({path:n,Aa:!1});return r.Sa(),r},t.prototype.$a=function(t){return this.Da({path:void 0,Aa:!0})},t.prototype.Ia=function(t){return Fp(t,this.settings.methodName,this.settings.ka||!1,this.path,this.settings.ma)},t.prototype.contains=function(t){return void 0!==this.Le.find((function(e){return t.D(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.D(e.field)}))},t.prototype.Sa=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fa(this.path.get(t))},t.prototype.Fa=function(t){if(0===t.length)throw this.Ia("Document fields must not be empty");if(xp(this.Ea)&&bp.test(t))throw this.Ia('Document fields cannot begin and end with "__"')},t}(),Sp=function(){function t(t,e,n){this.s=t,this.ignoreUndefinedProperties=e,this.serializer=n||_p(t)}return t.prototype.xa=function(t,e,n,r){return void 0===r&&(r=!1),new Cp({Ea:t,methodName:e,ma:n,path:cu.k(),Aa:!1,ka:r},this.s,this.serializer,this.ignoreUndefinedProperties)},t}();function Ip(t,e,n,r,i,o){void 0===o&&(o={});var a=t.xa(o.merge||o.mergeFields?2:0,e,n,i);Dp("Data must be an object, but it was:",a,r);var s,u,c=Op(r,a);if(o.merge)s=new al(a.Le),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=f[h],d=void 0;if(p instanceof ap)d=p.fa;else{if("string"!=typeof p)throw Bs();d=Lp(e,p,n)}if(!a.contains(d))throw new ru(nu.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");jp(l,d)||l.push(d)}s=new al(l),u=a.fieldTransforms.filter((function(t){return s.Ke(t.field)}))}else s=null,u=a.fieldTransforms;return new Ep(new Cl(c),s,u)}function Np(t,e,n,r){var i=t.xa(1,e,n);Dp("Data must be an object, but it was:",i,r);var o=[],a=new Sl;Zs(r,(function(t,r){var s=Lp(e,t,n),u=i.Na(s);if(r instanceof cp&&r.da instanceof lp)o.push(s);else{var c=Pp(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new al(o);return new Tp(a.ze(),s,i.fieldTransforms)}function kp(t,e,n,r,i,o){var a=t.xa(1,e,n),s=[Mp(e,r,n)],u=[i];if(o.length%2!=0)throw new ru(nu.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Mp(e,o[c])),u.push(o[c+1]);for(var l=[],h=new Sl,f=s.length-1;f>=0;--f)if(!jp(l,s[f])){var p=s[f],d=u[f],y=a.Na(p);if(d instanceof cp&&d.da instanceof lp)l.push(p);else{var v=Pp(d,y);null!=v&&(l.push(p),h.set(p,v))}}var g=new al(l);return new Tp(h.ze(),g,a.fieldTransforms)}function Ap(t,e,n,r){return void 0===r&&(r=!1),Pp(n,t.xa(r?4:3,e))}function Pp(t,e){if(Rp(t))return Dp("Unsupported field value:",e,t),Op(t,e);if(t instanceof cp)return function(t,e){if(!xp(e.Ea))throw e.Ia(t.wa+"() can only be used with update() and set()");if(!e.path)throw e.Ia(t.wa+"() is not currently supported inside arrays");var n=t.Ta(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Le.push(e.path),t instanceof Array){if(e.settings.Aa&&4!==e.Ea)throw e.Ia("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Pp(o[i],e.$a(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ec(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=iu.fromDate(t);return{timestampValue:Tc(e.serializer,n)}}if(t instanceof iu){var r=new iu(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Tc(e.serializer,r)}}if(t instanceof mp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof op)return{bytesValue:xc(e.serializer,t)};if(t instanceof wp){var i=e.s,o=t.ya;if(!o.isEqual(i))throw e.Ia("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Ic(t.ya||e.s,t.pa.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.Ia("Unsupported field value: "+$f(t))}(t,e)}function Op(t,e){var n={};return tu(t)?e.path&&e.path.length>0&&e.Le.push(e.path):Zs(t,(function(t,r){var i=Pp(r,e.Ca(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Rp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof iu||t instanceof mp||t instanceof op||t instanceof wp||t instanceof cp)}function Dp(t,e,n){if(!Rp(n)||!Kf(n)){var r=$f(n);throw"an object"===r?e.Ia(t+" a custom object"):e.Ia(t+" "+r)}}function Mp(t,e,n){if(e instanceof ap)return e.fa;if("string"==typeof e)return Lp(t,e);throw Fp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Lp(t,e,n){try{return function(t){if(t.search(up)>=0)throw new ru(nu.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(sp.bind.apply(sp,E([void 0],t.split("."))))}catch(e){throw new ru(nu.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).fa}catch(e){throw Fp((r=e)instanceof Error?r.message:r.toString(),t,!1,void 0,n)}var r}function Fp(t,e,n,r,i){var o=r&&!r._(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new ru(nu.INVALID_ARGUMENT,(s+=". ")+t+u)}function jp(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Up=function(){function t(t){this.uid=t}return t.prototype.Yr=function(){return null!=this.uid},t.prototype.Ma=function(){return this.Yr()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Up.UNAUTHENTICATED=new Up(null),Up.Oa=new Up("google-credentials-uid"),Up.La=new Up("first-party-uid");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Vp=function(t,e){this.user=e,this.type="OAuth",this.Ba={},this.Ba.Authorization="Bearer "+t},qp=function(){function t(){this.qa=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.Ua=function(){},t.prototype.Qa=function(t){this.qa=t,t(Up.UNAUTHENTICATED)},t.prototype.Wa=function(){this.qa=null},t}(),Bp=function(){function t(t){var e=this;this.ja=null,this.currentUser=Up.UNAUTHENTICATED,this.Ka=!1,this.Ga=0,this.qa=null,this.forceRefresh=!1,this.ja=function(){e.Ga++,e.currentUser=e.za(),e.Ka=!0,e.qa&&e.qa(e.currentUser)},this.Ga=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.ja):(this.ja(null),t.get().then((function(t){e.auth=t,e.ja&&e.auth.addAuthTokenListener(e.ja)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.Ga,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.Ga!==e?(Us("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(zs("string"==typeof n.accessToken),new Vp(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.Ua=function(){this.forceRefresh=!0},t.prototype.Qa=function(t){this.qa=t,this.Ka&&t(this.currentUser)},t.prototype.Wa=function(){this.auth&&this.auth.removeAuthTokenListener(this.ja),this.ja=null,this.qa=null},t.prototype.za=function(){var t=this.auth&&this.auth.getUid();return zs(null===t||"string"==typeof t),new Up(t)},t}(),zp=function(){function t(t,e){this.Ha=t,this.Ya=e,this.type="FirstParty",this.user=Up.La}return Object.defineProperty(t.prototype,"Ba",{get:function(){var t={"X-Goog-AuthUser":this.Ya},e=this.Ha.auth.Ja([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Wp=function(){function t(t,e){this.Ha=t,this.Ya=e}return t.prototype.getToken=function(){return Promise.resolve(new zp(this.Ha,this.Ya))},t.prototype.Qa=function(t){t(Up.La)},t.prototype.Wa=function(){},t.prototype.Ua=function(){},t}(),Hp=function(){function t(t,e,n,r,i,o){this.bs=t,this.Xa=n,this.Za=r,this.tu=i,this.listener=o,this.state=0,this.eu=0,this.nu=null,this.stream=null,this.xo=new sh(t,e)}return t.prototype.su=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.iu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ru()},t.prototype.stop=function(){return g(this,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return this.su()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.ou=function(){this.state=0,this.xo.reset()},t.prototype.hu=function(){var t=this;this.iu()&&null===this.nu&&(this.nu=this.bs.Os(this.Xa,6e4,(function(){return t.au()})))},t.prototype.uu=function(t){this.cu(),this.stream.send(t)},t.prototype.au=function(){return g(this,void 0,void 0,(function(){return m(this,(function(t){return this.iu()?[2,this.close(0)]:[2]}))}))},t.prototype.cu=function(){this.nu&&(this.nu.cancel(),this.nu=null)},t.prototype.close=function(t,e){return g(this,void 0,void 0,(function(){return m(this,(function(n){switch(n.label){case 0:return this.cu(),this.xo.cancel(),this.eu++,3!==t?this.xo.reset():e&&e.code===nu.RESOURCE_EXHAUSTED?(Vs(e.toString()),Vs("Using maximum backoff delay to prevent overloading the backend."),this.xo.ks()):e&&e.code===nu.UNAUTHENTICATED&&this.tu.Ua(),null!==this.stream&&(this.lu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener._u(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.lu=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.fu(this.eu),n=this.eu;this.tu.getToken().then((function(e){t.eu===n&&t.du(e)}),(function(n){e((function(){var e=new ru(nu.UNKNOWN,"Fetching auth token failed: "+n.message);return t.wu(e)}))}))},t.prototype.du=function(t){var e=this,n=this.fu(this.eu);this.stream=this.Tu(t),this.stream.Eu((function(){n((function(){return e.state=2,e.listener.Eu()}))})),this.stream._u((function(t){n((function(){return e.wu(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.ru=function(){var t=this;this.state=4,this.xo.xs((function(){return g(t,void 0,void 0,(function(){return m(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.wu=function(t){return Us("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.fu=function(t){var e=this;return function(n){e.bs.lr((function(){return e.eu===t?n():(Us("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Qp=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,a}return y(e,t),e.prototype.Tu=function(t){return this.Za.Iu("Listen",t)},e.prototype.onMessage=function(t){this.xo.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Bs()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Oe?(zs(void 0===e||"string"==typeof e),_u.fromBase64String(e||"")):(zs(void 0===e||e instanceof Uint8Array),_u.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,s=a&&function(t){var e=void 0===t.code?nu.UNKNOWN:Cu(t.code);return new ru(e,t.message||"")}(a);n=new Yu(r,i,o,s||null)}else if("documentChange"in e){e.documentChange;var u=e.documentChange;u.document,u.document.name,u.document.updateTime;var c=Ac(t,u.document.name),l=Sc(u.document.updateTime),h=new Cl({mapValue:{fields:u.document.fields}}),f=new kl(c,l,h,{}),p=u.targetIds||[],d=u.removedTargetIds||[];n=new Qu(p,d,f.key,f)}else if("documentDelete"in e){e.documentDelete;var y=e.documentDelete;y.document;var v=Ac(t,y.document),g=y.readTime?Sc(y.readTime):ou.min(),m=new Al(v,g),_=y.removedTargetIds||[];n=new Qu([],_,m.key,m)}else if("documentRemove"in e){e.documentRemove;var b=e.documentRemove;b.document;var w=Ac(t,b.document),E=b.removedTargetIds||[];n=new Qu([],E,w,null)}else{if(!("filter"in e))return Bs();e.filter;var T=e.filter;T.targetId;var x=T.count||0,C=new Tu(x),S=T.targetId;n=new Gu(S,C)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return ou.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ou.min():e.readTime?Sc(e.readTime):ou.min()}(t);return this.listener.mu(e,n)},e.prototype.Au=function(t){var e={};e.database=Rc(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=mu(r)?{documents:jc(t,r)}:{query:Uc(t,r)}).targetId=e.targetId,e.resumeToken.H()>0&&(n.resumeToken=xc(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Bs()}}(0,e.J);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.uu(e)},e.prototype.Ru=function(t){var e={};e.database=Rc(this.serializer),e.removeTarget=t,this.uu(e)},e}(Hp),Gp=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,a.Pu=!1,a}return y(e,t),Object.defineProperty(e.prototype,"Vu",{get:function(){return this.Pu},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Pu=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.lu=function(){this.Pu&&this.gu([])},e.prototype.Tu=function(t){return this.Za.Iu("Write",t)},e.prototype.onMessage=function(t){if(zs(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Pu){this.xo.reset();var e=function(t,e){return t&&t.length>0?(zs(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Sc(t.updateTime):Sc(e);n.isEqual(ou.min())&&(n=Sc(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new ul(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Sc(t.commitTime);return this.listener.yu(n,e)}return zs(!t.writeResults||0===t.writeResults.length),this.Pu=!0,this.listener.pu()},e.prototype.bu=function(){var t={};t.database=Rc(this.serializer),this.uu(t)},e.prototype.gu=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Lc(e.serializer,t)}))};this.uu(n)},e}(Hp),Yp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Za=e,i.credentials=n,i.serializer=r,i.vu=!1,i}return y(e,t),e.prototype.Su=function(){if(this.vu)throw new ru(nu.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Du=function(t,e){var n=this;return this.Su(),this.credentials.getToken().then((function(r){return n.Za.Du(t,e,r)})).catch((function(t){throw t.code===nu.UNAUTHENTICATED&&n.credentials.Ua(),t}))},e.prototype.Cu=function(t,e){var n=this;return this.Su(),this.credentials.getToken().then((function(r){return n.Za.Cu(t,e,r)})).catch((function(t){throw t.code===nu.UNAUTHENTICATED&&n.credentials.Ua(),t}))},e}((function(){this.je=void 0})),Kp=function(){function t(t){this.Fu=t,this.Nu=new Map,this.mutations=[],this.$u=!1,this.ku=null,this.xu=new Set}return t.prototype.Mu=function(t){return g(this,void 0,void 0,(function(){var e,n=this;return m(this,(function(r){switch(r.label){case 0:if(this.Ou(),this.mutations.length>0)throw new ru(nu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return g(this,void 0,void 0,(function(){var n,r,i,o,a;return m(this,(function(s){switch(s.label){case 0:return n=Ws(t),r={database:Rc(n.serializer),documents:e.map((function(t){return kc(n.serializer,t)}))},[4,n.Cu("BatchGetDocuments",r)];case 1:return i=s.sent(),o=new Map,i.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){zs(!!e.found),e.found.name,e.found.updateTime;var n=Ac(t,e.found.name),r=Sc(e.found.updateTime),i=new Cl({mapValue:{fields:e.found.fields}});return new kl(n,r,i,{})}(t,e):"missing"in e?function(t,e){zs(!!e.missing),zs(!!e.readTime);var n=Ac(t,e.missing),r=Sc(e.readTime);return new Al(n,r)}(t,e):Bs()}(n.serializer,t);o.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=o.get(t.toString());zs(!!e),a.push(e)})),a)]}}))}))}(this.Fu,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Al||t instanceof kl?n.Lu(t):Bs()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.va(t,this.Ue(t))),this.xu.add(t)},t.prototype.update=function(t,e){try{this.write(e.va(t,this.Bu(t)))}catch(t){this.ku=t}this.xu.add(t)},t.prototype.delete=function(t){this.write([new Tl(t,this.Ue(t))]),this.xu.add(t)},t.prototype.commit=function(){return g(this,void 0,void 0,(function(){var t,e=this;return m(this,(function(n){switch(n.label){case 0:if(this.Ou(),this.ku)throw this.ku;return t=this.Nu,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=new lu(su.$(n));e.mutations.push(new xl(r,e.Ue(r)))})),[4,function(t,e){return g(this,void 0,void 0,(function(){var n,r;return m(this,(function(i){switch(i.label){case 0:return n=Ws(t),r={database:Rc(n.serializer),writes:e.map((function(t){return Lc(n.serializer,t)}))},[4,n.Du("Commit",r)];case 1:return i.sent(),[2]}}))}))}(this.Fu,this.mutations)];case 1:return n.sent(),this.$u=!0,[2]}}))}))},t.prototype.Lu=function(t){var e;if(t instanceof kl)e=t.version;else{if(!(t instanceof Al))throw Bs();e=ou.min()}var n=this.Nu.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ru(nu.ABORTED,"Document version changed between two reads.")}else this.Nu.set(t.key.toString(),e)},t.prototype.Ue=function(t){var e=this.Nu.get(t.toString());return!this.xu.has(t)&&e?cl.updateTime(e):cl.Qe()},t.prototype.Bu=function(t){var e=this.Nu.get(t.toString());if(!this.xu.has(t)&&e){if(e.isEqual(ou.min()))throw new ru(nu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cl.updateTime(e)}return cl.exists(!0)},t.prototype.write=function(t){this.Ou(),this.mutations=this.mutations.concat(t)},t.prototype.Ou=function(){},t}(),$p=function(){function t(t,e){this.Ro=t,this.qu=e,this.state="Unknown",this.Uu=0,this.Qu=null,this.Wu=!0}return t.prototype.ju=function(){var t=this;0===this.Uu&&(this.Ku("Unknown"),this.Qu=this.Ro.Os("online_state_timeout",1e4,(function(){return t.Qu=null,t.Gu("Backend didn't respond within 10 seconds."),t.Ku("Offline"),Promise.resolve()})))},t.prototype.zu=function(t){"Online"===this.state?this.Ku("Unknown"):(this.Uu++,this.Uu>=1&&(this.Hu(),this.Gu("Connection failed 1 times. Most recent error: "+t.toString()),this.Ku("Offline")))},t.prototype.set=function(t){this.Hu(),this.Uu=0,"Online"===t&&(this.Wu=!1),this.Ku(t)},t.prototype.Ku=function(t){t!==this.state&&(this.state=t,this.qu(t))},t.prototype.Gu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Wu?(Vs(e),this.Wu=!1):Us("OnlineStateTracker",e)},t.prototype.Hu=function(){null!==this.Qu&&(this.Qu.cancel(),this.Qu=null)},t}(),Xp=function(){function t(t,e,n,r,i){var o=this;this.Yu=t,this.Fu=e,this.Ro=n,this.Ju=[],this.Xu=new Map,this.Zu=null,this.tc=new Set,this.ec=i,this.ec.nc((function(t){n.lr((function(){return g(o,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return this.sc()?(Us("RemoteStore","Restarting streams for network reachability change."),[4,this.ic()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.rc=new $p(n,r),this.oc=function(t,e,n){var r=Ws(t);return new Qp(e,r.Za,r.credentials,r.serializer,n)}(this.Fu,n,{Eu:this.hc.bind(this),_u:this.ac.bind(this),mu:this.uc.bind(this)}),this.cc=function(t,e,n){var r=Ws(t);return new Gp(e,r.Za,r.credentials,r.serializer,n)}(this.Fu,n,{Eu:this.lc.bind(this),_u:this._c.bind(this),pu:this.fc.bind(this),yu:this.yu.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return this.tc.delete(0),this.dc()},t.prototype.dc=function(){return g(this,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return this.sc()?(this.wc()?this.Tc():this.rc.set("Unknown"),[4,this.Ec()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.disableNetwork=function(){return g(this,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return this.tc.add(0),[4,this.Ic()];case 1:return t.sent(),this.rc.set("Offline"),[2]}}))}))},t.prototype.Ic=function(){return g(this,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return[4,this.cc.stop()];case 1:return t.sent(),[4,this.oc.stop()];case 2:return t.sent(),this.Ju.length>0&&(Us("RemoteStore","Stopping write stream with "+this.Ju.length+" pending writes"),this.Ju=[]),this.mc(),[2]}}))}))},t.prototype.yr=function(){return g(this,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return Us("RemoteStore","RemoteStore shutting down."),this.tc.add(5),[4,this.Ic()];case 1:return t.sent(),this.ec.yr(),this.rc.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){this.Xu.has(t.targetId)||(this.Xu.set(t.targetId,t),this.wc()?this.Tc():this.oc.iu()&&this.Ac(t))},t.prototype.Rc=function(t){this.Xu.delete(t),this.oc.iu()&&this.Pc(t),0===this.Xu.size&&(this.oc.iu()?this.oc.hu():this.sc()&&this.rc.set("Unknown"))},t.prototype.Me=function(t){return this.Xu.get(t)||null},t.prototype.xe=function(t){return this.Vc.xe(t)},t.prototype.Ac=function(t){this.Zu.de(t.targetId),this.oc.Au(t)},t.prototype.Pc=function(t){this.Zu.de(t),this.oc.Ru(t)},t.prototype.Tc=function(){this.Zu=new $u(this),this.oc.start(),this.rc.ju()},t.prototype.wc=function(){return this.sc()&&!this.oc.su()&&this.Xu.size>0},t.prototype.sc=function(){return 0===this.tc.size},t.prototype.mc=function(){this.Zu=null},t.prototype.hc=function(){return g(this,void 0,void 0,(function(){var t=this;return m(this,(function(e){return this.Xu.forEach((function(e,n){t.Ac(e)})),[2]}))}))},t.prototype.ac=function(t){return g(this,void 0,void 0,(function(){return m(this,(function(e){return this.mc(),this.wc()?(this.rc.zu(t),this.Tc()):this.rc.set("Unknown"),[2]}))}))},t.prototype.uc=function(t,e){return g(this,void 0,void 0,(function(){var n,r,i;return m(this,(function(o){switch(o.label){case 0:if(this.rc.set("Online"),!(t instanceof Yu&&2===t.state&&t.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,this.gc(t)];case 2:return o.sent(),[3,5];case 3:return n=o.sent(),Us("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),[4,this.yc(n)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Qu?this.Zu.Pe(t):t instanceof Gu?this.Zu.De(t):this.Zu.ye(t),e.isEqual(ou.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,this.Yu.mi()];case 8:return r=o.sent(),e.o(r)>=0?[4,this.pc(e)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return Us("RemoteStore","Failed to raise snapshot:",i=o.sent()),[4,this.yc(i)];case 12:return o.sent(),[3,13];case 13:return[2]}}))}))},t.prototype.yc=function(t,e){return g(this,void 0,void 0,(function(){var n=this;return m(this,(function(r){switch(r.label){case 0:if(!gf(t))throw t;return this.tc.add(1),[4,this.Ic()];case 1:return r.sent(),this.rc.set("Offline"),e||(e=function(){return n.Yu.mi()}),this.Ro.dr((function(){return g(n,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return Us("RemoteStore","Retrying IndexedDB access"),[4,e()];case 1:return t.sent(),this.tc.delete(1),[4,this.dc()];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))},t.prototype.bc=function(t){var e=this;return t().catch((function(n){return e.yc(n,t)}))},t.prototype.pc=function(t){var e=this,n=this.Zu.Ne(t);return n.Qt.forEach((function(n,r){if(n.resumeToken.H()>0){var i=e.Xu.get(r);i&&e.Xu.set(r,i.tt(n.resumeToken,t))}})),n.Wt.forEach((function(t){var n=e.Xu.get(t);if(n){e.Xu.set(t,n.tt(_u.Y,n.X)),e.Pc(t);var r=new Eu(n.target,t,1,n.sequenceNumber);e.Ac(r)}})),this.Vc.qh(n)},t.prototype.gc=function(t){return g(this,void 0,void 0,(function(){var e,n,r,i;return m(this,(function(o){switch(o.label){case 0:e=t.cause,n=0,r=t.targetIds,o.label=1;case 1:return n<r.length?(i=r[n],this.Xu.has(i)?[4,this.Vc.vc(i,e)]:[3,3]):[3,5];case 2:o.sent(),this.Xu.delete(i),this.Zu.removeTarget(i),o.label=3;case 3:o.label=4;case 4:return n++,[3,1];case 5:return[2]}}))}))},t.prototype.Ec=function(){return g(this,void 0,void 0,(function(){var t,e,n;return m(this,(function(r){switch(r.label){case 0:t=this.Ju.length>0?this.Ju[this.Ju.length-1].batchId:-1,r.label=1;case 1:if(!this.Sc())return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,this.Yu.jh(t)];case 3:return null===(e=r.sent())?(0===this.Ju.length&&this.cc.hu(),[3,7]):(t=e.batchId,this.Dc(e),[3,6]);case 4:return n=r.sent(),[4,this.yc(n)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return this.Cc()&&this.Fc(),[2]}}))}))},t.prototype.Sc=function(){return this.sc()&&this.Ju.length<10},t.prototype.Nc=function(){return this.Ju.length},t.prototype.Dc=function(t){this.Ju.push(t),this.cc.iu()&&this.cc.Vu&&this.cc.gu(t.mutations)},t.prototype.Cc=function(){return this.sc()&&!this.cc.su()&&this.Ju.length>0},t.prototype.Fc=function(){this.cc.start()},t.prototype.lc=function(){return g(this,void 0,void 0,(function(){return m(this,(function(t){return this.cc.bu(),[2]}))}))},t.prototype.fc=function(){return g(this,void 0,void 0,(function(){var t,e,n;return m(this,(function(r){for(t=0,e=this.Ju;t<e.length;t++)n=e[t],this.cc.gu(n.mutations);return[2]}))}))},t.prototype.yu=function(t,e){return g(this,void 0,void 0,(function(){var n,r,i=this;return m(this,(function(o){switch(o.label){case 0:return n=this.Ju.shift(),r=Jl.from(n,t,e),[4,this.bc((function(){return i.Vc.$c(r)}))];case 1:return o.sent(),[4,this.Ec()];case 2:return o.sent(),[2]}}))}))},t.prototype._c=function(t){return g(this,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:return t&&this.cc.Vu?[4,this.kc(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.Cc()&&this.Fc(),[2]}}))}))},t.prototype.kc=function(t){return g(this,void 0,void 0,(function(){var e,n,r=this;return m(this,(function(i){switch(i.label){case 0:return xu(n=t.code)&&n!==nu.ABORTED?(e=this.Ju.shift(),this.cc.ou(),[4,this.bc((function(){return r.Vc.xc(e.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,this.Ec()];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},t.prototype.Mc=function(){return new Kp(this.Fu)},t.prototype.ic=function(){return g(this,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return this.tc.add(4),[4,this.Ic()];case 1:return t.sent(),this.rc.set("Unknown"),this.tc.delete(4),[4,this.dc()];case 2:return t.sent(),[2]}}))}))},t.prototype.Oc=function(t){return g(this,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:return this.Ro.Ko(),Us("RemoteStore","RemoteStore received new credentials"),this.tc.add(3),[4,this.Ic()];case 1:return e.sent(),this.rc.set("Unknown"),[4,this.Vc.Oc(t)];case 2:return e.sent(),this.tc.delete(3),[4,this.dc()];case 3:return e.sent(),[2]}}))}))},t.prototype.Lc=function(t){return g(this,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:return t?(this.tc.delete(2),[4,this.dc()]):[3,2];case 1:return e.sent(),[3,5];case 2:return t?[3,4]:(this.tc.add(2),[4,this.Ic()]);case 3:e.sent(),this.rc.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t,e){return"firestore_clients_"+t+"_"+e}function Zp(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Yr()&&(r+="_"+e.uid),r}function td(t,e){return"firestore_targets_"+t+"_"+e}var ed=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Bc=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new ru(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(Vs("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.qc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),nd=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Bc=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new ru(r.error.code,r.error.message)),i?new t(e,r.state,o):(Vs("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.qc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),rd=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Bc=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Vu(),a=0;i&&a<r.activeTargetIds.length;++a)i=pu(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(Vs("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),id=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Bc=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Vs("SharedClientState","Failed to parse online state: "+e),null)},t}(),od=function(){function t(){this.activeTargetIds=Vu()}return t.prototype.Uc=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Qc=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.qc=function(){var t={activeTargetIds:this.activeTargetIds.F(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),ad=function(){function t(t,e,n,r,i){this.window=t,this.bs=e,this.persistenceKey=n,this.Wc=r,this.Vc=null,this.qu=null,this.Ps=null,this.jc=this.Kc.bind(this),this.Gc=new Su(Gs),this.hr=!1,this.zc=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Hc=Jp(this.persistenceKey,this.Wc),this.Yc=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Gc=this.Gc.nt(this.Wc,new od),this.Jc=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Xc=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Zc=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.tl=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.jc)}return t.Hi=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return g(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,l,h=this;return m(this,(function(f){switch(f.label){case 0:return[4,this.Vc.Dr()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Wc&&(i=this.getItem(Jp(this.persistenceKey,r)))&&(o=rd.Bc(r,i))&&(this.Gc=this.Gc.nt(o.clientId,o));for(this.el(),(a=this.storage.getItem(this.tl))&&(s=this.nl(a))&&this.sl(s),u=0,c=this.zc;u<c.length;u++)l=c[u],this.Kc(l);return this.zc=[],this.window.addEventListener("unload",(function(){return h.yr()})),this.hr=!0,[2]}}))}))},t.prototype.ys=function(t){this.setItem(this.Yc,JSON.stringify(t))},t.prototype.il=function(){return this.rl(this.Gc)},t.prototype.ol=function(t){var e=!1;return this.Gc.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.hl=function(t){this.al(t,"pending")},t.prototype.ul=function(t,e,n){this.al(t,e,n),this.cl(t)},t.prototype.ll=function(t){var e="not-current";if(this.ol(t)){var n=this.storage.getItem(td(this.persistenceKey,t));if(n){var r=nd.Bc(t,n);r&&(e=r.state)}}return this._l.Uc(t),this.el(),e},t.prototype.fl=function(t){this._l.Qc(t),this.el()},t.prototype.dl=function(t){return this._l.activeTargetIds.has(t)},t.prototype.wl=function(t){this.removeItem(td(this.persistenceKey,t))},t.prototype.Tl=function(t,e,n){this.El(t,e,n)},t.prototype.Nh=function(t,e,n){var r=this;e.forEach((function(t){r.cl(t)})),this.currentUser=t,n.forEach((function(t){r.hl(t)}))},t.prototype.Il=function(t){this.ml(t)},t.prototype.yr=function(){this.hr&&(this.window.removeEventListener("storage",this.jc),this.removeItem(this.Hc),this.hr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Us("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Us("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Us("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Kc=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Us("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Hc)return void Vs("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.bs.dr((function(){return g(e,void 0,void 0,(function(){var t,e,r,i,o,a;return m(this,(function(s){if(this.hr){if(null!==n.key)if(this.Jc.test(n.key)){if(null==n.newValue)return t=this.Al(n.key),[2,this.Rl(t,null)];if(e=this.Pl(n.key,n.newValue))return[2,this.Rl(e.clientId,e)]}else if(this.Xc.test(n.key)){if(null!==n.newValue&&(r=this.Vl(n.key,n.newValue)))return[2,this.gl(r)]}else if(this.Zc.test(n.key)){if(null!==n.newValue&&(i=this.yl(n.key,n.newValue)))return[2,this.pl(i)]}else if(n.key===this.tl){if(null!==n.newValue&&(o=this.nl(n.newValue)))return[2,this.sl(o)]}else n.key===this.Yc&&(a=function(t){var e=oh.ps;if(null!=t)try{var n=JSON.parse(t);zs("number"==typeof n),e=n}catch(t){Vs("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==oh.ps&&this.Ps(a)}else this.zc.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"_l",{get:function(){return this.Gc.get(this.Wc)},enumerable:!1,configurable:!0}),t.prototype.el=function(){this.setItem(this.Hc,this._l.qc())},t.prototype.al=function(t,e,n){var r=new ed(this.currentUser,t,e,n),i=Zp(this.persistenceKey,this.currentUser,t);this.setItem(i,r.qc())},t.prototype.cl=function(t){var e=Zp(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ml=function(t){var e={clientId:this.Wc,onlineState:t};this.storage.setItem(this.tl,JSON.stringify(e))},t.prototype.El=function(t,e,n){var r=td(this.persistenceKey,t),i=new nd(t,e,n);this.setItem(r,i.qc())},t.prototype.Al=function(t){var e=this.Jc.exec(t);return e?e[1]:null},t.prototype.Pl=function(t,e){var n=this.Al(t);return rd.Bc(n,e)},t.prototype.Vl=function(t,e){var n=this.Xc.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ed.Bc(new Up(i),r,e)},t.prototype.yl=function(t,e){var n=this.Zc.exec(t),r=Number(n[1]);return nd.Bc(r,e)},t.prototype.nl=function(t){return id.Bc(t)},t.prototype.gl=function(t){return g(this,void 0,void 0,(function(){return m(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.Vc.bl(t.batchId,t.state,t.error)]:(Us("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.pl=function(t){return this.Vc.vl(t.targetId,t.state,t.error)},t.prototype.Rl=function(t,e){var n=this,r=e?this.Gc.nt(t,e):this.Gc.remove(t),i=this.rl(this.Gc),o=this.rl(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.Vc.Sl(a,s).then((function(){n.Gc=r}))},t.prototype.sl=function(t){this.Gc.get(t.clientId)&&this.qu(t.onlineState)},t.prototype.rl=function(t){var e=Vu();return t.forEach((function(t,n){e=e.Ct(n.activeTargetIds)})),e},t}(),sd=function(){function t(){this.Dl=new od,this.Cl={},this.Vc=null,this.qu=null,this.Ps=null}return t.prototype.hl=function(t){},t.prototype.ul=function(t,e,n){},t.prototype.ll=function(t){return this.Dl.Uc(t),this.Cl[t]||"not-current"},t.prototype.Tl=function(t,e,n){this.Cl[t]=e},t.prototype.fl=function(t){this.Dl.Qc(t)},t.prototype.dl=function(t){return this.Dl.activeTargetIds.has(t)},t.prototype.wl=function(t){delete this.Cl[t]},t.prototype.il=function(){return this.Dl.activeTargetIds},t.prototype.ol=function(t){return this.Dl.activeTargetIds.has(t)},t.prototype.start=function(){return this.Dl=new od,Promise.resolve()},t.prototype.Nh=function(t,e,n){},t.prototype.Il=function(t){},t.prototype.yr=function(){},t.prototype.ys=function(t){},t}(),ud=function(t){this.key=t},cd=function(t){this.key=t},ld=function(){function t(t,e){this.query=t,this.Fl=e,this.Nl=null,this.Ht=!1,this.$l=ju(),this.Lt=ju(),this.kl=Fl(t),this.xl=new qu(this.kl)}return Object.defineProperty(t.prototype,"Ml",{get:function(){return this.Fl},enumerable:!1,configurable:!0}),t.prototype.Ol=function(t,e){var n=this,r=e?e.Ll:new Bu,i=e?e.xl:this.xl,o=e?e.Lt:this.Lt,a=i,s=!1,u=this.query.In()&&i.size===this.query.limit?i.last():null,c=this.query.mn()&&i.size===this.query.limit?i.first():null;if(t.ot((function(t,e){var l=i.get(t),h=e instanceof kl?e:null;h&&(h=Ll(n.query,h)?h:null);var f=!!l&&n.Lt.has(l.key),p=!!h&&(h.Ge||n.Lt.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?f!==p&&(r.track({type:3,doc:h}),d=!0):n.Bl(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.kl(h,u)>0||c&&n.kl(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(s=!0)),d&&(h?(a=a.add(h),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),this.query.In()||this.query.mn())for(;a.size>this.query.limit;){var l=this.query.In()?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{xl:a,Ll:r,ql:s,Lt:o}},t.prototype.Bl=function(t,e){return t.Ge&&e.hasCommittedMutations&&!e.Ge},t.prototype.Jn=function(t,e,n){var r=this,i=this.xl;this.xl=t.xl,this.Lt=t.Lt;var o=t.Ll.Mt();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bs()}};return n(t)-n(e)}(t.type,e.type)||r.kl(t.doc,e.doc)})),this.Ul(n);var a=e?this.Ql():[],s=0===this.$l.size&&this.Ht?1:0,u=s!==this.Nl;return this.Nl=s,0!==o.length||u?{snapshot:new zu(this.query,t.xl,i,o,t.Lt,0===s,u,!1),Wl:a}:{Wl:a}},t.prototype.jl=function(t){return this.Ht&&"Offline"===t?(this.Ht=!1,this.Jn({xl:this.xl,Ll:new Bu,Lt:this.Lt,ql:!1},!1)):{Wl:[]}},t.prototype.Kl=function(t){return!this.Fl.has(t)&&!!this.xl.has(t)&&!this.xl.get(t).Ge},t.prototype.Ul=function(t){var e=this;t&&(t.Yt.forEach((function(t){return e.Fl=e.Fl.add(t)})),t.Jt.forEach((function(t){})),t.Xt.forEach((function(t){return e.Fl=e.Fl.delete(t)})),this.Ht=t.Ht)},t.prototype.Ql=function(){var t=this;if(!this.Ht)return[];var e=this.$l;this.$l=ju(),this.xl.forEach((function(e){t.Kl(e.key)&&(t.$l=t.$l.add(e.key))}));var n=[];return e.forEach((function(e){t.$l.has(e)||n.push(new cd(e))})),this.$l.forEach((function(t){e.has(t)||n.push(new ud(t))})),n},t.prototype.Gl=function(t){this.Fl=t.Yh,this.$l=ju();var e=this.Ol(t.documents);return this.Jn(e,!0)},t.prototype.zl=function(){return zu.Ut(this.query,this.xl,this.Lt,0===this.Nl)},t}(),hd=function(){function t(t,e,n,r){this.Ro=t,this.Fu=e,this.updateFunction=n,this.yo=r,this.Hl=5,this.xo=new sh(this.Ro,"transaction_retry")}return t.prototype.run=function(){this.Yl()},t.prototype.Yl=function(){var t=this;this.xo.xs((function(){return g(t,void 0,void 0,(function(){var t,e,n=this;return m(this,(function(r){return t=new Kp(this.Fu),(e=this.Jl(t))&&e.then((function(e){n.Ro.lr((function(){return t.commit().then((function(){n.yo.resolve(e)})).catch((function(t){n.Xl(t)}))}))})).catch((function(t){n.Xl(t)})),[2]}))}))}))},t.prototype.Jl=function(t){try{var e=this.updateFunction(t);return!hu(e)&&e.catch&&e.then?e:(this.yo.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.yo.reject(t),null}},t.prototype.Xl=function(t){var e=this;this.Hl>0&&this.Zl(t)?(this.Hl-=1,this.Ro.lr((function(){return e.Yl(),Promise.resolve()}))):this.yo.reject(t)},t.prototype.Zl=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!xu(e)}return!1},t}(),fd=function(t,e,n){this.query=t,this.targetId=e,this.view=n},pd=function(t){this.key=t,this.t_=!1},dd=function(){function t(t,e,n,r,i,o){this.Yu=t,this.e_=e,this.Fu=n,this.n_=r,this.currentUser=i,this.s_=o,this.i_=null,this.r_=new eu((function(t){return Dl(t)}),Rl),this.o_=new Map,this.h_=[],this.a_=new Su(lu.P),this.u_=new Map,this.c_=new Lf,this.l_={},this.__=new Map,this.f_=Ph.di(),this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"d_",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){this.i_=t},t.prototype.listen=function(t){return g(this,void 0,void 0,(function(){var e,n,r,i,o;return m(this,(function(a){switch(a.label){case 0:return this.w_("listen()"),(r=this.r_.get(t))?(e=r.targetId,this.n_.ll(e),n=r.view.zl(),[3,4]):[3,1];case 1:return[4,this.Yu.Gh(t.We())];case 2:return i=a.sent(),o=this.n_.ll(i.targetId),e=i.targetId,[4,this.T_(t,e,"current"===o)];case 3:n=a.sent(),this.d_&&this.e_.listen(i),a.label=4;case 4:return[2,n]}}))}))},t.prototype.T_=function(t,e,n){return g(this,void 0,void 0,(function(){var r,i,o,a,s,u;return m(this,(function(c){switch(c.label){case 0:return[4,this.Yu.Hh(t,!0)];case 1:return r=c.sent(),i=new ld(t,r.Yh),o=i.Ol(r.documents),a=Hu.zt(e,n&&"Offline"!==this.onlineState),s=i.Jn(o,this.d_,a),this.E_(e,s.Wl),u=new fd(t,e,i),[2,(this.r_.set(t,u),this.o_.has(e)?this.o_.get(e).push(t):this.o_.set(e,[t]),s.snapshot)]}}))}))},t.prototype.Rc=function(t){return g(this,void 0,void 0,(function(){var e,n,r=this;return m(this,(function(i){switch(i.label){case 0:return this.w_("unlisten()"),e=this.r_.get(t),(n=this.o_.get(e.targetId)).length>1?[2,(this.o_.set(e.targetId,n.filter((function(e){return!Rl(e,t)}))),void this.r_.delete(t))]:this.d_?(this.n_.fl(e.targetId),this.n_.ol(e.targetId)?[3,2]:[4,this.Yu.zh(e.targetId,!1).then((function(){r.n_.wl(e.targetId),r.e_.Rc(e.targetId),r.I_(e.targetId)})).catch(Mf)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.I_(e.targetId),[4,this.Yu.zh(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return g(this,void 0,void 0,(function(){var n,r,i;return m(this,(function(o){switch(o.label){case 0:this.w_("write()"),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,this.Yu.Mh(t)];case 2:return n=o.sent(),this.n_.hl(n.batchId),this.m_(n.batchId,e),[4,this.A_(n.Un)];case 3:return o.sent(),[4,this.e_.Ec()];case 4:return o.sent(),[3,6];case 5:return r=o.sent(),i=Sf(r,"Failed to persist write"),e.reject(i),[3,6];case 6:return[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new hd(t,this.Fu,e,n).run()},t.prototype.qh=function(t){return g(this,void 0,void 0,(function(){var e,n=this;return m(this,(function(r){switch(r.label){case 0:this.w_("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Yu.qh(t)];case 2:return e=r.sent(),t.Qt.forEach((function(t,e){var r=n.u_.get(e);r&&(zs(t.Yt.size+t.Jt.size+t.Xt.size<=1),t.Yt.size>0?r.t_=!0:t.Jt.size>0?zs(r.t_):t.Xt.size>0&&(zs(r.t_),r.t_=!1))})),[4,this.A_(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,Mf(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.jl=function(t,e){this.w_("applyOnlineStateChange()");var n=[];this.r_.forEach((function(e,r){var i=r.view.jl(t);i.snapshot&&n.push(i.snapshot)})),this.i_.R_(t),this.i_.mu(n),this.onlineState=t},t.prototype.vc=function(t,e){return g(this,void 0,void 0,(function(){var n,r,i,o,a,s=this;return m(this,(function(u){switch(u.label){case 0:return this.w_("rejectListens()"),this.n_.Tl(t,"rejected",e),n=this.u_.get(t),(r=n&&n.key)?(i=(i=new Su(lu.P)).nt(r,new Al(r,ou.min())),o=ju().add(r),a=new Wu(ou.min(),new Map,new ku(Gs),i,o),[4,this.qh(a)]):[3,2];case 1:return u.sent(),this.a_=this.a_.remove(r),this.u_.delete(t),this.P_(),[3,4];case 2:return[4,this.Yu.zh(t,!1).then((function(){return s.I_(t,e)})).catch(Mf)];case 3:u.sent(),u.label=4;case 4:return[2]}}))}))},t.prototype.$c=function(t){return g(this,void 0,void 0,(function(){var e,n;return m(this,(function(r){switch(r.label){case 0:this.w_("applySuccessfulWrite()"),e=t.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Yu.Oh(t)];case 2:return n=r.sent(),this.V_(e,null),this.g_(e),this.n_.ul(e,"acknowledged"),[4,this.A_(n)];case 3:return r.sent(),[3,6];case 4:return[4,Mf(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.xc=function(t,e){return g(this,void 0,void 0,(function(){var n;return m(this,(function(r){switch(r.label){case 0:this.w_("rejectFailedWrite()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Yu.Bh(t)];case 2:return n=r.sent(),this.V_(t,e),this.g_(t),this.n_.ul(t,"rejected",e),[4,this.A_(n)];case 3:return r.sent(),[3,6];case 4:return[4,Mf(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.y_=function(t){return g(this,void 0,void 0,(function(){var e,n,r,i;return m(this,(function(o){switch(o.label){case 0:this.e_.sc()||Us("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.Yu.no()];case 2:return-1===(e=o.sent())?[2,void t.resolve()]:((n=this.__.get(e)||[]).push(t),this.__.set(e,n),[3,4]);case 3:return r=o.sent(),i=Sf(r,"Initialization of waitForPendingWrites() operation failed"),t.reject(i),[3,4];case 4:return[2]}}))}))},t.prototype.g_=function(t){(this.__.get(t)||[]).forEach((function(t){t.resolve()})),this.__.delete(t)},t.prototype.p_=function(t){this.__.forEach((function(e){e.forEach((function(e){e.reject(new ru(nu.CANCELLED,t))}))})),this.__.clear()},t.prototype.m_=function(t,e){var n=this.l_[this.currentUser.Ma()];n||(n=new Su(Gs)),n=n.nt(t,e),this.l_[this.currentUser.Ma()]=n},t.prototype.V_=function(t,e){var n=this.l_[this.currentUser.Ma()];if(n){var r=n.get(t);r&&(e?r.reject(e):r.resolve(),n=n.remove(t)),this.l_[this.currentUser.Ma()]=n}},t.prototype.I_=function(t,e){var n=this;void 0===e&&(e=null),this.n_.fl(t);for(var r=0,i=this.o_.get(t);r<i.length;r++){var o=i[r];this.r_.delete(o),e&&this.i_.b_(o,e)}this.o_.delete(t),this.d_&&this.c_.aa(t).forEach((function(t){n.c_.Mi(t)||n.v_(t)}))},t.prototype.v_=function(t){var e=this.a_.get(t);null!==e&&(this.e_.Rc(e),this.a_=this.a_.remove(t),this.u_.delete(e),this.P_())},t.prototype.E_=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof ud?(this.c_.Fi(i.key,t),this.S_(i)):i instanceof cd?(Us("SyncEngine","Document no longer in limbo: "+i.key),this.c_.$i(i.key,t),this.c_.Mi(i.key)||this.v_(i.key)):Bs()}},t.prototype.S_=function(t){var e=t.key;this.a_.get(e)||(Us("SyncEngine","New document in limbo: "+e),this.h_.push(e),this.P_())},t.prototype.P_=function(){for(;this.h_.length>0&&this.a_.size<this.s_;){var t=this.h_.shift(),e=this.f_.next();this.u_.set(e,new pd(t)),this.a_=this.a_.nt(t,e),this.e_.listen(new Eu(Ol.hn(t.path).We(),e,2,oh.ps))}},t.prototype.D_=function(){return this.a_},t.prototype.C_=function(){return this.h_},t.prototype.A_=function(t,e){return g(this,void 0,void 0,(function(){var n,r,i,o=this;return m(this,(function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.r_.forEach((function(a,s){i.push(Promise.resolve().then((function(){var e=s.view.Ol(t);return e.ql?o.Yu.Hh(s.query,!1).then((function(t){var n=t.documents;return s.view.Ol(n,e)})):e})).then((function(t){var i=e&&e.Qt.get(s.targetId),a=s.view.Jn(t,o.d_,i);if(o.E_(s.targetId,a.Wl),a.snapshot){o.d_&&o.n_.Tl(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=ih.Rs(s.targetId,a.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return a.sent(),this.i_.mu(n),[4,this.Yu.Wh(r)];case 2:return a.sent(),[2]}}))}))},t.prototype.w_=function(t){},t.prototype.Oc=function(t){return g(this,void 0,void 0,(function(){var e;return m(this,(function(n){switch(n.label){case 0:return this.currentUser.isEqual(t)?[3,3]:(Us("SyncEngine","User change. New user:",t.Ma()),[4,this.Yu.Nh(t)]);case 1:return e=n.sent(),this.currentUser=t,this.p_("'waitForPendingWrites' promise is rejected due to a user change."),this.n_.Nh(t,e.kh,e.xh),[4,this.A_(e.$h)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.e_.enableNetwork()},t.prototype.disableNetwork=function(){return this.e_.disableNetwork()},t.prototype.xe=function(t){var e=this.u_.get(t);if(e&&e.t_)return ju().add(e.key);var n=ju(),r=this.o_.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.r_.get(a);n=n.Ct(s.view.Ml)}return n},t}(),yd=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,o,a)||this).Yu=e,s.F_=void 0,s}return y(e,t),Object.defineProperty(e.prototype,"d_",{get:function(){return!0===this.F_},enumerable:!1,configurable:!0}),e.prototype.enableNetwork=function(){return this.Yu.cr(!0),t.prototype.enableNetwork.call(this)},e.prototype.disableNetwork=function(){return this.Yu.cr(!1),t.prototype.disableNetwork.call(this)},e.prototype.N_=function(t){return g(this,void 0,void 0,(function(){var e,n;return m(this,(function(r){switch(r.label){case 0:return[4,this.Yu.Hh(t.query,!0)];case 1:return e=r.sent(),n=t.view.Gl(e),[2,(this.F_&&this.E_(t.targetId,n.Wl),n)]}}))}))},e.prototype.jl=function(e,n){this.d_&&0===n&&(t.prototype.jl.call(this,e,n),this.n_.Il(e)),this.d_||1!==n||t.prototype.jl.call(this,e,n)},e.prototype.bl=function(t,e,n){return g(this,void 0,void 0,(function(){var r;return m(this,(function(i){switch(i.label){case 0:return this.w_("applyBatchState()"),[4,this.Yu.Xh(t)];case 1:return null===(r=i.sent())?[3,6]:"pending"!==e?[3,3]:[4,this.e_.Ec()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.V_(t,n||null),this.Yu.Zh(t)):Bs(),i.label=4;case 4:return[4,this.A_(r)];case 5:return i.sent(),[3,7];case 6:Us("SyncEngine","Cannot apply mutation batch with id: "+t),i.label=7;case 7:return[2]}}))}))},e.prototype.Lc=function(t){return g(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u=this;return m(this,(function(c){switch(c.label){case 0:return!0!==t||!0===this.F_?[3,3]:(e=this.n_.il(),[4,this.k_(e.F(),!0)]);case 1:return n=c.sent(),this.F_=!0,[4,this.e_.Lc(!0)];case 2:for(c.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.e_.listen(o);return[3,7];case 3:return!1!==t||!1===this.F_?[3,7]:(a=[],s=Promise.resolve(),this.o_.forEach((function(t,e){u.n_.dl(e)?a.push(e):s=s.then((function(){return u.I_(e),u.Yu.zh(e,!0)})),u.e_.Rc(e)})),[4,s]);case 4:return c.sent(),[4,this.k_(a,!1)];case 5:return c.sent(),this.x_(),this.F_=!1,[4,this.e_.Lc(!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))},e.prototype.x_=function(){var t=this;this.u_.forEach((function(e,n){t.e_.Rc(n)})),this.c_.ua(),this.u_=new Map,this.a_=new Su(lu.P)},e.prototype.k_=function(t,e){return g(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,h,f,p;return m(this,(function(d){switch(d.label){case 0:e=[],n=[],r=0,i=t,d.label=1;case 1:return r<i.length?(o=i[r],a=void 0,(s=this.o_.get(o))&&0!==s.length?[4,this.Yu.Gh(s[0].We())]:[3,7]):[3,13];case 2:a=d.sent(),u=0,c=s,d.label=3;case 3:return u<c.length?(l=c[u],h=this.r_.get(l),[4,this.N_(h)]):[3,6];case 4:(f=d.sent()).snapshot&&n.push(f.snapshot),d.label=5;case 5:return u++,[3,3];case 6:return[3,11];case 7:return[4,this.Yu.ta(o)];case 8:return p=d.sent(),[4,this.Yu.Gh(p)];case 9:return a=d.sent(),[4,this.T_(this.M_(p),o,!1)];case 10:d.sent(),d.label=11;case 11:e.push(a),d.label=12;case 12:return r++,[3,1];case 13:return[2,(this.i_.mu(n),e)]}}))}))},e.prototype.M_=function(t){return new Ol(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},e.prototype.Dr=function(){return this.Yu.Dr()},e.prototype.vl=function(t,e,n){return g(this,void 0,void 0,(function(){var r,i;return m(this,(function(o){switch(o.label){case 0:return this.F_?(Us("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.o_.has(t))return[3,8];switch(e){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.Yu.si()];case 3:return r=o.sent(),i=Wu.Gt(t,"current"===e),[4,this.A_(r,i)];case 4:return o.sent(),[3,8];case 5:return[4,this.Yu.zh(t,!0)];case 6:return o.sent(),this.I_(t,n),[3,8];case 7:Bs(),o.label=8;case 8:return[2]}}))}))},e.prototype.Sl=function(t,e){return g(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h,f=this;return m(this,(function(p){switch(p.label){case 0:if(!this.F_)return[3,10];n=0,r=t,p.label=1;case 1:return n<r.length?(i=r[n],this.o_.has(i)?(Us("SyncEngine","Adding an already active target "+i),[3,5]):[4,this.Yu.ta(i)]):[3,6];case 2:return o=p.sent(),[4,this.Yu.Gh(o)];case 3:return a=p.sent(),[4,this.T_(this.M_(o),a.targetId,!1)];case 4:p.sent(),this.e_.listen(a),p.label=5;case 5:return n++,[3,1];case 6:s=function(t){return m(this,(function(e){switch(e.label){case 0:return u.o_.has(t)?[4,u.Yu.zh(t,!1).then((function(){f.e_.Rc(t),f.I_(t)})).catch(Mf)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},u=this,c=0,l=e,p.label=7;case 7:return c<l.length?(h=l[c],[5,s(h)]):[3,10];case 8:p.sent(),p.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))},e}(dd),vd=function(){this.O_=void 0,this.listeners=[]},gd=function(){function t(t){this.Vc=t,this.L_=new eu((function(t){return Dl(t)}),Rl),this.onlineState="Unknown",this.B_=new Set,this.Vc.subscribe(this)}return t.prototype.listen=function(t){return g(this,void 0,void 0,(function(){var e,n,r,i,o,a;return m(this,(function(s){switch(s.label){case 0:if(e=t.query,n=!1,(r=this.L_.get(e))||(n=!0,r=new vd),!n)return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),i=r,[4,this.Vc.listen(e)];case 2:return i.O_=s.sent(),[3,4];case 3:return o=s.sent(),a=Sf(o,"Initialization of query '"+Ml(t.query)+"' failed"),[2,void t.onError(a)];case 4:return this.L_.set(e,r),r.listeners.push(t),t.jl(this.onlineState),r.O_&&t.q_(r.O_)&&this.U_(),[2]}}))}))},t.prototype.Rc=function(t){return g(this,void 0,void 0,(function(){var e,n,r,i;return m(this,(function(o){return e=t.query,n=!1,(r=this.L_.get(e))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?[2,(this.L_.delete(e),this.Vc.Rc(e))]:[2]}))}))},t.prototype.mu=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,a=this.L_.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++)u[s].q_(i)&&(e=!0);a.O_=i}}e&&this.U_()},t.prototype.b_=function(t,e){var n=this.L_.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.L_.delete(t)},t.prototype.R_=function(t){this.onlineState=t;var e=!1;this.L_.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].jl(t)&&(e=!0)})),e&&this.U_()},t.prototype.Q_=function(t){this.B_.add(t),t.next()},t.prototype.W_=function(t){this.B_.delete(t)},t.prototype.U_=function(){this.B_.forEach((function(t){t.next()}))},t}(),md=function(){function t(t,e,n){this.query=t,this.j_=e,this.K_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.q_=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new zu(t.query,t.docs,t.Ot,e,t.Lt,t.fromCache,t.Bt,!0)}var o=!1;return this.K_?this.z_(t)&&(this.j_.next(t),o=!0):this.H_(t,this.onlineState)&&(this.Y_(t),o=!0),this.G_=t,o},t.prototype.onError=function(t){this.j_.error(t)},t.prototype.jl=function(t){this.onlineState=t;var e=!1;return this.G_&&!this.K_&&this.H_(this.G_,t)&&(this.Y_(this.G_),e=!0),e},t.prototype.H_=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.J_&&n||t.docs._()&&"Offline"!==e)},t.prototype.z_=function(t){if(t.docChanges.length>0)return!0;var e=this.G_&&this.G_.hasPendingWrites!==t.hasPendingWrites;return!(!t.Bt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.Y_=function(t){t=zu.Ut(t.query,t.docs,t.Lt,t.fromCache),this.K_=!0,this.j_.next(t)},t}(),_d=function(){function t(){}return t.prototype.Fh=function(t){this.X_=t},t.prototype._s=function(t,e,n,r){var i=this;return e.En()||n.isEqual(ou.min())?this.Z_(t,e):this.X_.us(t,r).next((function(o){var a=i.tf(e,o);return(e.In()||e.mn())&&i.ql(e.nn,a,r,n)?i.Z_(t,e):(js()<=ct.DEBUG&&Us("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ml(e)),i.X_._s(t,e,n).next((function(t){return a.forEach((function(e){t=t.nt(e.key,e)})),t})))}))},t.prototype.tf=function(t,e){var n=new ku(Fl(t));return e.forEach((function(e,r){r instanceof kl&&Ll(t,r)&&(n=n.add(r))})),n},t.prototype.ql=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.o(r)>0)},t.prototype.Z_=function(t,e){return js()<=ct.DEBUG&&Us("IndexFreeQueryEngine","Using full collection scan to execute query:",Ml(e)),this.X_._s(t,e,ou.min())},t}(),bd=function(){function t(t,e){this.ss=t,this.wi=e,this.ns=[],this.ef=1,this.nf=new ku(Ff.na)}return t.prototype.Jr=function(t){return Zl.resolve(0===this.ns.length)},t.prototype.Xr=function(t,e,n,r){var i=this.ef;this.ef++,this.ns.length>0&&this.ns[this.ns.length-1];var o=new Xl(i,e,n,r);this.ns.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.nf=this.nf.add(new Ff(u.key,i)),this.ss.Us(t,u.key.path.p())}return Zl.resolve(o)},t.prototype.Zr=function(t,e){return Zl.resolve(this.sf(e))},t.prototype.eo=function(t,e){var n=e+1,r=this.if(n),i=r<0?0:r;return Zl.resolve(this.ns.length>i?this.ns[i]:null)},t.prototype.no=function(){return Zl.resolve(0===this.ns.length?-1:this.ef-1)},t.prototype.so=function(t){return Zl.resolve(this.ns.slice())},t.prototype.os=function(t,e){var n=this,r=new Ff(e,0),i=new Ff(e,Number.POSITIVE_INFINITY),o=[];return this.nf.vt([r,i],(function(t){var e=n.sf(t.la);o.push(e)})),Zl.resolve(o)},t.prototype.ls=function(t,e){var n=this,r=new ku(Gs);return e.forEach((function(t){var e=new Ff(t,0),i=new Ff(t,Number.POSITIVE_INFINITY);n.nf.vt([e,i],(function(t){r=r.add(t.la)}))})),Zl.resolve(this.rf(r))},t.prototype.Es=function(t,e){var n=e.path,r=n.length+1,i=n;lu.W(i)||(i=i.child(""));var o=new Ff(new lu(i),0),a=new ku(Gs);return this.nf.St((function(t){var e=t.key.path;return!!n.D(e)&&(e.length===r&&(a=a.add(t.la)),!0)}),o),Zl.resolve(this.rf(a))},t.prototype.rf=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.sf(t);null!==r&&n.push(r)})),n},t.prototype.ro=function(t,e){var n=this;zs(0===this.hf(e.batchId,"removed")),this.ns.shift();var r=this.nf;return Zl.forEach(e.mutations,(function(i){var o=new Ff(i.key,e.batchId);return r=r.delete(o),n.wi.Qr(t,i.key)})).next((function(){n.nf=r}))},t.prototype.oo=function(t){},t.prototype.Mi=function(t,e){var n=new Ff(e,0),r=this.nf.Dt(n);return Zl.resolve(e.isEqual(r&&r.key))},t.prototype.ho=function(t){return this.ns.length,Zl.resolve()},t.prototype.hf=function(t,e){return this.if(t)},t.prototype.if=function(t){return 0===this.ns.length?0:t-this.ns[0].batchId},t.prototype.sf=function(t){var e=this.if(t);return e<0||e>=this.ns.length?null:this.ns[e]},t}(),wd=function(){function t(t,e){this.ss=t,this.af=e,this.docs=new Su(lu.P),this.size=0}return t.prototype.jn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.af(e);return this.docs=this.docs.nt(r,{Ys:e,size:a,readTime:n}),this.size+=a-o,this.ss.Us(t,r.path.p())},t.prototype.Gn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.zn=function(t,e){var n=this.docs.get(e);return Zl.resolve(n?n.Ys:null)},t.prototype.getEntries=function(t,e){var n=this,r=Ru();return e.forEach((function(t){var e=n.docs.get(t);r=r.nt(t,e?e.Ys:null)})),Zl.resolve(r)},t.prototype._s=function(t,e,n){for(var r=Mu(),i=new lu(e.path.child("")),o=this.docs.ut(i);o.wt();){var a=o.dt(),s=a.key,u=a.value,c=u.Ys,l=u.readTime;if(!e.path.D(s.path))break;l.o(n)<=0||c instanceof kl&&Ll(e,c)&&(r=r.nt(c.key,c))}return Zl.resolve(r)},t.prototype.uf=function(t,e){return Zl.forEach(this.docs,(function(t){return e(t)}))},t.prototype.oi=function(e){return new t.hi(this)},t.prototype.ui=function(t){return Zl.resolve(this.size)},t}();wd.hi=function(t){function e(e){var n=this;return(n=t.call(this)||this).ci=e,n}return y(e,t),e.prototype.Jn=function(t){var e=this,n=[];return this.Un.forEach((function(r,i){i?n.push(e.ci.jn(t,i,e.readTime)):e.ci.Gn(r)})),Zl.Bn(n)},e.prototype.Hn=function(t,e){return this.ci.zn(t,e)},e.prototype.Yn=function(t,e){return this.ci.getEntries(t,e)},e}(th);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ed=function(){function t(t){this.persistence=t,this.cf=new eu((function(t){return vu(t)}),gu),this.lastRemoteSnapshotVersion=ou.min(),this.highestTargetId=0,this.lf=0,this._f=new Lf,this.targetCount=0,this.ff=Ph.fi()}return t.prototype.pe=function(t,e){return this.cf.forEach((function(t,n){return e(n)})),Zl.resolve()},t.prototype.mi=function(t){return Zl.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ai=function(t){return Zl.resolve(this.lf)},t.prototype.Ti=function(t){return this.highestTargetId=this.ff.next(),Zl.resolve(this.highestTargetId)},t.prototype.Ri=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.lf&&(this.lf=e),Zl.resolve()},t.prototype.Vi=function(t){this.cf.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ff=new Ph(e),this.highestTargetId=e),t.sequenceNumber>this.lf&&(this.lf=t.sequenceNumber)},t.prototype.Pi=function(t,e){return this.Vi(e),this.targetCount+=1,Zl.resolve()},t.prototype.yi=function(t,e){return this.Vi(e),Zl.resolve()},t.prototype.pi=function(t,e){return this.cf.delete(e.target),this._f.aa(e.targetId),this.targetCount-=1,Zl.resolve()},t.prototype.vi=function(t,e,n){var r=this,i=0,o=[];return this.cf.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.cf.delete(a),o.push(r.bi(t,s.targetId)),i++)})),Zl.Bn(o).next((function(){return i}))},t.prototype.Si=function(t){return Zl.resolve(this.targetCount)},t.prototype.Di=function(t,e){var n=this.cf.get(e)||null;return Zl.resolve(n)},t.prototype.Ci=function(t,e,n){return this._f.ra(e,n),Zl.resolve()},t.prototype.Ni=function(t,e,n){this._f.ha(e,n);var r=this.persistence.wi,i=[];return r&&e.forEach((function(e){i.push(r.Qr(t,e))})),Zl.Bn(i)},t.prototype.bi=function(t,e){return this._f.aa(e),Zl.resolve()},t.prototype.ki=function(t,e){var n=this._f.ca(e);return Zl.resolve(n)},t.prototype.Mi=function(t,e){return Zl.resolve(this._f.Mi(e))},t}(),Td=function(){function t(t){var e=this;this.df={},this.Ui=new oh(0),this.Qi=!1,this.Qi=!0,this.wi=t(this),this.Xi=new Ed(this),this.ss=new fh,this.es=new wd(this.ss,(function(t){return e.wi.wf(t)}))}return t.prototype.start=function(){return Promise.resolve()},t.prototype.yr=function(){return this.Qi=!1,Promise.resolve()},Object.defineProperty(t.prototype,"hr",{get:function(){return this.Qi},enumerable:!1,configurable:!0}),t.prototype.ar=function(){},t.prototype.kr=function(){return this.ss},t.prototype.Cr=function(t){var e=this.df[t.Ma()];return e||(e=new bd(this.ss,this.wi),this.df[t.Ma()]=e),e},t.prototype.Nr=function(){return this.Xi},t.prototype.$r=function(){return this.es},t.prototype.runTransaction=function(t,e,n){var r=this;Us("MemoryPersistence","Starting transaction:",t);var i=new xd(this.Ui.next());return this.wi.Tf(),n(i).next((function(t){return r.wi.Ef(i).next((function(){return t}))})).On().then((function(t){return i.ts(),t}))},t.prototype.If=function(t,e){return Zl.qn(Object.values(this.df).map((function(n){return function(){return n.Mi(t,e)}})))},t}(),xd=function(t){function e(e){var n=this;return(n=t.call(this)||this).Li=e,n}return y(e,t),e}(nh),Cd=function(){function t(t){this.persistence=t,this.mf=new Lf,this.Af=null}return t.Rf=function(e){return new t(e)},Object.defineProperty(t.prototype,"Pf",{get:function(){if(this.Af)return this.Af;throw Bs()},enumerable:!1,configurable:!0}),t.prototype.Fi=function(t,e,n){return this.mf.Fi(n,e),this.Pf.delete(n),Zl.resolve()},t.prototype.$i=function(t,e,n){return this.mf.$i(n,e),this.Pf.add(n),Zl.resolve()},t.prototype.Qr=function(t,e){return this.Pf.add(e),Zl.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.mf.aa(e.targetId).forEach((function(t){return n.Pf.add(t)}));var r=this.persistence.Nr();return r.ki(t,e.targetId).next((function(t){t.forEach((function(t){return n.Pf.add(t)}))})).next((function(){return r.pi(t,e)}))},t.prototype.Tf=function(){this.Af=new Set},t.prototype.Ef=function(t){var e=this,n=this.persistence.$r().oi();return Zl.forEach(this.Pf,(function(r){return e.Vf(t,r).next((function(t){t||n.Gn(r)}))})).next((function(){return e.Af=null,n.apply(t)}))},t.prototype.Gr=function(t,e){var n=this;return this.Vf(t,e).next((function(t){t?n.Pf.delete(e):n.Pf.add(e)}))},t.prototype.wf=function(t){return 0},t.prototype.Vf=function(t,e){var n=this;return Zl.qn([function(){return Zl.resolve(n.mf.Mi(e))},function(){return n.persistence.Nr().Mi(t,e)},function(){return n.persistence.If(t,e)}])},t}(),Sd=function(){function t(t){this.gf=t.gf,this.yf=t.yf}return t.prototype.Eu=function(t){this.pf=t},t.prototype._u=function(t){this.bf=t},t.prototype.onMessage=function(t){this.vf=t},t.prototype.close=function(){this.yf()},t.prototype.send=function(t){this.gf(t)},t.prototype.Sf=function(){this.pf()},t.prototype.Df=function(t){this.bf(t)},t.prototype.Cf=function(t){this.vf(t)},t}(),Id={BatchGetDocuments:"batchGet",Commit:"commit"},Nd="gl-js/ fire/"+Ls,kd=function(){function t(t){this.s=t.s;var e=t.ssl?"https":"http";this.Ff=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.Nf=function(t,e){if(e)for(var n in e.Ba)e.Ba.hasOwnProperty(n)&&(t[n]=e.Ba[n]);t["X-Goog-Api-Client"]=Nd},t.prototype.Du=function(t,e,n){var r=this,i=this.$f(t);return new Promise((function(o,a){var s=new Ms;s.listenOnce(Rs.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Os.NO_ERROR:var e=s.getResponseJson();Us("Connection","XHR received:",JSON.stringify(e)),o(e);break;case Os.TIMEOUT:Us("Connection",'RPC "'+t+'" timed out'),a(new ru(nu.DEADLINE_EXCEEDED,"Request time out"));break;case Os.HTTP_ERROR:var n=s.getStatus();if(Us("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var i=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(nu).indexOf(e)>=0?e:nu.UNKNOWN}(r.status);a(new ru(i,r.message))}else a(new ru(nu.UNKNOWN,"Server responded with status "+s.getStatus()))}else Us("Connection",'RPC "'+t+'" failed'),a(new ru(nu.UNAVAILABLE,"Connection failed."));break;default:Bs()}}finally{Us("Connection",'RPC "'+t+'" completed.')}}));var u=Object.assign({},e);delete u.database;var c=JSON.stringify(u);Us("Connection","XHR sending: ",i+" "+c);var l={"Content-Type":"text/plain"};r.Nf(l,n),s.send(i,"POST",c,l,15)}))},t.prototype.Cu=function(t,e,n){return this.Du(t,e,n)},t.prototype.Iu=function(t,e){var n,r,i=[this.Ff,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Ps(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Nf(a.initMessageHeaders,e),D()||L()||R().indexOf("Electron/")>=0||((r=R()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0)||R().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(a.httpHeadersOverwriteParam="$httpHeaders");var s=i.join("");Us("Connection","Creating WebChannel: "+s+" "+a);var u=o.createWebChannel(s,a),c=!1,l=!1,h=new Sd({gf:function(t){l?Us("Connection","Not sending because WebChannel is closed:",t):(c||(Us("Connection","Opening WebChannel transport."),u.open(),c=!0),Us("Connection","WebChannel sending:",t),u.send(t))},yf:function(){return u.close()}}),f=function(t,e){u.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(Ds.EventType.OPEN,(function(){l||Us("Connection","WebChannel transport opened.")})),f(Ds.EventType.CLOSE,(function(){l||(l=!0,Us("Connection","WebChannel transport closed"),h.Df())})),f(Ds.EventType.ERROR,(function(t){l||(l=!0,function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fs.logLevel<=ct.WARN){var r=e.map(qs);Fs.warn.apply(Fs,E(["Firestore ("+Ls+"): "+t],r))}}("Connection","WebChannel transport errored:",t),h.Df(new ru(nu.UNAVAILABLE,"The operation could not be completed")))})),f(Ds.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];zs(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Us("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=bu[t];if(void 0!==e)return Cu(e)}(o),s=i.message;void 0===a&&(a=nu.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),l=!0,h.Df(new ru(a,s)),u.close()}else Us("Connection","WebChannel received:",n),h.Cf(n)}})),setTimeout((function(){h.Sf()}),0),h},t.prototype.$f=function(t){var e=Id[t];return this.Ff+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+e},t}(),Ad=function(){function t(){var t=this;this.kf=function(){return t.xf()},this.Mf=function(){return t.Of()},this.Lf=[],this.Bf()}return t.prototype.nc=function(t){this.Lf.push(t)},t.prototype.yr=function(){window.removeEventListener("online",this.kf),window.removeEventListener("offline",this.Mf)},t.prototype.Bf=function(){window.addEventListener("online",this.kf),window.addEventListener("offline",this.Mf)},t.prototype.xf=function(){Us("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Lf;t<e.length;t++)(0,e[t])(0)},t.prototype.Of=function(){Us("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Lf;t<e.length;t++)(0,e[t])(1)},t.Hi=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Pd=function(){function t(){}return t.prototype.nc=function(t){},t.prototype.yr=function(){},t}(),Od="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Rd=function(){function t(){}return t.prototype.initialize=function(t){return g(this,void 0,void 0,(function(){var e=this;return m(this,(function(n){switch(n.label){case 0:return this.n_=this.qf(t),this.persistence=this.Uf(t),[4,this.persistence.start()];case 1:return n.sent(),this.Qf=this.Wf(t),this.Yu=this.jf(t),this.e_=this.Kf(t),this.Vc=this.Gf(t),this.zf=this.Hf(t),this.n_.qu=function(t){return e.Vc.jl(t,1)},this.e_.Vc=this.Vc,[4,this.Yu.start()];case 2:return n.sent(),[4,this.n_.start()];case 3:return n.sent(),[4,this.e_.start()];case 4:return n.sent(),[4,this.e_.Lc(this.Vc.d_)];case 5:return n.sent(),[2]}}))}))},t.prototype.Hf=function(t){return new gd(this.Vc)},t.prototype.Wf=function(t){return null},t.prototype.jf=function(t){return e=this.persistence,n=new _d,r=t.Yf,new Rf(e,n,r);var e,n,r},t.prototype.Uf=function(t){if(t.Xf.Jf)throw new ru(nu.FAILED_PRECONDITION,Od);return new Td(Cd.Rf)},t.prototype.Kf=function(t){var e=this;return new Xp(this.Yu,t.Fu,t.Ro,(function(t){return e.Vc.jl(t,0)}),Ad.Hi()?new Ad:new Pd)},t.prototype.qf=function(t){return new sd},t.prototype.Gf=function(t){return e=this.Yu,n=this.e_,r=t.Fu,i=this.n_,o=t.Yf,a=t.s_,new dd(e,n,r,i,o,a);var e,n,r,i,o,a},t.prototype.clearPersistence=function(t){throw new ru(nu.FAILED_PRECONDITION,Od)},t}(),Dd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.initialize=function(e){return g(this,void 0,void 0,(function(){var n=this;return m(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,this.persistence.or((function(t){return g(n,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:return[4,this.Vc.Lc(t)];case 1:return e.sent(),this.Qf&&(t&&!this.Qf.hr?this.Qf.start(this.Yu):t||this.Qf.stop()),[2]}}))}))}))];case 2:return r.sent(),[2]}}))}))},e.prototype.jf=function(t){return e=this.persistence,n=new _d,r=t.Yf,new Df(e,n,r);var e,n,r},e.prototype.Gf=function(t){var e,n,r,i,o,a,s=(e=this.Yu,n=this.e_,r=t.Fu,i=this.n_,o=t.Yf,a=t.s_,new yd(e,n,r,i,o,a));return this.n_ instanceof ad&&(this.n_.Vc=s),s},e.prototype.Wf=function(t){var e=this.persistence.wi.Or;return new Pf(e,t.Ro)},e.prototype.Uf=function(t){var e=jh.Mr(t.Zf),n=_p(t.Zf.s);return new jh(t.Xf.synchronizeTabs,e,t.clientId,Af.ah(t.Xf.cacheSizeBytes),t.Ro,Tf(),"undefined"!=typeof document?document:null,n,this.n_,t.Xf.qi)},e.prototype.qf=function(t){if(t.Xf.Jf&&t.Xf.synchronizeTabs){var e=Tf();if(!ad.Hi(e))throw new ru(nu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=jh.Mr(t.Zf);return new ad(e,t.Ro,n,t.clientId,t.Yf)}return new sd},e.prototype.clearPersistence=function(t){var e=jh.Mr(t);return jh.clearPersistence(e)},e}(Rd),Md=function(){function t(t,e){this.credentials=t,this.Ro=e,this.clientId=Qs.t()}return t.prototype.start=function(t,e,n){var r=this;this.Su(),this.Zf=t;var i=new ah,o=new ah,a=!1;return this.credentials.Qa((function(t){if(!a)return a=!0,Us("FirestoreClient","Initializing. user=",t.uid),r.td(e,n,t,o).then(i.resolve,i.reject);r.Ro.dr((function(){return r.e_.Oc(t)}))})),this.Ro.lr((function(){return i.promise})),o.promise},t.prototype.enableNetwork=function(){var t=this;return this.Su(),this.Ro.enqueue((function(){return t.Vc.enableNetwork()}))},t.prototype.td=function(t,e,n,r){return g(this,void 0,void 0,(function(){var i,o,a,s,u,c=this;return m(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),[4,(u=this.Zf,Promise.resolve(new kd(u)))];case 1:return i=l.sent(),o=_p(this.Zf.s),a=function(t,e,n){return new Yp(t,e,n)}(i,this.credentials,o),[4,t.initialize({Ro:this.Ro,Zf:this.Zf,Fu:a,clientId:this.clientId,Yf:n,s_:100,Xf:e})];case 2:return l.sent(),this.persistence=t.persistence,this.n_=t.n_,this.Yu=t.Yu,this.e_=t.e_,this.Vc=t.Vc,this.Qf=t.Qf,this.ed=t.zf,this.persistence.ar((function(){return g(c,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),r.resolve(),[3,4];case 3:if(s=l.sent(),r.reject(s),!this.nd(s))throw s;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),this.td(new Rd,{Jf:!1},n,r))];case 4:return[2]}}))}))},t.prototype.nd=function(t){return"FirebaseError"===t.name?t.code===nu.FAILED_PRECONDITION||t.code===nu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.Su=function(){if(this.Ro.Oo)throw new ru(nu.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.Su(),this.Ro.enqueue((function(){return t.Vc.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.Ro.Qo((function(){return g(t,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return this.Qf&&this.Qf.stop(),[4,this.e_.yr()];case 1:return t.sent(),[4,this.n_.yr()];case 2:return t.sent(),[4,this.persistence.yr()];case 3:return t.sent(),this.credentials.Wa(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.Su();var e=new ah;return this.Ro.lr((function(){return t.Vc.y_(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.Su();var i=new md(t,e,n);return this.Ro.lr((function(){return r.ed.listen(i)})),i},t.prototype.Rc=function(t){var e=this;this.sd||this.Ro.lr((function(){return e.ed.Rc(t)}))},t.prototype.rd=function(t){return g(this,void 0,void 0,(function(){var e,n=this;return m(this,(function(r){switch(r.label){case 0:return this.Su(),e=new ah,[4,this.Ro.enqueue((function(){return g(n,void 0,void 0,(function(){var n,r,i;return m(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.Yu.Kh(t)];case 1:return(n=o.sent())instanceof kl?e.resolve(n):n instanceof Al?e.resolve(null):e.reject(new ru(nu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Sf(r,"Failed to get document '"+t+" from cache"),e.reject(i),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(r.sent(),e.promise)]}}))}))},t.prototype.od=function(t){return g(this,void 0,void 0,(function(){var e,n=this;return m(this,(function(r){switch(r.label){case 0:return this.Su(),e=new ah,[4,this.Ro.enqueue((function(){return g(n,void 0,void 0,(function(){var n,r,i,o,a,s;return m(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.Yu.Hh(t,!0)];case 1:return n=u.sent(),r=new ld(t,n.Yh),i=r.Ol(n.documents),o=r.Jn(i,!1),e.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=Sf(a,"Failed to execute query '"+t+" against cache"),e.reject(s),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(r.sent(),e.promise)]}}))}))},t.prototype.write=function(t){var e=this;this.Su();var n=new ah;return this.Ro.lr((function(){return e.Vc.write(t,n)})),n.promise},t.prototype.s=function(){return this.Zf.s},t.prototype.Q_=function(t){var e=this;this.Su(),this.Ro.lr((function(){return e.ed.Q_(t),Promise.resolve()}))},t.prototype.W_=function(t){var e=this;this.sd||this.Ro.lr((function(){return e.ed.W_(t),Promise.resolve()}))},Object.defineProperty(t.prototype,"sd",{get:function(){return this.Ro.Oo},enumerable:!1,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.Su();var n=new ah;return this.Ro.lr((function(){return e.Vc.runTransaction(e.Ro,t,n),Promise.resolve()})),n.promise},t}(),Ld=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.hd(this.observer.next,t)},t.prototype.error=function(t){this.hd(this.observer.error,t)},t.prototype.ad=function(){this.muted=!0},t.prototype.hd=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var jd=function(){function t(t,e,n,r){this.s=t,this.timestampsInSnapshots=e,this.ud=n,this.ld=r}return t.prototype._d=function(t){switch(nc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return cc(t.integerValue||t.doubleValue);case 3:return this.fd(t.timestampValue);case 4:return this.dd(t);case 5:return t.stringValue;case 6:return new op(lc(t.bytesValue));case 7:return this.wd(t.referenceValue);case 8:return this.Td(t.geoPointValue);case 9:return this.Ed(t.arrayValue);case 10:return this.Id(t.mapValue);default:throw Bs()}},t.prototype.Id=function(t){var e=this,n={};return Zs(t.fields||{},(function(t,r){n[t]=e._d(r)})),n},t.prototype.Td=function(t){return new mp(cc(t.latitude),cc(t.longitude))},t.prototype.Ed=function(t){var e=this;return(t.values||[]).map((function(t){return e._d(t)}))},t.prototype.dd=function(t){switch(this.ud){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return Zu(n)?t(n):n}(t);return null==e?null:this._d(e);case"estimate":return this.fd(tc(t));default:return null}},t.prototype.fd=function(t){var e=uc(t),n=new iu(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.wd=function(t){var e=su.$(t);zs(Gc(e));var n=new Xs(e.get(1),e.get(3)),r=new lu(e.g(5));return n.isEqual(this.s)||Vs("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.ld(r)},t}(),Ud=Af._h,Vd=function(){function t(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new ru(nu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Wf("settings","non-empty string","host",t.host),this.host=t.host,Hf("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(Jf("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),Hf("settings","object","credentials",t.credentials),this.credentials=t.credentials,Hf("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),Hf("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?Vs("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&Vs("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,Hf("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Af.dh;else{if(t.cacheSizeBytes!==Ud&&t.cacheSizeBytes<Af.fh)throw new ru(nu.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Af.fh);this.cacheSizeBytes=t.cacheSizeBytes}Hf("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),qd=function(){function t(e,n,r){var i=this;if(void 0===r&&(r=new Rd),this.md=null,this.Ad=new Cf,this.INTERNAL={delete:function(){return g(i,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return this.Rd(),[4,this.Pd.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var o=e;this.md=o,this.ya=t.Vd(o),this.gd=o.name,this.yd=new Bp(n)}else{var a=e;if(!a.projectId)throw new ru(nu.INVALID_ARGUMENT,"Must provide projectId");this.ya=new Xs(a.projectId,a.database),this.gd="[DEFAULT]",this.yd=new qp}this.pd=r,this.bd=new Vd({})}return Object.defineProperty(t.prototype,"vd",{get:function(){return this.Sd||(this.Sd=new Sp(this.ya,this.bd.ignoreUndefinedProperties)),this.Sd},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){Uf("Firestore.settings",arguments,1),Bf("Firestore.settings","object",1,t);var e=new Vd(t);if(this.Pd&&!this.bd.isEqual(e))throw new ru(nu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.bd=e,void 0!==e.credentials&&(this.yd=function(t){if(!t)return new qp;switch(t.type){case"gapi":var e=t.Dd;return zs(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Wp(e,t.Ya||"0");case"provider":return t.Dd;default:throw new ru(nu.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.Rd(),this.Pd.enableNetwork()},t.prototype.disableNetwork=function(){return this.Rd(),this.Pd.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.Pd)throw new ru(nu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&Vs("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new ru(nu.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Cd(this.pd,{Jf:!0,cacheSizeBytes:this.bd.cacheSizeBytes,synchronizeTabs:r,qi:i})},t.prototype.clearPersistence=function(){return g(this,void 0,void 0,(function(){var t,e=this;return m(this,(function(n){if(void 0!==this.Pd&&!this.Pd.sd)throw new ru(nu.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return t=new ah,[2,(this.Ad.Lo((function(){return g(e,void 0,void 0,(function(){var e,n;return m(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=this.Fd(),[4,this.pd.clearPersistence(e)];case 1:return r.sent(),t.resolve(),[3,3];case 2:return n=r.sent(),t.reject(n),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"Nd",{get:function(){return this.Rd(),this.Pd.sd},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.Rd(),this.Pd.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.Rd(),Fd(t))return Bd(this.Pd,t);Bf("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return Bd(this.Pd,e)},t.prototype.Rd=function(){return this.Pd||this.Cd(new Rd,{Jf:!1}),this.Pd},t.prototype.Fd=function(){return new $s(this.ya,this.gd,this.bd.host,this.bd.ssl,this.bd.forceLongPolling)},t.prototype.Cd=function(t,e){var n=this.Fd();return this.Pd=new Md(this.yd,this.Ad),this.Pd.start(n,t,e)},t.Vd=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new ru(nu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(!n||"string"!=typeof n)throw new ru(nu.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Xs(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.md)throw new ru(nu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return Uf("Firestore.collection",arguments,1),Bf("Firestore.collection","non-empty string",1,t),this.Rd(),new ty(su.$(t),this,null)},t.prototype.doc=function(t){return Uf("Firestore.doc",arguments,1),Bf("Firestore.doc","non-empty string",1,t),this.Rd(),Hd.$d(su.$(t),this,null)},t.prototype.collectionGroup=function(t){if(Uf("Firestore.collectionGroup",arguments,1),Bf("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new ru(nu.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Rd(),new Xd(new Ol(su.k(),t),this,null)},t.prototype.runTransaction=function(t){var e=this;return Uf("Firestore.runTransaction",arguments,1),Bf("Firestore.runTransaction","function",1,t),this.Rd().transaction((function(n){return t(new zd(e,n))}))},t.prototype.batch=function(){return this.Rd(),new Wd(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(js()){case ct.DEBUG:return"debug";case ct.ERROR:return"error";case ct.SILENT:return"silent";case ct.WARN:return"warn";case ct.INFO:return"info";case ct.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),t.setLogLevel=function(t){var e;Uf("Firestore.setLogLevel",arguments,1),Gf("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),e=t,Fs.setLogLevel(e)},t.prototype.kd=function(){return this.bd.timestampsInSnapshots},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(t,e){var n=new Ld({next:function(){e.next&&e.next()},error:function(t){throw Bs()}});return t.Q_(n),function(){n.ad(),t.W_(n)}}var zd=function(){function t(t,e){this.xd=t,this.Md=e}return t.prototype.get=function(t){var e=this;Uf("Transaction.get",arguments,1);var n=iy("Transaction.get",t,this.xd);return this.Md.Mu([n.pa]).then((function(t){if(!t||1!==t.length)return Bs();var r=t[0];if(r instanceof Al)return new Yd(e.xd,n.pa,null,!1,!1,n.ba);if(r instanceof kl)return new Yd(e.xd,n.pa,r,!1,!1,n.ba);throw Bs()}))},t.prototype.set=function(t,e,n){qf("Transaction.set",arguments,2,3);var r=iy("Transaction.set",t,this.xd);n=ey("Transaction.set",n);var i=ay(r.ba,e,n),o=Ip(this.xd.vd,"Transaction.set",r.pa,i,null!==r.ba,n);return this.Md.set(r.pa,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof e||e instanceof sp?(Vf("Transaction.update",arguments,3),r=iy("Transaction.update",t,this.xd),i=kp(this.xd.vd,"Transaction.update",r.pa,e,n,o)):(Uf("Transaction.update",arguments,2),r=iy("Transaction.update",t,this.xd),i=Np(this.xd.vd,"Transaction.update",r.pa,e)),this.Md.update(r.pa,i),this},t.prototype.delete=function(t){Uf("Transaction.delete",arguments,1);var e=iy("Transaction.delete",t,this.xd);return this.Md.delete(e.pa),this},t}(),Wd=function(){function t(t){this.xd=t,this.Od=[],this.Ld=!1}return t.prototype.set=function(t,e,n){qf("WriteBatch.set",arguments,2,3),this.Bd();var r=iy("WriteBatch.set",t,this.xd);n=ey("WriteBatch.set",n);var i=ay(r.ba,e,n),o=Ip(this.xd.vd,"WriteBatch.set",r.pa,i,null!==r.ba,n);return this.Od=this.Od.concat(o.va(r.pa,cl.Qe())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.Bd(),"string"==typeof e||e instanceof sp?(Vf("WriteBatch.update",arguments,3),r=iy("WriteBatch.update",t,this.xd),i=kp(this.xd.vd,"WriteBatch.update",r.pa,e,n,o)):(Uf("WriteBatch.update",arguments,2),r=iy("WriteBatch.update",t,this.xd),i=Np(this.xd.vd,"WriteBatch.update",r.pa,e)),this.Od=this.Od.concat(i.va(r.pa,cl.exists(!0))),this},t.prototype.delete=function(t){Uf("WriteBatch.delete",arguments,1),this.Bd();var e=iy("WriteBatch.delete",t,this.xd);return this.Od=this.Od.concat(new Tl(e.pa,cl.Qe())),this},t.prototype.commit=function(){return this.Bd(),this.Ld=!0,this.Od.length>0?this.xd.Rd().write(this.Od):Promise.resolve()},t.prototype.Bd=function(){if(this.Ld)throw new ru(nu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Hd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.ya,e,r)||this).pa=e,i.firestore=n,i.ba=r,i.Pd=i.firestore.Rd(),i}return y(e,t),e.$d=function(t,n,r){if(t.length%2!=0)throw new ru(nu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.N()+" has "+t.length);return new e(new lu(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.pa.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new ty(this.pa.path.p(),this.firestore,this.ba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.pa.path.N()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(Uf("DocumentReference.collection",arguments,1),Bf("DocumentReference.collection","non-empty string",1,t),!t)throw new ru(nu.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=su.$(t);return new ty(this.pa.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Zf("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.pa.isEqual(t.pa)&&this.ba===t.ba},e.prototype.set=function(t,e){qf("DocumentReference.set",arguments,1,2),e=ey("DocumentReference.set",e);var n=ay(this.ba,t,e),r=Ip(this.firestore.vd,"DocumentReference.set",this.pa,n,null!==this.ba,e);return this.Pd.write(r.va(this.pa,cl.Qe()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof sp?(Vf("DocumentReference.update",arguments,2),n=kp(this.firestore.vd,"DocumentReference.update",this.pa,t,e,r)):(Uf("DocumentReference.update",arguments,1),n=Np(this.firestore.vd,"DocumentReference.update",this.pa,t)),this.Pd.write(n.va(this.pa,cl.exists(!0)))},e.prototype.delete=function(){return Uf("DocumentReference.delete",arguments,0),this.Pd.write([new Tl(this.pa,cl.Qe())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];qf("DocumentReference.onSnapshot",arguments,1,4);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||Fd(i[s])||(Jf("DocumentReference.onSnapshot",a=i[s],["includeMetadataChanges"]),Hf("DocumentReference.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),s++);var u={includeMetadataChanges:a.includeMetadataChanges};if(Fd(i[s])){var c=i[s];i[s]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[s+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[s+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}else Bf("DocumentReference.onSnapshot","function",s,i[s]),zf("DocumentReference.onSnapshot","function",s+1,i[s+1]),zf("DocumentReference.onSnapshot","function",s+2,i[s+2]);var l={next:function(t){i[s]&&i[s](r.qd(t))},error:i[s+1],complete:i[s+2]};return Qd(this.Pd,this.pa,u,l)},e.prototype.get=function(t){var e=this;return qf("DocumentReference.get",arguments,0,1),ry("DocumentReference.get",t),t&&"cache"===t.source?this.firestore.Rd().rd(this.pa).then((function(t){return new Yd(e.firestore,e.pa,t,!0,t instanceof kl&&t.Ge,e.ba)})):function(t,e,n){var r=new ah,i=Qd(t,e,{includeMetadataChanges:!0,J_:!0},{next:function(t){i();var o=t.docs.has(e);!o&&t.fromCache?r.reject(new ru(nu.UNAVAILABLE,"Failed to get document because the client is offline.")):o&&t.fromCache&&n&&"server"===n.source?r.reject(new ru(nu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(t)},error:function(t){return r.reject(t)}});return r.promise}(this.Pd,this.pa,t).then((function(t){return e.qd(t)}))},e.prototype.withConverter=function(t){return new e(this.pa,this.firestore,t)},e.prototype.qd=function(t){var e=t.docs.get(this.pa);return new Yd(this.firestore,this.pa,e,t.fromCache,t.hasPendingWrites,this.ba)},e}(wp);function Qd(t,e,n,r){var i=function(t){console.error("Uncaught Error in onSnapshot:",t)};r.error&&(i=r.error.bind(r));var o=new Ld({next:function(t){r.next&&r.next(t)},error:i}),a=t.listen(Ol.hn(e.path),o,n);return function(){o.ad(),t.Rc(a)}}var Gd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Yd=function(){function t(t,e,n,r,i,o){this.xd=t,this.pa=e,this.Ud=n,this.Qd=r,this.Wd=i,this.ba=o}return t.prototype.data=function(t){var e=this;if(qf("DocumentSnapshot.data",arguments,0,1),t=ny("DocumentSnapshot.data",t),this.Ud){if(this.ba){var n=new Kd(this.xd,this.pa,this.Ud,this.Qd,this.Wd,null);return this.ba.fromFirestore(n,t)}return new jd(this.xd.ya,this.xd.kd(),t.serverTimestamps||"none",(function(t){return new Hd(t,e.xd,null)}))._d(this.Ud.tn())}},t.prototype.get=function(t,e){var n=this;if(qf("DocumentSnapshot.get",arguments,1,2),e=ny("DocumentSnapshot.get",e),this.Ud){var r=this.Ud.data().field(Mp("DocumentSnapshot.get",t,this.pa));if(null!==r)return new jd(this.xd.ya,this.xd.kd(),e.serverTimestamps||"none",(function(t){return new Hd(t,n.xd,n.ba)}))._d(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.pa.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Hd(this.pa,this.xd,this.ba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Ud},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Gd(this.Wd,this.Qd)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw Zf("isEqual","DocumentSnapshot",1,e);return this.xd===e.xd&&this.Qd===e.Qd&&this.pa.isEqual(e.pa)&&(null===this.Ud?null===e.Ud:this.Ud.isEqual(e.Ud))&&this.ba===e.ba},t}(),Kd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(Yd);function $d(t){if(t.mn()&&0===t.en.length)throw new ru(nu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Xd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.ya,n.vd,e)||this).jd=e,i.firestore=n,i.ba=r,i}return y(e,t),e.prototype.where=function(t,n,r){Uf("Query.where",arguments,3),Xf("Query.where",3,r);var i=Gf("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,n),o=Mp("Query.where",t),a=this.Kd(o,i,r);return new e(this.jd.cn(a),this.firestore,this.ba)},e.prototype.orderBy=function(t,n){var r;if(qf("Query.orderBy",arguments,1,2),zf("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new ru(nu.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Mp("Query.orderBy",t),o=this.Yd(i,r);return new e(this.jd.ln(o),this.firestore,this.ba)},e.prototype.limit=function(t){return Uf("Query.limit",arguments,1),Bf("Query.limit","number",1,t),tp("Query.limit",1,t),new e(this.jd._n(t),this.firestore,this.ba)},e.prototype.limitToLast=function(t){return Uf("Query.limitToLast",arguments,1),Bf("Query.limitToLast","number",1,t),tp("Query.limitToLast",1,t),new e(this.jd.fn(t),this.firestore,this.ba)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vf("Query.startAt",arguments,1);var i=this.ew("Query.startAt",t,n,!0);return new e(this.jd.dn(i),this.firestore,this.ba)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vf("Query.startAfter",arguments,1);var i=this.ew("Query.startAfter",t,n,!1);return new e(this.jd.dn(i),this.firestore,this.ba)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vf("Query.endBefore",arguments,1);var i=this.ew("Query.endBefore",t,n,!0);return new e(this.jd.wn(i),this.firestore,this.ba)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vf("Query.endAt",arguments,1);var i=this.ew("Query.endAt",t,n,!1);return new e(this.jd.wn(i),this.firestore,this.ba)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Zf("isEqual","Query",1,t);return this.firestore===t.firestore&&Rl(this.jd,t.jd)&&this.ba===t.ba},e.prototype.withConverter=function(t){return new e(this.jd,this.firestore,t)},e.prototype.ew=function(t,e,n,r){if(Xf(t,1,e),e instanceof Yd)return Uf(t,E([e],n),1),this.Xd(t,e.Ud,r);var i=[e].concat(n);return this.Zd(t,i,r)},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];qf("Query.onSnapshot",arguments,1,4);var a={},s=0;if("object"!=typeof i[s]||Fd(i[s])||(Jf("Query.onSnapshot",a=i[s],["includeMetadataChanges"]),Hf("Query.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),s++),Fd(i[s])){var u=i[s];i[s]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[s+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[s+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)}else Bf("Query.onSnapshot","function",s,i[s]),zf("Query.onSnapshot","function",s+1,i[s+1]),zf("Query.onSnapshot","function",s+2,i[s+2]);var c={next:function(t){i[s]&&i[s](new Zd(r.firestore,r.jd,t,r.ba))},error:i[s+1],complete:i[s+2]};return $d(this.jd),Jd(this.firestore.Rd(),this.jd,a,c)},e.prototype.get=function(t){var e=this;qf("Query.get",arguments,0,1),ry("Query.get",t),$d(this.jd);var n=this.firestore.Rd();return(t&&"cache"===t.source?n.od(this.jd):function(t,e,n){var r=new ah,i=Jd(t,e,{includeMetadataChanges:!0,J_:!0},{next:function(t){i(),t.fromCache&&n&&"server"===n.source?r.reject(new ru(nu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(t)},error:function(t){return r.reject(t)}});return r.promise}(n,this.jd,t)).then((function(t){return new Zd(e.firestore,e.jd,t,e.ba)}))},e}(function(){function t(t,e,n){this.ya=t,this.vd=e,this.jd=n}return t.prototype.Kd=function(t,e,n){var r;if(t.O()){if("array-contains"===e||"array-contains-any"===e)throw new ru(nu.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+e+"' queries on FieldPath.documentId().");if("in"===e){this.Gd(n,e);for(var i=[],o=0,a=n;o<a.length;o++){var s=a[o];i.push(this.zd(s))}r={arrayValue:{values:i}}}else r=this.zd(n)}else"in"!==e&&"array-contains-any"!==e||this.Gd(n,e),r=Ap(this.vd,"Query.where",n,"in"===e);var u=jl.create(t,e,r);return this.Hd(u),u},t.prototype.Yd=function(t,e){if(null!==this.jd.startAt)throw new ru(nu.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.jd.endAt)throw new ru(nu.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var n=new Yl(t,e);return this.Jd(n),n},t.prototype.Xd=function(t,e,n){if(!e)throw new ru(nu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");for(var r=[],i=0,o=this.jd.orderBy;i<o.length;i++){var a=o[i];if(a.field.O())r.push(hc(this.ya,e.key));else{var s=e.field(a.field);if(Zu(s))throw new ru(nu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.N();throw new ru(nu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Wl(r,n)},t.prototype.Zd=function(t,e,n){var r=this.jd.en;if(e.length>r.length)throw new ru(nu.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.O()){if("string"!=typeof a)throw new ru(nu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(!this.jd.Vn()&&-1!==a.indexOf("/"))throw new ru(nu.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this.jd.path.child(su.$(a));if(!lu.W(s))throw new ru(nu.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new lu(s);i.push(hc(this.ya,u))}else{var c=Ap(this.vd,t,a);i.push(c)}}return new Wl(i,n)},t.prototype.zd=function(t){if("string"==typeof t){if(""===t)throw new ru(nu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.jd.Vn()&&-1!==t.indexOf("/"))throw new ru(nu.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.jd.path.child(su.$(t));if(!lu.W(e))throw new ru(nu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return hc(this.ya,new lu(e))}if(t instanceof wp)return hc(this.ya,t.pa);throw new ru(nu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+$f(t)+".")},t.prototype.Gd=function(t,e){if(!Array.isArray(t)||0===t.length)throw new ru(nu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new ru(nu.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new ru(nu.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new ru(nu.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.Hd=function(t){if(t instanceof jl){var e=["array-contains","array-contains-any"],n=["in","array-contains-any"],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.An()){var o=this.jd.an();if(null!==o&&!o.isEqual(t.field))throw new ru(nu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var a=this.jd.un();null!==a&&this.tw(t.field,a)}else if(i||r){var s=null;if(i&&(s=this.jd.Rn(n)),null===s&&r&&(s=this.jd.Rn(e)),null!==s)throw s===t.op?new ru(nu.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new ru(nu.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},t.prototype.Jd=function(t){if(null===this.jd.un()){var e=this.jd.an();null!==e&&this.tw(e,t.field)}},t.prototype.tw=function(t,e){if(!e.isEqual(t))throw new ru(nu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}());function Jd(t,e,n,r){var i=function(t){console.error("Uncaught Error in onSnapshot:",t)};r.error&&(i=r.error.bind(r));var o=new Ld({next:function(t){r.next&&r.next(t)},error:i}),a=t.listen(e,o,n);return function(){o.ad(),t.Rc(a)}}var Zd=function(){function t(t,e,n,r){this.xd=t,this.nw=e,this.sw=n,this.ba=r,this.iw=null,this.rw=null,this.metadata=new Gd(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.sw.docs._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.sw.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;qf("QuerySnapshot.forEach",arguments,1,2),Bf("QuerySnapshot.forEach","function",1,t),this.sw.docs.forEach((function(r){t.call(e,n.ow(r,n.metadata.fromCache,n.sw.Lt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new Xd(this.nw,this.xd,this.ba)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){t&&(Jf("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),Hf("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.sw.qt)throw new ru(nu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.iw&&this.rw===e||(this.iw=function(t,e,n){if(t.Ot._()){var r=0;return t.docChanges.map((function(e){var i=n(e.doc,t.fromCache,t.Lt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=t.Ot;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Lt.has(e.doc.key)),o=-1,a=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(a=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:oy(e.type),doc:r,oldIndex:o,newIndex:a}}))}(this.sw,e,this.ow.bind(this)),this.rw=e),this.iw},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Zf("isEqual","QuerySnapshot",1,e);return this.xd===e.xd&&Rl(this.nw,e.nw)&&this.sw.isEqual(e.sw)&&this.ba===e.ba},t.prototype.ow=function(t,e,n){return new Kd(this.xd,t.key,t,e,n,this.ba)},t}(),ty=function(t){function e(e,n,r){var i=this;if((i=t.call(this,Ol.hn(e),n,r)||this).hw=e,e.length%2!=1)throw new ru(nu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.N()+" has "+e.length);return i}return y(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.jd.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.jd.path.p();return t._()?null:new Hd(new lu(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.jd.path.N()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){qf("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Qs.t()),Bf("CollectionReference.doc","non-empty string",1,t);var e=su.$(t);return Hd.$d(this.jd.path.child(e),this.firestore,this.ba)},e.prototype.add=function(t){Uf("CollectionReference.add",arguments,1),Bf("CollectionReference.add","object",1,this.ba?this.ba.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},e.prototype.withConverter=function(t){return new e(this.hw,this.firestore,t)},e}(Xd);function ey(t,e){if(void 0===e)return{merge:!1};if(Jf(t,e,["merge","mergeFields"]),Hf(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new ru(nu.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+$f(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new ru(nu.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+$f(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof sp}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new ru(nu.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ny(t,e){return void 0===e?{}:(Jf(t,e,["serverTimestamps"]),Qf(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function ry(t,e){zf(t,"object",1,e),e&&(Jf(t,e,["source"]),Qf(t,0,"source",e.source,["default","server","cache"]))}function iy(t,e,n){if(e instanceof wp){if(e.firestore!==n)throw new ru(nu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Zf(t,"DocumentReference",1,e)}function oy(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bs()}}function ay(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var sy={Firestore:qd,GeoPoint:mp,Timestamp:iu,Blob:op,Transaction:zd,WriteBatch:Wd,DocumentReference:Hd,DocumentSnapshot:Yd,Query:Xd,QueryDocumentSnapshot:Kd,QuerySnapshot:Zd,CollectionReference:ty,FieldPath:sp,FieldValue:vp,setLogLevel:qd.setLogLevel,CACHE_SIZE_UNLIMITED:Ud};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){!function(t,e){t.INTERNAL.registerComponent(new it("firestore",(function(t){return function(t,e){return new qd(t,e,new Dd)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},sy)))}(t),t.registerVersion("@firebase/firestore","1.16.0")}(kt);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
kt.registerVersion("firebase","7.16.0","app");n(2).applyChange;function uy(t){return"parent"in t}n(2).diff,n(2).applyChange,n(2).applyChange,n(4).decompressFromEncodedURIComponent,n(4).compressToEncodedURIComponent;function cy(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}1===(ly=cy).length&&(ly=function(t){return function(e,n){return cy(t(e),n)}}(ly));var ly,hy={value:function(){}};function fy(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new py(r)}function py(t){this._=t}function dy(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function yy(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function vy(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=hy,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}py.prototype=fy.prototype={constructor:py,on:function(t,e){var n,r=this._,i=dy(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=vy(r[n],t.name,e);else if(null==e)for(n in r)r[n]=vy(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=yy(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new py(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var gy,my,_y=0,by=0,wy=0,Ey=0,Ty=0,xy=0,Cy="object"==typeof performance&&performance.now?performance:Date,Sy="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Iy(){return Ty||(Sy(Ny),Ty=Cy.now()+xy)}function Ny(){Ty=0}function ky(){this._call=this._time=this._next=null}function Ay(t,e,n){var r=new ky;return r.restart(t,e,n),r}function Py(){Ty=(Ey=Cy.now())+xy,_y=by=0;try{!function(){Iy(),++_y;for(var t,e=gy;e;)(t=Ty-e._time)>=0&&e._call.call(null,t),e=e._next;--_y}()}finally{_y=0,function(){var t,e,n=gy,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:gy=e);my=t,Ry(r)}(),Ty=0}}function Oy(){var t=Cy.now(),e=t-Ey;e>1e3&&(xy-=e,Ey=t)}function Ry(t){_y||(by&&(by=clearTimeout(by)),t-Ty>24?(t<1/0&&(by=setTimeout(Py,t-Cy.now()-xy)),wy&&(wy=clearInterval(wy))):(wy||(Ey=Cy.now(),wy=setInterval(Oy,1e3)),_y=1,Sy(Py)))}function Dy(t,e,n){var r=new ky;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r}ky.prototype=Ay.prototype={constructor:ky,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Iy():+n)+(null==e?0:+e),this._next||my===this||(my?my._next=this:gy=this,my=this),this._call=t,this._time=n,Ry()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ry())}};fy("start","end","cancel","interrupt");var My=Math.PI,Ly=2*My,Fy=Ly-1e-6;function jy(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Uy(){return new jy}jy.prototype=Uy.prototype={constructor:jy,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,u=r-e,c=o-t,l=a-e,h=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(l*s-u*c)>1e-6&&i){var f=n-o,p=r-a,d=s*s+u*u,y=f*f+p*p,v=Math.sqrt(d),g=Math.sqrt(h),m=i*Math.tan((My-Math.acos((d+h-y)/(2*v*g)))/2),_=m/g,b=m/v;Math.abs(_-1)>1e-6&&(this._+="L"+(t+_*c)+","+(e+_*l)),this._+="A"+i+","+i+",0,0,"+ +(l*f>c*p)+","+(this._x1=t+b*s)+","+(this._y1=e+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=t+a,c=e+s,l=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+u+","+c),n&&(h<0&&(h=h%Ly+Ly),h>Fy?this._+="A"+n+","+n+",0,1,"+l+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=My)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function Vy(){}function qy(t,e){var n=new Vy;if(t instanceof Vy)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}function By(){}Vy.prototype=qy.prototype={constructor:Vy,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var zy=qy.prototype;function Wy(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Hy(t,e){var n,r,i,o,a,s=new Ky(t),u=+t.value&&(s.value=t.value),c=[s];for(null==e&&(e=Qy);n=c.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)c.push(r=n.children[o]=new Ky(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(Yy)}function Qy(t){return t.children}function Gy(t){t.data=t.data.data}function Yy(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Ky(t){this.data=t,this.depth=this.height=0,this.parent=null}function $y(t){if("function"!=typeof t)throw new Error;return t}By.prototype=function(t,e){var n=new By;if(t instanceof By)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}.prototype={constructor:By,has:zy.has,add:function(t){return this["$"+(t+="")]=t,this},remove:zy.remove,clear:zy.clear,values:zy.keys,size:zy.size,empty:zy.empty,each:zy.each},Ky.prototype=Hy.prototype={constructor:Ky,count:function(){return this.eachAfter(Wy)},each:function(t){var e,n,r,i,o=this,a=[o];do{for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this},eachAfter:function(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return Hy(this).eachBefore(Gy)}};var Xy={depth:-1},Jy={};function Zy(t){return t.id}function tv(t){return t.parentId}function ev(t){return function(){return t}}var nv=Math.PI,rv=2*nv,iv={draw:function(t,e){var n=Math.sqrt(e/nv);t.moveTo(n,0),t.arc(0,0,n,0,rv)}},ov={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},av=Math.sqrt(1/3),sv=2*av,uv={draw:function(t,e){var n=Math.sqrt(e/sv),r=n*av;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},cv=Math.sin(nv/10)/Math.sin(7*nv/10),lv=Math.sin(rv/10)*cv,hv=-Math.cos(rv/10)*cv,fv={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=lv*n,i=hv*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=rv*o/5,s=Math.cos(a),u=Math.sin(a);t.lineTo(u*n,-s*n),t.lineTo(s*r-u*i,u*r+s*i)}t.closePath()}},pv={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},dv=Math.sqrt(3),yv={draw:function(t,e){var n=-Math.sqrt(e/(3*dv));t.moveTo(0,2*n),t.lineTo(-dv*n,-n),t.lineTo(dv*n,-n),t.closePath()}},vv=-.5,gv=Math.sqrt(3)/2,mv=1/Math.sqrt(12),_v=3*(mv/2+1),bv={draw:function(t,e){var n=Math.sqrt(e/_v),r=n/2,i=n*mv,o=r,a=n*mv+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(vv*r-gv*i,gv*r+vv*i),t.lineTo(vv*o-gv*a,gv*o+vv*a),t.lineTo(vv*s-gv*u,gv*s+vv*u),t.lineTo(vv*r+gv*i,vv*i-gv*r),t.lineTo(vv*o+gv*a,vv*a-gv*o),t.lineTo(vv*s+gv*u,vv*u-gv*s),t.closePath()}};function wv(){var t=ev(iv),e=ev(64),n=null;function r(){var r;if(n||(n=r=Uy()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"==typeof e?e:ev(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:ev(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r}function Ev(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xv(t,e,n){return e&&Tv(t.prototype,e),n&&Tv(t,n),t}function Cv(t,e){return(Cv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Sv(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cv(t,e)}function Iv(t){return(Iv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kv(t,e){return!e||"object"!==Iv(e)&&"function"!=typeof e?Nv(t):e}function Av(t){return(Av=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ov(t){return(Ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Rv=0;function Dv(t,e){for(var n in e)t[n]=e[n]}var Mv={delay:0,duration:250,ease:function(t){return+t}};var Lv=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.start=null,this.interrupt=null,this.end=null,e.events&&Object.keys(e.events).forEach((function(t){if("function"!=typeof e.events[t])throw new Error("Event handlers must be a function");n[t]=function(t){var e=!1;return function(){e||(e=!0,t.call(this))}}(e.events[t])}))};function Fv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){jv(t,e,n[e])}))}return t}function jv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Vv=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state=e||{}}var e,n,r;return e=t,(n=[{key:"transition",value:function(t){if(Array.isArray(t)){var e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;this.parse(a)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}else this.parse(t)}},{key:"isTransitioning",value:function(){return!!this.transitionData}},{key:"stopTransitions",value:function(){var t=this.transitionData;t&&Object.keys(t).forEach((function(e){t[e].timer.stop()}))}},{key:"setState",value:function(t){Dv(this.state,"function"==typeof t?t(this.state):t)}},{key:"parse",value:function(t){var e=this,n=Fv({},t),r=new Lv(n);n.events&&delete n.events;var i=Fv({},Mv,n.timing||{},{time:Iy()});n.timing&&delete n.timing,Object.keys(n).forEach((function(t){var o,a,s=[],u=n[t];if("object"===Ov(a=u)&&!1===Array.isArray(a))Object.keys(u).forEach((function(n){var r=u[n];Array.isArray(r)?1===r.length?s.push(e.getTween(n,r[0],t)):(e.setState((function(e){var i,o;return(o={})[t]=Fv({},e[t],((i={})[n]=r[0],i)),o})),s.push(e.getTween(n,r[1],t))):"function"==typeof r?s.push((function(){return function(i){e.setState((function(e){var o,a;return(a={})[t]=Fv({},e[t],((o={})[n]=r(i),o)),a}))}})):(e.setState((function(e){var i,o;return(o={})[t]=Fv({},e[t],((i={})[n]=r,i)),o})),s.push(e.getTween(n,r,t)))}));else if(Array.isArray(u))1===u.length?s.push(e.getTween(t,u[0],null)):(e.setState(((o={})[t]=u[0],o)),s.push(e.getTween(t,u[1],null)));else if("function"==typeof u)s.push((function(){return function(n){var r;e.setState(((r={})[t]=u(n),r))}}));else{var c;e.setState(((c={})[t]=u,c)),s.push(e.getTween(t,u,null))}e.update({stateKey:t,timing:i,tweens:s,events:r,status:0})}))}},{key:"getTween",value:function(t,e,n){var r=this;return function(){var i=n?r.state[n][t]:r.state[t];if(i===e)return null;var o=r.getInterpolator(i,e,t,n);return null===n?function(e){var n;r.setState(((n={})[t]=o(e),n))}:function(e){r.setState((function(r){var i,a;return(a={})[n]=Fv({},r[n],((i={})[t]=o(e),i)),a}))}}}},{key:"update",value:function(t){this.transitionData||(this.transitionData={}),this.init(++Rv,t)}},{key:"init",value:function(t,e){var n=this,r=e.tweens.length,i=new Array(r);this.transitionData[t]=e,e.timer=Ay((function(t){e.status=1,e.timer.restart(o,e.timing.delay,e.timing.time),e.timing.delay<=t&&o(t-e.timing.delay)}),0,e.timing.time);var o=function o(u){if(1!==e.status)return s();for(var c in n.transitionData){var l=n.transitionData[c];if(l.stateKey===e.stateKey){if(3===l.status)return Dy(o);4===l.status?(l.status=6,l.timer.stop(),l.events.interrupt&&l.events.interrupt.call(n),delete n.transitionData[c]):+c<t&&(l.status=6,l.timer.stop(),delete n.transitionData[c])}}if(Dy((function(){3===e.status&&(e.status=4,e.timer.restart(a,e.timing.delay,e.timing.time),a(u))})),e.status=2,e.events.start&&e.events.start.call(n),2===e.status){e.status=3;for(var h=-1,f=0;f<r;++f){var p=e.tweens[f]();p&&(i[++h]=p)}i.length=h+1}},a=function(t){var r=1;t<e.timing.duration?r=e.timing.ease(t/e.timing.duration):(e.timer.restart(s),e.status=5);for(var o=-1;++o<i.length;)i[o](r);5===e.status&&(e.events.end&&e.events.end.call(n),s())},s=function(){for(var r in e.status=6,e.timer.stop(),delete n.transitionData[t],n.transitionData)return;delete n.transitionData}}}])&&Uv(e.prototype,n),r&&Uv(e,r),t}();function qv(t,e){var n=+t,r=+e-n;return function(t){return n+r*t}}function Bv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Av(t);if(e){var i=Av(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return kv(this,n)}}var zv=function(t){Sv(n,t);var e=Bv(n);function n(t){var r;Ev(this,n),Pv(Nv(r=e.call(this,t)),"animate",(function(){var t=r.state,e=t.nodeKeys,n=t.nodeHash;if(!r.unmounting){for(var i=!1,o=[],a=e.length,s=0;s<a;s++){var u=e[s],c=n[u],l=c.isTransitioning();l&&(i=!0),"LEAVE"!==c.type||l?o.push(u):delete n[u]}i||r.interval.stop(),r.setState((function(){return{nodeKeys:o,nodes:o.map((function(t){return n[t]}))}}))}})),Pv(Nv(r),"interval",null),Pv(Nv(r),"unmounting",!1);var i=t.interpolation,o=function(t){Sv(n,t);var e=Bv(n);function n(t,r){var o;return Ev(this,n),Pv(Nv(o=e.call(this)),"getInterpolator",i),o.key=t,o.data=r,o.type="ENTER",o}return n}(Vv);return r.state={Node:o,nodeKeys:[],nodeHash:{},nodes:[],data:null},r}return xv(n,[{key:"componentDidMount",value:function(){this.startInterval()}},{key:"componentDidUpdate",value:function(t){t.data===this.props.data||this.unmounting||this.startInterval()}},{key:"startInterval",value:function(){this.interval?this.interval.restart(this.animate):this.interval=function(t,e,n){var r=new ky,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?Iy():+n,r.restart((function o(a){a+=i,r.restart(o,i+=e,n),t(a)}),e,n),r)}(this.animate)}},{key:"componentWillUnmount",value:function(){var t=this.state,e=t.nodeKeys,n=t.nodeHash;this.unmounting=!0,this.interval&&this.interval.stop(),e.forEach((function(t){n[t].stopTransitions()}))}},{key:"render",value:function(){var t=this.props.children(this.state.nodes);return t&&o.a.Children.only(t)}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(t.data!==e.data){for(var n=t.data,r=t.keyAccessor,i=t.start,o=t.enter,a=t.update,s=t.leave,u=e.Node,c=e.nodeKeys,l=e.nodeHash,h={},f=0;f<c.length;f++)h[c[f]]=f;for(var p={},d=[],y=0;y<n.length;y++){var v=n[y],g=r(v,y);if(p[g]=y,d.push(g),void 0===h[g]){var m=new u;m.key=g,m.data=v,m.type="ENTER",l[g]=m}}for(var _=0;_<c.length;_++){var b=c[_],w=l[b];void 0!==p[b]?(w.data=n[p[b]],w.type="UPDATE"):w.type="LEAVE"}for(var E=function(t,e,n,r){for(var i=[],o=0;o<n.length;o++)i[o]=n[o];for(var a=0;a<t.length;a++)void 0===r[t[a]]&&i.push(t[a]);return i.sort((function(t,i){var o=r[t],a=r[i],s=e[t],u=e[i];if(null!=o&&null!=a)return r[t]-r[i];if(null!=s&&null!=u)return e[t]-e[i];if(null!=o){for(var c=0;c<n.length;c++){var l=n[c];if(e[l]){if(o<r[l]&&u>e[l])return-1;if(o>r[l]&&u<e[l])return 1}}return 1}for(var h=0;h<n.length;h++){var f=n[h];if(e[f]){if(a<r[f]&&s>e[f])return 1;if(a>r[f]&&s<e[f])return-1}}return-1}))}(c,h,d,p),T=0;T<E.length;T++){var x=E[T],C=l[x],S=C.data;"ENTER"===C.type?(C.setState(i(S,p[x])),C.transition(o(S,p[x]))):"LEAVE"===C.type?C.transition(s(S,h[x])):C.transition(a(S,p[x]))}return{data:n,nodes:E.map((function(t){return l[t]})),nodeHash:l,nodeKeys:E}}return null}}]),n}(i.Component);function Wv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Av(t);if(e){var i=Av(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return kv(this,n)}}zv.propTypes={},zv.defaultProps={enter:function(){},update:function(){},leave:function(){},interpolation:qv};var Hv=function(){return"$$key$$"},Qv=function(t){Sv(n,t);var e=Wv(n);function n(){return Ev(this,n),e.apply(this,arguments)}return xv(n,[{key:"render",value:function(){var t=this.props,e=t.show,n=t.start,r=t.enter,i=t.update,a=t.leave,s=t.interpolation,u=t.children,c="function"==typeof n?n():n;return o.a.createElement(zv,{data:e?[c]:[],start:function(){return c},keyAccessor:Hv,interpolation:s,enter:"function"==typeof r?r:function(){return r},update:"function"==typeof i?i:function(){return i},leave:"function"==typeof a?a:function(){return a}},(function(t){if(!t[0])return null;var e=u(t[0].state);return e&&o.a.Children.only(e)}))}}]),n}(i.Component);Qv.propTypes={},Qv.defaultProps={show:!0,interpolation:qv};var Gv=function(t,e){"function"!=typeof t?null!==t&&"object"===Iv(t)&&(t.current=e):t(e)},Yv={current:null},Kv=new WeakMap,$v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function Xv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Jv(t,e){return t(e={exports:{}},e.exports),e.exports
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */}var Zv="function"==typeof Symbol&&Symbol.for,tg=Zv?Symbol.for("react.element"):60103,eg=Zv?Symbol.for("react.portal"):60106,ng=Zv?Symbol.for("react.fragment"):60107,rg=Zv?Symbol.for("react.strict_mode"):60108,ig=Zv?Symbol.for("react.profiler"):60114,og=Zv?Symbol.for("react.provider"):60109,ag=Zv?Symbol.for("react.context"):60110,sg=Zv?Symbol.for("react.async_mode"):60111,ug=Zv?Symbol.for("react.concurrent_mode"):60111,cg=Zv?Symbol.for("react.forward_ref"):60112,lg=Zv?Symbol.for("react.suspense"):60113,hg=Zv?Symbol.for("react.suspense_list"):60120,fg=Zv?Symbol.for("react.memo"):60115,pg=Zv?Symbol.for("react.lazy"):60116,dg=Zv?Symbol.for("react.block"):60121,yg=Zv?Symbol.for("react.fundamental"):60117,vg=Zv?Symbol.for("react.responder"):60118,gg=Zv?Symbol.for("react.scope"):60119;function mg(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case tg:switch(t=t.type){case sg:case ug:case ng:case ig:case rg:case lg:return t;default:switch(t=t&&t.$$typeof){case ag:case cg:case pg:case fg:case og:return t;default:return e}}case eg:return e}}}function _g(t){return mg(t)===ug}var bg={AsyncMode:sg,ConcurrentMode:ug,ContextConsumer:ag,ContextProvider:og,Element:tg,ForwardRef:cg,Fragment:ng,Lazy:pg,Memo:fg,Portal:eg,Profiler:ig,StrictMode:rg,Suspense:lg,isAsyncMode:function(t){return _g(t)||mg(t)===sg},isConcurrentMode:_g,isContextConsumer:function(t){return mg(t)===ag},isContextProvider:function(t){return mg(t)===og},isElement:function(t){return"object"==typeof t&&null!==t&&t.$$typeof===tg},isForwardRef:function(t){return mg(t)===cg},isFragment:function(t){return mg(t)===ng},isLazy:function(t){return mg(t)===pg},isMemo:function(t){return mg(t)===fg},isPortal:function(t){return mg(t)===eg},isProfiler:function(t){return mg(t)===ig},isStrictMode:function(t){return mg(t)===rg},isSuspense:function(t){return mg(t)===lg},isValidElementType:function(t){return"string"==typeof t||"function"==typeof t||t===ng||t===ug||t===ig||t===rg||t===lg||t===hg||"object"==typeof t&&null!==t&&(t.$$typeof===pg||t.$$typeof===fg||t.$$typeof===og||t.$$typeof===ag||t.$$typeof===cg||t.$$typeof===yg||t.$$typeof===vg||t.$$typeof===gg||t.$$typeof===dg)},typeOf:mg},wg=Jv((function(t,e){0})),Eg=(wg.AsyncMode,wg.ConcurrentMode,wg.ContextConsumer,wg.ContextProvider,wg.Element,wg.ForwardRef,wg.Fragment,wg.Lazy,wg.Memo,wg.Portal,wg.Profiler,wg.StrictMode,wg.Suspense,wg.isAsyncMode,wg.isConcurrentMode,wg.isContextConsumer,wg.isContextProvider,wg.isElement,wg.isForwardRef,wg.isFragment,wg.isLazy,wg.isMemo,wg.isPortal,wg.isProfiler,wg.isStrictMode,wg.isSuspense,wg.isValidElementType,wg.typeOf,Jv((function(t){t.exports=bg})),Object(a.oneOfType)([a.func,a.object]),function(t){function e(){var t,n;Ev(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Pv(Nv(n=kv(this,(t=Av(e)).call.apply(t,[this].concat(i)))),"prevNode",null),n}return Sv(e,t),xv(e,[{key:"componentDidMount",value:function(){this.prevNode=Object(u.findDOMNode)(this),Gv(this.props.innerRef,this.prevNode)}},{key:"componentDidUpdate",value:function(t){var e=Object(u.findDOMNode)(this);this.prevNode!==e&&(this.prevNode=e,Gv(this.props.innerRef,e)),t.innerRef!==this.props.innerRef&&Gv(this.props.innerRef,e)}},{key:"componentWillUnmount",value:function(){Gv(this.props.innerRef,null)}},{key:"render",value:function(){return this.props.children}}]),e}(i.Component));Pv(Eg,"displayName","RefFindNode"),Pv(Eg,"propTypes",{});var Tg=function(t){function e(){var t,n;Ev(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Pv(Nv(n=kv(this,(t=Av(e)).call.apply(t,[this].concat(i)))),"handleRefOverride",(function(t){var e=n.props,r=e.children,i=e.innerRef;Gv(r.ref,t),Gv(i,t)})),n}return Sv(e,t),xv(e,[{key:"render",value:function(){var t=this.props.children;return Object(i.cloneElement)(t,{ref:this.handleRefOverride})}}]),e}(i.Component);Pv(Tg,"displayName","RefForward"),Pv(Tg,"propTypes",{});var xg=function(t){var e=t.children,n=t.innerRef,r=i.Children.only(e),o=(void 0)(r)?Tg:Eg;return Object(i.createElement)(o,{innerRef:n},r)};xg.displayName="Ref";var Cg=Jv((function(t){function e(){return t.exports=e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e.apply(this,arguments)}t.exports=e}));var Sg=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function Ig(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ng=function(t,e,n){return e&&Ig(t.prototype,e),n&&Ig(t,n),t},kg=Jv((function(t){function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(n)}t.exports=e}));var Ag=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var Pg=function(t,e){return!e||"object"!==kg(e)&&"function"!=typeof e?Ag(t):e},Og=Jv((function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(n)}t.exports=e})),Rg=Jv((function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(n,r)}t.exports=e}));var Dg=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rg(t,e)};var Mg=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t};Object.prototype.hasOwnProperty;var Lg=Array.isArray,Fg="object"==typeof $v&&$v&&$v.Object===Object&&$v,jg="object"==typeof self&&self&&self.Object===Object&&self,Ug=Fg||jg||Function("return this")(),Vg=Ug.Symbol,qg=Object.prototype,Bg=qg.hasOwnProperty,zg=qg.toString,Wg=Vg?Vg.toStringTag:void 0;var Hg=function(t){var e=Bg.call(t,Wg),n=t[Wg];try{t[Wg]=void 0;var r=!0}catch(t){}var i=zg.call(t);return r&&(e?t[Wg]=n:delete t[Wg]),i},Qg=Object.prototype.toString;var Gg=function(t){return Qg.call(t)},Yg=Vg?Vg.toStringTag:void 0;var Kg=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Yg&&Yg in Object(t)?Hg(t):Gg(t)};var $g=function(t){return null!=t&&"object"==typeof t};var Xg=function(t){return"symbol"==typeof t||$g(t)&&"[object Symbol]"==Kg(t)},Jg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zg=/^\w*$/;var tm=function(t,e){if(Lg(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Xg(t))||(Zg.test(t)||!Jg.test(t)||null!=e&&t in Object(e))};var em=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var nm,rm=function(t){if(!em(t))return!1;var e=Kg(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},im=Ug["__core-js_shared__"],om=(nm=/[^.]+$/.exec(im&&im.keys&&im.keys.IE_PROTO||""))?"Symbol(src)_1."+nm:"";var am=function(t){return!!om&&om in t},sm=Function.prototype.toString;var um=function(t){if(null!=t){try{return sm.call(t)}catch(t){}try{return t+""}catch(t){}}return""},cm=/^\[object .+?Constructor\]$/,lm=Function.prototype,hm=Object.prototype,fm=lm.toString,pm=hm.hasOwnProperty,dm=RegExp("^"+fm.call(pm).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ym=function(t){return!(!em(t)||am(t))&&(rm(t)?dm:cm).test(um(t))};var vm=function(t,e){return null==t?void 0:t[e]};var gm=function(t,e){var n=vm(t,e);return ym(n)?n:void 0},mm=gm(Object,"create");var _m=function(){this.__data__=mm?mm(null):{},this.size=0};var bm=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},wm=Object.prototype.hasOwnProperty;var Em=function(t){var e=this.__data__;if(mm){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return wm.call(e,t)?e[t]:void 0},Tm=Object.prototype.hasOwnProperty;var xm=function(t){var e=this.__data__;return mm?void 0!==e[t]:Tm.call(e,t)};var Cm=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=mm&&void 0===e?"__lodash_hash_undefined__":e,this};function Sm(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Sm.prototype.clear=_m,Sm.prototype.delete=bm,Sm.prototype.get=Em,Sm.prototype.has=xm,Sm.prototype.set=Cm;var Im=Sm;var Nm=function(){this.__data__=[],this.size=0};var km=function(t,e){return t===e||t!=t&&e!=e};var Am=function(t,e){for(var n=t.length;n--;)if(km(t[n][0],e))return n;return-1},Pm=Array.prototype.splice;var Om=function(t){var e=this.__data__,n=Am(e,t);return!(n<0)&&(n==e.length-1?e.pop():Pm.call(e,n,1),--this.size,!0)};var Rm=function(t){var e=this.__data__,n=Am(e,t);return n<0?void 0:e[n][1]};var Dm=function(t){return Am(this.__data__,t)>-1};var Mm=function(t,e){var n=this.__data__,r=Am(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function Lm(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Lm.prototype.clear=Nm,Lm.prototype.delete=Om,Lm.prototype.get=Rm,Lm.prototype.has=Dm,Lm.prototype.set=Mm;var Fm=Lm,jm=gm(Ug,"Map");var Um=function(){this.size=0,this.__data__={hash:new Im,map:new(jm||Fm),string:new Im}};var Vm=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var qm=function(t,e){var n=t.__data__;return Vm(e)?n["string"==typeof e?"string":"hash"]:n.map};var Bm=function(t){var e=qm(this,t).delete(t);return this.size-=e?1:0,e};var zm=function(t){return qm(this,t).get(t)};var Wm=function(t){return qm(this,t).has(t)};var Hm=function(t,e){var n=qm(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function Qm(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Qm.prototype.clear=Um,Qm.prototype.delete=Bm,Qm.prototype.get=zm,Qm.prototype.has=Wm,Qm.prototype.set=Hm;var Gm=Qm;function Ym(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ym.Cache||Gm),n}Ym.Cache=Gm;var Km=Ym;var $m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xm=/\\(\\)?/g,Jm=function(t){var e=Km(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace($m,(function(t,n,r,i){e.push(r?i.replace(Xm,"$1"):n||t)})),e}));var Zm=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},t_=Vg?Vg.prototype:void 0,e_=t_?t_.toString:void 0;var n_=function t(e){if("string"==typeof e)return e;if(Lg(e))return Zm(e,t)+"";if(Xg(e))return e_?e_.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n};var r_=function(t){return null==t?"":n_(t)};var i_=function(t,e){return Lg(t)?t:tm(t,e)?[t]:Jm(r_(t))};var o_=function(t){return $g(t)&&"[object Arguments]"==Kg(t)},a_=Object.prototype,s_=a_.hasOwnProperty,u_=a_.propertyIsEnumerable,c_=o_(function(){return arguments}())?o_:function(t){return $g(t)&&s_.call(t,"callee")&&!u_.call(t,"callee")},l_=/^(?:0|[1-9]\d*)$/;var h_=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&l_.test(t))&&t>-1&&t%1==0&&t<e};var f_=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var p_=function(t){if("string"==typeof t||Xg(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e};var d_=function(t,e,n){for(var r=-1,i=(e=i_(e,t)).length,o=!1;++r<i;){var a=p_(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&f_(i)&&h_(a,i)&&(Lg(t)||c_(t))};var y_=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var v_=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0};var g_=function(t,e){for(var n=0,r=(e=i_(e,t)).length;null!=t&&n<r;)t=t[p_(e[n++])];return n&&n==r?t:void 0};var m_=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o};var __=function(t,e){return e.length<2?t:g_(t,m_(e,0,-1))};var b_=function(t,e,n){e=i_(e,t);var r=null==(t=__(t,e))?t:t[p_(v_(e))];return null==r?void 0:y_(r,t,n)};var w_=function(t){return t},E_=Math.max;var T_=function(t,e,n){return e=E_(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=E_(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),y_(t,this,s)}};var x_=function(t){return function(){return t}},C_=function(){try{var t=gm(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),S_=C_?function(t,e){return C_(t,"toString",{configurable:!0,enumerable:!1,value:x_(e),writable:!0})}:w_,I_=Date.now;var N_=function(t){var e=0,n=0;return function(){var r=I_(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},k_=N_(S_);var A_=function(t,e){return k_(T_(t,e,w_),t+"")},P_=A_(b_);var O_=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Mg(t,e,n[e])}))}return t};var R_=function(t){return void 0===t};var D_=/^\s+|\s+$/g,M_=/^[-+]0x[0-9a-f]+$/i,L_=/^0b[01]+$/i,F_=/^0o[0-7]+$/i,j_=parseInt;var U_=function(t){if("number"==typeof t)return t;if(Xg(t))return NaN;if(em(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=em(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(D_,"");var n=L_.test(t);return n||F_.test(t)?j_(t.slice(2),n?2:8):M_.test(t)?NaN:+t};var V_=function(t){return t?(t=U_(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var q_=function(t){var e=V_(t),n=e%1;return e==e?n?e-n:e:0};var B_=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o};var z_=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}();var W_=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var H_=function(){return!1},Q_=Jv((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?Ug.Buffer:void 0,o=(i?i.isBuffer:void 0)||H_;t.exports=o})),G_={};G_["[object Float32Array]"]=G_["[object Float64Array]"]=G_["[object Int8Array]"]=G_["[object Int16Array]"]=G_["[object Int32Array]"]=G_["[object Uint8Array]"]=G_["[object Uint8ClampedArray]"]=G_["[object Uint16Array]"]=G_["[object Uint32Array]"]=!0,G_["[object Arguments]"]=G_["[object Array]"]=G_["[object ArrayBuffer]"]=G_["[object Boolean]"]=G_["[object DataView]"]=G_["[object Date]"]=G_["[object Error]"]=G_["[object Function]"]=G_["[object Map]"]=G_["[object Number]"]=G_["[object Object]"]=G_["[object RegExp]"]=G_["[object Set]"]=G_["[object String]"]=G_["[object WeakMap]"]=!1;var Y_=function(t){return $g(t)&&f_(t.length)&&!!G_[Kg(t)]};var K_=function(t){return function(e){return t(e)}},$_=Jv((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n&&Fg.process,o=function(){try{var t=r&&r.require&&r.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=o})),X_=$_&&$_.isTypedArray,J_=X_?K_(X_):Y_,Z_=Object.prototype.hasOwnProperty;var tb=function(t,e){var n=Lg(t),r=!n&&c_(t),i=!n&&!r&&Q_(t),o=!n&&!r&&!i&&J_(t),a=n||r||i||o,s=a?W_(t.length,String):[],u=s.length;for(var c in t)!e&&!Z_.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||h_(c,u))||s.push(c);return s},eb=Object.prototype;var nb=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||eb)};var rb=function(t,e){return function(n){return t(e(n))}},ib=rb(Object.keys,Object),ob=Object.prototype.hasOwnProperty;var ab=function(t){if(!nb(t))return ib(t);var e=[];for(var n in Object(t))ob.call(t,n)&&"constructor"!=n&&e.push(n);return e};var sb=function(t){return null!=t&&f_(t.length)&&!rm(t)};var ub=function(t){return sb(t)?tb(t):ab(t)};var cb=function(t,e){return t&&z_(t,e,ub)};var lb=function(t,e){return function(n,r){if(null==n)return n;if(!sb(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}(cb);var hb=function(){this.__data__=new Fm,this.size=0};var fb=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var pb=function(t){return this.__data__.get(t)};var db=function(t){return this.__data__.has(t)};var yb=function(t,e){var n=this.__data__;if(n instanceof Fm){var r=n.__data__;if(!jm||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Gm(r)}return n.set(t,e),this.size=n.size,this};function vb(t){var e=this.__data__=new Fm(t);this.size=e.size}vb.prototype.clear=hb,vb.prototype.delete=fb,vb.prototype.get=pb,vb.prototype.has=db,vb.prototype.set=yb;var gb=vb;var mb=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var _b=function(t){return this.__data__.has(t)};function bb(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Gm;++e<n;)this.add(t[e])}bb.prototype.add=bb.prototype.push=mb,bb.prototype.has=_b;var wb=bb;var Eb=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1};var Tb=function(t,e){return t.has(e)};var xb=function(t,e,n,r,i,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,h=!0,f=2&n?new wb:void 0;for(o.set(t,e),o.set(e,t);++l<s;){var p=t[l],d=e[l];if(r)var y=a?r(d,p,l,e,t,o):r(p,d,l,t,e,o);if(void 0!==y){if(y)continue;h=!1;break}if(f){if(!Eb(e,(function(t,e){if(!Tb(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)}))){h=!1;break}}else if(p!==d&&!i(p,d,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h},Cb=Ug.Uint8Array;var Sb=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n};var Ib=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},Nb=Vg?Vg.prototype:void 0,kb=Nb?Nb.valueOf:void 0;var Ab=function(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new Cb(t),new Cb(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return km(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=Sb;case"[object Set]":var u=1&r;if(s||(s=Ib),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);var l=xb(s(t),s(e),r,i,o,a);return a.delete(t),l;case"[object Symbol]":if(kb)return kb.call(t)==kb.call(e)}return!1};var Pb=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t};var Ob=function(t,e,n){var r=e(t);return Lg(t)?r:Pb(r,n(t))};var Rb=function(){return[]},Db=Object.prototype.propertyIsEnumerable,Mb=Object.getOwnPropertySymbols,Lb=Mb?function(t){return null==t?[]:(t=Object(t),B_(Mb(t),(function(e){return Db.call(t,e)})))}:Rb;var Fb=function(t){return Ob(t,ub,Lb)},jb=Object.prototype.hasOwnProperty;var Ub=function(t,e,n,r,i,o){var a=1&n,s=Fb(t),u=s.length;if(u!=Fb(e).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in e:jb.call(e,l)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var p=a;++c<u;){var d=t[l=s[c]],y=e[l];if(r)var v=a?r(y,d,l,e,t,o):r(d,y,l,t,e,o);if(!(void 0===v?d===y||i(d,y,n,r,o):v)){f=!1;break}p||(p="constructor"==l)}if(f&&!p){var g=t.constructor,m=e.constructor;g==m||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m||(f=!1)}return o.delete(t),o.delete(e),f},Vb=gm(Ug,"DataView"),qb=gm(Ug,"Promise"),Bb=gm(Ug,"Set"),zb=gm(Ug,"WeakMap"),Wb=um(Vb),Hb=um(jm),Qb=um(qb),Gb=um(Bb),Yb=um(zb),Kb=Kg;(Vb&&"[object DataView]"!=Kb(new Vb(new ArrayBuffer(1)))||jm&&"[object Map]"!=Kb(new jm)||qb&&"[object Promise]"!=Kb(qb.resolve())||Bb&&"[object Set]"!=Kb(new Bb)||zb&&"[object WeakMap]"!=Kb(new zb))&&(Kb=function(t){var e=Kg(t),n="[object Object]"==e?t.constructor:void 0,r=n?um(n):"";if(r)switch(r){case Wb:return"[object DataView]";case Hb:return"[object Map]";case Qb:return"[object Promise]";case Gb:return"[object Set]";case Yb:return"[object WeakMap]"}return e});var $b=Kb,Xb=Object.prototype.hasOwnProperty;var Jb=function(t,e,n,r,i,o){var a=Lg(t),s=Lg(e),u=a?"[object Array]":$b(t),c=s?"[object Array]":$b(e),l="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),h="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),f=u==c;if(f&&Q_(t)){if(!Q_(e))return!1;a=!0,l=!1}if(f&&!l)return o||(o=new gb),a||J_(t)?xb(t,e,n,r,i,o):Ab(t,e,u,n,r,i,o);if(!(1&n)){var p=l&&Xb.call(t,"__wrapped__"),d=h&&Xb.call(e,"__wrapped__");if(p||d){var y=p?t.value():t,v=d?e.value():e;return o||(o=new gb),i(y,v,n,r,o)}}return!!f&&(o||(o=new gb),Ub(t,e,n,r,i,o))};var Zb=function t(e,n,r,i,o){return e===n||(null==e||null==n||!$g(e)&&!$g(n)?e!=e&&n!=n:Jb(e,n,r,i,t,o))};var tw=function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var u=(s=n[i])[0],c=t[u],l=s[1];if(a&&s[2]){if(void 0===c&&!(u in t))return!1}else{var h=new gb;if(r)var f=r(c,l,u,t,e,h);if(!(void 0===f?Zb(l,c,3,r,h):f))return!1}}return!0};var ew=function(t){return t==t&&!em(t)};var nw=function(t){for(var e=ub(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ew(i)]}return e};var rw=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}};var iw=function(t){var e=nw(t);return 1==e.length&&e[0][2]?rw(e[0][0],e[0][1]):function(n){return n===t||tw(n,t,e)}};var ow=function(t,e,n){var r=null==t?void 0:g_(t,e);return void 0===r?n:r};var aw=function(t,e){return null!=t&&e in Object(t)};var sw=function(t,e){return null!=t&&d_(t,e,aw)};var uw=function(t,e){return tm(t)&&ew(e)?rw(p_(t),e):function(n){var r=ow(n,t);return void 0===r&&r===e?sw(n,t):Zb(e,r,3)}};var cw=function(t){return function(e){return null==e?void 0:e[t]}};var lw=function(t){return function(e){return g_(e,t)}};var hw=function(t){return tm(t)?cw(p_(t)):lw(t)};var fw=function(t){return"function"==typeof t?t:null==t?w_:"object"==typeof t?Lg(t)?uw(t[0],t[1]):iw(t):hw(t)};Object.prototype.hasOwnProperty;var pw=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1};var dw=function(t){return t!=t};var yw=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1};var vw=function(t,e,n){return e==e?yw(t,e,n):pw(t,dw,n)};var gw=function(t,e){return!!(null==t?0:t.length)&&vw(t,e,0)>-1};var mw=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1},_w=Math.min;var bw=function(t,e,n){for(var r=n?mw:gw,i=t[0].length,o=t.length,a=o,s=Array(o),u=1/0,c=[];a--;){var l=t[a];a&&e&&(l=Zm(l,K_(e))),u=_w(l.length,u),s[a]=!n&&(e||i>=120&&l.length>=120)?new wb(a&&l):void 0}l=t[0];var h=-1,f=s[0];t:for(;++h<i&&c.length<u;){var p=l[h],d=e?e(p):p;if(p=n||0!==p?p:0,!(f?Tb(f,d):r(c,d,n))){for(a=o;--a;){var y=s[a];if(!(y?Tb(y,d):r(t[a],d,n)))continue t}f&&f.push(d),c.push(p)}}return c};var ww=function(t){return $g(t)&&sb(t)};var Ew=function(t){return ww(t)?t:[]};A_((function(t){var e=Zm(t,Ew);return e.length&&e[0]===t[0]?bw(e):[]}));var Tw=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t};var xw=function(t){return"default".concat(t[0].toUpperCase()+t.slice(1))},Cw=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e[t];if(void 0!==i)return i;if(r){var o=e[xw(t)];if(void 0!==o)return o;if(n){var a=n[t];if(void 0!==a)return a}}return"checked"!==t&&("value"===t?e.multiple?[]:"":void 0)},Sw=function(t){function e(){var t,n;Sg(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n=Pg(this,(t=Og(e)).call.apply(t,[this].concat(i))),Mg(Ag(n),"trySetState",(function(t,e){var r=Object.keys(t).reduce((function(e,r){return void 0!==n.props[r]||(e[r]=t[r]),e}),{});Object.keys(r).length>0&&n.setState(r,e)}));var a=n.constructor.autoControlledProps,s=P_(Ag(n),"getInitialAutoControlledState",n.props)||{},u=a.reduce((function(t,e){return t[e]=Cw(e,n.props,s,!0),t}),{});return n.state=O_({},s,u),n}return Dg(e,t),Ng(e,[{key:"UNSAFE_componentWillReceiveProps",value:function(t){var e=this.constructor.autoControlledProps.reduce((function(e,n){return!R_(t[n])&&(e[n]=t[n]),e}),{});Object.keys(e).length>0&&this.setState(e)}}]),e}(i.Component);var Iw=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r};var Nw=function(t,e){if(t){if("string"==typeof t)return Iw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Iw(t,e):void 0}};var kw=function(t,e,n){"__proto__"==e&&C_?C_(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var Aw=function(t,e){var n;return lb(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n};var Pw=function(t,e,n){if(!em(n))return!1;var r=typeof e;return!!("number"==r?sb(n)&&h_(e,n.length):"string"==r&&e in n)&&km(n[e],t)};var Ow=function(t,e,n){var r=Lg(t)?Eb:Aw;return n&&Pw(t,e,n)&&(e=void 0),r(t,fw(e))},Rw=function(t){return null==t||Array.isArray(t)&&0===t.length},Dw={1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten",11:"eleven",12:"twelve",13:"thirteen",14:"fourteen",15:"fifteen",16:"sixteen"},Mw=function(t,e){return t&&e},Lw=function(t,e){return t&&(!0===t?e:"".concat(t," ").concat(e))};var Fw=function(t){if(Array.isArray(t))return Iw(t)};var jw=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)};var Uw=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var Vw=function(t){return Fw(t)||jw(t)||Nw(t)||Uw()},qw=Jv((function(t,e){e.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},e.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},e.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},e.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},e.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},e.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},e.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},e.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},e.realToAlias=function(){var t=Object.prototype.hasOwnProperty,n=e.aliasToReal,r={};for(var i in n){var o=n[i];t.call(r,o)?r[o].push(i):r[o]=[i]}return r}(),e.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},e.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},e.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}})),Bw=(qw.aliasToReal,qw.aryMethod,qw.aryRearg,qw.iterateeAry,qw.iterateeRearg,qw.methodRearg,qw.methodSpread,qw.mutate,qw.realToAlias,qw.remap,qw.skipFixed,qw.skipRearg,{}),zw=Array.prototype.push;function Ww(t,e){return 2==e?function(e,n){return t(e,n)}:function(e){return t(e)}}function Hw(t){for(var e=t?t.length:0,n=Array(e);e--;)n[e]=t[e];return n}function Qw(t,e){return function(){var n=arguments.length;if(n){for(var r=Array(n);n--;)r[n]=arguments[n];var i=r[0]=e.apply(void 0,r);return t.apply(void 0,r),i}}}var Gw=function t(e,n,r,i){var o="function"==typeof n,a=n===Object(n);if(a&&(i=r,r=n,n=void 0),null==r)throw new TypeError;i||(i={});var s=!("cap"in i)||i.cap,u=!("curry"in i)||i.curry,c=!("fixed"in i)||i.fixed,l=!("immutable"in i)||i.immutable,h=!("rearg"in i)||i.rearg,f=o?r:Bw,p="curry"in i&&i.curry,d="fixed"in i&&i.fixed,y="rearg"in i&&i.rearg,v=o?r.runInContext():void 0,g=o?r:{ary:e.ary,assign:e.assign,clone:e.clone,curry:e.curry,forEach:e.forEach,isArray:e.isArray,isError:e.isError,isFunction:e.isFunction,isWeakMap:e.isWeakMap,iteratee:e.iteratee,keys:e.keys,rearg:e.rearg,toInteger:e.toInteger,toPath:e.toPath},m=g.ary,_=g.assign,b=g.clone,w=g.curry,E=g.forEach,T=g.isArray,x=g.isError,C=g.isFunction,S=g.isWeakMap,I=g.keys,N=g.rearg,k=g.toInteger,A=g.toPath,P=I(qw.aryMethod),O={castArray:function(t){return function(){var e=arguments[0];return T(e)?t(Hw(e)):t.apply(void 0,arguments)}},iteratee:function(t){return function(){var e=arguments[0],n=arguments[1],r=t(e,n),i=r.length;return s&&"number"==typeof n?(n=n>2?n-2:1,i&&i<=n?r:Ww(r,n)):r}},mixin:function(t){return function(e){var n=this;if(!C(n))return t(n,Object(e));var r=[];return E(I(e),(function(t){C(e[t])&&r.push([t,n.prototype[t]])})),t(n,Object(e)),E(r,(function(t){var e=t[1];C(e)?n.prototype[t[0]]=e:delete n.prototype[t[0]]})),n}},nthArg:function(t){return function(e){var n=e<0?1:k(e)+1;return w(t(e),n)}},rearg:function(t){return function(e,n){var r=n?n.length:0;return w(t(e,n),r)}},runInContext:function(n){return function(r){return t(e,n(r),i)}}};function R(t,e){if(s){var n=qw.iterateeRearg[t];if(n)return function(t,e){return j(t,(function(t){var n=e.length;return function(t,e){return 2==e?function(e,n){return t.apply(void 0,arguments)}:function(e){return t.apply(void 0,arguments)}}(N(Ww(t,n),e),n)}))}(e,n);var r=!o&&qw.iterateeAry[t];if(r)return function(t,e){return j(t,(function(t){return"function"==typeof t?Ww(t,e):t}))}(e,r)}return e}function D(t,e,n){if(c&&(d||!qw.skipFixed[t])){var r=qw.methodSpread[t],i=r&&r.start;return void 0===i?m(e,n):function(t,e){return function(){for(var n=arguments.length,r=n-1,i=Array(n);n--;)i[n]=arguments[n];var o=i[e],a=i.slice(0,e);return o&&zw.apply(a,o),e!=r&&zw.apply(a,i.slice(e+1)),t.apply(this,a)}}(e,i)}return e}function M(t,e,n){return h&&n>1&&(y||!qw.skipRearg[t])?N(e,qw.methodRearg[t]||qw.aryRearg[n]):e}function L(t,e){for(var n=-1,r=(e=A(e)).length,i=r-1,o=b(Object(t)),a=o;null!=a&&++n<r;){var s=e[n],u=a[s];null==u||C(u)||x(u)||S(u)||(a[s]=b(n==i?u:Object(u))),a=a[s]}return o}function F(e,n){var r=qw.aliasToReal[e]||e,a=qw.remap[r]||r,s=i;return function(e){var i=o?v:g,u=o?v[a]:n,c=_(_({},s),e);return t(i,r,u,c)}}function j(t,e){return function(){var n=arguments.length;if(!n)return t();for(var r=Array(n);n--;)r[n]=arguments[n];var i=h?0:n-1;return r[i]=e(r[i]),t.apply(void 0,r)}}function U(t,e,n){var r,i=qw.aliasToReal[t]||t,o=e,a=O[i];return a?o=a(e):l&&(qw.mutate.array[i]?o=Qw(e,Hw):qw.mutate.object[i]?o=Qw(e,function(t){return function(e){return t({},e)}}(e)):qw.mutate.set[i]&&(o=Qw(e,L))),E(P,(function(t){return E(qw.aryMethod[t],(function(e){if(i==e){var n=qw.methodSpread[i],a=n&&n.afterRearg;return r=a?D(i,M(i,o,t),t):M(i,D(i,o,t),t),r=function(t,e,n){return p||u&&n>1?w(e,n):e}(0,r=R(i,r),t),!1}})),!r})),r||(r=o),r==e&&(r=p?w(r,1):function(){return e.apply(this,arguments)}),r.convert=F(i,e),r.placeholder=e.placeholder=n,r}if(!a)return U(n,r,f);var V=r,q=[];return E(P,(function(t){E(qw.aryMethod[t],(function(t){var e=V[qw.remap[t]||t];e&&q.push([t,U(t,e,V)])}))})),E(I(V),(function(t){var e=V[t];if("function"==typeof e){for(var n=q.length;n--;)if(q[n][0]==t)return;e.convert=F(t,e),q.push([t,e])}})),E(q,(function(t){V[t[0]]=t[1]})),V.convert=function(t){return V.runInContext.convert(t)(void 0)},V.placeholder=V,E(I(V),(function(t){E(qw.realToAlias[t]||[],(function(e){V[e]=V[t]}))})),V},Yw=zb&&new zb,Kw=Yw?function(t,e){return Yw.set(t,e),t}:w_,$w=Object.create,Xw=function(){function t(){}return function(e){if(!em(e))return{};if($w)return $w(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var Jw=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Xw(t.prototype),r=t.apply(n,e);return em(r)?r:n}};var Zw=function(t,e,n){var r=1&e,i=Jw(t);return function e(){var o=this&&this!==Ug&&this instanceof e?i:t;return o.apply(r?n:this,arguments)}},tE=Math.max;var eE=function(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,c=tE(o-a,0),l=Array(u+c),h=!r;++s<u;)l[s]=e[s];for(;++i<a;)(h||i<o)&&(l[n[i]]=t[i]);for(;c--;)l[s++]=t[i++];return l},nE=Math.max;var rE=function(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,c=e.length,l=nE(o-s,0),h=Array(l+c),f=!r;++i<l;)h[i]=t[i];for(var p=i;++u<c;)h[p+u]=e[u];for(;++a<s;)(f||i<o)&&(h[p+n[a]]=t[i++]);return h};var iE=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r};var oE=function(){};function aE(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}aE.prototype=Xw(oE.prototype),aE.prototype.constructor=aE;var sE=aE;var uE=function(){},cE=Yw?function(t){return Yw.get(t)}:uE,lE={},hE=Object.prototype.hasOwnProperty;var fE=function(t){for(var e=t.name+"",n=lE[e],r=hE.call(lE,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e};function pE(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}pE.prototype=Xw(oE.prototype),pE.prototype.constructor=pE;var dE=pE;var yE=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e};var vE=function(t){if(t instanceof sE)return t.clone();var e=new dE(t.__wrapped__,t.__chain__);return e.__actions__=yE(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e},gE=Object.prototype.hasOwnProperty;function mE(t){if($g(t)&&!Lg(t)&&!(t instanceof sE)){if(t instanceof dE)return t;if(gE.call(t,"__wrapped__"))return vE(t)}return new dE(t)}mE.prototype=oE.prototype,mE.prototype.constructor=mE;var _E=mE;var bE=function(t){var e=fE(t),n=_E[e];if("function"!=typeof n||!(e in sE.prototype))return!1;if(t===n)return!0;var r=cE(n);return!!r&&t===r[0]},wE=N_(Kw),EE=/\{\n\/\* \[wrapped with (.+)\] \*/,TE=/,? & /;var xE=function(t){var e=t.match(EE);return e?e[1].split(TE):[]},CE=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var SE=function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(CE,"{\n/* [wrapped with "+e+"] */\n")},IE=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var NE=function(t,e){return Tw(IE,(function(n){var r="_."+n[0];e&n[1]&&!gw(t,r)&&t.push(r)})),t.sort()};var kE=function(t,e,n){var r=e+"";return k_(t,SE(r,NE(xE(r),n)))};var AE=function(t,e,n,r,i,o,a,s,u,c){var l=8&e;e|=l?32:64,4&(e&=~(l?64:32))||(e&=-4);var h=[t,e,i,l?o:void 0,l?a:void 0,l?void 0:o,l?void 0:a,s,u,c],f=n.apply(void 0,h);return bE(t)&&wE(f,h),f.placeholder=r,kE(f,t,e)};var PE=function(t){return t.placeholder},OE=Math.min;var RE=function(t,e){for(var n=t.length,r=OE(e.length,n),i=yE(t);r--;){var o=e[r];t[r]=h_(o,n)?i[o]:void 0}return t};var DE=function(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&"__lodash_placeholder__"!==a||(t[n]="__lodash_placeholder__",o[i++]=n)}return o};var ME=function t(e,n,r,i,o,a,s,u,c,l){var h=128&n,f=1&n,p=2&n,d=24&n,y=512&n,v=p?void 0:Jw(e);return function g(){for(var m=arguments.length,_=Array(m),b=m;b--;)_[b]=arguments[b];if(d)var w=PE(g),E=iE(_,w);if(i&&(_=eE(_,i,o,d)),a&&(_=rE(_,a,s,d)),m-=E,d&&m<l){var T=DE(_,w);return AE(e,n,t,g.placeholder,r,_,T,u,c,l-m)}var x=f?r:this,C=p?x[e]:e;return m=_.length,u?_=RE(_,u):y&&m>1&&_.reverse(),h&&c<m&&(_.length=c),this&&this!==Ug&&this instanceof g&&(C=v||Jw(C)),C.apply(x,_)}};var LE=function(t,e,n){var r=Jw(t);return function i(){for(var o=arguments.length,a=Array(o),s=o,u=PE(i);s--;)a[s]=arguments[s];var c=o<3&&a[0]!==u&&a[o-1]!==u?[]:DE(a,u);if((o-=c.length)<n)return AE(t,e,ME,i.placeholder,void 0,a,c,void 0,void 0,n-o);var l=this&&this!==Ug&&this instanceof i?r:t;return y_(l,this,a)}};var FE=function(t,e,n,r){var i=1&e,o=Jw(t);return function e(){for(var a=-1,s=arguments.length,u=-1,c=r.length,l=Array(c+s),h=this&&this!==Ug&&this instanceof e?o:t;++u<c;)l[u]=r[u];for(;s--;)l[u++]=arguments[++a];return y_(h,i?n:this,l)}},jE=Math.min;var UE=function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var s=e[3];if(s){var u=t[3];t[3]=u?eE(u,s,e[4]):s,t[4]=u?DE(t[3],"__lodash_placeholder__"):e[4]}return(s=e[5])&&(u=t[5],t[5]=u?rE(u,s,e[6]):s,t[6]=u?DE(t[5],"__lodash_placeholder__"):e[6]),(s=e[7])&&(t[7]=s),128&r&&(t[8]=null==t[8]?e[8]:jE(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t},VE=Math.max;var qE=function(t,e,n,r,i,o,a,s){var u=2&e;if(!u&&"function"!=typeof t)throw new TypeError("Expected a function");var c=r?r.length:0;if(c||(e&=-97,r=i=void 0),a=void 0===a?a:VE(q_(a),0),s=void 0===s?s:q_(s),c-=i?i.length:0,64&e){var l=r,h=i;r=i=void 0}var f=u?void 0:cE(t),p=[t,e,n,r,i,l,h,o,a,s];if(f&&UE(p,f),t=p[0],e=p[1],n=p[2],r=p[3],i=p[4],!(s=p[9]=void 0===p[9]?u?0:t.length:VE(p[9]-c,0))&&24&e&&(e&=-25),e&&1!=e)d=8==e||16==e?LE(t,e,s):32!=e&&33!=e||i.length?ME.apply(void 0,p):FE(t,e,n,r);else var d=Zw(t,e,n);return kE((f?Kw:wE)(d,p),t,e)};var BE=function(t,e,n){return e=n?void 0:e,e=t&&null==e?t.length:e,qE(t,128,void 0,void 0,void 0,void 0,e)},zE=Object.prototype.hasOwnProperty;var WE=function(t,e,n){var r=t[e];zE.call(t,e)&&km(r,n)&&(void 0!==n||e in t)||kw(t,e,n)};var HE=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),i?kw(n,s,u):WE(n,s,u)}return n};var QE=function(t,e){return t&&HE(e,ub(e),t)};var GE=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},YE=Object.prototype.hasOwnProperty;var KE=function(t){if(!em(t))return GE(t);var e=nb(t),n=[];for(var r in t)("constructor"!=r||!e&&YE.call(t,r))&&n.push(r);return n};var $E=function(t){return sb(t)?tb(t,!0):KE(t)};var XE=function(t,e){return t&&HE(e,$E(e),t)},JE=Jv((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?Ug.Buffer:void 0,o=i?i.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=o?o(n):new t.constructor(n);return t.copy(r),r}}));var ZE=function(t,e){return HE(t,Lb(t),e)},tT=rb(Object.getPrototypeOf,Object),eT=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Pb(e,Lb(t)),t=tT(t);return e}:Rb;var nT=function(t,e){return HE(t,eT(t),e)};var rT=function(t){return Ob(t,$E,eT)},iT=Object.prototype.hasOwnProperty;var oT=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&iT.call(t,"index")&&(n.index=t.index,n.input=t.input),n};var aT=function(t){var e=new t.constructor(t.byteLength);return new Cb(e).set(new Cb(t)),e};var sT=function(t,e){var n=e?aT(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},uT=/\w*$/;var cT=function(t){var e=new t.constructor(t.source,uT.exec(t));return e.lastIndex=t.lastIndex,e},lT=Vg?Vg.prototype:void 0,hT=lT?lT.valueOf:void 0;var fT=function(t){return hT?Object(hT.call(t)):{}};var pT=function(t,e){var n=e?aT(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var dT=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return aT(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return sT(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return pT(t,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return cT(t);case"[object Set]":return new r;case"[object Symbol]":return fT(t)}};var yT=function(t){return"function"!=typeof t.constructor||nb(t)?{}:Xw(tT(t))};var vT=function(t){return $g(t)&&"[object Map]"==$b(t)},gT=$_&&$_.isMap,mT=gT?K_(gT):vT;var _T=function(t){return $g(t)&&"[object Set]"==$b(t)},bT=$_&&$_.isSet,wT=bT?K_(bT):_T,ET={};ET["[object Arguments]"]=ET["[object Array]"]=ET["[object ArrayBuffer]"]=ET["[object DataView]"]=ET["[object Boolean]"]=ET["[object Date]"]=ET["[object Float32Array]"]=ET["[object Float64Array]"]=ET["[object Int8Array]"]=ET["[object Int16Array]"]=ET["[object Int32Array]"]=ET["[object Map]"]=ET["[object Number]"]=ET["[object Object]"]=ET["[object RegExp]"]=ET["[object Set]"]=ET["[object String]"]=ET["[object Symbol]"]=ET["[object Uint8Array]"]=ET["[object Uint8ClampedArray]"]=ET["[object Uint16Array]"]=ET["[object Uint32Array]"]=!0,ET["[object Error]"]=ET["[object Function]"]=ET["[object WeakMap]"]=!1;var TT=function t(e,n,r,i,o,a){var s,u=1&n,c=2&n,l=4&n;if(r&&(s=o?r(e,i,o,a):r(e)),void 0!==s)return s;if(!em(e))return e;var h=Lg(e);if(h){if(s=oT(e),!u)return yE(e,s)}else{var f=$b(e),p="[object Function]"==f||"[object GeneratorFunction]"==f;if(Q_(e))return JE(e,u);if("[object Object]"==f||"[object Arguments]"==f||p&&!o){if(s=c||p?{}:yT(e),!u)return c?nT(e,XE(s,e)):ZE(e,QE(s,e))}else{if(!ET[f])return o?e:{};s=dT(e,f,u)}}a||(a=new gb);var d=a.get(e);if(d)return d;a.set(e,s),wT(e)?e.forEach((function(i){s.add(t(i,n,r,i,e,a))})):mT(e)&&e.forEach((function(i,o){s.set(o,t(i,n,r,o,e,a))}));var y=l?c?rT:Fb:c?keysIn:ub,v=h?void 0:y(e);return Tw(v||e,(function(i,o){v&&(i=e[o=i]),WE(s,o,t(i,n,r,o,e,a))})),s};var xT=function(t){return TT(t,4)};function CT(t,e,n){var r=qE(t,8,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return r.placeholder=CT.placeholder,r}CT.placeholder={};var ST=CT,IT=Function.prototype,NT=Object.prototype,kT=IT.toString,AT=NT.hasOwnProperty,PT=kT.call(Object);var OT=function(t){if(!$g(t)||"[object Object]"!=Kg(t))return!1;var e=tT(t);if(null===e)return!0;var n=AT.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&kT.call(n)==PT};var RT=function(t){if(!$g(t))return!1;var e=Kg(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!OT(t)};var DT=function(t){return $g(t)&&"[object WeakMap]"==$b(t)};var MT=function(t){return fw("function"==typeof t?t:TT(t,1))},LT=Vg?Vg.isConcatSpreadable:void 0;var FT=function(t){return Lg(t)||c_(t)||!!(LT&&t&&t[LT])};var jT=function t(e,n,r,i,o){var a=-1,s=e.length;for(r||(r=FT),o||(o=[]);++a<s;){var u=e[a];n>0&&r(u)?n>1?t(u,n-1,r,i,o):Pb(o,u):i||(o[o.length]=u)}return o};var UT=function(t){return(null==t?0:t.length)?jT(t,1):[]};var VT=function(t){return k_(T_(t,void 0,UT),t+"")},qT=VT((function(t,e){return qE(t,256,void 0,void 0,void 0,e)}));var BT=function(t){return Lg(t)?Zm(t,p_):Xg(t)?[t]:yE(Jm(r_(t)))},zT={ary:BE,assign:QE,clone:xT,curry:ST,forEach:Tw,isArray:Lg,isError:RT,isFunction:rm,isWeakMap:DT,iteratee:MT,keys:ab,rearg:qT,toInteger:q_,toPath:BT};var WT=function(t,e,n){return Gw(zT,t,e,n)};var HT=function(t,e,n,r){var i=-1,o=gw,a=!0,s=t.length,u=[],c=e.length;if(!s)return u;n&&(e=Zm(e,K_(n))),r?(o=mw,a=!1):e.length>=200&&(o=Tb,a=!1,e=new wb(e));t:for(;++i<s;){var l=t[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,a&&h==h){for(var f=c;f--;)if(e[f]===h)continue t;u.push(l)}else o(e,h,r)||u.push(l)}return u};WT("difference",A_((function(t,e){return ww(t)?HT(t,jT(e,1,ww,!0)):[]}))).placeholder=Bw;var QT=function(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:m_(t,e,n)};var GT=function(t,e){for(var n=t.length;n--&&vw(e,t[n],0)>-1;);return n};var YT=function(t,e){for(var n=-1,r=t.length;++n<r&&vw(e,t[n],0)>-1;);return n};var KT=function(t){return t.split("")},$T=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var XT=function(t){return $T.test(t)},JT="[\\ud800-\\udfff]",ZT="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",tx="\\ud83c[\\udffb-\\udfff]",ex="[^\\ud800-\\udfff]",nx="(?:\\ud83c[\\udde6-\\uddff]){2}",rx="[\\ud800-\\udbff][\\udc00-\\udfff]",ix="(?:"+ZT+"|"+tx+")"+"?",ox="[\\ufe0e\\ufe0f]?"+ix+("(?:\\u200d(?:"+[ex,nx,rx].join("|")+")[\\ufe0e\\ufe0f]?"+ix+")*"),ax="(?:"+[ex+ZT+"?",ZT,nx,rx,JT].join("|")+")",sx=RegExp(tx+"(?="+tx+")|"+ax+ox,"g");var ux=function(t){return t.match(sx)||[]};var cx=function(t){return XT(t)?ux(t):KT(t)},lx=/^\s+|\s+$/g;WT("trim",(function(t,e,n){if((t=r_(t))&&(n||void 0===e))return t.replace(lx,"");if(!t||!(e=n_(e)))return t;var r=cx(t),i=cx(e),o=YT(r,i),a=GT(r,i)+1;return QT(r,o,a).join("")})).placeholder=Bw;var hx={cap:!1,curry:!1,fixed:!1,immutable:!1,rearg:!1};WT("isObject",em,hx).placeholder=Bw;var fx=function(t,e,n,r){if(!em(t))return t;for(var i=-1,o=(e=i_(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var u=p_(e[i]),c=n;if(i!=a){var l=s[u];void 0===(c=r?r(l,u,s):void 0)&&(c=em(l)?l:h_(e[i+1])?[]:{})}WE(s,u,c),s=s[u]}return t};var px=function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=g_(t,a);n(s,a)&&fx(o,i_(a,t),s)}return o};var dx=function(t,e){return px(t,e,(function(e,n){return sw(t,n)}))},yx=VT((function(t,e){return null==t?{}:dx(t,e)}));WT("pick",yx).placeholder=Bw,WT("keys",ub,hx).placeholder=Bw,WT("isPlainObject",OT,hx).placeholder=Bw,WT("isFunction",rm,hx).placeholder=Bw;var vx=WT("compact",(function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}),hx);vx.placeholder=Bw;var gx=function(t){return null==t},mx=WT("isNil",gx,hx);mx.placeholder=Bw;WT("take",(function(t,e,n){return t&&t.length?(e=n||void 0===e?1:q_(e),m_(t,0,e<0?0:e)):[]})).placeholder=Bw;var _x=function(t,e){var n=-1,r=sb(t)?Array(t.length):[];return lb(t,(function(t,i,o){r[++n]=e(t,i,o)})),r};var bx=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t};var wx=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=Xg(t),a=void 0!==e,s=null===e,u=e==e,c=Xg(e);if(!s&&!c&&!o&&t>e||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0};var Ex=function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=wx(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index};var Tx=function(t,e,n){var r=-1;e=Zm(e.length?e:[w_],K_(fw));var i=_x(t,(function(t,n,i){return{criteria:Zm(e,(function(e){return e(t)})),index:++r,value:t}}));return bx(i,(function(t,e){return Ex(t,e,n)}))};WT("sortBy",A_((function(t,e){if(null==t)return[];var n=e.length;return n>1&&Pw(t,e[0],e[1])?e=[]:n>2&&Pw(e[0],e[1],e[2])&&(e=[e[0]]),Tx(t,jT(e,1),[])}))).placeholder=Bw;var xx=function(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n};WT("sum",(function(t){return t&&t.length?xx(t,w_):0}),hx).placeholder=Bw;var Cx=function(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===s?a==a&&!Xg(a):n(a,s)))var s=a,u=o}return u};var Sx=function(t,e){return t<e};WT("min",(function(t){return t&&t.length?Cx(t,w_,Sx):void 0}),hx).placeholder=Bw;var Ix=WT("map",(function(t,e){return(Lg(t)?Zm:_x)(t,fw(e))}));Ix.placeholder=Bw;var Nx=WT("flow",function(t){return VT((function(e){var n=e.length,r=n,i=dE.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new TypeError("Expected a function");if(i&&!a&&"wrapper"==fE(o))var a=new dE([],!0)}for(r=a?r:n;++r<n;){o=e[r];var s=fE(o),u="wrapper"==s?cE(o):void 0;a=u&&bE(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?a[fE(u[0])].apply(a,u[3]):1==o.length&&bE(o)?a[s]():a.thru(o)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&Lg(r))return a.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}());Nx.placeholder=Bw;WT("memoize",Km).placeholder=Bw;var kx=s.a.shape({current:s.a.object}),Ax=(s.a.oneOfType([s.a.func,kx]),Jv((function(t){
/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/var e,n;e=!("undefined"==typeof window||!window.document||!window.document.createElement),n={canUseDOM:e,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:e&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:e&&!!window.screen},t.exports?t.exports=n:window.ExecutionEnvironment=n}))),Px=Jv((function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(e,"__esModule",{value:!0});var h=function(){function t(e){r(this,t),s(this,"handlers",void 0),this.handlers=e.slice(0)}return a(t,[{key:"addHandlers",value:function(e){for(var n=this.handlers.slice(0),r=e.length,i=0;i<r;i+=1)n.push(e[i]);return new t(n)}},{key:"dispatchEvent",value:function(t,e){var n=this.handlers.length-1;if(e){for(var r=n;r>=0;r-=1)this.handlers[r].called||(this.handlers[r].called=!0,this.handlers[r](t));for(var i=n;i>=0;i-=1)this.handlers[i].called=!1}else(0,this.handlers[n])(t)}},{key:"hasHandlers",value:function(){return this.handlers.length>0}},{key:"removeHandlers",value:function(e){for(var n=[],r=this.handlers.length,i=0;i<r;i+=1){var o=this.handlers[i];-1===e.indexOf(o)&&n.push(o)}return new t(n)}}]),t}();function f(t){var e=new Map;return t.forEach((function(t,n){e.set(n,t)})),e}function p(t){return Array.isArray(t)?t:[t]}function d(t){return"document"===t?document:"window"===t?window:function(t){return null!==t&&"object"===n(t)&&t.hasOwnProperty("current")}(t)?t.current||document:t||document}var y=function(){function t(e,n){r(this,t),s(this,"handlerSets",void 0),s(this,"poolName",void 0),this.handlerSets=n,this.poolName=e}return a(t,[{key:"addHandlers",value:function(e,n){var r=f(this.handlerSets);if(r.has(e)){var i=r.get(e);r.set(e,i.addHandlers(n))}else r.set(e,new h(n));return new t(this.poolName,r)}},{key:"dispatchEvent",value:function(t,e){var n=this.handlerSets.get(t),r="default"===this.poolName;n&&n.dispatchEvent(e,r)}},{key:"hasHandlers",value:function(t){if(!t)return this.handlerSets.size>0;var e=this.handlerSets.get(t);return!!e&&e.hasHandlers()}},{key:"removeHandlers",value:function(e,n){var r=f(this.handlerSets);if(!r.has(e))return new t(this.poolName,r);var i=r.get(e).removeHandlers(n);return i.hasHandlers()?r.set(e,i):r.delete(e),new t(this.poolName,r)}}]),t}();s(y,"createByType",(function(t,e,n){var r=new Map;return r.set(e,new h(n)),new y(t,r)}));var v=function(){function t(e){var n=this;r(this,t),s(this,"handlers",new Map),s(this,"pools",new Map),s(this,"target",void 0),s(this,"createEmitter",(function(t){return function(e){n.pools.forEach((function(n){n.dispatchEvent(t,e)}))}})),this.target=e}return a(t,[{key:"addHandlers",value:function(t,e,n){if(this.pools.has(t)){var r=this.pools.get(t);this.pools.set(t,r.addHandlers(e,n))}else this.pools.set(t,y.createByType(t,e,n));this.handlers.has(e)||this.addTargetHandler(e)}},{key:"hasHandlers",value:function(){return this.handlers.size>0}},{key:"removeHandlers",value:function(t,e,n){if(this.pools.has(t)){var r=this.pools.get(t).removeHandlers(e,n);r.hasHandlers()?this.pools.set(t,r):this.pools.delete(t);var i=!1;this.pools.forEach((function(t){return i=i||t.hasHandlers(e)})),i||this.removeTargetHandler(e)}}},{key:"addTargetHandler",value:function(t){var e=this.createEmitter(t);this.handlers.set(t,e),this.target.addEventListener(t,e,!0)}},{key:"removeTargetHandler",value:function(t){this.handlers.has(t)&&(this.target.removeEventListener(t,this.handlers.get(t),!0),this.handlers.delete(t))}}]),t}(),g=new(function(){function t(){var e=this;r(this,t),s(this,"targets",new Map),s(this,"getTarget",(function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=d(t);if(e.targets.has(r))return e.targets.get(r);if(!n)return null;var i=new v(r);return e.targets.set(r,i),i})),s(this,"removeTarget",(function(t){e.targets.delete(d(t))}))}return a(t,[{key:"sub",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Ax.canUseDOM){var r=n.target,i=void 0===r?document:r,o=n.pool,a=void 0===o?"default":o;this.getTarget(i).addHandlers(a,t,p(e))}}},{key:"unsub",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Ax.canUseDOM){var r=n.target,i=void 0===r?document:r,o=n.pool,a=void 0===o?"default":o,s=this.getTarget(i,!1);s&&(s.removeHandlers(a,t,p(e)),s.hasHandlers()||this.removeTarget(i))}}}]),t}()),m=function(t){function e(){return r(this,e),l(this,c(e).apply(this,arguments))}return u(e,o.a.PureComponent),a(e,[{key:"componentDidMount",value:function(){this.subscribe(this.props)}},{key:"componentDidUpdate",value:function(t){this.unsubscribe(t),this.subscribe(this.props)}},{key:"componentWillUnmount",value:function(){this.unsubscribe(this.props)}},{key:"subscribe",value:function(t){var e=t.name,n=t.on,r=t.pool,i=t.target;g.sub(e,n,{pool:r,target:i})}},{key:"unsubscribe",value:function(t){var e=t.name,n=t.on,r=t.pool,i=t.target;g.unsub(e,n,{pool:r,target:i})}},{key:"render",value:function(){return null}}]),e}();s(m,"defaultProps",{pool:"default",target:"document"}),m.propTypes={},e.instance=g,e.default=m}));Xv(Px);Px.instance;var Ox=Jv((function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(e,"__esModule",{value:!0});var f=function(){function t(e){r(this,t),u(this,"handlers",void 0),this.handlers=e.slice(0)}return a(t,[{key:"addHandlers",value:function(e){for(var n=this.handlers.slice(0),r=e.length,i=0;i<r;i+=1)n.push(e[i]);return new t(n)}},{key:"dispatchEvent",value:function(t,e){var n=this.handlers.length-1;if(e){for(var r=n;r>=0;r-=1)this.handlers[r].called||(this.handlers[r].called=!0,this.handlers[r](t));for(var i=n;i>=0;i-=1)this.handlers[i].called=!1}else{(0,this.handlers[n])(t)}}},{key:"hasHandlers",value:function(){return this.handlers.length>0}},{key:"removeHandlers",value:function(e){for(var n=[],r=this.handlers.length,i=0;i<r;i+=1){var o=this.handlers[i];-1===e.indexOf(o)&&n.push(o)}return new t(n)}}]),t}();function p(t){var e=new Map;return t.forEach((function(t,n){e.set(n,t)})),e}function d(t){return Array.isArray(t)?t:[t]}function y(t){return"document"===t?document:"window"===t?window:function(t){return null!==t&&"object"===n(t)&&t.hasOwnProperty("current")}(t)?t.current||document:t||document}var v=function(){function t(e,n){r(this,t),u(this,"handlerSets",void 0),u(this,"poolName",void 0),this.handlerSets=n,this.poolName=e}return a(t,[{key:"addHandlers",value:function(e,n){var r=p(this.handlerSets);if(r.has(e)){var i=r.get(e);r.set(e,i.addHandlers(n))}else r.set(e,new f(n));return new t(this.poolName,r)}},{key:"dispatchEvent",value:function(t,e){var n=this.handlerSets.get(t),r="default"===this.poolName;n&&n.dispatchEvent(e,r)}},{key:"hasHandlers",value:function(t){if(!t)return this.handlerSets.size>0;var e=this.handlerSets.get(t);return!!e&&e.hasHandlers()}},{key:"removeHandlers",value:function(e,n){var r=p(this.handlerSets);if(!r.has(e))return new t(this.poolName,r);var i=r.get(e).removeHandlers(n);return i.hasHandlers()?r.set(e,i):r.delete(e),new t(this.poolName,r)}}]),t}();u(v,"createByType",(function(t,e,n){var r=new Map;return r.set(e,new f(n)),new v(t,r)}));var g=function(){function t(e){var n=this;r(this,t),u(this,"handlers",new Map),u(this,"pools",new Map),u(this,"target",void 0),u(this,"createEmitter",(function(t){return function(e){n.pools.forEach((function(n){n.dispatchEvent(t,e)}))}})),this.target=e}return a(t,[{key:"addHandlers",value:function(t,e,n){if(this.pools.has(t)){var r=this.pools.get(t);this.pools.set(t,r.addHandlers(e,n))}else this.pools.set(t,v.createByType(t,e,n));this.handlers.has(e)||this.addTargetHandler(e)}},{key:"hasHandlers",value:function(){return this.handlers.size>0}},{key:"removeHandlers",value:function(t,e,n){if(this.pools.has(t)){var r=this.pools.get(t).removeHandlers(e,n);r.hasHandlers()?this.pools.set(t,r):this.pools.delete(t);var i=!1;this.pools.forEach((function(t){return i=i||t.hasHandlers(e)})),i||this.removeTargetHandler(e)}}},{key:"addTargetHandler",value:function(t){var e=this.createEmitter(t);this.handlers.set(t,e),this.target.addEventListener(t,e,!0)}},{key:"removeTargetHandler",value:function(t){this.handlers.has(t)&&(this.target.removeEventListener(t,this.handlers.get(t),!0),this.handlers.delete(t))}}]),t}(),m=new(function(){function t(){var e=this;r(this,t),u(this,"targets",new Map),u(this,"getTarget",(function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=y(t);if(e.targets.has(r))return e.targets.get(r);if(!n)return null;var i=new g(r);return e.targets.set(r,i),i})),u(this,"removeTarget",(function(t){e.targets.delete(y(t))}))}return a(t,[{key:"sub",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Ax.canUseDOM){var r=n.target,i=void 0===r?document:r,o=n.pool,a=void 0===o?"default":o,s=this.getTarget(i);s.addHandlers(a,t,d(e))}}},{key:"unsub",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Ax.canUseDOM){var r=n.target,i=void 0===r?document:r,o=n.pool,a=void 0===o?"default":o,s=this.getTarget(i,!1);s&&(s.removeHandlers(a,t,d(e)),s.hasHandlers()||this.removeTarget(i))}}}]),t}()),_=function(t){function e(){return r(this,e),h(this,c(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,t),a(e,[{key:"componentDidMount",value:function(){this.subscribe(this.props)}},{key:"componentDidUpdate",value:function(t){this.unsubscribe(t),this.subscribe(this.props)}},{key:"componentWillUnmount",value:function(){this.unsubscribe(this.props)}},{key:"subscribe",value:function(t){var e=t.name,n=t.on,r=t.pool,i=t.target;m.sub(e,n,{pool:r,target:i})}},{key:"unsubscribe",value:function(t){var e=t.name,n=t.on,r=t.pool,i=t.target;m.unsub(e,n,{pool:r,target:i})}},{key:"render",value:function(){return null}}]),e}(o.a.PureComponent);u(_,"defaultProps",{pool:"default",target:"document"}),_.propTypes={name:s.a.string.isRequired,on:s.a.oneOfType([s.a.func,s.a.arrayOf(s.a.func)]).isRequired,pool:s.a.string,target:s.a.oneOfType([s.a.oneOf(["document","window"]),s.a.instanceOf(Ax.canUseDOM?HTMLElement:Object),s.a.shape({current:s.a.object})])},e.instance=m,e.default=_}));Xv(Ox);Ox.instance;var Rx,Dx=(Rx=Px).default,Mx=Rx.instance;Dx.instance=Mx;var Lx=Bb&&1/Ib(new Bb([,-0]))[1]==1/0?function(t){return new Bb(t)}:uE;var Fx=function(t,e,n){var r=-1,i=gw,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=mw;else if(o>=200){var c=e?null:Lx(t);if(c)return Ib(c);a=!1,i=Tb,u=new wb}else u=e?[]:s;t:for(;++r<o;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,a&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),s.push(l)}else i(u,h,n)||(u!==s&&u.push(h),s.push(l))}return s};var jx=function(t){return t&&t.length?Fx(t):[]};var Ux=function(t){return"number"==typeof t||$g(t)&&"[object Number]"==Kg(t)};var Vx=function(t){return"string"==typeof t||!Lg(t)&&$g(t)&&"[object String]"==Kg(t)};var qx=function(t){return!0===t||!1===t||$g(t)&&"[object Boolean]"==Kg(t)},Bx=Jv((function(t){
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){var e={}.hasOwnProperty;function n(){for(var t=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if("string"===o||"number"===o)t.push(i);else if(Array.isArray(i)&&i.length){var a=n.apply(null,i);a&&t.push(a)}else if("object"===o)for(var s in i)e.call(i,s)&&i[s]&&t.push(s)}}return t.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n}()}));function zx(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("function"!=typeof t&&"string"!=typeof t)throw new Error("createShorthand() Component must be a string or function.");if(gx(n)||qx(n))return null;var a=Vx(n),s=Ux(n),u=rm(n),c=Object(i.isValidElement)(n),l=OT(n),h=a||s||Lg(n);if(!(u||c||l||h))return null;var f=r.defaultProps,p=void 0===f?{}:f,d=c&&n.props||l&&n||h&&e(n),y=r.overrideProps,v=void 0===y?{}:y;v=rm(v)?v(O_({},p,d)):v;var g=O_({},p,d,v);if(p.className||v.className||d.className){var m=Bx(p.className,v.className,d.className);g.className=jx(m.split(" ")).join(" ")}if((p.style||v.style||d.style)&&(g.style=O_({},p.style,d.style,v.style)),gx(g.key)){var _=g.childKey,b=r.autoGenerateKey,w=void 0===b||b;gx(_)?w&&(a||s)&&(g.key=n):(g.key="function"==typeof _?_(g):_,delete g.childKey)}return c?Object(i.cloneElement)(n,g):h||l?o.a.createElement(t,g):u?n(t,g,g.children):void 0}function Wx(t,e){if("function"!=typeof t&&"string"!=typeof t)throw new Error("createShorthandFactory() Component must be a string or function.");return function(n,r){return zx(t,e,n,r)}}zx.handledProps=[];Wx("div",(function(t){return{children:t}})),Wx("iframe",(function(t){return{src:t}})),Wx("img",(function(t){return{src:t}})),Wx("input",(function(t){return{type:t}})),Wx("label",(function(t){return{children:t}})),Wx("p",(function(t){return{children:t}}));var Hx=function(t,e){var n=t.handledProps,r=void 0===n?[]:n;return Object.keys(e).reduce((function(t,n){return"childKey"===n||-1===r.indexOf(n)&&(t[n]=e[n]),t}),{})};function Qx(t,e,n){var r=t.defaultProps,i=void 0===r?{}:r;if(e.as&&e.as!==i.as)return e.as;if(n){var o=n();if(o)return o}return e.href?"a":i.as||"div"}var Gx=function(t,e){return Zm(e,(function(e){return t[e]}))};var Yx=function(t){return null==t?[]:Gx(t,ub(t))},Kx=Math.max;var $x=function(t,e,n,r){t=sb(t)?t:Yx(t),n=n&&!r?q_(n):0;var i=t.length;return n<0&&(n=Kx(i+n,0)),Vx(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&vw(t,e,n)>-1},Xx="object"===("undefined"==typeof document?"undefined":kg(document))&&null!==document,Jx="object"===("undefined"==typeof window?"undefined":kg(window))&&null!==window&&window.self===window,Zx=Math.max,tC=Math.min;var eC=function(t,e,n){return t>=tC(e,n)&&t<Zx(e,n)};var nC=function(t,e,n){return e=V_(e),void 0===n?(n=e,e=0):n=V_(n),t=U_(t),eC(t,e,n)};for(var rC=function(t){return t&&t.length?t[0]:void 0},iC=function(t,e){if(Ow([e,t],gx))return!1;if(e.target&&(P_(e.target,"setAttribute","data-suir-click-target",!0),document.querySelector("[data-suir-click-target=true]")))return P_(e.target,"removeAttribute","data-suir-click-target"),t.contains(e.target);var n=e.clientX,r=e.clientY;if(Ow([n,r],gx))return!1;var i=t.getClientRects();if(!(t.offsetWidth&&t.offsetHeight&&i&&i.length))return!1;var o=rC(i),a=o.top,s=o.bottom,u=o.left,c=o.right;return!Ow([a,s,u,c],gx)&&(nC(r,a,s+.001)&&nC(n,u,c+.001))},oC=([].concat(Vw(ub(Dw)),Vw(ub(Dw).map(Number)),Vw(Yx(Dw))),jx([].concat(["american sign language interpreting","assistive listening systems","audio description","blind","braille","closed captioning","closed captioning outline","deaf","low vision","phone volume","question circle","question circle outline","sign language","tty","universal access","wheelchair"],["angle double down","angle double left","angle double right","angle double up","angle down","angle left","angle right","angle up","arrow alternate circle down","arrow alternate circle down outline","arrow alternate circle left","arrow alternate circle left outline","arrow alternate circle right","arrow alternate circle right outline","arrow alternate circle up","arrow alternate circle up outline","arrow circle down","arrow circle left","arrow circle right","arrow circle up","arrow down","arrow left","arrow right","arrow up","arrows alternate","arrows alternate horizontal","arrows alternate vertical","caret down","caret left","caret right","caret square down","caret square down outline","caret square left","caret square left outline","caret square right","caret square right outline","caret square up","caret square up outline","caret up","cart arrow down","chart line","chevron circle down","chevron circle left","chevron circle right","chevron circle up","chevron down","chevron left","chevron right","chevron up","cloud download","cloud upload","download","exchange","expand arrows alternate","external alternate","external square alternate","hand point down","hand point down outline","hand point left","hand point left outline","hand point right","hand point right outline","hand point up","hand point up outline","hand pointer","hand pointer outline","history","level down alternate","level up alternate","location arrow","long arrow alternate down","long arrow alternate left","long arrow alternate right","long arrow alternate up","mouse pointer","play","random","recycle","redo","redo alternate","reply","reply all","retweet","share","share square","share square outline","sign-in","sign-out","sign-in alternate","sign-out alternate","sort","sort alphabet down","sort alphabet up","sort amount down","sort amount up","sort down","sort numeric down","sort numeric up","sort up","sync","sync alternate","text height","text width","undo","undo alternate","upload","zoom-in","zoom-out"],["audio description","backward","circle","circle outline","closed captioning","closed captioning outline","compress","eject","expand","expand arrows alternate","fast backward","fast forward","file audio","file audio outline","file video","file video outline","film","forward","headphones","microphone","microphone slash","music","pause","pause circle","pause circle outline","phone volume","play","play circle","play circle outline","podcast","random","redo","redo alternate","rss","rss square","step backward","step forward","stop","stop circle","stop circle outline","sync","sync alternate","undo","undo alternate","video","volume down","volume off","volume up"],["address book","address book outline","address card","address card outline","archive","balance scale","birthday cake","book","briefcase","building","building outline","bullhorn","bullseye","calculator","calendar","calendar outline","calendar alternate","calendar alternate outline","certificate","chart area","chart bar","chart bar outline","chart line","chart pie","clipboard","clipboard outline","coffee","columns","compass","compass outline","copy","copy outline","copyright","copyright outline","cut","edit","edit outline","envelope","envelope outline","envelope open","envelope open outline","envelope square","eraser","fax","file","file outline","file alternate","file alternate outline","folder","folder outline","folder open","folder open outline","globe","industry","paperclip","paste","pen square","pencil alternate","percent","phone","phone square","phone volume","registered","registered outline","save","save outline","sitemap","sticky note","sticky note outline","suitcase","table","tag","tags","tasks","thumbtack","trademark"],["chess","chess bishop","chess board","chess king","chess knight","chess pawn","chess queen","chess rook","square full"],["archive","barcode","bath","bug","code","code branch","coffee","file","file outline","file alternate","file alternate outline","file code","file code outline","filter","fire extinguisher","folder","folder outline","folder open","folder open outline","keyboard","keyboard outline","microchip","qrcode","shield alternate","sitemap","terminal","user secret","window close","window close outline","window maximize","window maximize outline","window minimize","window minimize outline","window restore","window restore outline"],["address book","address book outline","address card","address card outline","american sign language interpreting","assistive listening systems","at","bell","bell outline","bell slash","bell slash outline","bullhorn","comment","comment outline","comment alternate","comment alternate outline","comments","comments outline","envelope","envelope outline","envelope open","envelope open outline","envelope square","fax","inbox","language","microphone","microphone slash","mobile","mobile alternate","paper plane","paper plane outline","phone","phone square","phone volume","rss","rss square","tty","wifi"],["desktop","download","hdd","hdd outline","headphones","keyboard","keyboard outline","laptop","microchip","mobile","mobile alternate","plug","power off","print","save","save outline","server","tablet","tablet alternate","tv","upload"],["dollar sign","euro sign","lira sign","money bill alternate","money bill alternate outline","pound sign","ruble sign","rupee sign","shekel sign","won sign","yen sign"],["bell","bell outline","bell slash","bell slash outline","calendar","calendar outline","calendar alternate","calendar alternate outline","calendar check","calendar check outline","calendar minus","calendar minus outline","calendar plus","calendar plus outline","calendar times","calendar times outline","clock","clock outline","hourglass","hourglass outline","hourglass end","hourglass half","hourglass start","stopwatch"],["adjust","clone","clone outline","copy","copy outline","crop","crosshairs","cut","edit","edit outline","eraser","eye","eye dropper","eye slash","eye slash outline","object group","object group outline","object ungroup","object ungroup outline","paint brush","paste","pencil alternate","save","save outline","tint"],["align center","align justify","align left","align right","bold","clipboard","clipboard outline","clone","clone outline","columns","copy","copy outline","cut","edit","edit outline","eraser","file","file outline","file alternate","file alternate outline","font","heading","i cursor","indent","italic","linkify","list","list alternate","list alternate outline","list ol","list ul","outdent","paper plane","paper plane outline","paperclip","paragraph","paste","pencil alternate","print","quote left","quote right","redo","redo alternate","reply","reply all","share","strikethrough","subscript","superscript","sync","sync alternate","table","tasks","text height","text width","th","th large","th list","trash","trash alternate","trash alternate outline","underline","undo","undo alternate","unlink"],["archive","clone","clone outline","copy","copy outline","cut","file","file outline","file alternate","file alternate outline","file archive","file archive outline","file audio","file audio outline","file code","file code outline","file excel","file excel outline","file image","file image outline","file pdf","file pdf outline","file powerpoint","file powerpoint outline","file video","file video outline","file word","file word outline","folder","folder outline","folder open","folder open outline","paste","save","save outline","sticky note","sticky note outline"],["genderless","mars","mars double","mars stroke","mars stroke horizontal","mars stroke vertical","mercury","neuter","transgender","transgender alternate","venus","venus double","venus mars"],["hand lizard","hand lizard outline","hand paper","hand paper outline","hand peace","hand peace outline","hand point down","hand point down outline","hand point left","hand point left outline","hand point right","hand point right outline","hand point up","hand point up outline","hand pointer","hand pointer outline","hand rock","hand rock outline","hand scissors","hand scissors outline","hand spock","hand spock outline","handshake","handshake outline","thumbs down","thumbs down outline","thumbs up","thumbs up outline"],["ambulance","h square","heart","heart outline","heartbeat","hospital","hospital outline","medkit","plus square","plus square outline","stethoscope","user md","wheelchair"],["adjust","bolt","camera","camera retro","clone","clone outline","compress","expand","eye","eye dropper","eye slash","eye slash outline","file image","file image outline","film","id badge","id badge outline","id card","id card outline","image","image outline","images","images outline","sliders horizontal","tint"],["ban","barcode","bars","beer","bell","bell outline","bell slash","bell slash outline","bug","bullhorn","bullseye","calculator","calendar","calendar outline","calendar alternate","calendar alternate outline","calendar check","calendar check outline","calendar minus","calendar minus outline","calendar plus","calendar plus outline","calendar times","calendar times outline","certificate","check","check circle","check circle outline","check square","check square outline","circle","circle outline","clipboard","clipboard outline","clone","clone outline","cloud","cloud download","cloud upload","coffee","cog","cogs","copy","copy outline","cut","database","dot circle","dot circle outline","download","edit","edit outline","ellipsis horizontal","ellipsis vertical","envelope","envelope outline","envelope open","envelope open outline","eraser","exclamation","exclamation circle","exclamation triangle","external alternate","external square alternate","eye","eye slash","eye slash outline","file","file outline","file alternate","file alternate outline","filter","flag","flag outline","flag checkered","folder","folder outline","folder open","folder open outline","frown","frown outline","hashtag","heart","heart outline","history","home","i cursor","info","info circle","language","magic","meh","meh outline","microphone","microphone slash","minus","minus circle","minus square","minus square outline","paste","pencil alternate","plus","plus circle","plus square","plus square outline","qrcode","question","question circle","question circle outline","quote left","quote right","redo","redo alternate","reply","reply all","rss","rss square","save","save outline","search","search minus","search plus","share","share alternate","share alternate square","share square","share square outline","shield alternate","sign-in","sign-out","signal","sitemap","sliders horizontal","smile","smile outline","sort","sort alphabet down","sort alphabet up","sort amount down","sort amount up","sort down","sort numeric down","sort numeric up","sort up","star","star outline","star half","star half outline","sync","sync alternate","thumbs down","thumbs down outline","thumbs up","thumbs up outline","times","times circle","times circle outline","toggle off","toggle on","trash","trash alternate","trash alternate outline","trophy","undo","undo alternate","upload","user","user outline","user circle","user circle outline","wifi"],["box","boxes","clipboard check","clipboard list","dolly","dolly flatbed","pallet","shipping fast","truck","warehouse"],["ambulance","anchor","balance scale","bath","bed","beer","bell","bell outline","bell slash","bell slash outline","bicycle","binoculars","birthday cake","blind","bomb","book","bookmark","bookmark outline","briefcase","building","building outline","car","coffee","crosshairs","dollar sign","eye","eye slash","eye slash outline","fighter jet","fire","fire extinguisher","flag","flag outline","flag checkered","flask","gamepad","gavel","gift","glass martini","globe","graduation cap","h square","heart","heart outline","heartbeat","home","hospital","hospital outline","image","image outline","images","images outline","industry","info","info circle","key","leaf","lemon","lemon outline","life ring","life ring outline","lightbulb","lightbulb outline","location arrow","low vision","magnet","male","map","map outline","map marker","map marker alternate","map pin","map signs","medkit","money bill alternate","money bill alternate outline","motorcycle","music","newspaper","newspaper outline","paw","phone","phone square","phone volume","plane","plug","plus","plus square","plus square outline","print","recycle","road","rocket","search","search minus","search plus","ship","shopping bag","shopping basket","shopping cart","shower","street view","subway","suitcase","tag","tags","taxi","thumbtack","ticket alternate","tint","train","tree","trophy","truck","tty","umbrella","university","utensil spoon","utensils","wheelchair","wifi","wrench"],["ambulance","band aid","dna","first aid","heart","heart outline","heartbeat","hospital","hospital outline","hospital symbol","pills","plus","stethoscope","syringe","thermometer","user md","weight"],["ambulance","anchor","archive","balance scale","bath","bed","beer","bell","bell outline","bicycle","binoculars","birthday cake","bomb","book","bookmark","bookmark outline","briefcase","bug","building","building outline","bullhorn","bullseye","bus","calculator","calendar","calendar outline","calendar alternate","calendar alternate outline","camera","camera retro","car","clipboard","clipboard outline","cloud","coffee","cog","cogs","compass","compass outline","copy","copy outline","cube","cubes","cut","envelope","envelope outline","envelope open","envelope open outline","eraser","eye","eye dropper","fax","fighter jet","file","file outline","file alternate","file alternate outline","film","fire","fire extinguisher","flag","flag outline","flag checkered","flask","futbol","futbol outline","gamepad","gavel","gem","gem outline","gift","glass martini","globe","graduation cap","hdd","hdd outline","headphones","heart","heart outline","home","hospital","hospital outline","hourglass","hourglass outline","image","image outline","images","images outline","industry","key","keyboard","keyboard outline","laptop","leaf","lemon","lemon outline","life ring","life ring outline","lightbulb","lightbulb outline","lock","lock open","magic","magnet","map","map outline","map marker","map marker alternate","map pin","map signs","medkit","microchip","microphone","mobile","mobile alternate","money bill alternate","money bill alternate outline","moon","moon outline","motorcycle","newspaper","newspaper outline","paint brush","paper plane","paper plane outline","paperclip","paste","paw","pencil alternate","phone","plane","plug","print","puzzle piece","road","rocket","save","save outline","search","shield alternate","shopping bag","shopping basket","shopping cart","shower","snowflake","snowflake outline","space shuttle","star","star outline","sticky note","sticky note outline","stopwatch","subway","suitcase","sun","sun outline","tablet","tablet alternate","tachometer alternate","tag","tags","taxi","thumbtack","ticket alternate","train","trash","trash alternate","trash alternate outline","tree","trophy","truck","tv","umbrella","university","unlock","unlock alternate","utensil spoon","utensils","wheelchair","wrench"],["bell","bell outline","bookmark","bookmark outline","bullhorn","camera","camera retro","cart arrow down","cart plus","certificate","credit card","credit card outline","gem","gem outline","gift","handshake","handshake outline","heart","heart outline","key","shopping bag","shopping basket","shopping cart","star","star outline","tag","tags","thumbs down","thumbs down outline","thumbs up","thumbs up outline","trophy"],["bookmark","bookmark outline","calendar","calendar outline","certificate","circle","circle outline","cloud","comment","comment outline","file","file outline","folder","folder outline","heart","heart outline","map marker","play","square","square outline","star","star outline"],["asterisk","certificate","circle notch","cog","compass","compass outline","crosshairs","life ring","life ring outline","snowflake","snowflake outline","spinner","sun","sun outline","sync"],["baseball ball","basketball ball","bowling ball","football ball","futbol","futbol outline","golf ball","hockey puck","quidditch","table tennis","volleyball ball"],["ban","battery empty","battery full","battery half","battery quarter","battery three quarters","bell","bell outline","bell slash","bell slash outline","calendar","calendar outline","calendar alternate","calendar alternate outline","calendar check","calendar check outline","calendar minus","calendar minus outline","calendar plus","calendar plus outline","calendar times","calendar times outline","cart arrow down","cart plus","exclamation","exclamation circle","exclamation triangle","eye","eye slash","eye slash outline","file","file outline","file alternate","file alternate outline","folder","folder outline","folder open","folder open outline","info","info circle","lock","lock open","minus","minus circle","minus square","minus square outline","plus","plus circle","plus square","plus square outline","question","question circle","question circle outline","shield alternate","shopping cart","sign in alternate","sign out alternate","thermometer empty","thermometer full","thermometer half","thermometer quarter","thermometer three quarters","thumbs down","thumbs down outline","thumbs up","thumbs up outline","toggle off","toggle on","unlock","unlock alternate"],["address book","address book outline","address card","address card outline","bed","blind","child","female","frown","frown outline","id badge","id badge outline","id card","id card outline","male","meh","meh outline","power off","smile","smile outline","street view","user","user outline","user circle","user circle outline","user md","user plus","user secret","user times","users","wheelchair"],["ambulance","bicycle","bus","car","fighter jet","motorcycle","paper plane","paper plane outline","plane","rocket","ship","shopping cart","space shuttle","subway","taxi","train","truck","wheelchair"],["archive","book","bookmark","bookmark outline","edit","edit outline","envelope","envelope outline","envelope open","envelope open outline","eraser","file","file outline","file alternate","file alternate outline","folder","folder outline","folder open","folder open outline","keyboard","keyboard outline","newspaper","newspaper outline","paper plane","paper plane outline","paperclip","paragraph","pen square","pencil alternate","quote left","quote right","sticky note","sticky note outline","thumbtack"],["500px","accessible","accusoft","adn","adversal","affiliatetheme","algolia","amazon","amazon pay","amilia","android","angellist","angrycreative","angular","app store","app store ios","apper","apple","apple pay","asymmetrik","audible","autoprefixer","avianex","aviato","aws","bandcamp","behance","behance square","bimobject","bitbucket","bitcoin","bity","black tie","blackberry","blogger","blogger b","bluetooth","bluetooth b","btc","buromobelexperte","buysellads","cc amazon pay","cc amex","cc apple pay","cc diners club","cc discover","cc jcb","cc mastercard","cc paypal","cc stripe","cc visa","centercode","chrome","cloudscale","cloudsmith","cloudversify","codepen","codiepie","connectdevelop","contao","cpanel","creative commons","css3","css3 alternate","cuttlefish","d and d","dashcube","delicious","deploydog","deskpro","deviantart","digg","digital ocean","discord","discourse","dochub","docker","draft2digital","dribbble","dribbble square","dropbox","drupal","dyalog","earlybirds","edge","elementor","ember","empire","envira","erlang","ethereum","etsy","expeditedssl","facebook","facebook f","facebook messenger","facebook square","firefox","first order","firstdraft","flickr","flipboard","fly","font awesome","font awesome alternate","font awesome flag","fonticons","fonticons fi","fort awesome","fort awesome alternate","forumbee","foursquare","free code camp","freebsd","get pocket","gg","gg circle","git","git square","github","github alternate","github square","gitkraken","gitlab","gitter","glide","glide g","gofore","goodreads","goodreads g","google","google drive","google play","google plus","google plus g","google plus square","google wallet","gratipay","grav","gripfire","grunt","gulp","hacker news","hacker news square","hips","hire a helper","hooli","hotjar","houzz","html5","hubspot","imdb","instagram","internet explorer","ioxhost","itunes","itunes note","jenkins","joget","joomla","js","js square","jsfiddle","keycdn","kickstarter","kickstarter k","korvue","laravel","lastfm","lastfm square","leanpub","less","linechat","linkedin","linkedin alternate","linode","linux","lyft","magento","maxcdn","medapps","medium","medium m","medrt","meetup","microsoft","mix","mixcloud","mizuni","modx","monero","napster","nintendo switch","node","node js","npm","ns8","nutritionix","odnoklassniki","odnoklassniki square","opencart","openid","opera","optin monster","osi","page4","pagelines","palfed","patreon","paypal","periscope","phabricator","phoenix framework","php","pied piper","pied piper alternate","pied piper pp","pinterest","pinterest p","pinterest square","playstation","product hunt","pushed","python","qq","quinscape","quora","ravelry","react","rebel","redriver","reddit","reddit alien","reddit square","rendact","renren","replyd","resolving","rocketchat","rockrms","safari","sass","schlix","scribd","searchengin","sellcast","sellsy","servicestack","shirtsinbulk","simplybuilt","sistrix","skyatlas","skype","slack","slack hash","slideshare","snapchat","snapchat ghost","snapchat square","soundcloud","speakap","spotify","stack exchange","stack overflow","staylinked","steam","steam square","steam symbol","sticker mule","strava","stripe","stripe s","studiovinari","stumbleupon","stumbleupon circle","superpowers","supple","telegram","telegram plane","tencent weibo","themeisle","trello","tripadvisor","tumblr","tumblr square","twitch","twitter","twitter square","typo3","uber","uikit","uniregistry","untappd","usb","ussunnah","vaadin","viacoin","viadeo","viadeo square","viber","vimeo","vimeo square","vimeo v","vine","vk","vnv","vuejs","wechat","weibo","weixin","whatsapp","whatsapp square","whmcs","wikipedia w","windows","wordpress","wordpress simple","wpbeginner","wpexplorer","wpforms","xbox","xing","xing square","y combinator","yahoo","yandex","yandex international","yelp","yoast","youtube","youtube square"]))),aC=jx([].concat(Vw(oC),["chess rock","ordered list","unordered list","user doctor","shield","puzzle","add circle","add square","add to calendar","add to cart","add user","add","alarm mute","alarm","ald","als","announcement","area chart","area graph","arrow down cart","asexual","asl interpreting","asl","assistive listening devices","attach","attention","balance","bar","bathtub","battery four","battery high","battery low","battery one","battery three","battery two","battery zero","birthday","block layout","bluetooth alternative","broken chain","browser","call square","call","cancel","cart","cc","chain","chat","checked calendar","checkmark","circle notched","close","cny","cocktail","commenting","computer","configure","content","deafness","delete calendar","delete","detective","discussions","doctor","dollar","dont","drivers license","dropdown","emergency","envira gallery","erase","eur","euro","eyedropper","factory","favorite","feed","female homosexual","file text","file text outline","find","first aid","fork","game","gay","gbp","google plus circle","google plus official","grab","graduation","grid layout","group","h","hand victory","handicap","hard of hearing","header","help circle","help","heterosexual","hide","hotel","hourglass four","hourglass full","hourglass one","hourglass three","hourglass two","idea","ils","in cart","inr","intergender","intersex","jpy","krw","lab","law","legal","lesbian","lightning","like","line graph","linkedin square","linkify","lira","list layout","magnify","mail forward","mail outline","mail square","mail","male homosexual","man","marker","mars alternate","mars horizontal","mars vertical","microsoft edge","military","ms edge","mute","new pied piper","non binary transgender","numbered list","options","other gender horizontal","other gender vertical","other gender","payment","paypal card","pencil square","photo","picture","pie chart","pie graph","pied piper hat","pin","plus cart","point","pointing down","pointing left","pointing right","pointing up","pound","power cord","power","privacy","r circle","rain","record","refresh","remove circle","remove from calendar","remove user","remove","repeat","rmb","rouble","rub","ruble","rupee","s15","selected radio","send","setting","settings","shekel","sheqel","shipping","shop","shuffle","shutdown","sidebar","signing","signup","sliders","soccer","sort alphabet ascending","sort alphabet descending","sort ascending","sort content ascending","sort content descending","sort descending","sort numeric ascending","sort numeric descending","sound","spy","stripe card","student","talk","target","teletype","television","text cursor","text telephone","theme","thermometer","thumb tack","time","tm","toggle down","toggle left","toggle right","toggle up","translate","travel","treatment","triangle down","triangle left","triangle right","triangle up","try","unhide","unlinkify","unmute","usd","user cancel","user close","user delete","user x","vcard","video camera","video play","volume control phone","wait","warning circle","warning sign","warning","wi-fi","winner","wizard","woman","won","wordpress beginner","wordpress forms","world","write square","x","yen","zip","zoom in","zoom out","zoom","bitbucket square","checkmark box","circle thin","cloud download","cloud upload","compose","conversation","credit card alternative","currency","dashboard","diamond","disk","exchange","external share","external square","external","facebook official","food","hourglass zero","level down","level up","log out","meanpath","money","move","pencil","protect","radio","remove bookmark","resize horizontal","resize vertical","sign in","sign out","spoon","star half empty","star half full","ticket","times rectangle","write","youtube play"])),sC=(jx([].concat(Vw(aC),["left dropdown"])),A_((function(t,e){return ww(t)?HT(t,e):[]})),function(t){return null!==t&&!Array.isArray(t)&&"object"==typeof t}),uC={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],91:"OS",93:"ContextMenu",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},cC=0;cC<24;cC+=1)uC[112+cC]="F"+(cC+1);for(var lC=0;lC<26;lC+=1){var hC=lC+65;uC[hC]=[String.fromCharCode(hC+32),String.fromCharCode(hC)]}var fC={codes:uC,getCode:function(t){return sC(t)?t.keyCode||t.which||this[t.key]:this[t]},getKey:function(t){var e=sC(t);if(e&&t.key)return t.key;var n=uC[e?t.keyCode||t.which:t];return Array.isArray(n)&&(n=e?n[t.shiftKey?1:0]:n[0]),n},Cancel:3,Help:6,Backspace:8,Tab:9,Clear:12,Enter:13,Shift:16,Control:17,Alt:18,Pause:19,CapsLock:20,Escape:27,Convert:28,NonConvert:29,Accept:30,ModeChange:31," ":32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Select:41,Print:42,Execute:43,PrintScreen:44,Insert:45,Delete:46,0:48,")":48,1:49,"!":49,2:50,"@":50,3:51,"#":51,4:52,$:52,5:53,"%":53,6:54,"^":54,7:55,"&":55,8:56,"*":56,9:57,"(":57,a:65,A:65,b:66,B:66,c:67,C:67,d:68,D:68,e:69,E:69,f:70,F:70,g:71,G:71,h:72,H:72,i:73,I:73,j:74,J:74,k:75,K:75,l:76,L:76,m:77,M:77,n:78,N:78,o:79,O:79,p:80,P:80,q:81,Q:81,r:82,R:82,s:83,S:83,t:84,T:84,u:85,U:85,v:86,V:86,w:87,W:87,x:88,X:88,y:89,Y:89,z:90,Z:90,OS:91,ContextMenu:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NumLock:144,ScrollLock:145,VolumeMute:181,VolumeDown:182,VolumeUp:183,";":186,":":186,"=":187,"+":187,",":188,"<":188,"-":189,_:189,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222,Meta:224,AltGraph:225,Attn:246,CrSel:247,ExSel:248,EraseEof:249,Play:250,ZoomOut:251};fC.Spacebar=fC[" "],fC.Digit0=fC[0],fC.Digit1=fC[1],fC.Digit2=fC[2],fC.Digit3=fC[3],fC.Digit4=fC[4],fC.Digit5=fC[5],fC.Digit6=fC[6],fC.Digit7=fC[7],fC.Digit8=fC[8],fC.Digit9=fC[9],fC.Tilde=fC["~"],fC.GraveAccent=fC["`"],fC.ExclamationPoint=fC["!"],fC.AtSign=fC["@"],fC.PoundSign=fC["#"],fC.PercentSign=fC["%"],fC.Caret=fC["^"],fC.Ampersand=fC["&"],fC.PlusSign=fC["+"],fC.MinusSign=fC["-"],fC.EqualsSign=fC["="],fC.DivisionSign=fC["/"],fC.MultiplicationSign=fC["*"],fC.Comma=fC[","],fC.Decimal=fC["."],fC.Colon=fC[":"],fC.Semicolon=fC[";"],fC.Pipe=fC["|"],fC.BackSlash=fC["\\"],fC.QuestionMark=fC["?"],fC.SingleQuote=fC["'"],fC.DoubleQuote=fC['"'],fC.LeftCurlyBrace=fC["{"],fC.RightCurlyBrace=fC["}"],fC.LeftParenthesis=fC["("],fC.RightParenthesis=fC[")"],fC.LeftAngleBracket=fC["<"],fC.RightAngleBracket=fC[">"],fC.LeftSquareBracket=fC["["],fC.RightSquareBracket=fC["]"];var pC=fC,dC=function(t){function e(){var t,n;Sg(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=Pg(this,(t=Og(e)).call.apply(t,[this].concat(i))),Mg(Ag(n),"handleRef",(function(t){Gv(n.props.innerRef,t)})),n}return Dg(e,t),Ng(e,[{key:"componentDidMount",value:function(){P_(this.props,"onMount",null,this.props)}},{key:"componentWillUnmount",value:function(){P_(this.props,"onUnmount",null,this.props)}},{key:"render",value:function(){if(!function t(){return gx(t.override)?Xx&&Jx:t.override}())return null;var t=this.props,e=t.children,n=t.mountNode,r=void 0===n?document.body:n;return Object(u.createPortal)(o.a.createElement(xg,{innerRef:this.handleRef},e),r)}}]),e}(i.Component);Mg(dC,"handledProps",["children","innerRef","mountNode","onMount","onUnmount"]),dC.propTypes={};var yC=function(t){function e(){var t,n;Sg(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=Pg(this,(t=Og(e)).call.apply(t,[this].concat(o))),Mg(Ag(n),"contentRef",Object(i.createRef)()),Mg(Ag(n),"triggerRef",Object(i.createRef)()),Mg(Ag(n),"latestDocumentMouseDownEvent",null),Mg(Ag(n),"handleDocumentMouseDown",(function(t){n.latestDocumentMouseDownEvent=t})),Mg(Ag(n),"handleDocumentClick",(function(t){var e=n.props.closeOnDocumentClick,r=n.latestDocumentMouseDownEvent;n.latestDocumentMouseDownEvent=null,!n.contentRef.current||iC(n.triggerRef.current,t)||r&&iC(n.contentRef.current,r)||iC(n.contentRef.current,t)||e&&n.close(t)})),Mg(Ag(n),"handleEscape",(function(t){n.props.closeOnEscape&&pC.getCode(t)===pC.Escape&&n.close(t)})),Mg(Ag(n),"handlePortalMouseLeave",(function(t){var e=n.props,r=e.closeOnPortalMouseLeave,i=e.mouseLeaveDelay;r&&t.target===n.contentRef.current&&(n.mouseLeaveTimer=n.closeWithTimeout(t,i))})),Mg(Ag(n),"handlePortalMouseEnter",(function(){n.props.closeOnPortalMouseLeave&&clearTimeout(n.mouseLeaveTimer)})),Mg(Ag(n),"handleTriggerBlur",(function(t){for(var e=n.props,r=e.trigger,i=e.closeOnTriggerBlur,o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];P_.apply(void 0,[r,"props.onBlur",t].concat(a));var u=t.relatedTarget||document.activeElement,c=P_(n.contentRef.current,"contains",u);i&&!c&&n.close(t)})),Mg(Ag(n),"handleTriggerClick",(function(t){for(var e=n.props,r=e.trigger,i=e.closeOnTriggerClick,o=e.openOnTriggerClick,a=n.state.open,s=arguments.length,u=new Array(s>1?s-1:0),c=1;c<s;c++)u[c-1]=arguments[c];P_.apply(void 0,[r,"props.onClick",t].concat(u)),a&&i?n.close(t):!a&&o&&n.open(t)})),Mg(Ag(n),"handleTriggerFocus",(function(t){for(var e=n.props,r=e.trigger,i=e.openOnTriggerFocus,o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];P_.apply(void 0,[r,"props.onFocus",t].concat(a)),i&&n.open(t)})),Mg(Ag(n),"handleTriggerMouseLeave",(function(t){clearTimeout(n.mouseEnterTimer);for(var e=n.props,r=e.trigger,i=e.closeOnTriggerMouseLeave,o=e.mouseLeaveDelay,a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];P_.apply(void 0,[r,"props.onMouseLeave",t].concat(s)),i&&(n.mouseLeaveTimer=n.closeWithTimeout(t,o))})),Mg(Ag(n),"handleTriggerMouseEnter",(function(t){clearTimeout(n.mouseLeaveTimer);for(var e=n.props,r=e.trigger,i=e.mouseEnterDelay,o=e.openOnTriggerMouseEnter,a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];P_.apply(void 0,[r,"props.onMouseEnter",t].concat(s)),o&&(n.mouseEnterTimer=n.openWithTimeout(t,i))})),Mg(Ag(n),"open",(function(t){var e=n.props.onOpen;e&&e(t,n.props),n.trySetState({open:!0})})),Mg(Ag(n),"openWithTimeout",(function(t,e){var r=O_({},t);return setTimeout((function(){return n.open(r)}),e||0)})),Mg(Ag(n),"close",(function(t){var e=n.props.onClose;e&&e(t,n.props),n.trySetState({open:!1})})),Mg(Ag(n),"closeWithTimeout",(function(t,e){var r=O_({},t);return setTimeout((function(){return n.close(r)}),e||0)})),Mg(Ag(n),"handleMount",(function(){P_(n.props,"onMount",null,n.props)})),Mg(Ag(n),"handleUnmount",(function(){P_(n.props,"onUnmount",null,n.props)})),Mg(Ag(n),"handleTriggerRef",(function(t){n.triggerRef.current=t,Gv(n.props.triggerRef,t)})),n}return Dg(e,t),Ng(e,[{key:"componentWillUnmount",value:function(){clearTimeout(this.mouseEnterTimer),clearTimeout(this.mouseLeaveTimer)}},{key:"render",value:function(){var t=this.props,e=t.children,n=t.eventPool,r=t.mountNode,a=t.trigger,s=this.state.open;return o.a.createElement(i.Fragment,null,s&&o.a.createElement(i.Fragment,null,o.a.createElement(dC,{innerRef:this.contentRef,mountNode:r,onMount:this.handleMount,onUnmount:this.handleUnmount},e),o.a.createElement(Dx,{name:"mouseleave",on:this.handlePortalMouseLeave,pool:n,target:this.contentRef}),o.a.createElement(Dx,{name:"mouseenter",on:this.handlePortalMouseEnter,pool:n,target:this.contentRef}),o.a.createElement(Dx,{name:"mousedown",on:this.handleDocumentMouseDown,pool:n}),o.a.createElement(Dx,{name:"click",on:this.handleDocumentClick,pool:n}),o.a.createElement(Dx,{name:"keydown",on:this.handleEscape,pool:n})),a&&o.a.createElement(xg,{innerRef:this.handleTriggerRef},Object(i.cloneElement)(a,{onBlur:this.handleTriggerBlur,onClick:this.handleTriggerClick,onFocus:this.handleTriggerFocus,onMouseLeave:this.handleTriggerMouseLeave,onMouseEnter:this.handleTriggerMouseEnter})))}}]),e}(Sw);Mg(yC,"defaultProps",{closeOnDocumentClick:!0,closeOnEscape:!0,eventPool:"default",openOnTriggerClick:!0}),Mg(yC,"autoControlledProps",["open"]),Mg(yC,"Inner",dC),Mg(yC,"handledProps",["children","closeOnDocumentClick","closeOnEscape","closeOnPortalMouseLeave","closeOnTriggerBlur","closeOnTriggerClick","closeOnTriggerMouseLeave","defaultOpen","eventPool","mountNode","mouseEnterDelay","mouseLeaveDelay","onClose","onMount","onOpen","onUnmount","open","openOnTriggerClick","openOnTriggerFocus","openOnTriggerMouseEnter","trigger","triggerRef"]),yC.propTypes={};var vC=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n};var gC=function(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n};var mC=function(t,e,n){var r=Lg(t)?vC:gC,i=arguments.length<3;return r(t,fw(e),n,i,lb)};var _C=function(t,e,n){(void 0!==n&&!km(t[e],n)||void 0===n&&!(e in t))&&kw(t,e,n)};var bC=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var wC=function(t){return HE(t,$E(t))};var EC=function(t,e,n,r,i,o,a){var s=bC(t,n),u=bC(e,n),c=a.get(u);if(c)_C(t,n,c);else{var l=o?o(s,u,n+"",t,e,a):void 0,h=void 0===l;if(h){var f=Lg(u),p=!f&&Q_(u),d=!f&&!p&&J_(u);l=u,f||p||d?Lg(s)?l=s:ww(s)?l=yE(s):p?(h=!1,l=JE(u,!0)):d?(h=!1,l=pT(u,!0)):l=[]:OT(u)||c_(u)?(l=s,c_(s)?l=wC(s):em(s)&&!rm(s)||(l=yT(u))):h=!1}h&&(a.set(u,l),i(l,u,r,o,a),a.delete(u)),_C(t,n,l)}};var TC=function t(e,n,r,i,o){e!==n&&z_(n,(function(a,s){if(o||(o=new gb),em(a))EC(e,n,s,r,t,i,o);else{var u=i?i(bC(e,s),a,s+"",e,n,o):void 0;void 0===u&&(u=a),_C(e,s,u)}}),$E)};var xC=function(t){return A_((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&Pw(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e}))}((function(t,e,n){TC(t,e,n)}));var CC=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i};var SC,IC=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e},NC=Object.prototype.toString,kC=function(t){var e=NC.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===NC.call(t.callee)),n};if(!Object.keys){var AC=Object.prototype.hasOwnProperty,PC=Object.prototype.toString,OC=kC,RC=Object.prototype.propertyIsEnumerable,DC=!RC.call({toString:null},"toString"),MC=RC.call((function(){}),"prototype"),LC=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],FC=function(t){var e=t.constructor;return e&&e.prototype===t},jC={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},UC=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!jC["$"+t]&&AC.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{FC(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();SC=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===PC.call(t),r=OC(t),i=e&&"[object String]"===PC.call(t),o=[];if(!e&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var a=MC&&n;if(i&&t.length>0&&!AC.call(t,0))for(var s=0;s<t.length;++s)o.push(String(s));if(r&&t.length>0)for(var u=0;u<t.length;++u)o.push(String(u));else for(var c in t)a&&"prototype"===c||!AC.call(t,c)||o.push(String(c));if(DC)for(var l=function(t){if("undefined"==typeof window||!UC)return FC(t);try{return FC(t)}catch(t){return!1}}(t),h=0;h<LC.length;++h)l&&"constructor"===LC[h]||!AC.call(t,LC[h])||o.push(LC[h]);return o}}var VC=SC,qC=Array.prototype.slice,BC=Object.keys,zC=BC?function(t){return BC(t)}:VC,WC=Object.keys;zC.shim=function(){Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return kC(t)?WC(qC.call(t)):WC(t)}):Object.keys=zC;return Object.keys||zC};var HC=zC,QC="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,GC=Object.prototype.toString,YC=function(t){return!(QC&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===GC.call(t)},KC=function(t){return!!YC(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==GC.call(t)&&"[object Function]"===GC.call(t.callee)},$C=function(){return YC(arguments)}();YC.isLegacyArguments=KC;var XC=$C?YC:KC,JC="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),ZC=Object.prototype.toString,tS=Array.prototype.concat,eS=Object.defineProperty,nS=eS&&function(){var t={};try{for(var e in eS(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),rS=function(t,e,n,r){(!(e in t)||function(t){return"function"==typeof t&&"[object Function]"===ZC.call(t)}(r)&&r())&&(nS?eS(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},iS=function(t,e){var n=arguments.length>2?arguments[2]:{},r=HC(e);JC&&(r=tS.call(r,Object.getOwnPropertySymbols(e)));for(var i=0;i<r.length;i+=1)rS(t,r[i],e[r[i]],n[r[i]])};iS.supportsDescriptors=!!nS;var oS=iS,aS="Function.prototype.bind called on incompatible ",sS=Array.prototype.slice,uS=Object.prototype.toString,cS=Function.prototype.bind||function(t){var e=this;if("function"!=typeof e||"[object Function]"!==uS.call(e))throw new TypeError(aS+e);for(var n,r=sS.call(arguments,1),i=function(){if(this instanceof n){var i=e.apply(this,r.concat(sS.call(arguments)));return Object(i)===i?i:this}return e.apply(t,r.concat(sS.call(arguments)))},o=Math.max(0,e.length-r.length),a=[],s=0;s<o;s++)a.push("$"+s);if(n=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(i),e.prototype){var u=function(){};u.prototype=e.prototype,n.prototype=new u,u.prototype=null}return n},lS=$v.Symbol,hS=function(){return"function"==typeof lS&&("function"==typeof Symbol&&("symbol"==typeof lS("foo")&&("symbol"==typeof Symbol("bar")&&function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}())))},fS=TypeError,pS=Object.getOwnPropertyDescriptor;if(pS)try{pS({},"")}catch(ng){pS=null}var dS=function(){throw new fS},yS=pS?function(){try{return dS}catch(t){try{return pS(arguments,"callee").get}catch(t){return dS}}}():dS,vS=hS(),gS=Object.getPrototypeOf||function(t){return t.__proto__},mS="undefined"==typeof Uint8Array?void 0:gS(Uint8Array),_S={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":vS?gS([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":vS?gS(gS([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&vS?gS((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&vS?gS((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":vS?gS(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":vS?Symbol:void 0,"%SymbolPrototype%":vS?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":yS,"%TypedArray%":mS,"%TypedArrayPrototype%":mS?mS.prototype:void 0,"%TypeError%":fS,"%TypeErrorPrototype%":fS.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},bS=cS.call(Function.call,String.prototype.replace),wS=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ES=/\\(\\)?/g,TS=function(t){var e=[];return bS(t,wS,(function(t,n,r,i){e[e.length]=r?bS(i,ES,"$1"):n||t})),e},xS=function(t,e){if(!(t in _S))throw new SyntaxError("intrinsic "+t+" does not exist!");if(void 0===_S[t]&&!e)throw new fS("intrinsic "+t+" exists, but is not available. Please file an issue!");return _S[t]},CS=function(t,e){if("string"!=typeof t||0===t.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');for(var n=TS(t),r=xS("%"+(n.length>0?n[0]:"")+"%",e),i=1;i<n.length;i+=1)if(null!=r)if(pS&&i+1>=n.length){var o=pS(r,n[i]);if(!e&&!(n[i]in r))throw new fS("base intrinsic for "+t+" exists, but the property is not available.");r=o?o.get||o.value:r[n[i]]}else r=r[n[i]];return r},SS=CS("%Function.prototype.apply%"),IS=CS("%Function.prototype.call%"),NS=CS("%Reflect.apply%",!0)||cS.call(IS,SS),kS=function(){return NS(cS,IS,arguments)};kS.apply=function(){return NS(cS,SS,arguments)};var AS=function(t){return t!=t},PS=function(t,e){return 0===t&&0===e?1/t==1/e:t===e||!(!AS(t)||!AS(e))},OS=function(){return"function"==typeof Object.is?Object.is:PS},RS=kS(OS(),Object);oS(RS,{getPolyfill:OS,implementation:PS,shim:function(){var t=OS();return oS(Object,{is:t},{is:function(){return Object.is!==t}}),t}});var DS,MS,LS,FS=RS,jS=hS()&&"symbol"==typeof Symbol.toStringTag;if(jS){DS=Function.call.bind(RegExp.prototype.exec),MS={};var US=function(){throw MS};LS={toString:US,valueOf:US},"symbol"==typeof Symbol.toPrimitive&&(LS[Symbol.toPrimitive]=US)}var VS=Object.prototype.toString,qS=jS?function(t){if(!t||"object"!=typeof t)return!1;try{DS(t,LS)}catch(t){return t===MS}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===VS.call(t)},BS=Object,zS=TypeError,WS=function(){if(null!=this&&this!==BS(this))throw new zS("RegExp.prototype.flags getter called on non-object");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t},HS=oS.supportsDescriptors,QS=Object.getOwnPropertyDescriptor,GS=TypeError,YS=function(){if(!HS)throw new GS("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var t=QS(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof/a/.dotAll)return t.get}return WS},KS=oS.supportsDescriptors,$S=Object.getOwnPropertyDescriptor,XS=Object.defineProperty,JS=TypeError,ZS=Object.getPrototypeOf,tI=/a/,eI=kS(WS);oS(eI,{getPolyfill:YS,implementation:WS,shim:function(){if(!KS||!ZS)throw new JS("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=YS(),e=ZS(tI),n=$S(e,"flags");return n&&n.get===t||XS(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}});var nI=eI,rI=Date.prototype.getDay,iI=Object.prototype.toString,oI="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,aI=function(t){return"object"==typeof t&&null!==t&&(oI?function(t){try{return rI.call(t),!0}catch(t){return!1}}(t):"[object Date]"===iI.call(t))},sI=Date.prototype.getTime;function uI(t,e,n){var r=n||{};return!!(r.strict?FS(t,e):t===e)||(!t||!e||"object"!=typeof t&&"object"!=typeof e?r.strict?FS(t,e):t==e:function(t,e,n){var r,i;if(typeof t!=typeof e)return!1;if(cI(t)||cI(e))return!1;if(t.prototype!==e.prototype)return!1;if(XC(t)!==XC(e))return!1;var o=qS(t),a=qS(e);if(o!==a)return!1;if(o||a)return t.source===e.source&&nI(t)===nI(e);if(aI(t)&&aI(e))return sI.call(t)===sI.call(e);var s=lI(t),u=lI(e);if(s!==u)return!1;if(s||u){if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}if(typeof t!=typeof e)return!1;try{var c=HC(t),l=HC(e)}catch(t){return!1}if(c.length!==l.length)return!1;for(c.sort(),l.sort(),r=c.length-1;r>=0;r--)if(c[r]!=l[r])return!1;for(r=c.length-1;r>=0;r--)if(i=c[r],!uI(t[i],e[i],n))return!1;return!0}(t,e,r))}function cI(t){return null==t}function lI(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}var hI=uI,fI="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,pI=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(fI&&navigator.userAgent.indexOf(t[e])>=0)return 1;return 0}();
/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.16.1
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */var dI=fI&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then((function(){e=!1,t()})))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout((function(){e=!1,t()}),pI))}};function yI(t){return t&&"[object Function]"==={}.toString.call(t)}function vI(t,e){if(1!==t.nodeType)return[];var n=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?n[e]:n}function gI(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function mI(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=vI(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/(auto|scroll|overlay)/.test(n+i+r)?t:mI(gI(t))}function _I(t){return t&&t.referenceNode?t.referenceNode:t}var bI=fI&&!(!window.MSInputMethodContext||!document.documentMode),wI=fI&&/MSIE 10/.test(navigator.userAgent);function EI(t){return 11===t?bI:10===t?wI:bI||wI}function TI(t){if(!t)return document.documentElement;for(var e=EI(10)?document.body:null,n=t.offsetParent||null;n===e&&t.nextElementSibling;)n=(t=t.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===vI(n,"position")?TI(n):n:t?t.ownerDocument.documentElement:document.documentElement}function xI(t){return null!==t.parentNode?xI(t.parentNode):t}function CI(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?t:e,i=n?e:t,o=document.createRange();o.setStart(r,0),o.setEnd(i,0);var a,s,u=o.commonAncestorContainer;if(t!==u&&e!==u||r.contains(i))return"BODY"===(s=(a=u).nodeName)||"HTML"!==s&&TI(a.firstElementChild)!==a?TI(u):u;var c=xI(t);return c.host?CI(c.host,e):CI(t,xI(e).host)}function SI(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",n="top"===e?"scrollTop":"scrollLeft",r=t.nodeName;if("BODY"===r||"HTML"===r){var i=t.ownerDocument.documentElement,o=t.ownerDocument.scrollingElement||i;return o[n]}return t[n]}function II(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=SI(e,"top"),i=SI(e,"left"),o=n?-1:1;return t.top+=r*o,t.bottom+=r*o,t.left+=i*o,t.right+=i*o,t}function NI(t,e){var n="x"===e?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"])+parseFloat(t["border"+r+"Width"])}function kI(t,e,n,r){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],EI(10)?parseInt(n["offset"+t])+parseInt(r["margin"+("Height"===t?"Top":"Left")])+parseInt(r["margin"+("Height"===t?"Bottom":"Right")]):0)}function AI(t){var e=t.body,n=t.documentElement,r=EI(10)&&getComputedStyle(n);return{height:kI("Height",e,n,r),width:kI("Width",e,n,r)}}var PI=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},OI=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),RI=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},DI=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function MI(t){return DI({},t,{right:t.left+t.width,bottom:t.top+t.height})}function LI(t){var e={};try{if(EI(10)){e=t.getBoundingClientRect();var n=SI(t,"top"),r=SI(t,"left");e.top+=n,e.left+=r,e.bottom+=n,e.right+=r}else e=t.getBoundingClientRect()}catch(t){}var i={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},o="HTML"===t.nodeName?AI(t.ownerDocument):{},a=o.width||t.clientWidth||i.width,s=o.height||t.clientHeight||i.height,u=t.offsetWidth-a,c=t.offsetHeight-s;if(u||c){var l=vI(t);u-=NI(l,"x"),c-=NI(l,"y"),i.width-=u,i.height-=c}return MI(i)}function FI(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=EI(10),i="HTML"===e.nodeName,o=LI(t),a=LI(e),s=mI(t),u=vI(e),c=parseFloat(u.borderTopWidth),l=parseFloat(u.borderLeftWidth);n&&i&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var h=MI({top:o.top-a.top-c,left:o.left-a.left-l,width:o.width,height:o.height});if(h.marginTop=0,h.marginLeft=0,!r&&i){var f=parseFloat(u.marginTop),p=parseFloat(u.marginLeft);h.top-=c-f,h.bottom-=c-f,h.left-=l-p,h.right-=l-p,h.marginTop=f,h.marginLeft=p}return(r&&!n?e.contains(s):e===s&&"BODY"!==s.nodeName)&&(h=II(h,e)),h}function jI(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.ownerDocument.documentElement,r=FI(t,n),i=Math.max(n.clientWidth,window.innerWidth||0),o=Math.max(n.clientHeight,window.innerHeight||0),a=e?0:SI(n),s=e?0:SI(n,"left"),u={top:a-r.top+r.marginTop,left:s-r.left+r.marginLeft,width:i,height:o};return MI(u)}function UI(t){var e=t.nodeName;if("BODY"===e||"HTML"===e)return!1;if("fixed"===vI(t,"position"))return!0;var n=gI(t);return!!n&&UI(n)}function VI(t){if(!t||!t.parentElement||EI())return document.documentElement;for(var e=t.parentElement;e&&"none"===vI(e,"transform");)e=e.parentElement;return e||document.documentElement}function qI(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={top:0,left:0},a=i?VI(t):CI(t,_I(e));if("viewport"===r)o=jI(a,i);else{var s=void 0;"scrollParent"===r?"BODY"===(s=mI(gI(e))).nodeName&&(s=t.ownerDocument.documentElement):s="window"===r?t.ownerDocument.documentElement:r;var u=FI(s,a,i);if("HTML"!==s.nodeName||UI(a))o=u;else{var c=AI(t.ownerDocument),l=c.height,h=c.width;o.top+=u.top-u.marginTop,o.bottom=l+u.top,o.left+=u.left-u.marginLeft,o.right=h+u.left}}var f="number"==typeof(n=n||0);return o.left+=f?n:n.left||0,o.top+=f?n:n.top||0,o.right-=f?n:n.right||0,o.bottom-=f?n:n.bottom||0,o}function BI(t){return t.width*t.height}function zI(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var a=qI(n,r,o,i),s={top:{width:a.width,height:e.top-a.top},right:{width:a.right-e.right,height:a.height},bottom:{width:a.width,height:a.bottom-e.bottom},left:{width:e.left-a.left,height:a.height}},u=Object.keys(s).map((function(t){return DI({key:t},s[t],{area:BI(s[t])})})).sort((function(t,e){return e.area-t.area})),c=u.filter((function(t){var e=t.width,r=t.height;return e>=n.clientWidth&&r>=n.clientHeight})),l=c.length>0?c[0].key:u[0].key,h=t.split("-")[1];return l+(h?"-"+h:"")}function WI(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=r?VI(e):CI(e,_I(n));return FI(n,i,r)}function HI(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),r=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+r,height:t.offsetHeight+n}}function QI(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,(function(t){return e[t]}))}function GI(t,e,n){n=n.split("-")[0];var r=HI(t),i={width:r.width,height:r.height},o=-1!==["right","left"].indexOf(n),a=o?"top":"left",s=o?"left":"top",u=o?"height":"width",c=o?"width":"height";return i[a]=e[a]+e[u]/2-r[u]/2,i[s]=n===s?e[s]-r[c]:e[QI(s)],i}function YI(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function KI(t,e,n){return(void 0===n?t:t.slice(0,function(t,e,n){if(Array.prototype.findIndex)return t.findIndex((function(t){return t[e]===n}));var r=YI(t,(function(t){return t[e]===n}));return t.indexOf(r)}(t,"name",n))).forEach((function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=t.function||t.fn;t.enabled&&yI(n)&&(e.offsets.popper=MI(e.offsets.popper),e.offsets.reference=MI(e.offsets.reference),e=n(e,t))})),e}function $I(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=WI(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=zI(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=GI(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=KI(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}function XI(t,e){return t.some((function(t){var n=t.name;return t.enabled&&n===e}))}function JI(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<e.length;r++){var i=e[r],o=i?""+i+n:t;if(void 0!==document.body.style[o])return o}return null}function ZI(){return this.state.isDestroyed=!0,XI(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[JI("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function tN(t){var e=t.ownerDocument;return e?e.defaultView:window}function eN(t,e,n,r){n.updateBound=r,tN(t).addEventListener("resize",n.updateBound,{passive:!0});var i=mI(t);return function t(e,n,r,i){var o="BODY"===e.nodeName,a=o?e.ownerDocument.defaultView:e;a.addEventListener(n,r,{passive:!0}),o||t(mI(a.parentNode),n,r,i),i.push(a)}(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}function nN(){this.state.eventsEnabled||(this.state=eN(this.reference,this.options,this.state,this.scheduleUpdate))}function rN(){var t,e;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.reference,e=this.state,tN(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach((function(t){t.removeEventListener("scroll",e.updateBound)})),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}function iN(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function oN(t,e){Object.keys(e).forEach((function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&iN(e[n])&&(r="px"),t.style[n]=e[n]+r}))}var aN=fI&&/Firefox/i.test(navigator.userAgent);function sN(t,e,n){var r=YI(t,(function(t){return t.name===e})),i=!!r&&t.some((function(t){return t.name===n&&t.enabled&&t.order<r.order}));if(!i){var o="`"+e+"`",a="`"+n+"`";console.warn(a+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return i}var uN=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],cN=uN.slice(3);function lN(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=cN.indexOf(t),r=cN.slice(n+1).concat(cN.slice(0,n));return e?r.reverse():r}var hN="flip",fN="clockwise",pN="counterclockwise";function dN(t,e,n,r){var i=[0,0],o=-1!==["right","left"].indexOf(r),a=t.split(/(\+|\-)/).map((function(t){return t.trim()})),s=a.indexOf(YI(a,(function(t){return-1!==t.search(/,|\s/)})));a[s]&&-1===a[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var u=/\s*,\s*|\s+/,c=-1!==s?[a.slice(0,s).concat([a[s].split(u)[0]]),[a[s].split(u)[1]].concat(a.slice(s+1))]:[a];return(c=c.map((function(t,r){var i=(1===r?!o:o)?"height":"width",a=!1;return t.reduce((function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,a=!0,t):a?(t[t.length-1]+=e,a=!1,t):t.concat(e)}),[]).map((function(t){return function(t,e,n,r){var i=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+i[1],a=i[2];if(!o)return t;if(0===a.indexOf("%")){var s=void 0;switch(a){case"%p":s=n;break;case"%":case"%r":default:s=r}return MI(s)[e]/100*o}if("vh"===a||"vw"===a){return("vh"===a?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o}return o}(t,i,e,n)}))}))).forEach((function(t,e){t.forEach((function(n,r){iN(n)&&(i[e]+=n*("-"===t[r-1]?-1:1))}))})),i}var yN={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,n=e.split("-")[0],r=e.split("-")[1];if(r){var i=t.offsets,o=i.reference,a=i.popper,s=-1!==["bottom","top"].indexOf(n),u=s?"left":"top",c=s?"width":"height",l={start:RI({},u,o[u]),end:RI({},u,o[u]+o[c]-a[c])};t.offsets.popper=DI({},a,l[r])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var n=e.offset,r=t.placement,i=t.offsets,o=i.popper,a=i.reference,s=r.split("-")[0],u=void 0;return u=iN(+n)?[+n,0]:dN(n,o,a,s),"left"===s?(o.top+=u[0],o.left-=u[1]):"right"===s?(o.top+=u[0],o.left+=u[1]):"top"===s?(o.left+=u[0],o.top-=u[1]):"bottom"===s&&(o.left+=u[0],o.top+=u[1]),t.popper=o,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var n=e.boundariesElement||TI(t.instance.popper);t.instance.reference===n&&(n=TI(n));var r=JI("transform"),i=t.instance.popper.style,o=i.top,a=i.left,s=i[r];i.top="",i.left="",i[r]="";var u=qI(t.instance.popper,t.instance.reference,e.padding,n,t.positionFixed);i.top=o,i.left=a,i[r]=s,e.boundaries=u;var c=e.priority,l=t.offsets.popper,h={primary:function(t){var n=l[t];return l[t]<u[t]&&!e.escapeWithReference&&(n=Math.max(l[t],u[t])),RI({},t,n)},secondary:function(t){var n="right"===t?"left":"top",r=l[n];return l[t]>u[t]&&!e.escapeWithReference&&(r=Math.min(l[n],u[t]-("right"===t?l.width:l.height))),RI({},n,r)}};return c.forEach((function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";l=DI({},l,h[e](t))})),t.offsets.popper=l,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,n=e.popper,r=e.reference,i=t.placement.split("-")[0],o=Math.floor,a=-1!==["top","bottom"].indexOf(i),s=a?"right":"bottom",u=a?"left":"top",c=a?"width":"height";return n[s]<o(r[u])&&(t.offsets.popper[u]=o(r[u])-n[c]),n[u]>o(r[s])&&(t.offsets.popper[u]=o(r[s])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var n;if(!sN(t.instance.modifiers,"arrow","keepTogether"))return t;var r=e.element;if("string"==typeof r){if(!(r=t.instance.popper.querySelector(r)))return t}else if(!t.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var i=t.placement.split("-")[0],o=t.offsets,a=o.popper,s=o.reference,u=-1!==["left","right"].indexOf(i),c=u?"height":"width",l=u?"Top":"Left",h=l.toLowerCase(),f=u?"left":"top",p=u?"bottom":"right",d=HI(r)[c];s[p]-d<a[h]&&(t.offsets.popper[h]-=a[h]-(s[p]-d)),s[h]+d>a[p]&&(t.offsets.popper[h]+=s[h]+d-a[p]),t.offsets.popper=MI(t.offsets.popper);var y=s[h]+s[c]/2-d/2,v=vI(t.instance.popper),g=parseFloat(v["margin"+l]),m=parseFloat(v["border"+l+"Width"]),_=y-t.offsets.popper[h]-g-m;return _=Math.max(Math.min(a[c]-d,_),0),t.arrowElement=r,t.offsets.arrow=(RI(n={},h,Math.round(_)),RI(n,f,""),n),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(XI(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var n=qI(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),r=t.placement.split("-")[0],i=QI(r),o=t.placement.split("-")[1]||"",a=[];switch(e.behavior){case hN:a=[r,i];break;case fN:a=lN(r);break;case pN:a=lN(r,!0);break;default:a=e.behavior}return a.forEach((function(s,u){if(r!==s||a.length===u+1)return t;r=t.placement.split("-")[0],i=QI(r);var c=t.offsets.popper,l=t.offsets.reference,h=Math.floor,f="left"===r&&h(c.right)>h(l.left)||"right"===r&&h(c.left)<h(l.right)||"top"===r&&h(c.bottom)>h(l.top)||"bottom"===r&&h(c.top)<h(l.bottom),p=h(c.left)<h(n.left),d=h(c.right)>h(n.right),y=h(c.top)<h(n.top),v=h(c.bottom)>h(n.bottom),g="left"===r&&p||"right"===r&&d||"top"===r&&y||"bottom"===r&&v,m=-1!==["top","bottom"].indexOf(r),_=!!e.flipVariations&&(m&&"start"===o&&p||m&&"end"===o&&d||!m&&"start"===o&&y||!m&&"end"===o&&v),b=!!e.flipVariationsByContent&&(m&&"start"===o&&d||m&&"end"===o&&p||!m&&"start"===o&&v||!m&&"end"===o&&y),w=_||b;(f||g||w)&&(t.flipped=!0,(f||g)&&(r=a[u+1]),w&&(o=function(t){return"end"===t?"start":"start"===t?"end":t}(o)),t.placement=r+(o?"-"+o:""),t.offsets.popper=DI({},t.offsets.popper,GI(t.instance.popper,t.offsets.reference,t.placement)),t=KI(t.instance.modifiers,t,"flip"))})),t},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],r=t.offsets,i=r.popper,o=r.reference,a=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return i[a?"left":"top"]=o[n]-(s?i[a?"width":"height"]:0),t.placement=QI(e),t.offsets.popper=MI(i),t}},hide:{order:800,enabled:!0,fn:function(t){if(!sN(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=YI(t.instance.modifiers,(function(t){return"preventOverflow"===t.name})).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,r=e.y,i=t.offsets.popper,o=YI(t.instance.modifiers,(function(t){return"applyStyle"===t.name})).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=void 0!==o?o:e.gpuAcceleration,s=TI(t.instance.popper),u=LI(s),c={position:i.position},l=function(t,e){var n=t.offsets,r=n.popper,i=n.reference,o=Math.round,a=Math.floor,s=function(t){return t},u=o(i.width),c=o(r.width),l=-1!==["left","right"].indexOf(t.placement),h=-1!==t.placement.indexOf("-"),f=e?l||h||u%2==c%2?o:a:s,p=e?o:s;return{left:f(u%2==1&&c%2==1&&!h&&e?r.left-1:r.left),top:p(r.top),bottom:p(r.bottom),right:f(r.right)}}(t,window.devicePixelRatio<2||!aN),h="bottom"===n?"top":"bottom",f="right"===r?"left":"right",p=JI("transform"),d=void 0,y=void 0;if(y="bottom"===h?"HTML"===s.nodeName?-s.clientHeight+l.bottom:-u.height+l.bottom:l.top,d="right"===f?"HTML"===s.nodeName?-s.clientWidth+l.right:-u.width+l.right:l.left,a&&p)c[p]="translate3d("+d+"px, "+y+"px, 0)",c[h]=0,c[f]=0,c.willChange="transform";else{var v="bottom"===h?-1:1,g="right"===f?-1:1;c[h]=y*v,c[f]=d*g,c.willChange=h+", "+f}var m={"x-placement":t.placement};return t.attributes=DI({},m,t.attributes),t.styles=DI({},c,t.styles),t.arrowStyles=DI({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){var e,n;return oN(t.instance.popper,t.styles),e=t.instance.popper,n=t.attributes,Object.keys(n).forEach((function(t){!1!==n[t]?e.setAttribute(t,n[t]):e.removeAttribute(t)})),t.arrowElement&&Object.keys(t.arrowStyles).length&&oN(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,n,r,i){var o=WI(i,e,t,n.positionFixed),a=zI(n.placement,o,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",a),oN(e,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},vN=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};PI(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=dI(this.update.bind(this)),this.options=DI({},t.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(DI({},t.Defaults.modifiers,i.modifiers)).forEach((function(e){r.options.modifiers[e]=DI({},t.Defaults.modifiers[e]||{},i.modifiers?i.modifiers[e]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(t){return DI({name:t},r.options.modifiers[t])})).sort((function(t,e){return t.order-e.order})),this.modifiers.forEach((function(t){t.enabled&&yI(t.onLoad)&&t.onLoad(r.reference,r.popper,r.options,t,r.state)})),this.update();var o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}return OI(t,[{key:"update",value:function(){return $I.call(this)}},{key:"destroy",value:function(){return ZI.call(this)}},{key:"enableEventListeners",value:function(){return nN.call(this)}},{key:"disableEventListeners",value:function(){return rN.call(this)}}]),t}();vN.Utils=("undefined"!=typeof window?window:t).PopperUtils,vN.placements=uN,vN.Defaults=yN;var gN="__global_unique_id__",mN=function(){return $v[gN]=($v[gN]||0)+1},_N=function(){},bN=_N,wN=Jv((function(t,e){e.__esModule=!0;i(o.a);var n=i(s.a),r=i(mN);i(bN);function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t){var e=[];return{on:function(t){e.push(t)},off:function(t){e=e.filter((function(e){return e!==t}))},get:function(){return t},set:function(n,r){t=n,e.forEach((function(e){return e(t,r)}))}}}e.default=function(t,e){var i,s,h="__create-react-context-"+(0,r.default)()+"__",f=function(t){function n(){var e,r;a(this,n);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=r=u(this,t.call.apply(t,[this].concat(o))),r.emitter=l(r.props.value),u(r,e)}return c(n,t),n.prototype.getChildContext=function(){var t;return(t={})[h]=this.emitter,t},n.prototype.componentWillReceiveProps=function(t){if(this.props.value!==t.value){var n=this.props.value,r=t.value,i=void 0;!function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}(n,r)?(i="function"==typeof e?e(n,r):1073741823,0!==(i|=0)&&this.emitter.set(t.value,i)):i=0}},n.prototype.render=function(){return this.props.children},n}(o.a.Component);f.childContextTypes=((i={})[h]=n.default.object.isRequired,i);var p=function(e){function n(){var t,r;a(this,n);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=r=u(this,e.call.apply(e,[this].concat(o))),r.state={value:r.getValue()},r.onUpdate=function(t,e){0!=((0|r.observedBits)&e)&&r.setState({value:r.getValue()})},u(r,t)}return c(n,e),n.prototype.componentWillReceiveProps=function(t){var e=t.observedBits;this.observedBits=null==e?1073741823:e},n.prototype.componentDidMount=function(){this.context[h]&&this.context[h].on(this.onUpdate);var t=this.props.observedBits;this.observedBits=null==t?1073741823:t},n.prototype.componentWillUnmount=function(){this.context[h]&&this.context[h].off(this.onUpdate)},n.prototype.getValue=function(){return this.context[h]?this.context[h].get():t},n.prototype.render=function(){return(t=this.props.children,Array.isArray(t)?t[0]:t)(this.state.value);var t},n}(o.a.Component);return p.contextTypes=((s={})[h]=n.default.object,s),{Provider:f,Consumer:p}},t.exports=e.default}));Xv(wN);var EN=Xv(Jv((function(t,e){e.__esModule=!0;var n=i(o.a),r=i(wN);function i(t){return t&&t.__esModule?t:{default:t}}e.default=n.default.createContext||r.default,t.exports=e.default}))),TN=EN(),xN=(EN(),function(t,e){if("function"==typeof t)return function(t){if("function"==typeof t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,n)}}(t,e);null!=t&&(t.current=e)}),CN={position:"absolute",top:0,left:0,opacity:0,pointerEvents:"none"},SN={},IN=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r))||this,Mg(Ag(e),"state",{data:void 0,placement:void 0}),Mg(Ag(e),"popperInstance",void 0),Mg(Ag(e),"popperNode",null),Mg(Ag(e),"arrowNode",null),Mg(Ag(e),"setPopperNode",(function(t){t&&e.popperNode!==t&&(xN(e.props.innerRef,t),e.popperNode=t,e.updatePopperInstance())})),Mg(Ag(e),"setArrowNode",(function(t){e.arrowNode=t})),Mg(Ag(e),"updateStateModifier",{enabled:!0,order:900,fn:function(t){var n=t.placement;return e.setState({data:t,placement:n}),t}}),Mg(Ag(e),"getOptions",(function(){return{placement:e.props.placement,eventsEnabled:e.props.eventsEnabled,positionFixed:e.props.positionFixed,modifiers:Cg({},e.props.modifiers,{arrow:Cg({},e.props.modifiers&&e.props.modifiers.arrow,{enabled:!!e.arrowNode,element:e.arrowNode}),applyStyle:{enabled:!1},updateStateModifier:e.updateStateModifier})}})),Mg(Ag(e),"getPopperStyle",(function(){return e.popperNode&&e.state.data?Cg({position:e.state.data.offsets.popper.position},e.state.data.styles):CN})),Mg(Ag(e),"getPopperPlacement",(function(){return e.state.data?e.state.placement:void 0})),Mg(Ag(e),"getArrowStyle",(function(){return e.arrowNode&&e.state.data?e.state.data.arrowStyles:SN})),Mg(Ag(e),"getOutOfBoundariesState",(function(){return e.state.data?e.state.data.hide:void 0})),Mg(Ag(e),"destroyPopperInstance",(function(){e.popperInstance&&(e.popperInstance.destroy(),e.popperInstance=null)})),Mg(Ag(e),"updatePopperInstance",(function(){e.destroyPopperInstance();var t=Ag(e).popperNode,n=e.props.referenceElement;n&&t&&(e.popperInstance=new vN(n,t,e.getOptions()))})),Mg(Ag(e),"scheduleUpdate",(function(){e.popperInstance&&e.popperInstance.scheduleUpdate()})),e}IC(e,t);var n=e.prototype;return n.componentDidUpdate=function(t,e){this.props.placement===t.placement&&this.props.referenceElement===t.referenceElement&&this.props.positionFixed===t.positionFixed&&hI(this.props.modifiers,t.modifiers,{strict:!0})?this.props.eventsEnabled!==t.eventsEnabled&&this.popperInstance&&(this.props.eventsEnabled?this.popperInstance.enableEventListeners():this.popperInstance.disableEventListeners()):this.updatePopperInstance(),e.placement!==this.state.placement&&this.scheduleUpdate()},n.componentWillUnmount=function(){xN(this.props.innerRef,null),this.destroyPopperInstance()},n.render=function(){return(t=this.props.children,Array.isArray(t)?t[0]:t)({ref:this.setPopperNode,style:this.getPopperStyle(),placement:this.getPopperPlacement(),outOfBoundaries:this.getOutOfBoundariesState(),scheduleUpdate:this.scheduleUpdate,arrowProps:{ref:this.setArrowNode,style:this.getArrowStyle()}});var t},e}(i.Component);function NN(t){var e=t.referenceElement,n=CC(t,["referenceElement"]);return Object(i.createElement)(TN.Consumer,null,(function(t){return Object(i.createElement)(IN,Cg({referenceElement:void 0!==e?e:t},n))}))}Mg(IN,"defaultProps",{placement:"bottom",eventsEnabled:!0,referenceElement:void 0,positionFixed:!1});var kN=function(t,e,n,r){return cb(t,(function(t,i,o){e(r,n(t),i,o)})),r};var AN=function(t,e){return function(n,r){return kN(n,t,e(r),{})}},PN=Object.prototype.toString,ON=AN((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=PN.call(e)),t[e]=n}),x_(w_)),RN={"top center":"top","top left":"top-start","top right":"top-end","bottom center":"bottom","bottom left":"bottom-start","bottom right":"bottom-end","right center":"right","left center":"left"},DN=(ub(RN),ON(RN)),MN=function(){function t(e){Sg(this,t),this.ref=e}return Ng(t,[{key:"getBoundingClientRect",value:function(){return P_(this.ref.current,"getBoundingClientRect",{})}},{key:"clientWidth",get:function(){return this.getBoundingClientRect().width}},{key:"clientHeight",get:function(){return this.getBoundingClientRect().height}},{key:"parentNode",get:function(){return this.ref.current?this.ref.current.parentNode:void 0}}]),t}(),LN=Km((function(t){return new MN(function(t){return null!==t&&"object"===Iv(t)&&t.hasOwnProperty("current")}(t)?t:function(t){if(null===t)return Yv;if(Kv.has(t))return Kv.get(t);var e={current:t};return Kv.set(t,e),e}(t))}));function FN(t){var e=t.children,n=t.className,r=t.content,i=Bx("content",n),a=Hx(FN,t),s=Qx(FN,t);return o.a.createElement(s,Cg({},a,{className:i}),Rw(e)?r:e)}function jN(t){var e=t.children,n=t.className,r=t.content,i=Bx("header",n),a=Hx(jN,t),s=Qx(jN,t);return o.a.createElement(s,Cg({},a,{className:i}),Rw(e)?r:e)}FN.handledProps=["as","children","className","content"],FN.propTypes={},FN.create=Wx(FN,(function(t){return{children:t}})),jN.handledProps=["as","children","className","content"],jN.propTypes={},jN.create=Wx(jN,(function(t){return{children:t}}));var UN=function(t){function e(){var t,n;Sg(this,e);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=Pg(this,(t=Og(e)).call.apply(t,[this].concat(a))),Mg(Ag(n),"state",{}),Mg(Ag(n),"open",!1),Mg(Ag(n),"triggerRef",Object(i.createRef)()),Mg(Ag(n),"getPortalProps",(function(){var t={},e=n.props,r=e.on,i=e.hoverable,o=Lg(r)?r:[r];return i&&(t.closeOnPortalMouseLeave=!0,t.mouseLeaveDelay=300),$x(o,"hover")&&(t.openOnTriggerClick=!1,t.closeOnTriggerClick=!1,t.openOnTriggerMouseEnter=!0,t.closeOnTriggerMouseLeave=!0,t.mouseLeaveDelay=70,t.mouseEnterDelay=50),$x(o,"click")&&(t.openOnTriggerClick=!0,t.closeOnTriggerClick=!0,t.closeOnDocumentClick=!0),$x(o,"focus")&&(t.openOnTriggerFocus=!0,t.closeOnTriggerBlur=!0),t})),Mg(Ag(n),"hideOnScroll",(function(t){n.setState({closed:!0}),Mx.unsub("scroll",n.hideOnScroll,{target:window}),n.timeoutId=setTimeout((function(){n.setState({closed:!1})}),50),n.handleClose(t)})),Mg(Ag(n),"handleClose",(function(t){P_(n.props,"onClose",t,n.props)})),Mg(Ag(n),"handleOpen",(function(t){P_(n.props,"onOpen",t,n.props)})),Mg(Ag(n),"handlePortalMount",(function(t){P_(n.props,"onMount",t,n.props)})),Mg(Ag(n),"handlePortalUnmount",(function(t){n.positionUpdate=null,P_(n.props,"onUnmount",t,n.props)})),Mg(Ag(n),"renderContent",(function(t){var r=t.placement,i=t.ref,a=t.scheduleUpdate,s=t.style,u=n.props,c=u.basic,l=u.children,h=u.className,f=u.content,p=u.hideOnScroll,d=u.flowing,y=u.header,v=u.inverted,g=u.size,m=u.style,_=u.wide,b=n.state.contentRestProps;n.positionUpdate=a;var w=Bx("ui",DN[r],g,Lw(_,"wide"),Mw(c,"basic"),Mw(d,"flowing"),Mw(v,"inverted"),"popup transition visible",h),E=Qx(e,n.props),T=O_({left:"auto",right:"auto"},s,m);return o.a.createElement(xg,{innerRef:i},o.a.createElement(E,Cg({},b,{className:w,style:T}),Rw(l)?o.a.createElement(o.a.Fragment,null,jN.create(y,{autoGenerateKey:!1}),FN.create(f,{autoGenerateKey:!1})):l,p&&o.a.createElement(Dx,{on:n.hideOnScroll,name:"scroll",target:"window"})))})),n}return Dg(e,t),Ng(e,[{key:"componentDidUpdate",value:function(t){(function(t,e,n,r){var i=n?n.call(r,t,e):void 0;if(void 0!==i)return!!i;if(t===e)return!0;if("object"!=typeof t||!t||"object"!=typeof e||!e)return!1;var o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(e),u=0;u<o.length;u++){var c=o[u];if(!s(c))return!1;var l=t[c],h=e[c];if(!1===(i=n?n.call(r,l,h,c):void 0)||void 0===i&&l!==h)return!1}return!0})(this.props.popperDependencies,t.popperDependencies)||this.handleUpdate()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutId)}},{key:"handleUpdate",value:function(){this.positionUpdate&&this.positionUpdate()}},{key:"render",value:function(){var t=this.props,e=t.context,n=t.disabled,r=t.eventsEnabled,i=t.offset,a=t.pinned,s=t.popperModifiers,u=t.position,c=t.positionFixed,l=t.trigger,h=this.state,f=h.closed,p=h.portalRestProps;if(f||n)return l;var d=xC({arrow:{enabled:!1},flip:{enabled:!a},keepTogether:{enabled:!!i},offset:{offset:i}},s),y=LN(gx(e)?this.triggerRef:e),v=O_({},this.getPortalProps(),p);return o.a.createElement(yC,Cg({},v,{onClose:this.handleClose,onMount:this.handlePortalMount,onOpen:this.handleOpen,onUnmount:this.handlePortalUnmount,trigger:l,triggerRef:this.triggerRef}),o.a.createElement(NN,{eventsEnabled:r,modifiers:d,placement:RN[u],positionFixed:c,referenceElement:y},this.renderContent))}}],[{key:"getDerivedStateFromProps",value:function(t,n){if(n.closed||n.disabled)return{};var r=Hx(e,t);return{contentRestProps:mC(r,(function(t,e,n){return $x(yC.handledProps,n)||(t[n]=e),t}),{}),portalRestProps:yx(r,yC.handledProps)}}}]),e}(i.Component);Mg(UN,"defaultProps",{disabled:!1,eventsEnabled:!0,offset:0,on:["click","hover"],pinned:!1,position:"top left"}),Mg(UN,"Content",FN),Mg(UN,"Header",jN),Mg(UN,"handledProps",["as","basic","children","className","content","context","disabled","eventsEnabled","flowing","header","hideOnScroll","hoverable","inverted","offset","on","onClose","onMount","onOpen","onUnmount","pinned","popperDependencies","popperModifiers","position","positionFixed","size","style","trigger","wide"]),UN.propTypes={};let VN=0;const qN=Object.create(null),BN=["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","columns","counter-increment","counter-reset","flex","flex-grow","flex-positive","flex-shrink","flex-negative","flex-order","font-weight","grid-area","grid-column","grid-column-end","grid-column-span","grid-column-start","grid-row","grid-row-end","grid-row-span","grid-row-start","line-clamp","line-height","opacity","order","orphans","tab-size","widows","z-index","zoom","fill-opacity","flood-opacity","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width"];for(const t of BN)for(const e of["-webkit-","-ms-","-moz-","-o-",""])qN[e+t]=!0;function zN(t,e){return e&&"number"==typeof e&&!qN[t]?`${t}:${e}px`:`${t}:${e}`}function WN(t){return t.sort((t,e)=>t[0]>e[0]?1:-1)}function HN(t){return t.map(([t,e])=>Array.isArray(e)?e.map(e=>zN(t,e)).join(";"):zN(t,e)).join(";")}function QN(t,e){return-1===t.indexOf("&")?`${e} ${t}`:t.replace(/&/g,e)}function GN(t,e,n,r,i){const{style:o,nested:a,isUnique:s}=function(t,e){const n=[],r=[];for(const e of Object.keys(t)){const o=e.trim(),a=t[e];36!==o.charCodeAt(0)&&null!=a&&("object"!=typeof a||Array.isArray(a)?n.push([(i=o,i.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()).replace(/^ms-/,"-ms-")),a]):r.push([o,a]))}var i;return{style:HN(WN(n)),nested:e?r:WN(r),isUnique:!!t.$unique}}(e,""!==t);let u=o;if(64===t.charCodeAt(0)){const e={selector:t,styles:[],rules:[],style:i?"":o};n.push(e),o&&i&&e.styles.push({selector:i,style:o,isUnique:s});for(const[t,n]of a)u+=t+GN(t,n,e.rules,e.styles,i)}else{const e=i?QN(t,i):t;o&&r.push({selector:e,style:o,isUnique:s});for(const[t,i]of a)u+=t+GN(t,i,n,r,e)}return u}function YN(t,e,n,r,i,o){for(const{selector:n,style:a,isUnique:s}of r){const r=o?QN(n,i):n,u=s?"u\0"+(++VN).toString(36):`s\0${e}\0${a}`,c=new ZN(a,u);c.add(new JN(r,`k\0${e}\0${r}`)),t.add(c)}for(const{selector:r,style:a,rules:s,styles:u}of n){const n=new tk(r,a,`r\0${e}\0${r}\0${a}`);YN(n,e,s,u,i,o),t.add(n)}}function KN(t){let e="";for(let n=0;n<t.length;n++)e+=t[n];return e}const $N={add:()=>{},change:()=>{},remove:()=>{}};class XN{constructor(t=$N){this.changes=t,this.sheet=[],this.changeId=0,this._keys=[],this._children=Object.create(null),this._counters=Object.create(null)}add(t){const e=this._counters[t.id]||0,n=this._children[t.id]||t.clone();if(this._counters[t.id]=e+1,0===e)this._children[n.id]=n,this._keys.push(n.id),this.sheet.push(n.getStyles()),this.changeId++,this.changes.add(n,this._keys.length-1);else if(n instanceof XN&&t instanceof XN){const e=this._keys.indexOf(t.id),r=n.changeId;n.merge(t),n.changeId!==r&&(this.sheet.splice(e,1,n.getStyles()),this.changeId++,this.changes.change(n,e,e))}}remove(t){const e=this._counters[t.id];if(e){this._counters[t.id]=e-1;const n=this._children[t.id],r=this._keys.indexOf(n.id);if(1===e)delete this._counters[t.id],delete this._children[t.id],this._keys.splice(r,1),this.sheet.splice(r,1),this.changeId++,this.changes.remove(n,r);else if(n instanceof XN&&t instanceof XN){const e=n.changeId;n.unmerge(t),n.changeId!==e&&(this.sheet.splice(r,1,n.getStyles()),this.changeId++,this.changes.change(n,r,r))}}}values(){return this._keys.map(t=>this._children[t])}merge(t){for(const e of t.values())this.add(e);return this}unmerge(t){for(const e of t.values())this.remove(e);return this}clone(){return(new XN).merge(this)}}class JN{constructor(t,e){this.selector=t,this.id=e}getStyles(){return this.selector}clone(){return this}}class ZN extends XN{constructor(t,e){super(),this.style=t,this.id=e}getStyles(){return`${this.sheet.join(",")}{${this.style}}`}clone(){return new ZN(this.style,this.id).merge(this)}}class tk extends XN{constructor(t,e,n){super(),this.rule=t,this.style=e,this.id=n}getStyles(){return`${this.rule}{${this.style}${KN(this.sheet)}}`}clone(){return new tk(this.rule,this.style,this.id).merge(this)}}function ek(t,e){const n="f"+function(t){let e=5381,n=t.length;for(;n--;)e=33*e^t.charCodeAt(n);return(e>>>0).toString(36)}(t);return n}class nk extends XN{constructor(t,e){super(e),this.id=t}registerStyle(t){const e=[],n=[],r=GN("&",t,e,n),i=ek(r);return YN(this,r,e,n,"."+i,!0),i}registerKeyframes(t){return this.registerHashRule("@keyframes",t)}registerHashRule(t,e){const n=[],r=[],i=GN("",e,n,r),o=ek(i),a=new tk(`${t} ${o}`,"",`h\0${i}\0${t}`);return YN(a,i,n,r,"",!1),this.add(a),o}registerRule(t,e){const n=[],r=[];YN(this,GN(t,e,n,r),n,r,"",!1)}registerCss(t){return this.registerRule("",t)}getStyles(){return KN(this.sheet)}clone(){return new nk(this.id,this.changes).merge(this)}}function rk(t){var e={};for(var n in t){var r=t[n];if("$nest"===n){var i=r;for(var o in i){var a=i[o];e[o]=rk(a)}}else"$debugName"===n?e.$displayName=r:e[n]=r}return e}var ik="undefined"==typeof requestAnimationFrame?function(t){return setTimeout(t)}:"undefined"==typeof window?requestAnimationFrame:requestAnimationFrame.bind(window);function ok(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n={},r=0,i=t;r<i.length;r++){var o=i[r];if(null!=o&&!1!==o)for(var a in o){var s=o[a];(s||0===s)&&("$nest"===a&&s?n[a]=n.$nest?ok(n.$nest,s):s:-1!==a.indexOf("&")||0===a.indexOf("@media")?n[a]=n[a]?ok(n[a],s):s:n[a]=s)}}return n}var ak=function(){return new nk("f"+(++VN).toString(36),t);var t},sk=new(function(){function t(t){var e=this,n=t.autoGenerateTag;this.cssRaw=function(t){t&&(e._raw+=t||"",e._pendingRawChange=!0,e._styleUpdated())},this.cssRule=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=rk(ok.apply(void 0,n));e._freeStyle.registerRule(t,i),e._styleUpdated()},this.forceRenderStyles=function(){var t=e._getTag();t&&(t.textContent=e.getStyles())},this.fontFace=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=e._freeStyle,i=0,o=t;i<o.length;i++){var a=o[i];r.registerRule("@font-face",a)}e._styleUpdated()},this.getStyles=function(){return(e._raw||"")+e._freeStyle.getStyles()},this.keyframes=function(t){var n=function(t){var e={};for(var n in t)"$debugName"!==n&&(e[n]=t[n]);return t.$debugName&&(e.$displayName=t.$debugName),e}(t),r=e._freeStyle.registerKeyframes(n);return e._styleUpdated(),r},this.reinit=function(){var t=ak();e._freeStyle=t,e._lastFreeStyleChangeId=t.changeId,e._raw="",e._pendingRawChange=!1;var n=e._getTag();n&&(n.textContent="")},this.setStylesTarget=function(t){e._tag&&(e._tag.textContent=""),e._tag=t,e.forceRenderStyles()},this.stylesheet=function(t){for(var n={},r=0,i=Object.getOwnPropertyNames(t);r<i.length;r++){var o=i[r],a=t[o];a&&(a.$debugName=o,n[o]=e.style(a))}return n};var r=ak();this._autoGenerateTag=n,this._freeStyle=r,this._lastFreeStyleChangeId=r.changeId,this._pending=0,this._pendingRawChange=!1,this._raw="",this._tag=void 0,this.style=this.style.bind(this)}return t.prototype._afterAllSync=function(t){var e=this;this._pending++;var n=this._pending;ik((function(){n===e._pending&&t()}))},t.prototype._getTag=function(){if(this._tag)return this._tag;if(this._autoGenerateTag){var t="undefined"==typeof window?{textContent:""}:document.createElement("style");return"undefined"!=typeof document&&document.head.appendChild(t),this._tag=t,t}},t.prototype._styleUpdated=function(){var t=this,e=this._freeStyle.changeId,n=this._lastFreeStyleChangeId;(this._pendingRawChange||e!==n)&&(this._lastFreeStyleChangeId=e,this._pendingRawChange=!1,this._afterAllSync((function(){return t.forceRenderStyles()})))},t.prototype.style=function(){var t=this._freeStyle.registerStyle(rk(ok.apply(void 0,arguments)));return this._styleUpdated(),t},t}())({autoGenerateTag:!0}).style;function uk(t,e){var n=[];for(var r in e)e[r].bunchedNodes.includes(t)&&n.push(r);return n}function ck(t,e){return"translate("+t+", "+e+")"}function lk(t){var e=t.graph,n=t.undoCallback,r=t.redoCallback;if(void 0===e)return null;var i=e.root===e.current,a=0===e.nodes[e.current].children.length,s={marginRight:"3px"};return o.a.createElement("div",null,o.a.createElement("button",{className:hk,disabled:i,onClick:n},o.a.createElement("i",{style:s,className:"fas fa-undo marginRight"}),"Undo"),o.a.createElement("button",{className:fk,disabled:a,onClick:r},o.a.createElement("i",{style:s,className:"fas fa-redo marginRight"}),"Redo"))}var hk=sk({backgroundColor:"#768d87",borderRadius:"2px",border:"none",display:"inline-block",cursor:"pointer",color:"#ffffff",fontFamily:"Lato,Helvetica Neue,Arial,Helvetica,sans-serif",fontSize:"14px",padding:"5px 15px",marginRight:"1px",marginLeft:"10px",$nest:{"&:hover":{backgroundColor:"#6c7c7c"},"&:disabled":{backgroundColor:"#a8b3b0"},"&:active":{backgroundColor:"#6c7c7c"}}}),fk=(sk({marginRight:"3px"}),sk({backgroundColor:"#768d87",borderRadius:"2px",border:"none",display:"inline-block",cursor:"pointer",color:"#ffffff",fontFamily:"Lato,Helvetica Neue,Arial,Helvetica,sans-serif",fontSize:"14px",padding:"5px 15px",$nest:{"&:hover":{backgroundColor:"#6c7c7c"},"&:disabled":{backgroundColor:"#a8b3b0"},"&:active":{backgroundColor:"#6c7c7c"}}}));function pk(t,e,n){var r=function(t,e,n){var r=[];return function t(e,n,r,i){var o,a;if(!e[n])return!1;if(n===r)return i.push(n),!0;var s=e[n].children||[];try{for(var u=h(s),c=u.next();!c.done;c=u.next()){var l=c.value;if(t(e,l.id,r,i))return i.push(l.id),!0}}catch(t){o={error:t}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}return!1}(t,e,n,r),p([e],r.reverse())}(t,n,e);return function(t,e,n,r){var i=new Set,o=[],a=0;o.push(t[e]);for(;o.length>0;){var s=o.pop();i.has(s.id)?s.width=n[s.id]:(s.width=a,n[s.id]=s.width,i.add(s.id)),s.children?o.push.apply(o,p(s.children.sort((function(t,e){return(r.includes(t.id)?1:0)-(r.includes(e.id)?1:0)})))):a++}}(t,n,{},r),r}var dk=function(t){return sk({fill:t?"rgb(33, 133, 208)":"white",stroke:"rgb(33, 133, 208)"})};function yk(t){var e=t.prov,n=t.first,r=t.iconOnly,i=t.current,a=t.node,s=t.duration,u=t.radius,c=t.strokeWidth,l=t.textSize,h=t.nodeMap,f=t.annotationOpen,p=t.setBookmark,d=t.bookmark,y=t.setAnnotationOpen,v=t.exemptList,g=t.setExemptList,m=t.bundleMap,_=(t.clusterLabels,t.eventConfig),b=t.popupContent,w=t.editAnnotations,E=t.annotationContent,T=t.expandedClusterList,x={cursor:"pointer"},C=o.a.createElement("circle",{style:x,className:dk(i),r:u,strokeWidth:c}),S=!1;if(_){var I=a.metadata.type;if(I&&I in _&&"Root"!==I){var N=_[I],k=N.bundleGlyph,A=N.currentGlyph,P=N.backboneGlyph;m&&Object.keys(m).includes(a.id)&&(S=!0,C=o.a.createElement("g",{style:x,fontWeight:"none"},k)),i?C=o.a.createElement("g",{style:x,fontWeight:"none"},A):S||(C=o.a.createElement("g",{style:x,fontWeight:"none"},P))}}var O="",R="";if(O=m&&Object.keys(m).includes(a.id)&&a.ephemeral&&T&&!T.includes(a.id)?a.metadata&&a.metadata.type?"["+m[a.id].bunchedNodes.length+"] "+a.metadata.type:"["+m[a.id].bunchedNodes.length+"]":a.label,a.artifacts&&a.artifacts.annotation&&a.artifacts.annotation.length>0&&(R=a.artifacts.annotation),!h[a.id])return null;R.length>20&&(R=R.substr(0,20)+".."),O.length>20&&(O=O.substr(0,20)+"..");var D=o.a.createElement("g",{style:{opacity:1},transform:ck(15,0)},r?o.a.createElement("g",null,S?o.a.createElement("text",{style:x,onClick:function(t){return L(a,t)},fontSize:17,fill:"rgb(248, 191, 132)",textAnchor:"middle",alignmentBaseline:"middle",x:1,y:0,fontFamily:"FontAwesome"},T&&T.includes(a.id)?"":""):o.a.createElement("g",null)):o.a.createElement("g",null,S?o.a.createElement("text",{style:x,onClick:function(t){return L(a,t)},fontSize:17,fill:"rgb(248, 191, 132)",textAnchor:"middle",alignmentBaseline:"middle",x:1,y:0,fontFamily:"FontAwesome"},T&&T.includes(a.id)?"":""):o.a.createElement("g",null),w?o.a.createElement("button",null,o.a.createElement("i",{className:"fas fa-undo marginRight"}),"Undo"):o.a.createElement("g",null),o.a.createElement("text",{y:0===R.length?0:-7,x:S?10:0,dominantBaseline:"middle",textAnchor:"start",fontSize:l,fontWeight:"bold",onClick:function(){return M(a)}},O),",",o.a.createElement("text",{y:7,x:S?10:0,dominantBaseline:"middle",textAnchor:"start",fontSize:l,fontWeight:"regular",onClick:function(){return M(a)}},R),",",o.a.createElement("text",{style:x,onClick:function(t){e&&(e.setBookmark(a.id,!e.getBookmark(a.id)),p(!d)),t.stopPropagation()},fontSize:17,fill:e&&e.getBookmark(a.id)?"#2185d0":"#cccccc",textAnchor:"middle",alignmentBaseline:"middle",x:175,y:0,fontFamily:"FontAwesome"},"")),-1!==f&&h[a.id].depth===f&&E?o.a.createElement("g",null,E(h[a.id])):o.a.createElement("g",null));return o.a.createElement(Qv,{start:{opacity:0},enter:{opacity:[1],timing:{duration:100,delay:n?0:s}}},(function(t){return o.a.createElement(o.a.Fragment,null,void 0!==b&&h[a.id].depth>0?o.a.createElement(UN,{content:b(a),trigger:C}):C,void 0!==b&&h[a.id].depth>0?o.a.createElement(UN,{content:b(a),trigger:D}):D)}));function M(t){E&&(f===h[t.id].depth?y(-1):y(h[t.id].depth))}function L(t,e){if(m&&Object.keys(m).includes(t.id)){var n=Array.from(v);n.includes(t.id)?n.splice(n.findIndex((function(e){return e===t.id})),1):n.push(t.id),g(n)}e.stopPropagation()}}function vk(t,e,n){return t>1?(e+n)*t-n:(e+n)*t}var gk=function(t){return o.a.createElement("line",l({},t))};function mk(t){var e,n,r=t.nodeMap,a=t.root,s=t.current,u=t.changeCurrent,c=t.width,p=void 0===c?1500:c,d=t.height,y=void 0===d?2e3:d,v=t.iconOnly,g=void 0!==v&&v,m=t.gutter,_=void 0===m?15:m,b=t.backboneGutter,w=void 0===b?20:b,E=t.verticalSpace,T=void 0===E?50:E,x=t.annotationHeight,C=void 0===x?100:x,S=t.clusterVerticalSpace,I=void 0===S?50:S,N=t.regularCircleRadius,k=void 0===N?4:N,A=t.backboneCircleRadius,P=void 0===A?5:A,O=t.regularCircleStroke,R=void 0===O?3:O,D=t.backboneCircleStroke,M=void 0===D?3:D,L=t.sideOffset,F=void 0===L?200:L,j=t.topOffset,U=void 0===j?30:j,V=t.textSize,q=void 0===V?15:V,B=t.linkWidth,z=void 0===B?4:B,W=t.duration,H=void 0===W?600:W,Q=t.clusterLabels,G=void 0===Q||Q,Y=t.bundleMap,K=void 0===Y?{}:Y,$=t.eventConfig,X=t.popupContent,J=t.annotationContent,Z=t.editAnnotations,tt=void 0!==Z&&Z,et=(t.undoRedoButtons,t.prov),nt=t.ephemeralUndo,rt=void 0!==nt&&nt,it=f(Object(i.useState)(!0),2),ot=it[0],at=it[1],st=f(Object(i.useState)(!1),2),ut=st[0],ct=st[1],lt=f(Object(i.useState)(-1),2),ht=lt[0],ft=lt[1],pt=[],dt=new Set;for(var yt in r){var vt=r[yt];if(uy(vt)&&(vt.metadata.type&&dt.add(vt.metadata.type),vt.ephemeral&&1==vt.children.length&&(!r[vt.parent].ephemeral||r[vt.parent].children.length>1))){for(var gt=[],mt=vt;mt.ephemeral&&(gt.push(mt.id),1===mt.children.length&&r[mt.children[0]].ephemeral);)mt=r[mt.children[0]];K[vt.id]={metadata:"",bundleLabel:"",bunchedNodes:gt}}}K&&(pt=pt.concat(Object.keys(K)));var _t=f(Object(i.useState)(Object.keys(K)),2),bt=_t[0],wt=_t[1];!$&&dt.size>0&&dt.size<8&&($=function(t){var e,n,r=[wv().type(fv).size(50),wv().type(uv),wv().type(yv),wv().type(iv),wv().type(ov),wv().type(pv),wv().type(bv)],i={},a=0;try{for(var s=h(t),u=s.next();!u.done;u=s.next()){var c=u.value;i[c]={},i[c].backboneGlyph=o.a.createElement("path",{strokeWidth:2,className:dk(!1),d:r[a]()}),i[c].bundleGlyph=o.a.createElement("path",{strokeWidth:2,className:dk(!1),d:r[a]()}),i[c].currentGlyph=o.a.createElement("path",{strokeWidth:2,className:dk(!0),d:r[a]()}),i[c].regularGlyph=o.a.createElement("path",{strokeWidth:2,className:dk(!1),d:r[a]()}),a++}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i}(dt)),Object(i.useEffect)((function(){at(!1)}),[]);var Et=Object.values(r).filter((function(t){return!0})),Tt=Array.from(Et),xt=K?Object.keys(K):[],Ct=[];if(K)try{for(var St=h(xt),It=St.next();!It.done;It=St.next()){var Nt=It.value;(Ct=Ct.concat(K[Nt].bunchedNodes)).push(Nt)}}catch(t){e={error:t}}finally{try{It&&!It.done&&(n=St.return)&&n.call(St)}finally{if(e)throw e.error}}for(var kt=function(){var t=Zy,e=tv;function n(n){var r,i,o,a,s,u,c,l=n.length,h=new Array(l),f={};for(i=0;i<l;++i)r=n[i],s=h[i]=new Ky(r),null!=(u=t(r,i,n))&&(u+="")&&(f[c="$"+(s.id=u)]=c in f?Jy:s);for(i=0;i<l;++i)if(s=h[i],null!=(u=e(n[i],i,n))&&(u+="")){if(!(a=f["$"+u]))throw new Error("missing: "+u);if(a===Jy)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=Xy,o.eachBefore((function(t){t.depth=t.parent.depth+1,--l})).eachBefore(Yy),o.parent=null,l>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=$y(e),n):t},n.parentId=function(t){return arguments.length?(e=$y(t),n):e},n}().id((function(t){return t.id})).parentId((function(t){if(t.id===a)return null;if(uy(t)){if(K&&Object.keys(K).includes(t.id)&&!bt.includes(t.id))for(var e=t,n=function(){var t=e;if(!Ct.includes(t.parent)||Object.keys(K).includes(t.parent))return{value:t.parent};var n=Tt.filter((function(e){return e.id===t.parent}))[0];uy(n)&&(e=n)};;){var r=n();if("object"==typeof r)return r.value}var i=uk(t.parent,K),o=void 0,s=!0;for(var u in i)if(!bt.includes(i[u])){s=!1,o=i[u];break}return Ct.includes(t.parent)&&K&&!Object.keys(K).includes(t.parent)&&!s?o:t.parent}return null})),At=0;At<Et.length;At++){var Pt=uk(Et[At].id,K),Ot=!0;for(var yt in Pt)if(!bt.includes(Pt[yt])){Ot=!1;break}Ct.includes(Et[At].id)&&!Ot&&K&&!Object.keys(K).includes(Et[At].id)&&(Et.splice(At,1),At--)}var Rt=kt(Et),Dt=Rt.descendants(),Mt={};Dt.forEach((function(t){return Mt[t.id]=t})),pk(Mt,s,a);var Lt=0,Ft=0;for(var yt in Dt)Dt[yt].depth>Lt&&(Lt=Dt[yt].depth),Dt[yt].width>Ft&&(Ft=Dt[yt].width);var jt=Rt.links(),Ut=_,Vt=T;function qt(t){if($){var e=t.metadata.type;if(e&&e in $&&"Root"!==e&&$[e].regularGlyph)return $[e].regularGlyph}return o.a.createElement("circle",{r:k,strokeWidth:R,className:dk(!1)})}function Bt(t){if($){var e=t.metadata.type;if(e&&e in $&&"Root"!==e)return $[e].bundleGlyph}return o.a.createElement("circle",{r:k,strokeWidth:R,className:dk(!1)})}var zt=0;0===Ft?zt=30:1===Ft?zt=52:Ft>1&&(zt=74);var Wt=p;return o.a.createElement("div",{style:{overflowX:"auto",overflowY:"auto"},className:_k,id:"prov-vis"},o.a.createElement("div",{id:"undoRedoDiv"},o.a.createElement(lk,{graph:et?et.graph():void 0,undoCallback:function(){et&&(rt?et.goBackToNonEphemeral():et.goBackOneStep())},redoCallback:function(){et&&(rt?et.goForwardToNonEphemeral():et.goForwardOneStep())}})),o.a.createElement("svg",{style:{overflow:"visible"},id:"topSvg",height:Lt<y?y:Lt,width:Wt},o.a.createElement("rect",{height:y,width:p,fill:"none",stroke:"none"}),o.a.createElement("g",{id:"globalG",transform:ck(zt,U)},o.a.createElement(zv,l({data:jt,keyAccessor:function(t){return""+t.source.id+t.target.id}},function(t,e,n,r,i,o,a,s,u,c){void 0===i&&(i=500),t=-t,r=-r;var l=function(){return{x1:0,x2:0,y1:0,y2:0,opacity:0}};return{enter:function(o){var a=0;a=0===a?a:a-1;var c=o.source,l=o.target,h=vk(c.width,t,r),f=vk(l.width,t,r),p=e*c.depth-(e-n)*a,d=e*l.depth-(e-n)*a;return-1!==s&&c.depth>s&&0===c.width&&(p+=u),-1!==s&&l.depth>s&&0===l.width&&(d+=u),{x1:h,x2:f,y1:p,y2:d,opacity:1,timing:{duration:i}}},leave:l,update:function(o){var a=0;a=0===a?a:a-1;var c=o.source,l=o.target,h=vk(c.width,t,r),f=vk(l.width,t,r),p=e*c.depth-(e-n)*a,d=e*l.depth-(e-n)*a;return-1!==s&&c.depth>s&&0===c.width&&(p+=u),-1!==s&&l.depth>s&&0===l.width&&(d+=u),{x1:[h],y1:[p],x2:[f],y2:[d],opacity:1,timing:{duration:i}}},start:l}}(Ut,Vt,I,w-_,H,0,0,ht,C)),(function(t){return o.a.createElement(o.a.Fragment,null,t.map((function(t){var e=t.key,n=t.state;return o.a.createElement("g",{key:e},o.a.createElement(gk,l({},n,{fill:"#ccc",stroke:"#ccc",strokeWidth:z})))})))})),o.a.createElement(zv,l({data:Dt,keyAccessor:function(t){return t.id}},function(t,e,n,r,i,o,a,s,u,c){void 0===i&&(i=500),t=-t,r=-r;var l=function(i){var o=0,l=vk(i.width,t,r),h=void 0,f=uk(i.id,c).filter((function(t){return 0===a[t].width}));f.length>0&&(h=f[0]),o=0===o?o:o-1;var p=e*i.depth-(e-n)*o;return void 0!==h&&c&&!Object.keys(c).includes(i.id)&&(p=e*(a[h].depth-c[h].bunchedNodes.length+2)-(e-n)*o),-1!==s&&i.depth>s&&0===i.width&&(p+=u),{x:l,y:p-e,opacity:0}};return{enter:function(o){var a=0,c=vk(o.width,t,r);a=0===a?a:a-1;var l=e*o.depth-(e-n)*a;return-1!==s&&o.depth>s&&0===o.width&&(l+=u),{x:[c],y:[l],opactiy:1,timing:{duration:i}}},leave:l,update:function(o){var a=0,c=vk(o.width,t,r);a=0===a?a:a-1;var l=e*o.depth-(e-n)*a;return-1!==s&&o.depth>s&&0===o.width&&(l+=u),{x:[c],y:[l],opactiy:1,timing:{duration:i}}},start:l}}(Ut,Vt,I,w-_,H,0,Mt,ht,C,K)),(function(t){return o.a.createElement(o.a.Fragment,null,t.map((function(t){var e=t.data,n=t.key,r=t.state;return o.a.createElement("g",{key:n,onClick:function(){u&&u(e.id)},transform:(e.width,ck(r.x,r.y))},0===e.width?o.a.createElement(yk,{prov:et,textSize:q,iconOnly:g,radius:P,strokeWidth:M,duration:H,first:ot,current:s===e.id,node:e.data,setBookmark:ct,bookmark:ut,bundleMap:K,nodeMap:Mt,clusterLabels:G,annotationOpen:ht,setAnnotationOpen:ft,exemptList:bt,editAnnotations:tt,setExemptList:wt,eventConfig:$,annotationContent:J,popupContent:X,expandedClusterList:bt}):void 0!==X?o.a.createElement(UN,{content:X(e.data),trigger:o.a.createElement("g",{onClick:function(){ft(-1)}},xt.includes(e.id)?Bt(e.data):qt(e.data))}):o.a.createElement("g",{onClick:function(){ft(-1)}},qt(e.data)))})))})),o.a.createElement(zv,l({data:xt,keyAccessor:function(t){return""+t}},function(t,e,n,r,i,o,a,s,u,c,l){void 0===i&&(i=500),t=-t,r=-r;var h=function(){return{x:0,y:0,opacity:0}};return{enter:function(s){var h=vk(a[s].width,t,r),f=a[s].depth,p=a[s].depth;if(l&&o.includes(s))for(var d=0;d<l[s].bunchedNodes.length;d++)a[l[s].bunchedNodes[d]]&&a[l[s].bunchedNodes[d]].depth<f&&(f=a[l[s].bunchedNodes[d]].depth),a[l[s].bunchedNodes[d]]&&a[l[s].bunchedNodes[d]].depth>p&&(p=a[l[s].bunchedNodes[d]].depth);var y=e*f;-1!==u&&f>u&&(y+=c);var v=0;for(var g in l[s].bunchedNodes)a[l[s].bunchedNodes[g]]&&v++;return v*=n,o.includes(s)||(v=10),-1!==u&&u>=f&&u<=p&&(v+=c),{x:[h],y:[y],opacity:[o.includes(s)?1:0],timing:{duration:i},validity:!0,height:v}},leave:h,update:function(s){var h=vk(a[s].width,t,r),f=a[s].depth,p=a[s].depth;if(l&&o.includes(s))for(var d=0;d<l[s].bunchedNodes.length;d++)a[l[s].bunchedNodes[d]]&&a[l[s].bunchedNodes[d]].depth<f&&(f=a[l[s].bunchedNodes[d]].depth),a[l[s].bunchedNodes[d]]&&a[l[s].bunchedNodes[d]].depth>p&&(p=a[l[s].bunchedNodes[d]].depth);var y=e*f;-1!==u&&f>u&&(y+=c);var v=0;for(var g in l[s].bunchedNodes)a[l[s].bunchedNodes[g]]&&v++;return v*=n,o.includes(s)||(v=10),-1!==u&&u>=f&&u<=p&&(v+=c),{x:[h],y:[y],opacity:[o.includes(s)?1:0],timing:{duration:i},validity:!0,height:[v]}},start:h}}(Ut,T,I,w-_,H,bt,Mt,0,ht,C,K)),(function(t){return o.a.createElement(o.a.Fragment,null,t.map((function(t){var e=t.key,n=t.state;return void 0===K||0!==Mt[t.key].width||!1===n.validity?null:o.a.createElement("g",{key:e,transform:ck(n.x-_+5,n.y-I/2)},o.a.createElement("rect",{style:{opacity:n.opacity},width:g?42:F-15,height:n.height,rx:"10",ry:"10",fill:"none",strokeWidth:"2px",stroke:"rgb(248, 191, 132)"}))})))})))))}var _k=sk({alignItems:"center",justifyContent:"center",overflow:"auto"});function bk(t,e,n,r,i,a,s){void 0===i&&(i=!1),void 0===a&&(a=e.graph().root),void 0===s&&(s={}),c.a.render(o.a.createElement(mk,l({},s,{root:a,changeCurrent:n,current:e.graph().current,nodeMap:e.graph().nodes,prov:e,undoRedoButtons:!0,ephemeralUndo:i})),t)}function wk(t,e,n,r){c.a.render(o.a.createElement(lk,{graph:e,undoCallback:n,redoCallback:r}),t)}}.call(this,n(6),n(7))},function(t,e,n){"use strict";
/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(8),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,d=i?Symbol.for("react.memo"):60115,y=i?Symbol.for("react.lazy"):60116,v="function"==typeof Symbol&&Symbol.iterator;function g(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function b(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||m}function w(){}function E(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||m}b.prototype.isReactComponent={},b.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(g(85));this.updater.enqueueSetState(this,t,e,"setState")},b.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},w.prototype=b.prototype;var T=E.prototype=new w;T.constructor=E,r(T,b.prototype),T.isPureReactComponent=!0;var x={current:null},C=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function I(t,e,n){var r,i={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)C.call(e,r)&&!S.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:t,key:a,ref:s,props:i,_owner:x.current}}function N(t){return"object"==typeof t&&null!==t&&t.$$typeof===o}var k=/\/+/g,A=[];function P(t,e,n,r){if(A.length){var i=A.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function O(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>A.length&&A.push(t)}function R(t,e,n){return null==t?0:function t(e,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case o:case a:u=!0}}if(u)return r(i,e,""===n?"."+D(e,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=n+D(s=e[c],c);u+=t(s,l,r,i)}else if(null===e||"object"!=typeof e?l=null:l="function"==typeof(l=v&&e[v]||e["@@iterator"])?l:null,"function"==typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=t(s=s.value,l=n+D(s,c++),r,i);else if("object"===s)throw r=""+e,Error(g(31,"[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r,""));return u}(t,"",e,n)}function D(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function M(t,e){t.func.call(t.context,e,t.count++)}function L(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?F(t,r,n,(function(t){return t})):null!=t&&(N(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(k,"$&/")+"/")+n)),r.push(t))}function F(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(k,"$&/")+"/"),R(t,L,e=P(e,o,r,i)),O(e)}var j={current:null};function U(){var t=j.current;if(null===t)throw Error(g(321));return t}var V={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:function(t,e,n){if(null==t)return t;var r=[];return F(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;R(t,M,e=P(null,null,e,n)),O(e)},count:function(t){return R(t,(function(){return null}),null)},toArray:function(t){var e=[];return F(t,e,null,(function(t){return t})),e},only:function(t){if(!N(t))throw Error(g(143));return t}},e.Component=b,e.Fragment=s,e.Profiler=c,e.PureComponent=E,e.StrictMode=u,e.Suspense=p,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,e.cloneElement=function(t,e,n){if(null==t)throw Error(g(267,t));var i=r({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=x.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(l in e)C.call(e,l)&&!S.hasOwnProperty(l)&&(i[l]=void 0===e[l]&&void 0!==c?c[l]:e[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}return{$$typeof:o,type:t.type,key:a,ref:s,props:i,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:t},t.Consumer=t},e.createElement=I,e.createFactory=function(t){var e=I.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:f,render:t}},e.isValidElement=N,e.lazy=function(t){return{$$typeof:y,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return U().useCallback(t,e)},e.useContext=function(t,e){return U().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return U().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return U().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return U().useLayoutEffect(t,e)},e.useMemo=function(t,e){return U().useMemo(t,e)},e.useReducer=function(t,e,n){return U().useReducer(t,e,n)},e.useRef=function(t){return U().useRef(t)},e.useState=function(t){return U().useState(t)},e.version="16.13.1"},function(t,e,n){"use strict";var r=n(16);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";
/** @license React v16.13.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(0),i=n(8),o=n(18);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));function s(t,e,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(t){this.onError(t)}}var u=!1,c=null,l=!1,h=null,f={onError:function(t){u=!0,c=t}};function p(t,e,n,r,i,o,a,l,h){u=!1,c=null,s.apply(f,arguments)}var d=null,y=null,v=null;function g(t,e,n){var r=t.type||"unknown-event";t.currentTarget=v(n),function(t,e,n,r,i,o,s,f,d){if(p.apply(this,arguments),u){if(!u)throw Error(a(198));var y=c;u=!1,c=null,l||(l=!0,h=y)}}(r,e,void 0,t),t.currentTarget=null}var m=null,_={};function b(){if(m)for(var t in _){var e=_[t],n=m.indexOf(t);if(!(-1<n))throw Error(a(96,t));if(!E[n]){if(!e.extractEvents)throw Error(a(97,t));for(var r in E[n]=e,n=e.eventTypes){var i=void 0,o=n[r],s=e,u=r;if(T.hasOwnProperty(u))throw Error(a(99,u));T[u]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&w(c[i],s,u);i=!0}else o.registrationName?(w(o.registrationName,s,u),i=!0):i=!1;if(!i)throw Error(a(98,r,t))}}}}function w(t,e,n){if(x[t])throw Error(a(100,t));x[t]=e,C[t]=e.eventTypes[n].dependencies}var E=[],T={},x={},C={};function S(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];if(!_.hasOwnProperty(e)||_[e]!==r){if(_[e])throw Error(a(102,e));_[e]=r,n=!0}}n&&b()}var I=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),N=null,k=null,A=null;function P(t){if(t=y(t)){if("function"!=typeof N)throw Error(a(280));var e=t.stateNode;e&&(e=d(e),N(t.stateNode,t.type,e))}}function O(t){k?A?A.push(t):A=[t]:k=t}function R(){if(k){var t=k,e=A;if(A=k=null,P(t),e)for(t=0;t<e.length;t++)P(e[t])}}function D(t,e){return t(e)}function M(t,e,n,r,i){return t(e,n,r,i)}function L(){}var F=D,j=!1,U=!1;function V(){null===k&&null===A||(L(),R())}function q(t,e,n){if(U)return t(e,n);U=!0;try{return F(t,e,n)}finally{U=!1,V()}}var B=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,z=Object.prototype.hasOwnProperty,W={},H={};function Q(t,e,n,r,i,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){G[t]=new Q(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];G[e]=new Q(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){G[t]=new Q(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){G[t]=new Q(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){G[t]=new Q(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){G[t]=new Q(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){G[t]=new Q(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){G[t]=new Q(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){G[t]=new Q(t,5,!1,t.toLowerCase(),null,!1)}));var Y=/[\-:]([a-z])/g;function K(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(Y,K);G[e]=new Q(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(Y,K);G[e]=new Q(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(Y,K);G[e]=new Q(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){G[t]=new Q(t,1,!1,t.toLowerCase(),null,!1)})),G.xlinkHref=new Q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){G[t]=new Q(t,1,!1,t.toLowerCase(),null,!0)}));var $=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function X(t,e,n,r){var i=G.hasOwnProperty(e)?G[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null==e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!z.call(H,t)||!z.call(W,t)&&(B.test(t)?H[t]=!0:(W[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}$.hasOwnProperty("ReactCurrentDispatcher")||($.ReactCurrentDispatcher={current:null}),$.hasOwnProperty("ReactCurrentBatchConfig")||($.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,Z="function"==typeof Symbol&&Symbol.for,tt=Z?Symbol.for("react.element"):60103,et=Z?Symbol.for("react.portal"):60106,nt=Z?Symbol.for("react.fragment"):60107,rt=Z?Symbol.for("react.strict_mode"):60108,it=Z?Symbol.for("react.profiler"):60114,ot=Z?Symbol.for("react.provider"):60109,at=Z?Symbol.for("react.context"):60110,st=Z?Symbol.for("react.concurrent_mode"):60111,ut=Z?Symbol.for("react.forward_ref"):60112,ct=Z?Symbol.for("react.suspense"):60113,lt=Z?Symbol.for("react.suspense_list"):60120,ht=Z?Symbol.for("react.memo"):60115,ft=Z?Symbol.for("react.lazy"):60116,pt=Z?Symbol.for("react.block"):60121,dt="function"==typeof Symbol&&Symbol.iterator;function yt(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=dt&&t[dt]||t["@@iterator"])?t:null}function vt(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case nt:return"Fragment";case et:return"Portal";case it:return"Profiler";case rt:return"StrictMode";case ct:return"Suspense";case lt:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case at:return"Context.Consumer";case ot:return"Context.Provider";case ut:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case ht:return vt(t.type);case pt:return vt(t.render);case ft:if(t=1===t._status?t._result:null)return vt(t)}return null}function gt(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var r=t._debugOwner,i=t._debugSource,o=vt(t.type);n=null,r&&(n=vt(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(J,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}e+=n,t=t.return}while(t);return e}function mt(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function _t(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function bt(t){t._valueTracker||(t._valueTracker=function(t){var e=_t(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function wt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_t(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function Et(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Tt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=mt(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function xt(t,e){null!=(e=e.checked)&&X(t,"checked",e,!1)}function Ct(t,e){xt(t,e);var n=mt(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?It(t,e.type,n):e.hasOwnProperty("defaultValue")&&It(t,e.type,mt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function St(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function It(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function Nt(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function kt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+mt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function At(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:mt(n)}}function Ot(t,e){var n=mt(e.value),r=mt(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function Rt(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var Dt="http://www.w3.org/1999/xhtml",Mt="http://www.w3.org/2000/svg";function Lt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ft(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Lt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var jt,Ut=function(t){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction((function(){return t(e,n)}))}:t}((function(t,e){if(t.namespaceURI!==Mt||"innerHTML"in t)t.innerHTML=e;else{for((jt=jt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=jt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function Vt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function qt(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bt={animationend:qt("Animation","AnimationEnd"),animationiteration:qt("Animation","AnimationIteration"),animationstart:qt("Animation","AnimationStart"),transitionend:qt("Transition","TransitionEnd")},zt={},Wt={};function Ht(t){if(zt[t])return zt[t];if(!Bt[t])return t;var e,n=Bt[t];for(e in n)if(n.hasOwnProperty(e)&&e in Wt)return zt[t]=n[e];return t}I&&(Wt=document.createElement("div").style,"AnimationEvent"in window||(delete Bt.animationend.animation,delete Bt.animationiteration.animation,delete Bt.animationstart.animation),"TransitionEvent"in window||delete Bt.transitionend.transition);var Qt=Ht("animationend"),Gt=Ht("animationiteration"),Yt=Ht("animationstart"),Kt=Ht("transitionend"),$t="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xt=new("function"==typeof WeakMap?WeakMap:Map);function Jt(t){var e=Xt.get(t);return void 0===e&&(e=new Map,Xt.set(t,e)),e}function Zt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(1026&(e=t).effectTag)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function te(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function ee(t){if(Zt(t)!==t)throw Error(a(188))}function ne(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=Zt(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ee(i),t;if(o===r)return ee(i),e;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function re(t,e){if(null==e)throw Error(a(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function ie(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var oe=null;function ae(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)g(t,e[r],n[r]);else e&&g(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function se(t){if(null!==t&&(oe=re(oe,t)),t=oe,oe=null,t){if(ie(t,ae),oe)throw Error(a(95));if(l)throw t=h,l=!1,h=null,t}}function ue(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function ce(t){if(!I)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"==typeof e[t]),e}var le=[];function he(t){t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>le.length&&le.push(t)}function fe(t,e,n,r){if(le.length){var i=le.pop();return i.topLevelType=t,i.eventSystemFlags=r,i.nativeEvent=e,i.targetInst=n,i}return{topLevelType:t,eventSystemFlags:r,nativeEvent:e,targetInst:n,ancestors:[]}}function pe(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(e=n.tag)&&6!==e||t.ancestors.push(n),n=In(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=ue(t.nativeEvent);r=t.topLevelType;var o=t.nativeEvent,a=t.eventSystemFlags;0===n&&(a|=64);for(var s=null,u=0;u<E.length;u++){var c=E[u];c&&(c=c.extractEvents(r,e,o,i,a))&&(s=re(s,c))}se(s)}}function de(t,e,n){if(!n.has(t)){switch(t){case"scroll":Ye(e,"scroll",!0);break;case"focus":case"blur":Ye(e,"focus",!0),Ye(e,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ce(t)&&Ye(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===$t.indexOf(t)&&Ge(t,e)}n.set(t,null)}}var ye,ve,ge,me=!1,_e=[],be=null,we=null,Ee=null,Te=new Map,xe=new Map,Ce=[],Se="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ie="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Ne(t,e,n,r,i){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|n,nativeEvent:i,container:r}}function ke(t,e){switch(t){case"focus":case"blur":be=null;break;case"dragenter":case"dragleave":we=null;break;case"mouseover":case"mouseout":Ee=null;break;case"pointerover":case"pointerout":Te.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xe.delete(e.pointerId)}}function Ae(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=Ne(e,n,r,i,o),null!==e&&(null!==(e=Nn(e))&&ve(e)),t):(t.eventSystemFlags|=r,t)}function Pe(t){var e=In(t.target);if(null!==e){var n=Zt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=te(n)))return t.blockedOn=e,void o.unstable_runWithPriority(t.priority,(function(){ge(n)}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Oe(t){if(null!==t.blockedOn)return!1;var e=Je(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);if(null!==e){var n=Nn(e);return null!==n&&ve(n),t.blockedOn=e,!1}return!0}function Re(t,e,n){Oe(t)&&n.delete(e)}function De(){for(me=!1;0<_e.length;){var t=_e[0];if(null!==t.blockedOn){null!==(t=Nn(t.blockedOn))&&ye(t);break}var e=Je(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);null!==e?t.blockedOn=e:_e.shift()}null!==be&&Oe(be)&&(be=null),null!==we&&Oe(we)&&(we=null),null!==Ee&&Oe(Ee)&&(Ee=null),Te.forEach(Re),xe.forEach(Re)}function Me(t,e){t.blockedOn===e&&(t.blockedOn=null,me||(me=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,De)))}function Le(t){function e(e){return Me(e,t)}if(0<_e.length){Me(_e[0],t);for(var n=1;n<_e.length;n++){var r=_e[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==be&&Me(be,t),null!==we&&Me(we,t),null!==Ee&&Me(Ee,t),Te.forEach(e),xe.forEach(e),n=0;n<Ce.length;n++)(r=Ce[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Ce.length&&null===(n=Ce[0]).blockedOn;)Pe(n),null===n.blockedOn&&Ce.shift()}var Fe={},je=new Map,Ue=new Map,Ve=["abort","abort",Qt,"animationEnd",Gt,"animationIteration",Yt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Kt,"transitionEnd","waiting","waiting"];function qe(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:e},Ue.set(r,e),je.set(r,o),Fe[i]=o}}qe("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),qe("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),qe(Ve,2);for(var Be="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ze=0;ze<Be.length;ze++)Ue.set(Be[ze],0);var We=o.unstable_UserBlockingPriority,He=o.unstable_runWithPriority,Qe=!0;function Ge(t,e){Ye(e,t,!1)}function Ye(t,e,n){var r=Ue.get(e);switch(void 0===r?2:r){case 0:r=Ke.bind(null,e,1,t);break;case 1:r=$e.bind(null,e,1,t);break;default:r=Xe.bind(null,e,1,t)}n?t.addEventListener(e,r,!0):t.addEventListener(e,r,!1)}function Ke(t,e,n,r){j||L();var i=Xe,o=j;j=!0;try{M(i,t,e,n,r)}finally{(j=o)||V()}}function $e(t,e,n,r){He(We,Xe.bind(null,t,e,n,r))}function Xe(t,e,n,r){if(Qe)if(0<_e.length&&-1<Se.indexOf(t))t=Ne(null,t,e,n,r),_e.push(t);else{var i=Je(t,e,n,r);if(null===i)ke(t,r);else if(-1<Se.indexOf(t))t=Ne(i,t,e,n,r),_e.push(t);else if(!function(t,e,n,r,i){switch(e){case"focus":return be=Ae(be,t,e,n,r,i),!0;case"dragenter":return we=Ae(we,t,e,n,r,i),!0;case"mouseover":return Ee=Ae(Ee,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Te.set(o,Ae(Te.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,xe.set(o,Ae(xe.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r)){ke(t,r),t=fe(t,r,null,e);try{q(pe,t)}finally{he(t)}}}}function Je(t,e,n,r){if(null!==(n=In(n=ue(r)))){var i=Zt(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=te(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}t=fe(t,r,n,e);try{q(pe,t)}finally{he(t)}return null}var Ze={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function en(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||Ze.hasOwnProperty(t)&&Ze[t]?(""+e).trim():e+"px"}function nn(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=en(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(Ze).forEach((function(t){tn.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ze[e]=Ze[t]}))}));var rn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(t,e){if(e){if(rn[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(a(62,""))}}function an(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=Dt;function un(t,e){var n=Jt(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=C[e];for(var r=0;r<e.length;r++)de(e[r],t,n)}function cn(){}function ln(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function hn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fn(t,e){var n,r=hn(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=hn(r)}}function pn(){for(var t=window,e=ln();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=ln((t=e.contentWindow).document)}return e}function dn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var yn=null,vn=null;function gn(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function mn(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var _n="function"==typeof setTimeout?setTimeout:void 0,bn="function"==typeof clearTimeout?clearTimeout:void 0;function wn(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function En(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var Tn=Math.random().toString(36).slice(2),xn="__reactInternalInstance$"+Tn,Cn="__reactEventHandlers$"+Tn,Sn="__reactContainere$"+Tn;function In(t){var e=t[xn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Sn]||n[xn]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=En(t);null!==t;){if(n=t[xn])return n;t=En(t)}return e}n=(t=n).parentNode}return null}function Nn(t){return!(t=t[xn]||t[Sn])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function kn(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function An(t){return t[Cn]||null}function Pn(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function On(t,e){var n=t.stateNode;if(!n)return null;var r=d(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(a(231,e,typeof n));return n}function Rn(t,e,n){(e=On(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=re(n._dispatchListeners,e),n._dispatchInstances=re(n._dispatchInstances,t))}function Dn(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=Pn(e);for(e=n.length;0<e--;)Rn(n[e],"captured",t);for(e=0;e<n.length;e++)Rn(n[e],"bubbled",t)}}function Mn(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=On(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=re(n._dispatchListeners,e),n._dispatchInstances=re(n._dispatchInstances,t))}function Ln(t){t&&t.dispatchConfig.registrationName&&Mn(t._targetInst,null,t)}function Fn(t){ie(t,Dn)}var jn=null,Un=null,Vn=null;function qn(){if(Vn)return Vn;var t,e,n=Un,r=n.length,i="value"in jn?jn.value:jn.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return Vn=i.slice(t,1<e?1-e:void 0)}function Bn(){return!0}function zn(){return!1}function Wn(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Bn:zn,this.isPropagationStopped=zn,this}function Hn(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function Qn(t){if(!(t instanceof this))throw Error(a(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function Gn(t){t.eventPool=[],t.getPooled=Hn,t.release=Qn}i(Wn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Bn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Bn)},persist:function(){this.isPersistent=Bn},isPersistent:zn,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=zn,this._dispatchInstances=this._dispatchListeners=null}}),Wn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Wn.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var o=new e;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,Gn(n),n},Gn(Wn);var Yn=Wn.extend({data:null}),Kn=Wn.extend({data:null}),$n=[9,13,27,32],Xn=I&&"CompositionEvent"in window,Jn=null;I&&"documentMode"in document&&(Jn=document.documentMode);var Zn=I&&"TextEvent"in window&&!Jn,tr=I&&(!Xn||Jn&&8<Jn&&11>=Jn),er=String.fromCharCode(32),nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rr=!1;function ir(t,e){switch(t){case"keyup":return-1!==$n.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function or(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var ar=!1;var sr={eventTypes:nr,extractEvents:function(t,e,n,r){var i;if(Xn)t:{switch(t){case"compositionstart":var o=nr.compositionStart;break t;case"compositionend":o=nr.compositionEnd;break t;case"compositionupdate":o=nr.compositionUpdate;break t}o=void 0}else ar?ir(t,n)&&(o=nr.compositionEnd):"keydown"===t&&229===n.keyCode&&(o=nr.compositionStart);return o?(tr&&"ko"!==n.locale&&(ar||o!==nr.compositionStart?o===nr.compositionEnd&&ar&&(i=qn()):(Un="value"in(jn=r)?jn.value:jn.textContent,ar=!0)),o=Yn.getPooled(o,e,n,r),i?o.data=i:null!==(i=or(n))&&(o.data=i),Fn(o),i=o):i=null,(t=Zn?function(t,e){switch(t){case"compositionend":return or(e);case"keypress":return 32!==e.which?null:(rr=!0,er);case"textInput":return(t=e.data)===er&&rr?null:t;default:return null}}(t,n):function(t,e){if(ar)return"compositionend"===t||!Xn&&ir(t,e)?(t=qn(),Vn=Un=jn=null,ar=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tr&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=Kn.getPooled(nr.beforeInput,e,n,r)).data=t,Fn(e)):e=null,null===i?e:null===e?i:[i,e]}},ur={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!ur[t.type]:"textarea"===e}var lr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function hr(t,e,n){return(t=Wn.getPooled(lr.change,t,e,n)).type="change",O(n),Fn(t),t}var fr=null,pr=null;function dr(t){se(t)}function yr(t){if(wt(kn(t)))return t}function vr(t,e){if("change"===t)return e}var gr=!1;function mr(){fr&&(fr.detachEvent("onpropertychange",_r),pr=fr=null)}function _r(t){if("value"===t.propertyName&&yr(pr))if(t=hr(pr,t,ue(t)),j)se(t);else{j=!0;try{D(dr,t)}finally{j=!1,V()}}}function br(t,e,n){"focus"===t?(mr(),pr=n,(fr=e).attachEvent("onpropertychange",_r)):"blur"===t&&mr()}function wr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return yr(pr)}function Er(t,e){if("click"===t)return yr(e)}function Tr(t,e){if("input"===t||"change"===t)return yr(e)}I&&(gr=ce("input")&&(!document.documentMode||9<document.documentMode));var xr={eventTypes:lr,_isInputEventSupported:gr,extractEvents:function(t,e,n,r){var i=e?kn(e):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=vr;else if(cr(i))if(gr)a=Tr;else{a=wr;var s=br}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Er);if(a&&(a=a(t,e)))return hr(a,n,r);s&&s(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&It(i,"number",i.value)}},Cr=Wn.extend({view:null,detail:null}),Sr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ir(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Sr[t])&&!!e[t]}function Nr(){return Ir}var kr=0,Ar=0,Pr=!1,Or=!1,Rr=Cr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Nr,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=kr;return kr=t.screenX,Pr?"mousemove"===t.type?t.screenX-e:0:(Pr=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Ar;return Ar=t.screenY,Or?"mousemove"===t.type?t.screenY-e:0:(Or=!0,0)}}),Dr=Rr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Mr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Lr={eventTypes:Mr,extractEvents:function(t,e,n,r,i){var o="mouseover"===t||"pointerover"===t,a="mouseout"===t||"pointerout"===t;if(o&&0==(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,a)?(a=e,null!==(e=(e=n.relatedTarget||n.toElement)?In(e):null)&&(e!==Zt(e)||5!==e.tag&&6!==e.tag)&&(e=null)):a=null;if(a===e)return null;if("mouseout"===t||"mouseover"===t)var s=Rr,u=Mr.mouseLeave,c=Mr.mouseEnter,l="mouse";else"pointerout"!==t&&"pointerover"!==t||(s=Dr,u=Mr.pointerLeave,c=Mr.pointerEnter,l="pointer");if(t=null==a?o:kn(a),o=null==e?o:kn(e),(u=s.getPooled(u,a,n,r)).type=l+"leave",u.target=t,u.relatedTarget=o,(n=s.getPooled(c,e,n,r)).type=l+"enter",n.target=o,n.relatedTarget=t,l=e,(r=a)&&l)t:{for(c=l,a=0,t=s=r;t;t=Pn(t))a++;for(t=0,e=c;e;e=Pn(e))t++;for(;0<a-t;)s=Pn(s),a--;for(;0<t-a;)c=Pn(c),t--;for(;a--;){if(s===c||s===c.alternate)break t;s=Pn(s),c=Pn(c)}s=null}else s=null;for(c=s,s=[];r&&r!==c&&(null===(a=r.alternate)||a!==c);)s.push(r),r=Pn(r);for(r=[];l&&l!==c&&(null===(a=l.alternate)||a!==c);)r.push(l),l=Pn(l);for(l=0;l<s.length;l++)Mn(s[l],"bubbled",u);for(l=r.length;0<l--;)Mn(r[l],"captured",n);return 0==(64&i)?[u]:[u,n]}};var Fr="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},jr=Object.prototype.hasOwnProperty;function Ur(t,e){if(Fr(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!jr.call(e,n[r])||!Fr(t[n[r]],e[n[r]]))return!1;return!0}var Vr=I&&"documentMode"in document&&11>=document.documentMode,qr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Br=null,zr=null,Wr=null,Hr=!1;function Qr(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Hr||null==Br||Br!==ln(n)?null:("selectionStart"in(n=Br)&&dn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Wr&&Ur(Wr,n)?null:(Wr=n,(t=Wn.getPooled(qr.select,zr,t,e)).type="select",t.target=Br,Fn(t),t))}var Gr={eventTypes:qr,extractEvents:function(t,e,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){t:{i=Jt(i),o=C.onSelect;for(var a=0;a<o.length;a++)if(!i.has(o[a])){i=!1;break t}i=!0}o=!i}if(o)return null;switch(i=e?kn(e):window,t){case"focus":(cr(i)||"true"===i.contentEditable)&&(Br=i,zr=e,Wr=null);break;case"blur":Wr=zr=Br=null;break;case"mousedown":Hr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Hr=!1,Qr(n,r);case"selectionchange":if(Vr)break;case"keydown":case"keyup":return Qr(n,r)}return null}},Yr=Wn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Kr=Wn.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$r=Cr.extend({relatedTarget:null});function Xr(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var Jr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ti=Cr.extend({key:function(t){if(t.key){var e=Jr[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=Xr(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Zr[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Nr,charCode:function(t){return"keypress"===t.type?Xr(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?Xr(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),ei=Rr.extend({dataTransfer:null}),ni=Cr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Nr}),ri=Wn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ii=Rr.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),oi={eventTypes:Fe,extractEvents:function(t,e,n,r){var i=je.get(t);if(!i)return null;switch(t){case"keypress":if(0===Xr(n))return null;case"keydown":case"keyup":t=ti;break;case"blur":case"focus":t=$r;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Rr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=ei;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=ni;break;case Qt:case Gt:case Yt:t=Yr;break;case Kt:t=ri;break;case"scroll":t=Cr;break;case"wheel":t=ii;break;case"copy":case"cut":case"paste":t=Kr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Dr;break;default:t=Wn}return Fn(e=t.getPooled(i,e,n,r)),e}};if(m)throw Error(a(101));m=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),b(),d=An,y=Nn,v=kn,S({SimpleEventPlugin:oi,EnterLeaveEventPlugin:Lr,ChangeEventPlugin:xr,SelectEventPlugin:Gr,BeforeInputEventPlugin:sr});var ai=[],si=-1;function ui(t){0>si||(t.current=ai[si],ai[si]=null,si--)}function ci(t,e){si++,ai[si]=t.current,t.current=e}var li={},hi={current:li},fi={current:!1},pi=li;function di(t,e){var n=t.type.contextTypes;if(!n)return li;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function yi(t){return null!=(t=t.childContextTypes)}function vi(){ui(fi),ui(hi)}function gi(t,e,n){if(hi.current!==li)throw Error(a(168));ci(hi,e),ci(fi,n)}function mi(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,vt(e)||"Unknown",o));return i({},n,{},r)}function _i(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||li,pi=hi.current,ci(hi,t),ci(fi,fi.current),!0}function bi(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=mi(t,e,pi),r.__reactInternalMemoizedMergedChildContext=t,ui(fi),ui(hi),ci(hi,t)):ui(fi),ci(fi,n)}var wi=o.unstable_runWithPriority,Ei=o.unstable_scheduleCallback,Ti=o.unstable_cancelCallback,xi=o.unstable_requestPaint,Ci=o.unstable_now,Si=o.unstable_getCurrentPriorityLevel,Ii=o.unstable_ImmediatePriority,Ni=o.unstable_UserBlockingPriority,ki=o.unstable_NormalPriority,Ai=o.unstable_LowPriority,Pi=o.unstable_IdlePriority,Oi={},Ri=o.unstable_shouldYield,Di=void 0!==xi?xi:function(){},Mi=null,Li=null,Fi=!1,ji=Ci(),Ui=1e4>ji?Ci:function(){return Ci()-ji};function Vi(){switch(Si()){case Ii:return 99;case Ni:return 98;case ki:return 97;case Ai:return 96;case Pi:return 95;default:throw Error(a(332))}}function qi(t){switch(t){case 99:return Ii;case 98:return Ni;case 97:return ki;case 96:return Ai;case 95:return Pi;default:throw Error(a(332))}}function Bi(t,e){return t=qi(t),wi(t,e)}function zi(t,e,n){return t=qi(t),Ei(t,e,n)}function Wi(t){return null===Mi?(Mi=[t],Li=Ei(Ii,Qi)):Mi.push(t),Oi}function Hi(){if(null!==Li){var t=Li;Li=null,Ti(t)}Qi()}function Qi(){if(!Fi&&null!==Mi){Fi=!0;var t=0;try{var e=Mi;Bi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Mi=null}catch(e){throw null!==Mi&&(Mi=Mi.slice(t+1)),Ei(Ii,Hi),e}finally{Fi=!1}}}function Gi(t,e,n){return 1073741821-(1+((1073741821-t+e/10)/(n/=10)|0))*n}function Yi(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var Ki={current:null},$i=null,Xi=null,Ji=null;function Zi(){Ji=Xi=$i=null}function to(t){var e=Ki.current;ui(Ki),t.type._context._currentValue=e}function eo(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function no(t,e){$i=t,Ji=Xi=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(Aa=!0),t.firstContext=null)}function ro(t,e){if(Ji!==t&&!1!==e&&0!==e)if("number"==typeof e&&1073741823!==e||(Ji=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Xi){if(null===$i)throw Error(a(308));Xi=e,$i.dependencies={expirationTime:0,firstContext:e,responders:null}}else Xi=Xi.next=e;return t._currentValue}var io=!1;function oo(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ao(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects})}function so(t,e){return(t={expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null}).next=t}function uo(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function co(t,e){var n=t.alternate;null!==n&&ao(n,t),null===(n=(t=t.updateQueue).baseQueue)?(t.baseQueue=e.next=e,e.next=e):(e.next=n.next,n.next=e)}function lo(t,e,n,r){var o=t.updateQueue;io=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var u=a.next;a.next=s.next,s.next=u}a=s,o.shared.pending=null,null!==(u=t.alternate)&&(null!==(u=u.updateQueue)&&(u.baseQueue=s))}if(null!==a){u=a.next;var c=o.baseState,l=0,h=null,f=null,p=null;if(null!==u)for(var d=u;;){if((s=d.expirationTime)<r){var y={expirationTime:d.expirationTime,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null};null===p?(f=p=y,h=c):p=p.next=y,s>l&&(l=s)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null}),ou(s,d.suspenseConfig);t:{var v=t,g=d;switch(s=e,y=n,g.tag){case 1:if("function"==typeof(v=g.payload)){c=v.call(y,c,s);break t}c=v;break t;case 3:v.effectTag=-4097&v.effectTag|64;case 0:if(null==(s="function"==typeof(v=g.payload)?v.call(y,c,s):v))break t;c=i({},c,s);break t;case 2:io=!0}}null!==d.callback&&(t.effectTag|=32,null===(s=o.effects)?o.effects=[d]:s.push(d))}if(null===(d=d.next)||d===u){if(null===(s=o.shared.pending))break;d=a.next=s.next,s.next=u,o.baseQueue=a=s,o.shared.pending=null}}null===p?h=c:p.next=f,o.baseState=h,o.baseQueue=p,au(l),t.expirationTime=l,t.memoizedState=c}}function ho(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!=typeof r)throw Error(a(191,r));r.call(i)}}}var fo=$.ReactCurrentBatchConfig,po=(new r.Component).refs;function yo(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:i({},e,n),t.memoizedState=n,0===t.expirationTime&&(t.updateQueue.baseState=n)}var vo={isMounted:function(t){return!!(t=t._reactInternalFiber)&&Zt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=Qs(),i=fo.suspense;(i=so(r=Gs(r,t,i),i)).payload=e,null!=n&&(i.callback=n),uo(t,i),Ys(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=Qs(),i=fo.suspense;(i=so(r=Gs(r,t,i),i)).tag=1,i.payload=e,null!=n&&(i.callback=n),uo(t,i),Ys(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=Qs(),r=fo.suspense;(r=so(n=Gs(n,t,r),r)).tag=2,null!=e&&(r.callback=e),uo(t,r),Ys(t,n)}};function go(t,e,n,r,i,o,a){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!Ur(n,r)||!Ur(i,o))}function mo(t,e,n){var r=!1,i=li,o=e.contextType;return"object"==typeof o&&null!==o?o=ro(o):(i=yi(e)?pi:hi.current,o=(r=null!=(r=e.contextTypes))?di(t,i):li),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=vo,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function _o(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&vo.enqueueReplaceState(e,e.state,null)}function bo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=po,oo(t);var o=e.contextType;"object"==typeof o&&null!==o?i.context=ro(o):(o=yi(e)?pi:hi.current,i.context=di(t,o)),lo(t,n,i,r),i.state=t.memoizedState,"function"==typeof(o=e.getDerivedStateFromProps)&&(yo(t,e,o,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&vo.enqueueReplaceState(i,i.state,null),lo(t,n,i,r),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.effectTag|=4)}var wo=Array.isArray;function Eo(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===po&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!=typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function To(t,e){if("textarea"!==t.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function xo(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Su(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=ku(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=Eo(t,e,n),r.return=t,r):((r=Iu(n.type,n.key,n.props,null,t.mode,r)).ref=Eo(t,e,n),r.return=t,r)}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Au(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=Nu(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function f(t,e,n){if("string"==typeof e||"number"==typeof e)return(e=ku(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case tt:return(n=Iu(e.type,e.key,e.props,null,t.mode,n)).ref=Eo(t,null,e),n.return=t,n;case et:return(e=Au(e,t.mode,n)).return=t,e}if(wo(e)||yt(e))return(e=Nu(e,t.mode,n,null)).return=t,e;To(t,e)}return null}function p(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:u(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case tt:return n.key===i?n.type===nt?h(t,e,n.props.children,r,i):c(t,e,n,r):null;case et:return n.key===i?l(t,e,n,r):null}if(wo(n)||yt(n))return null!==i?null:h(t,e,n,r,null);To(t,n)}return null}function d(t,e,n,r,i){if("string"==typeof r||"number"==typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case tt:return t=t.get(null===r.key?n:r.key)||null,r.type===nt?h(e,t,r.props.children,i,r.key):c(e,t,r,i);case et:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(wo(r)||yt(r))return h(e,t=t.get(n)||null,r,i,null);To(e,r)}return null}function y(i,a,s,u){for(var c=null,l=null,h=a,y=a=0,v=null;null!==h&&y<s.length;y++){h.index>y?(v=h,h=null):v=h.sibling;var g=p(i,h,s[y],u);if(null===g){null===h&&(h=v);break}t&&h&&null===g.alternate&&e(i,h),a=o(g,a,y),null===l?c=g:l.sibling=g,l=g,h=v}if(y===s.length)return n(i,h),c;if(null===h){for(;y<s.length;y++)null!==(h=f(i,s[y],u))&&(a=o(h,a,y),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);y<s.length;y++)null!==(v=d(h,i,y,s[y],u))&&(t&&null!==v.alternate&&h.delete(null===v.key?y:v.key),a=o(v,a,y),null===l?c=v:l.sibling=v,l=v);return t&&h.forEach((function(t){return e(i,t)})),c}function v(i,s,u,c){var l=yt(u);if("function"!=typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,y=s,v=s=0,g=null,m=u.next();null!==y&&!m.done;v++,m=u.next()){y.index>v?(g=y,y=null):g=y.sibling;var _=p(i,y,m.value,c);if(null===_){null===y&&(y=g);break}t&&y&&null===_.alternate&&e(i,y),s=o(_,s,v),null===h?l=_:h.sibling=_,h=_,y=g}if(m.done)return n(i,y),l;if(null===y){for(;!m.done;v++,m=u.next())null!==(m=f(i,m.value,c))&&(s=o(m,s,v),null===h?l=m:h.sibling=m,h=m);return l}for(y=r(i,y);!m.done;v++,m=u.next())null!==(m=d(y,i,v,m.value,c))&&(t&&null!==m.alternate&&y.delete(null===m.key?v:m.key),s=o(m,s,v),null===h?l=m:h.sibling=m,h=m);return t&&y.forEach((function(t){return e(i,t)})),l}return function(t,r,o,u){var c="object"==typeof o&&null!==o&&o.type===nt&&null===o.key;c&&(o=o.props.children);var l="object"==typeof o&&null!==o;if(l)switch(o.$$typeof){case tt:t:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===nt){n(t,c.sibling),(r=i(c,o.props.children)).return=t,t=r;break t}break;default:if(c.elementType===o.type){n(t,c.sibling),(r=i(c,o.props)).ref=Eo(t,c,o),r.return=t,t=r;break t}}n(t,c);break}e(t,c),c=c.sibling}o.type===nt?((r=Nu(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=Iu(o.type,o.key,o.props,null,t.mode,u)).ref=Eo(t,r,o),u.return=t,t=u)}return s(t);case et:t:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Au(o,t.mode,u)).return=t,t=r}return s(t)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=ku(o,t.mode,u)).return=t,t=r),s(t);if(wo(o))return y(t,r,o,u);if(yt(o))return v(t,r,o,u);if(l&&To(t,o),void 0===o&&!c)switch(t.tag){case 1:case 0:throw t=t.type,Error(a(152,t.displayName||t.name||"Component"))}return n(t,r)}}var Co=xo(!0),So=xo(!1),Io={},No={current:Io},ko={current:Io},Ao={current:Io};function Po(t){if(t===Io)throw Error(a(174));return t}function Oo(t,e){switch(ci(Ao,e),ci(ko,t),ci(No,Io),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ft(null,"");break;default:e=Ft(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}ui(No),ci(No,e)}function Ro(){ui(No),ui(ko),ui(Ao)}function Do(t){Po(Ao.current);var e=Po(No.current),n=Ft(e,t.type);e!==n&&(ci(ko,t),ci(No,n))}function Mo(t){ko.current===t&&(ui(No),ui(ko))}var Lo={current:0};function Fo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function jo(t,e){return{responder:t,props:e}}var Uo=$.ReactCurrentDispatcher,Vo=$.ReactCurrentBatchConfig,qo=0,Bo=null,zo=null,Wo=null,Ho=!1;function Qo(){throw Error(a(321))}function Go(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fr(t[n],e[n]))return!1;return!0}function Yo(t,e,n,r,i,o){if(qo=o,Bo=e,e.memoizedState=null,e.updateQueue=null,e.expirationTime=0,Uo.current=null===t||null===t.memoizedState?ga:ma,t=n(r,i),e.expirationTime===qo){o=0;do{if(e.expirationTime=0,!(25>o))throw Error(a(301));o+=1,Wo=zo=null,e.updateQueue=null,Uo.current=_a,t=n(r,i)}while(e.expirationTime===qo)}if(Uo.current=va,e=null!==zo&&null!==zo.next,qo=0,Wo=zo=Bo=null,Ho=!1,e)throw Error(a(300));return t}function Ko(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Wo?Bo.memoizedState=Wo=t:Wo=Wo.next=t,Wo}function $o(){if(null===zo){var t=Bo.alternate;t=null!==t?t.memoizedState:null}else t=zo.next;var e=null===Wo?Bo.memoizedState:Wo.next;if(null!==e)Wo=e,zo=t;else{if(null===t)throw Error(a(310));t={memoizedState:(zo=t).memoizedState,baseState:zo.baseState,baseQueue:zo.baseQueue,queue:zo.queue,next:null},null===Wo?Bo.memoizedState=Wo=t:Wo=Wo.next=t}return Wo}function Xo(t,e){return"function"==typeof e?e(t):e}function Jo(t){var e=$o(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=zo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,c=i;do{var l=c.expirationTime;if(l<qo){var h={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=h,o=r):u=u.next=h,l>Bo.expirationTime&&(Bo.expirationTime=l,au(l))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),ou(l,c.suspenseConfig),r=c.eagerReducer===t?c.eagerState:t(r,c.action);c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=s,Fr(r,e.memoizedState)||(Aa=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function Zo(t){var e=$o(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=t(o,s.action),s=s.next}while(s!==i);Fr(o,e.memoizedState)||(Aa=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ta(t){var e=Ko();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:Xo,lastRenderedState:t}).dispatch=ya.bind(null,Bo,t),[e.memoizedState,t]}function ea(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Bo.updateQueue)?(e={lastEffect:null},Bo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function na(){return $o().memoizedState}function ra(t,e,n,r){var i=Ko();Bo.effectTag|=t,i.memoizedState=ea(1|e,n,void 0,void 0===r?null:r)}function ia(t,e,n,r){var i=$o();r=void 0===r?null:r;var o=void 0;if(null!==zo){var a=zo.memoizedState;if(o=a.destroy,null!==r&&Go(r,a.deps))return void ea(e,n,o,r)}Bo.effectTag|=t,i.memoizedState=ea(1|e,n,o,r)}function oa(t,e){return ra(516,4,t,e)}function aa(t,e){return ia(516,4,t,e)}function sa(t,e){return ia(4,2,t,e)}function ua(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function ca(t,e,n){return n=null!=n?n.concat([t]):null,ia(4,2,ua.bind(null,e,t),n)}function la(){}function ha(t,e){return Ko().memoizedState=[t,void 0===e?null:e],t}function fa(t,e){var n=$o();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Go(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function pa(t,e){var n=$o();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Go(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function da(t,e,n){var r=Vi();Bi(98>r?98:r,(function(){t(!0)})),Bi(97<r?97:r,(function(){var r=Vo.suspense;Vo.suspense=void 0===e?null:e;try{t(!1),n()}finally{Vo.suspense=r}}))}function ya(t,e,n){var r=Qs(),i=fo.suspense;i={expirationTime:r=Gs(r,t,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=e.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),e.pending=i,o=t.alternate,t===Bo||null!==o&&o===Bo)Ho=!0,i.expirationTime=qo,Bo.expirationTime=qo;else{if(0===t.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(i.eagerReducer=o,i.eagerState=s,Fr(s,a))return}catch(t){}Ys(t,r)}}var va={readContext:ro,useCallback:Qo,useContext:Qo,useEffect:Qo,useImperativeHandle:Qo,useLayoutEffect:Qo,useMemo:Qo,useReducer:Qo,useRef:Qo,useState:Qo,useDebugValue:Qo,useResponder:Qo,useDeferredValue:Qo,useTransition:Qo},ga={readContext:ro,useCallback:ha,useContext:ro,useEffect:oa,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,ra(4,2,ua.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ra(4,2,t,e)},useMemo:function(t,e){var n=Ko();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ko();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=ya.bind(null,Bo,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Ko().memoizedState=t},useState:ta,useDebugValue:la,useResponder:jo,useDeferredValue:function(t,e){var n=ta(t),r=n[0],i=n[1];return oa((function(){var n=Vo.suspense;Vo.suspense=void 0===e?null:e;try{i(t)}finally{Vo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=ta(!1),n=e[0];return e=e[1],[ha(da.bind(null,e,t),[e,t]),n]}},ma={readContext:ro,useCallback:fa,useContext:ro,useEffect:aa,useImperativeHandle:ca,useLayoutEffect:sa,useMemo:pa,useReducer:Jo,useRef:na,useState:function(){return Jo(Xo)},useDebugValue:la,useResponder:jo,useDeferredValue:function(t,e){var n=Jo(Xo),r=n[0],i=n[1];return aa((function(){var n=Vo.suspense;Vo.suspense=void 0===e?null:e;try{i(t)}finally{Vo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Jo(Xo),n=e[0];return e=e[1],[fa(da.bind(null,e,t),[e,t]),n]}},_a={readContext:ro,useCallback:fa,useContext:ro,useEffect:aa,useImperativeHandle:ca,useLayoutEffect:sa,useMemo:pa,useReducer:Zo,useRef:na,useState:function(){return Zo(Xo)},useDebugValue:la,useResponder:jo,useDeferredValue:function(t,e){var n=Zo(Xo),r=n[0],i=n[1];return aa((function(){var n=Vo.suspense;Vo.suspense=void 0===e?null:e;try{i(t)}finally{Vo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Zo(Xo),n=e[0];return e=e[1],[fa(da.bind(null,e,t),[e,t]),n]}},ba=null,wa=null,Ea=!1;function Ta(t,e){var n=xu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function xa(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Ca(t){if(Ea){var e=wa;if(e){var n=e;if(!xa(t,e)){if(!(e=wn(n.nextSibling))||!xa(t,e))return t.effectTag=-1025&t.effectTag|2,Ea=!1,void(ba=t);Ta(ba,n)}ba=t,wa=wn(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,Ea=!1,ba=t}}function Sa(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;ba=t}function Ia(t){if(t!==ba)return!1;if(!Ea)return Sa(t),Ea=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!mn(e,t.memoizedProps))for(e=wa;e;)Ta(t,e),e=wn(e.nextSibling);if(Sa(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){wa=wn(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}wa=null}}else wa=ba?wn(t.stateNode.nextSibling):null;return!0}function Na(){wa=ba=null,Ea=!1}var ka=$.ReactCurrentOwner,Aa=!1;function Pa(t,e,n,r){e.child=null===t?So(e,null,n,r):Co(e,t.child,n,r)}function Oa(t,e,n,r,i){n=n.render;var o=e.ref;return no(e,i),r=Yo(t,e,n,r,o,i),null===t||Aa?(e.effectTag|=1,Pa(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Ya(t,e,i))}function Ra(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!=typeof a||Cu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Iu(n.type,null,r,null,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Da(t,e,a,r,i,o))}return a=t.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:Ur)(i,r)&&t.ref===e.ref)?Ya(t,e,o):(e.effectTag|=1,(t=Su(a,r)).ref=e.ref,t.return=e,e.child=t)}function Da(t,e,n,r,i,o){return null!==t&&Ur(t.memoizedProps,r)&&t.ref===e.ref&&(Aa=!1,i<o)?(e.expirationTime=t.expirationTime,Ya(t,e,o)):La(t,e,n,r,o)}function Ma(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function La(t,e,n,r,i){var o=yi(n)?pi:hi.current;return o=di(e,o),no(e,i),n=Yo(t,e,n,r,o,i),null===t||Aa?(e.effectTag|=1,Pa(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Ya(t,e,i))}function Fa(t,e,n,r,i){if(yi(n)){var o=!0;_i(e)}else o=!1;if(no(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),mo(e,n,r),bo(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"==typeof c&&null!==c?c=ro(c):c=di(e,c=yi(n)?pi:hi.current);var l=n.getDerivedStateFromProps,h="function"==typeof l||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==c)&&_o(e,a,r,c),io=!1;var f=e.memoizedState;a.state=f,lo(e,r,a,i),u=e.memoizedState,s!==r||f!==u||fi.current||io?("function"==typeof l&&(yo(e,n,l,r),u=e.memoizedState),(s=io||go(e,n,s,r,f,u,c))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(e.effectTag|=4)):("function"==typeof a.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"==typeof a.componentDidMount&&(e.effectTag|=4),r=!1)}else a=e.stateNode,ao(t,e),s=e.memoizedProps,a.props=e.type===e.elementType?s:Yi(e.type,s),u=a.context,"object"==typeof(c=n.contextType)&&null!==c?c=ro(c):c=di(e,c=yi(n)?pi:hi.current),(h="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==c)&&_o(e,a,r,c),io=!1,u=e.memoizedState,a.state=u,lo(e,r,a,i),f=e.memoizedState,s!==r||u!==f||fi.current||io?("function"==typeof l&&(yo(e,n,l,r),f=e.memoizedState),(l=io||go(e,n,s,r,u,f,c))?(h||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,c),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,c)),"function"==typeof a.componentDidUpdate&&(e.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=f),a.props=r,a.state=f,a.context=c,r=l):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),r=!1);return ja(t,e,n,r,o,i)}function ja(t,e,n,r,i,o){Ma(t,e);var a=0!=(64&e.effectTag);if(!r&&!a)return i&&bi(e,n,!1),Ya(t,e,o);r=e.stateNode,ka.current=e;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&a?(e.child=Co(e,t.child,null,o),e.child=Co(e,null,s,o)):Pa(t,e,s,o),e.memoizedState=r.state,i&&bi(e,n,!0),e.child}function Ua(t){var e=t.stateNode;e.pendingContext?gi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&gi(0,e.context,!1),Oo(t,e.containerInfo)}var Va,qa,Ba,za={dehydrated:null,retryTime:0};function Wa(t,e,n){var r,i=e.mode,o=e.pendingProps,a=Lo.current,s=!1;if((r=0!=(64&e.effectTag))||(r=0!=(2&a)&&(null===t||null!==t.memoizedState)),r?(s=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),ci(Lo,1&a),null===t){if(void 0!==o.fallback&&Ca(e),s){if(s=o.fallback,(o=Nu(null,i,0,null)).return=e,0==(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=Nu(s,i,n,null)).return=e,o.sibling=n,e.memoizedState=za,e.child=o,n}return i=o.children,e.memoizedState=null,e.child=So(e,null,i,n)}if(null!==t.memoizedState){if(i=(t=t.child).sibling,s){if(o=o.fallback,(n=Su(t,t.pendingProps)).return=e,0==(2&e.mode)&&(s=null!==e.memoizedState?e.child.child:e.child)!==t.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Su(i,o)).return=e,n.sibling=i,n.childExpirationTime=0,e.memoizedState=za,e.child=n,i}return n=Co(e,t.child,o.children,n),e.memoizedState=null,e.child=n}if(t=t.child,s){if(s=o.fallback,(o=Nu(null,i,0,null)).return=e,o.child=t,null!==t&&(t.return=o),0==(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=Nu(s,i,n,null)).return=e,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,e.memoizedState=za,e.child=o,n}return e.memoizedState=null,e.child=Co(e,t,o.children,n)}function Ha(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e),eo(t.return,e)}function Qa(t,e,n,r,i,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function Ga(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Pa(t,e,r.children,n),0!=(2&(r=Lo.current)))r=1&r|2,e.effectTag|=64;else{if(null!==t&&0!=(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ha(t,n);else if(19===t.tag)Ha(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ci(Lo,r),0==(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===Fo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Qa(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===Fo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Qa(e,!0,n,null,o,e.lastEffect);break;case"together":Qa(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Ya(t,e,n){null!==t&&(e.dependencies=t.dependencies);var r=e.expirationTime;if(0!==r&&au(r),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=Su(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Su(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Ka(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function $a(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return yi(e.type)&&vi(),null;case 3:return Ro(),ui(fi),ui(hi),(n=e.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||!Ia(e)||(e.effectTag|=4),null;case 5:Mo(e),n=Po(Ao.current);var o=e.type;if(null!==t&&null!=e.stateNode)qa(t,e,o,r,n),t.ref!==e.ref&&(e.effectTag|=128);else{if(!r){if(null===e.stateNode)throw Error(a(166));return null}if(t=Po(No.current),Ia(e)){r=e.stateNode,o=e.type;var s=e.memoizedProps;switch(r[xn]=e,r[Cn]=s,o){case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(t=0;t<$t.length;t++)Ge($t[t],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"form":Ge("reset",r),Ge("submit",r);break;case"details":Ge("toggle",r);break;case"input":Tt(r,s),Ge("invalid",r),un(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ge("invalid",r),un(n,"onChange");break;case"textarea":Pt(r,s),Ge("invalid",r),un(n,"onChange")}for(var u in on(o,s),t=null,s)if(s.hasOwnProperty(u)){var c=s[u];"children"===u?"string"==typeof c?r.textContent!==c&&(t=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(t=["children",""+c]):x.hasOwnProperty(u)&&null!=c&&un(n,u)}switch(o){case"input":bt(r),St(r,s,!0);break;case"textarea":bt(r),Rt(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=cn)}n=t,e.updateQueue=n,null!==n&&(e.effectTag|=4)}else{switch(u=9===n.nodeType?n:n.ownerDocument,t===sn&&(t=Lt(o)),t===sn?"script"===o?((t=u.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof r.is?t=u.createElement(o,{is:r.is}):(t=u.createElement(o),"select"===o&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,o),t[xn]=e,t[Cn]=r,Va(t,e),e.stateNode=t,u=an(o,r),o){case"iframe":case"object":case"embed":Ge("load",t),c=r;break;case"video":case"audio":for(c=0;c<$t.length;c++)Ge($t[c],t);c=r;break;case"source":Ge("error",t),c=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),c=r;break;case"form":Ge("reset",t),Ge("submit",t),c=r;break;case"details":Ge("toggle",t),c=r;break;case"input":Tt(t,r),c=Et(t,r),Ge("invalid",t),un(n,"onChange");break;case"option":c=Nt(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),Ge("invalid",t),un(n,"onChange");break;case"textarea":Pt(t,r),c=At(t,r),Ge("invalid",t),un(n,"onChange");break;default:c=r}on(o,c);var l=c;for(s in l)if(l.hasOwnProperty(s)){var h=l[s];"style"===s?nn(t,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&Ut(t,h):"children"===s?"string"==typeof h?("textarea"!==o||""!==h)&&Vt(t,h):"number"==typeof h&&Vt(t,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(x.hasOwnProperty(s)?null!=h&&un(n,s):null!=h&&X(t,s,h,u))}switch(o){case"input":bt(t),St(t,r,!1);break;case"textarea":bt(t),Rt(t);break;case"option":null!=r.value&&t.setAttribute("value",""+mt(r.value));break;case"select":t.multiple=!!r.multiple,null!=(n=r.value)?kt(t,!!r.multiple,n,!1):null!=r.defaultValue&&kt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof c.onClick&&(t.onclick=cn)}gn(o,r)&&(e.effectTag|=4)}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)Ba(0,e,t.memoizedProps,r);else{if("string"!=typeof r&&null===e.stateNode)throw Error(a(166));n=Po(Ao.current),Po(No.current),Ia(e)?(n=e.stateNode,r=e.memoizedProps,n[xn]=e,n.nodeValue!==r&&(e.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[xn]=e,e.stateNode=n)}return null;case 13:return ui(Lo),r=e.memoizedState,0!=(64&e.effectTag)?(e.expirationTime=n,e):(n=null!==r,r=!1,null===t?void 0!==e.memoizedProps.fallback&&Ia(e):(r=null!==(o=t.memoizedState),n||null===o||null!==(o=t.child.sibling)&&(null!==(s=e.firstEffect)?(e.firstEffect=o,o.nextEffect=s):(e.firstEffect=e.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!=(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!=(1&Lo.current)?Is===bs&&(Is=ws):(Is!==bs&&Is!==ws||(Is=Es),0!==Os&&null!==xs&&(Ru(xs,Ss),Du(xs,Os)))),(n||r)&&(e.effectTag|=4),null);case 4:return Ro(),null;case 10:return to(e),null;case 17:return yi(e.type)&&vi(),null;case 19:if(ui(Lo),null===(r=e.memoizedState))return null;if(o=0!=(64&e.effectTag),null===(s=r.rendering)){if(o)Ka(r,!1);else if(Is!==bs||null!==t&&0!=(64&t.effectTag))for(s=e.child;null!==s;){if(null!==(t=Fo(s))){for(e.effectTag|=64,Ka(r,!1),null!==(o=t.updateQueue)&&(e.updateQueue=o,e.effectTag|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=e.child;null!==r;)s=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(t=o.alternate)?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=t.childExpirationTime,o.expirationTime=t.expirationTime,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,s=t.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return ci(Lo,1&Lo.current|2),e.child}s=s.sibling}}else{if(!o)if(null!==(t=Fo(s))){if(e.effectTag|=64,o=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.effectTag|=4),Ka(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*Ui()-r.renderingStartTime>r.tailExpiration&&1<n&&(e.effectTag|=64,o=!0,Ka(r,!1),e.expirationTime=e.childExpirationTime=n-1);r.isBackwards?(s.sibling=e.child,e.child=s):(null!==(n=r.last)?n.sibling=s:e.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Ui()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Ui(),n.sibling=null,e=Lo.current,ci(Lo,o?1&e|2:1&e),n):null}throw Error(a(156,e.tag))}function Xa(t){switch(t.tag){case 1:yi(t.type)&&vi();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(Ro(),ui(fi),ui(hi),0!=(64&(e=t.effectTag)))throw Error(a(285));return t.effectTag=-4097&e|64,t;case 5:return Mo(t),null;case 13:return ui(Lo),4096&(e=t.effectTag)?(t.effectTag=-4097&e|64,t):null;case 19:return ui(Lo),null;case 4:return Ro(),null;case 10:return to(t),null;default:return null}}function Ja(t,e){return{value:t,source:e,stack:gt(e)}}Va=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},qa=function(t,e,n,r,o){var a=t.memoizedProps;if(a!==r){var s,u,c=e.stateNode;switch(Po(No.current),t=null,n){case"input":a=Et(c,a),r=Et(c,r),t=[];break;case"option":a=Nt(c,a),r=Nt(c,r),t=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case"textarea":a=At(c,a),r=At(c,r),t=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(c.onclick=cn)}for(s in on(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(u in c=a[s])c.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(x.hasOwnProperty(s)?t||(t=[]):(t=t||[]).push(s,null));for(s in r){var l=r[s];if(c=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&l!==c&&(null!=l||null!=c))if("style"===s)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&(n||(n={}),n[u]=l[u])}else n||(t||(t=[]),t.push(s,n)),n=l;else"dangerouslySetInnerHTML"===s?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(t=t||[]).push(s,l)):"children"===s?c===l||"string"!=typeof l&&"number"!=typeof l||(t=t||[]).push(s,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(x.hasOwnProperty(s)?(null!=l&&un(o,s),t||c===l||(t=[])):(t=t||[]).push(s,l))}n&&(t=t||[]).push("style",n),o=t,(e.updateQueue=o)&&(e.effectTag|=4)}},Ba=function(t,e,n,r){n!==r&&(e.effectTag|=4)};var Za="function"==typeof WeakSet?WeakSet:Set;function ts(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=gt(n)),null!==n&&vt(n.type),e=e.value,null!==t&&1===t.tag&&vt(t.type);try{console.error(e)}catch(t){setTimeout((function(){throw t}))}}function es(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){mu(t,e)}else e.current=null}function ns(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Yi(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function rs(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==e)}}function is(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function os(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:return void is(3,n);case 1:if(t=n.stateNode,4&n.effectTag)if(null===e)t.componentDidMount();else{var r=n.elementType===n.type?e.memoizedProps:Yi(n.type,e.memoizedProps);t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}return void(null!==(e=n.updateQueue)&&ho(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}ho(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.effectTag&&gn(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Le(n)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function as(t,e,n){switch("function"==typeof Eu&&Eu(e),e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var r=t.next;Bi(97<n?97:n,(function(){var t=r;do{var n=t.destroy;if(void 0!==n){var i=e;try{n()}catch(t){mu(i,t)}}t=t.next}while(t!==r)}))}break;case 1:es(e),"function"==typeof(n=e.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){mu(t,e)}}(e,n);break;case 5:es(e);break;case 4:ls(t,e,n)}}function ss(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,null!==e&&ss(e)}function us(t){return 5===t.tag||3===t.tag||4===t.tag}function cs(t){t:{for(var e=t.return;null!==e;){if(us(e)){var n=e;break t}e=e.return}throw Error(a(160))}switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(Vt(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||us(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}r?function t(e,n,r){var i=e.tag,o=5===i||6===i;if(o)e=o?e.stateNode:e.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(e,n):r.insertBefore(e,n):(8===r.nodeType?(n=r.parentNode).insertBefore(e,r):(n=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=cn));else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e):function t(e,n,r){var i=e.tag,o=5===i||6===i;if(o)e=o?e.stateNode:e.stateNode.instance,n?r.insertBefore(e,n):r.appendChild(e);else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e)}function ls(t,e,n){for(var r,i,o=e,s=!1;;){if(!s){s=o.return;t:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break t;case 3:case 4:r=r.containerInfo,i=!0;break t}s=s.return}s=!0}if(5===o.tag||6===o.tag){t:for(var u=t,c=o,l=n,h=c;;)if(as(u,h,l),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break t;for(;null===h.sibling;){if(null===h.return||h.return===c)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(u=r,c=o.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(as(t,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function hs(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:return void rs(3,e);case 1:return;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[Cn]=r,"input"===t&&"radio"===r.type&&null!=r.name&&xt(n,r),an(t,i),e=an(t,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?nn(n,u):"dangerouslySetInnerHTML"===s?Ut(n,u):"children"===s?Vt(n,u):X(n,s,u,e)}switch(t){case"input":Ct(n,r);break;case"textarea":Ot(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(t=r.value)?kt(n,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?kt(n,!!r.multiple,r.defaultValue,!0):kt(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(a(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((e=e.stateNode).hydrate&&(e.hydrate=!1,Le(e.containerInfo)));case 12:return;case 13:if(n=e,null===e.memoizedState?r=!1:(r=!0,n=e.child,Ds=Ui()),null!==n)t:for(t=n;;){if(5===t.tag)o=t.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=t.stateNode,i=null!=(i=t.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,o.style.display=en("display",i));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){(o=t.child.sibling).return=t,t=o;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}return void fs(e);case 19:return void fs(e);case 17:return}throw Error(a(163))}function fs(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Za),e.forEach((function(e){var r=bu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}var ps="function"==typeof WeakMap?WeakMap:Map;function ds(t,e,n){(n=so(n,null)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ls||(Ls=!0,Fs=r),ts(t,e)},n}function ys(t,e,n){(n=so(n,null)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=e.value;n.payload=function(){return ts(t,e),r(i)}}var o=t.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===js?js=new Set([this]):js.add(this),ts(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:""})}),n}var vs,gs=Math.ceil,ms=$.ReactCurrentDispatcher,_s=$.ReactCurrentOwner,bs=0,ws=3,Es=4,Ts=0,xs=null,Cs=null,Ss=0,Is=bs,Ns=null,ks=1073741823,As=1073741823,Ps=null,Os=0,Rs=!1,Ds=0,Ms=null,Ls=!1,Fs=null,js=null,Us=!1,Vs=null,qs=90,Bs=null,zs=0,Ws=null,Hs=0;function Qs(){return 0!=(48&Ts)?1073741821-(Ui()/10|0):0!==Hs?Hs:Hs=1073741821-(Ui()/10|0)}function Gs(t,e,n){if(0==(2&(e=e.mode)))return 1073741823;var r=Vi();if(0==(4&e))return 99===r?1073741823:1073741822;if(0!=(16&Ts))return Ss;if(null!==n)t=Gi(t,0|n.timeoutMs||5e3,250);else switch(r){case 99:t=1073741823;break;case 98:t=Gi(t,150,100);break;case 97:case 96:t=Gi(t,5e3,250);break;case 95:t=2;break;default:throw Error(a(326))}return null!==xs&&t===Ss&&--t,t}function Ys(t,e){if(50<zs)throw zs=0,Ws=null,Error(a(185));if(null!==(t=Ks(t,e))){var n=Vi();1073741823===e?0!=(8&Ts)&&0==(48&Ts)?Zs(t):(Xs(t),0===Ts&&Hi()):Xs(t),0==(4&Ts)||98!==n&&99!==n||(null===Bs?Bs=new Map([[t,e]]):(void 0===(n=Bs.get(t))||n>e)&&Bs.set(t,e))}}function Ks(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(xs===i&&(au(e),Is===Es&&Ru(i,Ss)),Du(i,e)),i}function $s(t){var e=t.lastExpiredTime;if(0!==e)return e;if(!Ou(t,e=t.firstPendingTime))return e;var n=t.lastPingedTime;return 2>=(t=n>(t=t.nextKnownPendingLevel)?n:t)&&e!==t?0:t}function Xs(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=Wi(Zs.bind(null,t));else{var e=$s(t),n=t.callbackNode;if(0===e)null!==n&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var r=Qs();if(1073741823===e?r=99:1===e||2===e?r=95:r=0>=(r=10*(1073741821-e)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=t.callbackPriority;if(t.callbackExpirationTime===e&&i>=r)return;n!==Oi&&Ti(n)}t.callbackExpirationTime=e,t.callbackPriority=r,e=1073741823===e?Wi(Zs.bind(null,t)):zi(r,Js.bind(null,t),{timeout:10*(1073741821-e)-Ui()}),t.callbackNode=e}}}function Js(t,e){if(Hs=0,e)return Mu(t,e=Qs()),Xs(t),null;var n=$s(t);if(0!==n){if(e=t.callbackNode,0!=(48&Ts))throw Error(a(327));if(yu(),t===xs&&n===Ss||nu(t,n),null!==Cs){var r=Ts;Ts|=16;for(var i=iu();;)try{uu();break}catch(e){ru(t,e)}if(Zi(),Ts=r,ms.current=i,1===Is)throw e=Ns,nu(t,n),Ru(t,n),Xs(t),e;if(null===Cs)switch(i=t.finishedWork=t.current.alternate,t.finishedExpirationTime=n,r=Is,xs=null,r){case bs:case 1:throw Error(a(345));case 2:Mu(t,2<n?2:n);break;case ws:if(Ru(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=hu(i)),1073741823===ks&&10<(i=Ds+500-Ui())){if(Rs){var o=t.lastPingedTime;if(0===o||o>=n){t.lastPingedTime=n,nu(t,n);break}}if(0!==(o=$s(t))&&o!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}t.timeoutHandle=_n(fu.bind(null,t),i);break}fu(t);break;case Es:if(Ru(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=hu(i)),Rs&&(0===(i=t.lastPingedTime)||i>=n)){t.lastPingedTime=n,nu(t,n);break}if(0!==(i=$s(t))&&i!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}if(1073741823!==As?r=10*(1073741821-As)-Ui():1073741823===ks?r=0:(r=10*(1073741821-ks)-5e3,0>(r=(i=Ui())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gs(r/1960))-r)&&(r=n)),10<r){t.timeoutHandle=_n(fu.bind(null,t),r);break}fu(t);break;case 5:if(1073741823!==ks&&null!==Ps){o=ks;var s=Ps;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(o=Ui()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Ru(t,n),t.timeoutHandle=_n(fu.bind(null,t),r);break}}fu(t);break;default:throw Error(a(329))}if(Xs(t),t.callbackNode===e)return Js.bind(null,t)}}return null}function Zs(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,0!=(48&Ts))throw Error(a(327));if(yu(),t===xs&&e===Ss||nu(t,e),null!==Cs){var n=Ts;Ts|=16;for(var r=iu();;)try{su();break}catch(e){ru(t,e)}if(Zi(),Ts=n,ms.current=r,1===Is)throw n=Ns,nu(t,e),Ru(t,e),Xs(t),n;if(null!==Cs)throw Error(a(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,xs=null,fu(t),Xs(t)}return null}function tu(t,e){var n=Ts;Ts|=1;try{return t(e)}finally{0===(Ts=n)&&Hi()}}function eu(t,e){var n=Ts;Ts&=-2,Ts|=8;try{return t(e)}finally{0===(Ts=n)&&Hi()}}function nu(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,bn(n)),null!==Cs)for(n=Cs.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&vi();break;case 3:Ro(),ui(fi),ui(hi);break;case 5:Mo(r);break;case 4:Ro();break;case 13:case 19:ui(Lo);break;case 10:to(r)}n=n.return}xs=t,Cs=Su(t.current,null),Ss=e,Is=bs,Ns=null,As=ks=1073741823,Ps=null,Os=0,Rs=!1}function ru(t,e){for(;;){try{if(Zi(),Uo.current=va,Ho)for(var n=Bo.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(qo=0,Wo=zo=Bo=null,Ho=!1,null===Cs||null===Cs.return)return Is=1,Ns=e,Cs=null;t:{var i=t,o=Cs.return,a=Cs,s=e;if(e=Ss,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"==typeof s&&"function"==typeof s.then){var u=s;if(0==(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.expirationTime=c.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var l=0!=(1&Lo.current),h=o;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var d=h.memoizedProps;f=void 0!==d.fallback&&(!0!==d.unstable_avoidThisFallback||!l)}}if(f){var y=h.updateQueue;if(null===y){var v=new Set;v.add(u),h.updateQueue=v}else y.add(u);if(0==(2&h.mode)){if(h.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var g=so(1073741823,null);g.tag=2,uo(a,g)}a.expirationTime=1073741823;break t}s=void 0,a=e;var m=i.pingCache;if(null===m?(m=i.pingCache=new ps,s=new Set,m.set(u,s)):void 0===(s=m.get(u))&&(s=new Set,m.set(u,s)),!s.has(a)){s.add(a);var _=_u.bind(null,i,u,a);u.then(_,_)}h.effectTag|=4096,h.expirationTime=e;break t}h=h.return}while(null!==h);s=Error((vt(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+gt(a))}5!==Is&&(Is=2),s=Ja(s,a),h=o;do{switch(h.tag){case 3:u=s,h.effectTag|=4096,h.expirationTime=e,co(h,ds(h,u,e));break t;case 1:u=s;var b=h.type,w=h.stateNode;if(0==(64&h.effectTag)&&("function"==typeof b.getDerivedStateFromError||null!==w&&"function"==typeof w.componentDidCatch&&(null===js||!js.has(w)))){h.effectTag|=4096,h.expirationTime=e,co(h,ys(h,u,e));break t}}h=h.return}while(null!==h)}Cs=lu(Cs)}catch(t){e=t;continue}break}}function iu(){var t=ms.current;return ms.current=va,null===t?va:t}function ou(t,e){t<ks&&2<t&&(ks=t),null!==e&&t<As&&2<t&&(As=t,Ps=e)}function au(t){t>Os&&(Os=t)}function su(){for(;null!==Cs;)Cs=cu(Cs)}function uu(){for(;null!==Cs&&!Ri();)Cs=cu(Cs)}function cu(t){var e=vs(t.alternate,t,Ss);return t.memoizedProps=t.pendingProps,null===e&&(e=lu(t)),_s.current=null,e}function lu(t){Cs=t;do{var e=Cs.alternate;if(t=Cs.return,0==(2048&Cs.effectTag)){if(e=$a(e,Cs,Ss),1===Ss||1!==Cs.childExpirationTime){for(var n=0,r=Cs.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}Cs.childExpirationTime=n}if(null!==e)return e;null!==t&&0==(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=Cs.firstEffect),null!==Cs.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=Cs.firstEffect),t.lastEffect=Cs.lastEffect),1<Cs.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=Cs:t.firstEffect=Cs,t.lastEffect=Cs))}else{if(null!==(e=Xa(Cs)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=Cs.sibling))return e;Cs=t}while(null!==Cs);return Is===bs&&(Is=5),null}function hu(t){var e=t.expirationTime;return e>(t=t.childExpirationTime)?e:t}function fu(t){var e=Vi();return Bi(99,pu.bind(null,t,e)),null}function pu(t,e){do{yu()}while(null!==Vs);if(0!=(48&Ts))throw Error(a(327));var n=t.finishedWork,r=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw Error(a(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var i=hu(n);if(t.firstPendingTime=i,r<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:r<=t.firstSuspendedTime&&(t.firstSuspendedTime=r-1),r<=t.lastPingedTime&&(t.lastPingedTime=0),r<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===xs&&(Cs=xs=null,Ss=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Ts;Ts|=32,_s.current=null,yn=Qe;var s=pn();if(dn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else t:{var c=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{u.nodeType,h.nodeType}catch(t){u=null;break t}var f=0,p=-1,d=-1,y=0,v=0,g=s,m=null;e:for(;;){for(var _;g!==u||0!==l&&3!==g.nodeType||(p=f+l),g!==h||0!==c&&3!==g.nodeType||(d=f+c),3===g.nodeType&&(f+=g.nodeValue.length),null!==(_=g.firstChild);)m=g,g=_;for(;;){if(g===s)break e;if(m===u&&++y===l&&(p=f),m===h&&++v===c&&(d=f),null!==(_=g.nextSibling))break;m=(g=m).parentNode}g=_}u=-1===p||-1===d?null:{start:p,end:d}}else u=null}u=u||{start:0,end:0}}else u=null;vn={activeElementDetached:null,focusedElem:s,selectionRange:u},Qe=!1,Ms=i;do{try{du()}catch(t){if(null===Ms)throw Error(a(330));mu(Ms,t),Ms=Ms.nextEffect}}while(null!==Ms);Ms=i;do{try{for(s=t,u=e;null!==Ms;){var b=Ms.effectTag;if(16&b&&Vt(Ms.stateNode,""),128&b){var w=Ms.alternate;if(null!==w){var E=w.ref;null!==E&&("function"==typeof E?E(null):E.current=null)}}switch(1038&b){case 2:cs(Ms),Ms.effectTag&=-3;break;case 6:cs(Ms),Ms.effectTag&=-3,hs(Ms.alternate,Ms);break;case 1024:Ms.effectTag&=-1025;break;case 1028:Ms.effectTag&=-1025,hs(Ms.alternate,Ms);break;case 4:hs(Ms.alternate,Ms);break;case 8:ls(s,l=Ms,u),ss(l)}Ms=Ms.nextEffect}}catch(t){if(null===Ms)throw Error(a(330));mu(Ms,t),Ms=Ms.nextEffect}}while(null!==Ms);if(E=vn,w=pn(),b=E.focusedElem,u=E.selectionRange,w!==b&&b&&b.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(b.ownerDocument.documentElement,b)){null!==u&&dn(b)&&(w=u.start,void 0===(E=u.end)&&(E=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(E,b.value.length)):(E=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(E=E.getSelection(),l=b.textContent.length,s=Math.min(u.start,l),u=void 0===u.end?s:Math.min(u.end,l),!E.extend&&s>u&&(l=u,u=s,s=l),l=fn(b,s),h=fn(b,u),l&&h&&(1!==E.rangeCount||E.anchorNode!==l.node||E.anchorOffset!==l.offset||E.focusNode!==h.node||E.focusOffset!==h.offset)&&((w=w.createRange()).setStart(l.node,l.offset),E.removeAllRanges(),s>u?(E.addRange(w),E.extend(h.node,h.offset)):(w.setEnd(h.node,h.offset),E.addRange(w))))),w=[];for(E=b;E=E.parentNode;)1===E.nodeType&&w.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<w.length;b++)(E=w[b]).element.scrollLeft=E.left,E.element.scrollTop=E.top}Qe=!!yn,vn=yn=null,t.current=n,Ms=i;do{try{for(b=t;null!==Ms;){var T=Ms.effectTag;if(36&T&&os(b,Ms.alternate,Ms),128&T){w=void 0;var x=Ms.ref;if(null!==x){var C=Ms.stateNode;switch(Ms.tag){case 5:w=C;break;default:w=C}"function"==typeof x?x(w):x.current=w}}Ms=Ms.nextEffect}}catch(t){if(null===Ms)throw Error(a(330));mu(Ms,t),Ms=Ms.nextEffect}}while(null!==Ms);Ms=null,Di(),Ts=o}else t.current=n;if(Us)Us=!1,Vs=t,qs=e;else for(Ms=i;null!==Ms;)e=Ms.nextEffect,Ms.nextEffect=null,Ms=e;if(0===(e=t.firstPendingTime)&&(js=null),1073741823===e?t===Ws?zs++:(zs=0,Ws=t):zs=0,"function"==typeof wu&&wu(n.stateNode,r),Xs(t),Ls)throw Ls=!1,t=Fs,Fs=null,t;return 0!=(8&Ts)||Hi(),null}function du(){for(;null!==Ms;){var t=Ms.effectTag;0!=(256&t)&&ns(Ms.alternate,Ms),0==(512&t)||Us||(Us=!0,zi(97,(function(){return yu(),null}))),Ms=Ms.nextEffect}}function yu(){if(90!==qs){var t=97<qs?97:qs;return qs=90,Bi(t,vu)}}function vu(){if(null===Vs)return!1;var t=Vs;if(Vs=null,0!=(48&Ts))throw Error(a(331));var e=Ts;for(Ts|=32,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:rs(5,n),is(5,n)}}catch(e){if(null===t)throw Error(a(330));mu(t,e)}n=t.nextEffect,t.nextEffect=null,t=n}return Ts=e,Hi(),!0}function gu(t,e,n){uo(t,e=ds(t,e=Ja(n,e),1073741823)),null!==(t=Ks(t,1073741823))&&Xs(t)}function mu(t,e){if(3===t.tag)gu(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){gu(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===js||!js.has(r))){uo(n,t=ys(n,t=Ja(e,t),1073741823)),null!==(n=Ks(n,1073741823))&&Xs(n);break}}n=n.return}}function _u(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),xs===t&&Ss===n?Is===Es||Is===ws&&1073741823===ks&&Ui()-Ds<500?nu(t,Ss):Rs=!0:Ou(t,n)&&(0!==(e=t.lastPingedTime)&&e<n||(t.lastPingedTime=n,Xs(t)))}function bu(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(e=Gs(e=Qs(),t,null)),null!==(t=Ks(t,e))&&Xs(t)}vs=function(t,e,n){var r=e.expirationTime;if(null!==t){var i=e.pendingProps;if(t.memoizedProps!==i||fi.current)Aa=!0;else{if(r<n){switch(Aa=!1,e.tag){case 3:Ua(e),Na();break;case 5:if(Do(e),4&e.mode&&1!==n&&i.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:yi(e.type)&&_i(e);break;case 4:Oo(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value,i=e.type._context,ci(Ki,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=n?Wa(t,e,n):(ci(Lo,1&Lo.current),null!==(e=Ya(t,e,n))?e.sibling:null);ci(Lo,1&Lo.current);break;case 19:if(r=e.childExpirationTime>=n,0!=(64&t.effectTag)){if(r)return Ga(t,e,n);e.effectTag|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null),ci(Lo,Lo.current),!r)return null}return Ya(t,e,n)}Aa=!1}}else Aa=!1;switch(e.expirationTime=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,i=di(e,hi.current),no(e,n),i=Yo(null,e,r,t,i,n),e.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,yi(r)){var o=!0;_i(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(e);var s=r.getDerivedStateFromProps;"function"==typeof s&&yo(e,r,s,t),i.updater=vo,e.stateNode=i,i._reactInternalFiber=e,bo(e,r,t,n),e=ja(null,e,r,!0,o,n)}else e.tag=0,Pa(null,e,i,n),e=e.child;return e;case 16:t:{if(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,e.type=i,o=e.tag=function(t){if("function"==typeof t)return Cu(t)?1:0;if(null!=t){if((t=t.$$typeof)===ut)return 11;if(t===ht)return 14}return 2}(i),t=Yi(i,t),o){case 0:e=La(null,e,i,t,n);break t;case 1:e=Fa(null,e,i,t,n);break t;case 11:e=Oa(null,e,i,t,n);break t;case 14:e=Ra(null,e,i,Yi(i.type,t),r,n);break t}throw Error(a(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,La(t,e,r,i=e.elementType===r?i:Yi(r,i),n);case 1:return r=e.type,i=e.pendingProps,Fa(t,e,r,i=e.elementType===r?i:Yi(r,i),n);case 3:if(Ua(e),r=e.updateQueue,null===t||null===r)throw Error(a(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,ao(t,e),lo(e,r,null,n),(r=e.memoizedState.element)===i)Na(),e=Ya(t,e,n);else{if((i=e.stateNode.hydrate)&&(wa=wn(e.stateNode.containerInfo.firstChild),ba=e,i=Ea=!0),i)for(n=So(e,null,r,n),e.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Pa(t,e,r,n),Na();e=e.child}return e;case 5:return Do(e),null===t&&Ca(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,mn(r,i)?s=null:null!==o&&mn(r,o)&&(e.effectTag|=16),Ma(t,e),4&e.mode&&1!==n&&i.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(Pa(t,e,s,n),e=e.child),e;case 6:return null===t&&Ca(e),null;case 13:return Wa(t,e,n);case 4:return Oo(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Co(e,null,r,n):Pa(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Oa(t,e,r,i=e.elementType===r?i:Yi(r,i),n);case 7:return Pa(t,e,e.pendingProps,n),e.child;case 8:case 12:return Pa(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value;var u=e.type._context;if(ci(Ki,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=Fr(u,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!fi.current){e=Ya(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===u.tag&&((l=so(n,null)).tag=2,uo(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),eo(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===e.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===e){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Pa(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,no(e,n),r=r(i=ro(i,o.unstable_observedBits)),e.effectTag|=1,Pa(t,e,r,n),e.child;case 14:return o=Yi(i=e.type,e.pendingProps),Ra(t,e,i,o=Yi(i.type,o),r,n);case 15:return Da(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yi(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,yi(r)?(t=!0,_i(e)):t=!1,no(e,n),mo(e,r,i),bo(e,r,i,n),ja(null,e,r,!0,t,n);case 19:return Ga(t,e,n)}throw Error(a(156,e.tag))};var wu=null,Eu=null;function Tu(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function xu(t,e,n,r){return new Tu(t,e,n,r)}function Cu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Su(t,e){var n=t.alternate;return null===n?((n=xu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Iu(t,e,n,r,i,o){var s=2;if(r=t,"function"==typeof t)Cu(t)&&(s=1);else if("string"==typeof t)s=5;else t:switch(t){case nt:return Nu(n.children,i,o,e);case st:s=8,i|=7;break;case rt:s=8,i|=1;break;case it:return(t=xu(12,n,e,8|i)).elementType=it,t.type=it,t.expirationTime=o,t;case ct:return(t=xu(13,n,e,i)).type=ct,t.elementType=ct,t.expirationTime=o,t;case lt:return(t=xu(19,n,e,i)).elementType=lt,t.expirationTime=o,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case ot:s=10;break t;case at:s=9;break t;case ut:s=11;break t;case ht:s=14;break t;case ft:s=16,r=null;break t;case pt:s=22;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=xu(s,n,e,i)).elementType=t,e.type=r,e.expirationTime=o,e}function Nu(t,e,n,r){return(t=xu(7,t,r,e)).expirationTime=n,t}function ku(t,e,n){return(t=xu(6,t,null,e)).expirationTime=n,t}function Au(t,e,n){return(e=xu(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Pu(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Ou(t,e){var n=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==n&&n>=e&&t<=e}function Ru(t,e){var n=t.firstSuspendedTime,r=t.lastSuspendedTime;n<e&&(t.firstSuspendedTime=e),(r>e||0===n)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function Du(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var n=t.firstSuspendedTime;0!==n&&(e>=n?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function Mu(t,e){var n=t.lastExpiredTime;(0===n||n>e)&&(t.lastExpiredTime=e)}function Lu(t,e,n,r){var i=e.current,o=Qs(),s=fo.suspense;o=Gs(o,i,s);t:if(n){e:{if(Zt(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(yi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(yi(c)){n=mi(n,c,u);break t}}n=u}else n=li;return null===e.context?e.context=n:e.pendingContext=n,(e=so(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),uo(i,e),Ys(i,o),o}function Fu(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function ju(t,e){null!==(t=t.memoizedState)&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function Uu(t,e){ju(t,e),(t=t.alternate)&&ju(t,e)}function Vu(t,e,n){var r=new Pu(t,e,n=null!=n&&!0===n.hydrate),i=xu(3,null,null,2===e?7:1===e?3:0);r.current=i,i.stateNode=r,oo(i),t[Sn]=r.current,n&&0!==e&&function(t,e){var n=Jt(e);Se.forEach((function(t){de(t,e,n)})),Ie.forEach((function(t){de(t,e,n)}))}(0,9===t.nodeType?t:t.ownerDocument),this._internalRoot=r}function qu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Bu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var t=Fu(a);s.call(t)}}Lu(e,a,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Vu(t,0,e?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var u=i;i=function(){var t=Fu(a);u.call(t)}}eu((function(){Lu(e,a,t,i)}))}return Fu(a)}function zu(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:et,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Wu(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qu(e))throw Error(a(200));return zu(t,e,null,n)}Vu.prototype.render=function(t){Lu(t,this._internalRoot,null,null)},Vu.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Lu(null,t,null,(function(){e[Sn]=null}))},ye=function(t){if(13===t.tag){var e=Gi(Qs(),150,100);Ys(t,e),Uu(t,e)}},ve=function(t){13===t.tag&&(Ys(t,3),Uu(t,3))},ge=function(t){if(13===t.tag){var e=Qs();Ys(t,e=Gs(e,t,null)),Uu(t,e)}},N=function(t,e,n){switch(e){case"input":if(Ct(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=An(r);if(!i)throw Error(a(90));wt(r),Ct(r,i)}}}break;case"textarea":Ot(t,n);break;case"select":null!=(e=n.value)&&kt(t,!!n.multiple,e,!1)}},D=tu,M=function(t,e,n,r,i){var o=Ts;Ts|=4;try{return Bi(98,t.bind(null,e,n,r,i))}finally{0===(Ts=o)&&Hi()}},L=function(){0==(49&Ts)&&(function(){if(null!==Bs){var t=Bs;Bs=null,t.forEach((function(t,e){Mu(e,t),Xs(e)})),Hi()}}(),yu())},F=function(t,e){var n=Ts;Ts|=2;try{return t(e)}finally{0===(Ts=n)&&Hi()}};var Hu,Qu,Gu={Events:[Nn,kn,An,S,T,Fn,function(t){ie(t,Ln)},O,R,Xe,se,yu,{current:!1}]};Qu=(Hu={findFiberByHostInstance:In,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(t){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);wu=function(t){try{e.onCommitFiberRoot(n,t,void 0,64==(64&t.current.effectTag))}catch(t){}},Eu=function(t){try{e.onCommitFiberUnmount(n,t)}catch(t){}}}catch(t){}}(i({},Hu,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=ne(t))?null:t.stateNode},findFiberByHostInstance:function(t){return Qu?Qu(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null})),e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gu,e.createPortal=Wu,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(void 0===e){if("function"==typeof t.render)throw Error(a(188));throw Error(a(268,Object.keys(t)))}return t=null===(t=ne(e))?null:t.stateNode},e.flushSync=function(t,e){if(0!=(48&Ts))throw Error(a(187));var n=Ts;Ts|=1;try{return Bi(99,t.bind(null,e))}finally{Ts=n,Hi()}},e.hydrate=function(t,e,n){if(!qu(e))throw Error(a(200));return Bu(null,t,e,!0,n)},e.render=function(t,e,n){if(!qu(e))throw Error(a(200));return Bu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!qu(t))throw Error(a(40));return!!t._reactRootContainer&&(eu((function(){Bu(null,null,t,!1,(function(){t._reactRootContainer=null,t[Sn]=null}))})),!0)},e.unstable_batchedUpdates=tu,e.unstable_createPortal=function(t,e){return Wu(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!qu(n))throw Error(a(200));if(null==t||void 0===t._reactInternalFiber)throw Error(a(38));return Bu(t,e,n,!1,r)},e.version="16.13.1"},function(t,e,n){"use strict";t.exports=n(19)},function(t,e,n){"use strict";
/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r,i,o,a,s;if("undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,c=null,l=function(){if(null!==u)try{var t=e.unstable_now();u(!0,t),u=null}catch(t){throw setTimeout(l,0),t}},h=Date.now();e.unstable_now=function(){return Date.now()-h},r=function(t){null!==u?setTimeout(r,0,t):(u=t,setTimeout(l,0))},i=function(t,e){c=setTimeout(t,e)},o=function(){clearTimeout(c)},a=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var f=window.performance,p=window.Date,d=window.setTimeout,y=window.clearTimeout;if("undefined"!=typeof console){var v=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof f&&"function"==typeof f.now)e.unstable_now=function(){return f.now()};else{var g=p.now();e.unstable_now=function(){return p.now()-g}}var m=!1,_=null,b=-1,w=5,E=0;a=function(){return e.unstable_now()>=E},s=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):w=0<t?Math.floor(1e3/t):5};var T=new MessageChannel,x=T.port2;T.port1.onmessage=function(){if(null!==_){var t=e.unstable_now();E=t+w;try{_(!0,t)?x.postMessage(null):(m=!1,_=null)}catch(t){throw x.postMessage(null),t}}else m=!1},r=function(t){_=t,m||(m=!0,x.postMessage(null))},i=function(t,n){b=d((function(){t(e.unstable_now())}),n)},o=function(){y(b),b=-1}}function C(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<N(i,e)))break t;t[r]=e,t[n]=i,n=r}}function S(t){return void 0===(t=t[0])?null:t}function I(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,a=t[o],s=o+1,u=t[s];if(void 0!==a&&0>N(a,n))void 0!==u&&0>N(u,a)?(t[r]=u,t[s]=n,r=s):(t[r]=a,t[o]=n,r=o);else{if(!(void 0!==u&&0>N(u,n)))break t;t[r]=u,t[s]=n,r=s}}}return e}return null}function N(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var k=[],A=[],P=1,O=null,R=3,D=!1,M=!1,L=!1;function F(t){for(var e=S(A);null!==e;){if(null===e.callback)I(A);else{if(!(e.startTime<=t))break;I(A),e.sortIndex=e.expirationTime,C(k,e)}e=S(A)}}function j(t){if(L=!1,F(t),!M)if(null!==S(k))M=!0,r(U);else{var e=S(A);null!==e&&i(j,e.startTime-t)}}function U(t,n){M=!1,L&&(L=!1,o()),D=!0;var r=R;try{for(F(n),O=S(k);null!==O&&(!(O.expirationTime>n)||t&&!a());){var s=O.callback;if(null!==s){O.callback=null,R=O.priorityLevel;var u=s(O.expirationTime<=n);n=e.unstable_now(),"function"==typeof u?O.callback=u:O===S(k)&&I(k),F(n)}else I(k);O=S(k)}if(null!==O)var c=!0;else{var l=S(A);null!==l&&i(j,l.startTime-n),c=!1}return c}finally{O=null,R=r,D=!1}}function V(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var q=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){M||D||(M=!0,r(U))},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_getFirstCallbackNode=function(){return S(k)},e.unstable_next=function(t){switch(R){case 1:case 2:case 3:var e=3;break;default:e=R}var n=R;R=e;try{return t()}finally{R=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=q,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=R;R=t;try{return e()}finally{R=n}},e.unstable_scheduleCallback=function(t,n,a){var s=e.unstable_now();if("object"==typeof a&&null!==a){var u=a.delay;u="number"==typeof u&&0<u?s+u:s,a="number"==typeof a.timeout?a.timeout:V(t)}else a=V(t),u=s;return t={id:P++,callback:n,priorityLevel:t,startTime:u,expirationTime:a=u+a,sortIndex:-1},u>s?(t.sortIndex=u,C(A,t),null===S(k)&&t===S(A)&&(L?o():L=!0,i(j,u-s))):(t.sortIndex=a,C(k,t),M||D||(M=!0,r(U))),t},e.unstable_shouldYield=function(){var t=e.unstable_now();F(t);var n=S(k);return n!==O&&null!==O&&null!==n&&null!==n.callback&&n.startTime<=t&&n.expirationTime<O.expirationTime||a()},e.unstable_wrapCallback=function(t){var e=R;return function(){var n=R;R=e;try{return t.apply(this,arguments)}finally{R=n}}}}]);